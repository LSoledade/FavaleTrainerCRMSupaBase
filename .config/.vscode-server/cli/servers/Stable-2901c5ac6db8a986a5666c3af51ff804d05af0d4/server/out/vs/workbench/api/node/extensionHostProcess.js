/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var w1=function(e,t){return w1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])},w1(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");w1(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}export var __assign=function(){return __assign=Object.assign||function(t){for(var i,s=1,r=arguments.length;s<r;s++){i=arguments[s];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]]);return i}export function __decorate(e,t,i,s){var r=arguments.length,n=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(r<3?o(n):r>3?o(t,i,n):o(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n}export function __param(e,t){return function(i,s){t(i,s,e)}}export function __esDecorate(e,t,i,s,r,n){function o(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var a=s.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?s.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,s.name):{}),h,f=!1,p=i.length-1;p>=0;p--){var g={};for(var v in s)g[v]=v==="access"?{}:s[v];for(var v in s.access)g.access[v]=s.access[v];g.addInitializer=function(E){if(f)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(E||null))};var b=(0,i[p])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(h=o(b.get))&&(u.get=h),(h=o(b.set))&&(u.set=h),(h=o(b.init))&&r.unshift(h)}else(h=o(b))&&(a==="field"?r.unshift(h):u[c]=h)}l&&Object.defineProperty(l,s.name,u),f=!0}export function __runInitializers(e,t,i){for(var s=arguments.length>2,r=0;r<t.length;r++)i=s?t[r].call(e,i):t[r].call(e);return s?i:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,i){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,i,s){function r(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):r(u.value).then(a,c)}l((s=s.apply(e,t||[])).next())})}export function __generator(e,t){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,r,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(s=1,r&&(n=l[0]&2?r.return:l[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,l[1])).done)return n;switch(r=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){i.label=l[1];break}if(l[0]===6&&i.label<n[1]){i.label=n[1],n=l;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(l);break}n[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],r=0}finally{s=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,i,s){s===void 0&&(s=i);var r=Object.getOwnPropertyDescriptor(t,i);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,r)}:function(e,t,i,s){s===void 0&&(s=i),e[s]=t[i]};export function __exportStar(e,t){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&__createBinding(t,e,i)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],s=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var s=i.call(e),r,n=[],o;try{for(;(t===void 0||t-- >0)&&!(r=s.next()).done;)n.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var s=Array(e),r=0,t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,r++)s[r]=n[o];return s}export function __spreadArray(e,t,i){if(i||arguments.length===2)for(var s=0,r=t.length,n;s<r;s++)(n||!(s in t))&&(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(e,t||[]),r,n=[];return r={},a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(p){return function(g){return Promise.resolve(g).then(p,h)}}function a(p,g){s[p]&&(r[p]=function(v){return new Promise(function(b,E){n.push([p,v,b,E])>1||c(p,v)})},g&&(r[p]=g(r[p])))}function c(p,g){try{l(s[p](g))}catch(v){f(n[0][3],v)}}function l(p){p.value instanceof __await?Promise.resolve(p.value.v).then(u,h):f(n[0][2],p)}function u(p){c("next",p)}function h(p){c("throw",p)}function f(p,g){p(g),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,i;return t={},s("next"),s("throw",function(r){throw r}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(r,n){t[r]=e[r]?function(o){return(i=!i)?{value:__await(e[r](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(n){i[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),r(a,c,o.done,o.value)})}}function r(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var N2=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return N2(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,i,s){if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?s:i==="a"?s.call(e):s?s.value:t.get(e)}export function __classPrivateFieldSet(e,t,i,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(e,i):r?r.value=i:t.set(e,i),i}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,r;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],i&&(r=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");r&&(s=function(){try{r.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:s,async:i})}else i&&e.stack.push({async:!0});return t}var M2=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var s=new Error(i);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};export function __disposeResources(e){function t(s){e.error=e.hasError?new M2(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}function i(){for(;e.stack.length;){var s=e.stack.pop();try{var r=s.dispose&&s.dispose.call(s.value);if(s.async)return Promise.resolve(r).then(i,function(n){return t(n),i()})}catch(n){t(n)}}if(e.hasError)throw e.error}return i()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var O2=Object.create,b1=Object.defineProperty,F2=Object.getOwnPropertyDescriptor,ex=Object.getOwnPropertyNames,U2=Object.getPrototypeOf,j2=Object.prototype.hasOwnProperty,B2=(e,t)=>function(){return t||(0,e[ex(e)[0]])((t={exports:{}}).exports,t),t.exports},H2=(e,t)=>{for(var i in t)b1(e,i,{get:t[i],enumerable:!0})},z2=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ex(t))!j2.call(e,r)&&r!==i&&b1(e,r,{get:()=>t[r],enumerable:!(s=F2(t,r))||s.enumerable});return e},tx=(e,t,i)=>(i=e!=null?O2(U2(e)):{},z2(t||!e||!e.__esModule?b1(i,"default",{value:e,enumerable:!0}):i,e)),ix=B2({"node_modules/minimist/index.js"(e,t){"use strict";function i(n,o){var a=n;o.slice(0,-1).forEach(function(l){a=a[l]||{}});var c=o[o.length-1];return c in a}function s(n){return typeof n=="number"||/^0x[0-9a-f]+$/i.test(n)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n)}function r(n,o){return o==="constructor"&&typeof n[o]=="function"||o==="__proto__"}t.exports=function(n,o){o||(o={});var a={bools:{},strings:{},unknownFn:null};typeof o.unknown=="function"&&(a.unknownFn=o.unknown),typeof o.boolean=="boolean"&&o.boolean?a.allBools=!0:[].concat(o.boolean).filter(Boolean).forEach(function(U){a.bools[U]=!0});var c={};function l(U){return c[U].some(function(Y){return a.bools[Y]})}Object.keys(o.alias||{}).forEach(function(U){c[U]=[].concat(o.alias[U]),c[U].forEach(function(Y){c[Y]=[U].concat(c[U].filter(function(he){return Y!==he}))})}),[].concat(o.string).filter(Boolean).forEach(function(U){a.strings[U]=!0,c[U]&&[].concat(c[U]).forEach(function(Y){a.strings[Y]=!0})});var u=o.default||{},h={_:[]};function f(U,Y){return a.allBools&&/^--[^=]+$/.test(Y)||a.strings[U]||a.bools[U]||c[U]}function p(U,Y,he){for(var re=U,dt=0;dt<Y.length-1;dt++){var V=Y[dt];if(r(re,V))return;re[V]===void 0&&(re[V]={}),(re[V]===Object.prototype||re[V]===Number.prototype||re[V]===String.prototype)&&(re[V]={}),re[V]===Array.prototype&&(re[V]=[]),re=re[V]}var W=Y[Y.length-1];r(re,W)||((re===Object.prototype||re===Number.prototype||re===String.prototype)&&(re={}),re===Array.prototype&&(re=[]),re[W]===void 0||a.bools[W]||typeof re[W]=="boolean"?re[W]=he:Array.isArray(re[W])?re[W].push(he):re[W]=[re[W],he])}function g(U,Y,he){if(!(he&&a.unknownFn&&!f(U,he)&&a.unknownFn(he)===!1)){var re=!a.strings[U]&&s(Y)?Number(Y):Y;p(h,U.split("."),re),(c[U]||[]).forEach(function(dt){p(h,dt.split("."),re)})}}Object.keys(a.bools).forEach(function(U){g(U,u[U]===void 0?!1:u[U])});var v=[];n.indexOf("--")!==-1&&(v=n.slice(n.indexOf("--")+1),n=n.slice(0,n.indexOf("--")));for(var b=0;b<n.length;b++){var E=n[b],k,I;if(/^--.+=/.test(E)){var B=E.match(/^--([^=]+)=([\s\S]*)$/);k=B[1];var j=B[2];a.bools[k]&&(j=j!=="false"),g(k,j,E)}else if(/^--no-.+/.test(E))k=E.match(/^--no-(.+)/)[1],g(k,!1,E);else if(/^--.+/.test(E))k=E.match(/^--(.+)/)[1],I=n[b+1],I!==void 0&&!/^(-|--)[^-]/.test(I)&&!a.bools[k]&&!a.allBools&&(!c[k]||!l(k))?(g(k,I,E),b+=1):/^(true|false)$/.test(I)?(g(k,I==="true",E),b+=1):g(k,a.strings[k]?"":!0,E);else if(/^-[^-]+/.test(E)){for(var te=E.slice(1,-1).split(""),F=!1,H=0;H<te.length;H++){if(I=E.slice(H+2),I==="-"){g(te[H],I,E);continue}if(/[A-Za-z]/.test(te[H])&&I[0]==="="){g(te[H],I.slice(1),E),F=!0;break}if(/[A-Za-z]/.test(te[H])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(I)){g(te[H],I,E),F=!0;break}if(te[H+1]&&te[H+1].match(/\W/)){g(te[H],E.slice(H+2),E),F=!0;break}else g(te[H],a.strings[te[H]]?"":!0,E)}k=E.slice(-1)[0],!F&&k!=="-"&&(n[b+1]&&!/^(-|--)[^-]/.test(n[b+1])&&!a.bools[k]&&(!c[k]||!l(k))?(g(k,n[b+1],E),b+=1):n[b+1]&&/^(true|false)$/.test(n[b+1])?(g(k,n[b+1]==="true",E),b+=1):g(k,a.strings[k]?"":!0,E))}else if((!a.unknownFn||a.unknownFn(E)!==!1)&&h._.push(a.strings._||!s(E)?E:Number(E)),o.stopEarly){h._.push.apply(h._,n.slice(b+1));break}}return Object.keys(u).forEach(function(U){i(h,U.split("."))||(p(h,U.split("."),u[U]),(c[U]||[]).forEach(function(Y){p(h,Y.split("."),u[U])}))}),o["--"]?h["--"]=v.slice():v.forEach(function(U){h._.push(U)}),h}}}),W2=tx(ix(),1);import*as V2 from"net";var sx;function y1(e,t){const i=Object.create(null);for(const s of e){const r=t(s);let n=i[r];n||(n=i[r]=[]),n.push(s)}return i}function _2(e,t){const i=[],s=[];for(const r of e)t.has(r)||i.push(r);for(const r of t)e.has(r)||s.push(r);return{removed:i,added:s}}var jZ=class{static{sx=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[sx]="SetWithKey";for(const i of e)this.add(i)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}},q2=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?xs.isErrorNoTelemetry(e)?new xs(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},ol=new q2;function x1(e){ol.setUnexpectedErrorHandler(e)}function G2(e){if(!e||typeof e!="object")return!1;const t=e;return t.code==="EPIPE"&&t.syscall?.toUpperCase()==="WRITE"}function nd(e){ol.onUnexpectedError(e)}function lt(e){Ei(e)||ol.onUnexpectedError(e)}function od(e){Ei(e)||ol.onUnexpectedExternalError(e)}function ma(e){if(e instanceof Error){const{name:t,message:i,cause:s}=e,r=e.stacktrace||e.stack;return{$isError:!0,name:t,message:i,stack:r,noTelemetry:xs.isErrorNoTelemetry(e),cause:s?ma(s):void 0,code:e.code}}return e}function rx(e){let t;return e.noTelemetry?t=new xs:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,e.code&&(t.code=e.code),e.cause&&(t.cause=rx(e.cause)),t}var ad="Canceled";function Ei(e){return e instanceof mt?!0:e instanceof Error&&e.name===ad&&e.message===ad}var mt=class extends Error{constructor(){super(ad),this.name=this.message}},E1=class Xm extends Error{static{this.a="PendingMigrationError"}static is(t){return t instanceof Xm||t instanceof Error&&t.name===Xm.a}constructor(t){super(t),this.name=Xm.a}};function al(){const e=new Error(ad);return e.name=e.message,e}function Ie(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function k1(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var to=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}};function nx(e){return e?e.message?e.message:e.stack?e.stack.split(`
`)[0]:String(e):"Error"}var J2=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},S1=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},xs=class S5 extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof S5)return t;const i=new S5;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},ki=class _3 extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,_3.prototype)}};function cd(e,t){const i=this;let s=!1,r;return function(){if(s)return r;if(s=!0,t)try{r=e.apply(i,arguments)}finally{t()}else r=e.apply(i,arguments);return r}}function Y2(e,t,i=e.length-1){const s=Z2(e,t,i);if(s!==-1)return e[s]}function Z2(e,t,i=e.length-1){for(let s=i;s>=0;s--){const r=e[s];if(t(r))return s}return-1}function Q2(e,t,i=0,s=e.length){let r=i,n=s;for(;r<n;){const o=Math.floor((r+n)/2);t(e[o])?r=o+1:n=o}return r-1}function X2(e,t,i=0,s=e.length){let r=i,n=s;for(;r<n;){const o=Math.floor((r+n)/2);t(e[o])?n=o:r=o+1}return r}var BZ=class q3{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(q3.assertInvariants){if(this.d){for(const s of this.e)if(this.d(s)&&!t(s))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const i=Q2(this.e,t,this.c);return this.c=i+1,i===-1?void 0:this.e[i]}};function Oi(e,t,i=(s,r)=>s===r){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let s=0,r=e.length;s<r;s++)if(!i(e[s],t[s]))return!1;return!0}function K2(e,t){const i=[];let s;for(const r of e.slice(0).sort(t))!s||t(s[0],r)!==0?(s=[r],i.push(s)):s.push(r);return i}function ox(e,t,i){const s=[];function r(a,c,l){if(c===0&&l.length===0)return;const u=s[s.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):s.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){r(n,0,t.slice(o));break}if(o===t.length){r(n,e.length-n,[]);break}const a=e[n],c=t[o],l=i(a,c);l===0?(n+=1,o+=1):l<0?(r(n,1,[]),n+=1):l>0&&(r(n,0,[c]),o+=1)}return s}function eT(e,t,i){const s=ox(e,t,i),r=[],n=[];for(const o of s)r.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:r,added:n}}function tT(e,t,i,s,r){return i===0?Promise.resolve([]):new Promise((n,o)=>{(async()=>{const a=e.length,c=e.slice(0,i).sort(t);for(let l=i,u=Math.min(i+s,a);l<a;l=u,u=Math.min(u+s,a)){if(l>i&&await new Promise(h=>setTimeout(h)),r&&r.isCancellationRequested)throw new mt;iT(e,t,c,l,u)}return c})().then(n,o)})}function iT(e,t,i,s,r){for(const n=i.length;s<r;s++){const o=e[s];if(t(o,i[n-1])<0){i.pop();const a=X2(i,c=>t(o,c)<0);i.splice(a,0,o)}}}function yt(e){return e.filter(t=>!!t)}function sT(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function C1(e){return!Array.isArray(e)||e.length===0}function cl(e){return Array.isArray(e)&&e.length>0}function va(e,t=i=>i){const i=new Set;return e.filter(s=>{const r=t(s);return i.has(r)?!1:(i.add(r),!0)})}function ax(e,t){return e.push(t),()=>rT(e,t)}function rT(e,t){const i=e.indexOf(t);if(i>-1)return e.splice(i,1),t}function cx(e,t){let i;if(typeof t=="number"){let s=t;i=()=>{const r=Math.sin(s++)*179426549;return r-Math.floor(r)}}else i=Math.random;for(let s=e.length-1;s>0;s-=1){const r=Math.floor(i()*(s+1)),n=e[s];e[s]=e[r],e[r]=n}}function ld(e,t){return Array.isArray(e)?e.map(t):t(e)}function Qi(e){return Array.isArray(e)?e:[e]}var $1;(function(e){function t(n){return n<0}e.isLessThan=t;function i(n){return n<=0}e.isLessThanOrEqual=i;function s(n){return n>0}e.isGreaterThan=s;function r(n){return n===0}e.isNeitherLessOrGreaterThan=r,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})($1||($1={}));function nT(e,t){return(i,s)=>t(e(i),e(s))}var oT=(e,t)=>e-t,HZ=class Km{static{this.empty=new Km(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(i=>(t(i),!0))}toArray(){const t=[];return this.iterate(i=>(t.push(i),!0)),t}filter(t){return new Km(i=>this.iterate(s=>t(s)?i(s):!0))}map(t){return new Km(i=>this.iterate(s=>i(t(s))))}some(t){let i=!1;return this.iterate(s=>(i=t(s),!i)),i}findFirst(t){let i;return this.iterate(s=>t(s)?(i=s,!1):!0),i}findLast(t){let i;return this.iterate(s=>(t(s)&&(i=s),!0)),i}findLastMaxBy(t){let i,s=!0;return this.iterate(r=>((s||$1.isGreaterThan(t(r,i)))&&(s=!1,i=r),!0)),i}},lx,ux,hx;function aT(e,t,i){let s=e.get(t);return s===void 0&&(s=i,e.set(t,s)),s}var cT=class{constructor(e,t){this.uri=e,this.value=t}};function lT(e){return Array.isArray(e)}var Ht=class Wh{static{this.c=t=>t.toString()}constructor(t,i){if(this[lx]="ResourceMap",t instanceof Wh)this.d=new Map(t.d),this.e=i??Wh.c;else if(lT(t)){this.d=new Map,this.e=i??Wh.c;for(const[s,r]of t)this.set(s,r)}else this.d=new Map,this.e=t??Wh.c}set(t,i){return this.d.set(this.e(t),new cT(t,i)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,i){typeof i<"u"&&(t=t.bind(i));for(const[s,r]of this.d)t(r.value,r.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(lx=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},dx=class{constructor(e,t){this[ux]="ResourceSet",!e||typeof e=="function"?this.c=new Ht(e):(this.c=new Ht(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((i,s)=>e.call(t,s,s,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(ux=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},fx;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(fx||(fx={}));var uT=class{constructor(){this[hx]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const i=this.c.get(e);if(i)return t!==0&&this.n(i,t),i.value}set(e,t,i=0){let s=this.c.get(e);if(s)s.value=t,i!==0&&this.n(s,i);else{switch(s={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.l(s);break;case 1:this.k(s);break;case 2:this.l(s);break;default:this.l(s);break}this.c.set(e,s),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.m(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.m(e),this.f--,e.value}forEach(e,t){const i=this.g;let s=this.d;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this.g!==i)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this.g;let i=this.d;const s={[Symbol.iterator](){return s},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.key,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this.g;let i=this.d;const s={[Symbol.iterator](){return s},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.value,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this.g;let i=this.d;const s={[Symbol.iterator](){return s},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:[i.key,i.value],done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}[(hx=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.next,i--;this.d=t,this.f=i,t&&(t.previous=void 0),this.g++}j(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.previous,i--;this.e=t,this.f=i,t&&(t.next=void 0),this.g++}k(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}l(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}m(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this.g++}n(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const i=e.next,s=e.previous;e===this.e?(s.next=void 0,this.e=s):(i.previous=s,s.next=i),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const i=e.next,s=e.previous;e===this.d?(i.previous=void 0,this.d=i):(i.previous=s,s.next=i),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}},hT=class extends uT{constructor(e,t=1){super(),this.o=e,this.p=Math.min(Math.max(0,t),1)}get limit(){return this.o}set limit(e){this.o=e,this.q()}get ratio(){return this.p}set ratio(e){this.p=Math.min(Math.max(0,e),1),this.q()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}q(){this.size>this.o&&this.r(Math.round(this.o*this.p))}},ll=class extends hT{constructor(e,t=1){super(e,t)}r(e){this.h(e)}set(e,t){return super.set(e,t),this.q(),this}},dT=class{constructor(e){if(this.c=new Map,this.d=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this.c.clear(),this.d.clear()}set(e,t){this.c.set(e,t),this.d.set(t,e)}get(e){return this.c.get(e)}getKey(e){return this.d.get(e)}delete(e){const t=this.c.get(e);return t===void 0?!1:(this.c.delete(e),this.d.delete(t),!0)}forEach(e,t){this.c.forEach((i,s)=>{e.call(t,i,s,this)})}keys(){return this.c.keys()}values(){return this.c.values()}},px=class{constructor(){this.c=new Map}add(e,t){let i=this.c.get(e);i||(i=new Set,this.c.set(e,i)),i.add(t)}delete(e,t){const i=this.c.get(e);i&&(i.delete(t),i.size===0&&this.c.delete(e))}forEach(e,t){const i=this.c.get(e);i&&i.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function gi(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function I1(e,t="Unreachable"){throw new Error(t)}function P1(e,t="unexpected state"){if(!e)throw typeof t=="string"?new ki(`Assertion Failed: ${t}`):t}function gx(e){if(!e()){debugger;e(),lt(new ki("Assertion Failed"))}}function Ue(e){return typeof e=="string"}function fT(e){return Array.isArray(e)&&e.every(t=>Ue(t))}function St(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function pT(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function us(e){return typeof e=="number"&&!isNaN(e)}function gT(e){return!!e&&typeof e[Symbol.iterator]=="function"}function mx(e){return e===!0||e===!1}function ul(e){return typeof e>"u"}function Xi(e){return!Tt(e)}function Tt(e){return ul(e)||e===null}function D1(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function wa(e){return P1(e!=null,"Argument is `undefined` or `null`."),e}var mT=Object.prototype.hasOwnProperty;function vx(e){if(!St(e))return!1;for(const t in e)if(mT.call(e,t))return!1;return!0}function wx(e){return typeof e=="function"}function vT(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++)bx(e[s],t[s])}function bx(e,t){if(Ue(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(wx(t)){try{if(e instanceof t)return}catch{}if(!Tt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}var Zt;(function(e){function t(F){return!!F&&typeof F=="object"&&typeof F[Symbol.iterator]=="function"}e.is=t;const i=Object.freeze([]);function s(){return i}e.empty=s;function*r(F){yield F}e.single=r;function n(F){return t(F)?F:r(F)}e.wrap=n;function o(F){return F||i}e.from=o;function*a(F){for(let H=F.length-1;H>=0;H--)yield F[H]}e.reverse=a;function c(F){return!F||F[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(F){return F[Symbol.iterator]().next().value}e.first=l;function u(F,H){let U=0;for(const Y of F)if(H(Y,U++))return!0;return!1}e.some=u;function h(F,H){let U=0;for(const Y of F)if(!H(Y,U++))return!1;return!0}e.every=h;function f(F,H){for(const U of F)if(H(U))return U}e.find=f;function*p(F,H){for(const U of F)H(U)&&(yield U)}e.filter=p;function*g(F,H){let U=0;for(const Y of F)yield H(Y,U++)}e.map=g;function*v(F,H){let U=0;for(const Y of F)yield*H(Y,U++)}e.flatMap=v;function*b(...F){for(const H of F)gT(H)?yield*H:yield H}e.concat=b;function E(F,H,U){let Y=U;for(const he of F)Y=H(Y,he);return Y}e.reduce=E;function k(F){let H=0;for(const U of F)H++;return H}e.length=k;function*I(F,H,U=F.length){for(H<-F.length&&(H=0),H<0&&(H+=F.length),U<0?U+=F.length:U>F.length&&(U=F.length);H<U;H++)yield F[H]}e.slice=I;function B(F,H=Number.POSITIVE_INFINITY){const U=[];if(H===0)return[U,F];const Y=F[Symbol.iterator]();for(let he=0;he<H;he++){const re=Y.next();if(re.done)return[U,e.empty()];U.push(re.value)}return[U,{[Symbol.iterator](){return Y}}]}e.consume=B;async function j(F){const H=[];for await(const U of F)H.push(U);return H}e.asyncToArray=j;async function te(F){let H=[];for await(const U of F)H=H.concat(U);return H}e.asyncToArrayFlat=te})(Zt||(Zt={}));var wT=!1,io=null,zZ=class G3{constructor(){this.b=new Map}static{this.a=0}c(t){let i=this.b.get(t);return i||(i={parent:null,source:null,isSingleton:!1,value:t,idx:G3.a++},this.b.set(t,i)),i}trackDisposable(t){const i=this.c(t);i.source||(i.source=new Error().stack)}setParent(t,i){const s=this.c(t);s.parent=i}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,i){const s=i.get(t);if(s)return s;const r=t.parent?this.f(this.c(t.parent),i):t;return i.set(t,r),r}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,s])=>s.source!==null&&!this.f(s,t).isSingleton).flatMap(([s])=>s)}computeLeakingDisposables(t=10,i){let s;if(i)s=i;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(s=l.filter(h=>!(h.parent&&u.has(h.parent))),s.length===0)throw new Error("There are cyclic diposable chains!")}if(!s)return;function r(c){function l(h,f){for(;h.length>0&&f.some(p=>typeof p=="string"?p===h[0]:h[0].match(p));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new px;for(const c of s){const l=r(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}s.sort(nT(c=>c.idx,oT));let o="",a=0;for(const c of s.slice(0,t)){a++;const l=r(c),u=[];for(let h=0;h<l.length;h++){let f=l[h];f=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${s.length} leaks) at ${f}`;const g=n.get(l.slice(0,h).join(`
`)),v=y1([...g].map(b=>r(b)[h]),b=>b);delete v[l[h]];for(const[b,E]of Object.entries(v))u.unshift(`    - stacktraces of ${E.length} other leaks continue with ${b}`);u.unshift(f)}o+=`


==================== Leaking disposable ${a}/${s.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return s.length>t&&(o+=`


... and ${s.length-t} more leaking disposables

`),{leaks:s,details:o}}};function bT(e){io=e}if(wT){const e="__is_disposable_tracked__";bT(new class{trackDisposable(t){const i=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(i)},3e3)}setParent(t,i){if(t&&t!==X.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==X.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function ba(e){return io?.trackDisposable(e),e}function ya(e){io?.markAsDisposed(e)}function hl(e,t){io?.setParent(e,t)}function yT(e,t){if(io)for(const i of e)io.setParent(i,t)}function A1(e){return io?.markAsSingleton(e),e}function yx(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function Es(e){if(Zt.is(e)){const t=[];for(const i of e)if(i)try{i.dispose()}catch(s){t.push(s)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function T1(...e){const t=ie(()=>Es(e));return yT(e,t),t}function ie(e){const t=ba({dispose:cd(()=>{ya(t),e()})});return t}var se=class J3{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,ba(this)}dispose(){this.g||(ya(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{Es(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return hl(t,this),this.g?J3.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),hl(t,null))}},X=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new se,ba(this),hl(this.q,this)}dispose(){ya(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},Js=class{constructor(){this.b=!1,ba(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&hl(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,ya(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&hl(e,null),e}},dl=class{constructor(){this.a=new Map,this.b=!1,ba(this)}dispose(){ya(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{Es(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,i=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}},Rt=class e1{static{this.Undefined=new e1(void 0)}constructor(t){this.element=t,this.next=e1.Undefined,this.prev=e1.Undefined}},hn=class{constructor(){this.a=Rt.Undefined,this.b=Rt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===Rt.Undefined}clear(){let e=this.a;for(;e!==Rt.Undefined;){const t=e.next;e.prev=Rt.Undefined,e.next=Rt.Undefined,e=t}this.a=Rt.Undefined,this.b=Rt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const i=new Rt(e);if(this.a===Rt.Undefined)this.a=i,this.b=i;else if(t){const r=this.b;this.b=i,i.prev=r,r.next=i}else{const r=this.a;this.a=i,i.next=r,r.prev=i}this.c+=1;let s=!1;return()=>{s||(s=!0,this.e(i))}}shift(){if(this.a!==Rt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==Rt.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==Rt.Undefined&&e.next!==Rt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Rt.Undefined&&e.next===Rt.Undefined?(this.a=Rt.Undefined,this.b=Rt.Undefined):e.next===Rt.Undefined?(this.b=this.b.prev,this.b.next=Rt.Undefined):e.prev===Rt.Undefined&&(this.a=this.a.next,this.a.prev=Rt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==Rt.Undefined;)yield e.element,e=e.next}},xT=globalThis.performance.now.bind(globalThis.performance),Fi=class Y3{static create(t){return new Y3(t)}constructor(t){this.c=t===!1?Date.now:xT,this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},xx=!1,ET=!1,Ve;(function(e){e.None=()=>X.None;function t(V){if(ET){const{onDidAddListener:W}=V,Q=R1.create();let K=0;V.onDidAddListener=()=>{++K===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Q.print()),W?.()}}}function i(V,W){return p(V,()=>{},0,void 0,!0,void 0,W)}e.defer=i;function s(V){return(W,Q=null,K)=>{let ae=!1,fe;return fe=V(Te=>{if(!ae)return fe?fe.dispose():ae=!0,W.call(Q,Te)},null,K),ae&&fe.dispose(),fe}}e.once=s;function r(V,W){return e.once(e.filter(V,W))}e.onceIf=r;function n(V,W,Q){return h((K,ae=null,fe)=>V(Te=>K.call(ae,W(Te)),null,fe),Q)}e.map=n;function o(V,W,Q){return h((K,ae=null,fe)=>V(Te=>{W(Te),K.call(ae,Te)},null,fe),Q)}e.forEach=o;function a(V,W,Q){return h((K,ae=null,fe)=>V(Te=>W(Te)&&K.call(ae,Te),null,fe),Q)}e.filter=a;function c(V){return V}e.signal=c;function l(...V){return(W,Q=null,K)=>{const ae=T1(...V.map(fe=>fe(Te=>W.call(Q,Te))));return f(ae,K)}}e.any=l;function u(V,W,Q,K){let ae=Q;return n(V,fe=>(ae=W(ae,fe),ae),K)}e.reduce=u;function h(V,W){let Q;const K={onWillAddFirstListener(){Q=V(ae.fire,ae)},onDidRemoveLastListener(){Q?.dispose()}};W||t(K);const ae=new D(K);return W?.add(ae),ae.event}function f(V,W){return W instanceof Array?W.push(V):W&&W.add(V),V}function p(V,W,Q=100,K=!1,ae=!1,fe,Te){let ot,Ce,qt,Dt=0,Gt;const fi={leakWarningThreshold:fe,onWillAddFirstListener(){ot=V(jt=>{Dt++,Ce=W(Ce,jt),K&&!qt&&(xi.fire(Ce),Ce=void 0),Gt=()=>{const Qn=Ce;Ce=void 0,qt=void 0,(!K||Dt>1)&&xi.fire(Qn),Dt=0},typeof Q=="number"?(qt&&clearTimeout(qt),qt=setTimeout(Gt,Q)):qt===void 0&&(qt=null,queueMicrotask(Gt))})},onWillRemoveListener(){ae&&Dt>0&&Gt?.()},onDidRemoveLastListener(){Gt=void 0,ot.dispose()}};Te||t(fi);const xi=new D(fi);return Te?.add(xi),xi.event}e.debounce=p;function g(V,W=0,Q){return e.debounce(V,(K,ae)=>K?(K.push(ae),K):[ae],W,void 0,!0,void 0,Q)}e.accumulate=g;function v(V,W=(K,ae)=>K===ae,Q){let K=!0,ae;return a(V,fe=>{const Te=K||!W(fe,ae);return K=!1,ae=fe,Te},Q)}e.latch=v;function b(V,W,Q){return[e.filter(V,W,Q),e.filter(V,K=>!W(K),Q)]}e.split=b;function E(V,W=!1,Q=[],K){let ae=Q.slice(),fe=V(Ce=>{ae?ae.push(Ce):ot.fire(Ce)});K&&K.add(fe);const Te=()=>{ae?.forEach(Ce=>ot.fire(Ce)),ae=null},ot=new D({onWillAddFirstListener(){fe||(fe=V(Ce=>ot.fire(Ce)),K&&K.add(fe))},onDidAddFirstListener(){ae&&(W?setTimeout(Te):Te())},onDidRemoveLastListener(){fe&&fe.dispose(),fe=null}});return K&&K.add(ot),ot.event}e.buffer=E;function k(V,W){return(K,ae,fe)=>{const Te=W(new B);return V(function(ot){const Ce=Te.evaluate(ot);Ce!==I&&K.call(ae,Ce)},void 0,fe)}}e.chain=k;const I=Symbol("HaltChainable");class B{constructor(){this.f=[]}map(W){return this.f.push(W),this}forEach(W){return this.f.push(Q=>(W(Q),Q)),this}filter(W){return this.f.push(Q=>W(Q)?Q:I),this}reduce(W,Q){let K=Q;return this.f.push(ae=>(K=W(K,ae),K)),this}latch(W=(Q,K)=>Q===K){let Q=!0,K;return this.f.push(ae=>{const fe=Q||!W(ae,K);return Q=!1,K=ae,fe?ae:I}),this}evaluate(W){for(const Q of this.f)if(W=Q(W),W===I)break;return W}}function j(V,W,Q=K=>K){const K=(...ot)=>Te.fire(Q(...ot)),ae=()=>V.on(W,K),fe=()=>V.removeListener(W,K),Te=new D({onWillAddFirstListener:ae,onDidRemoveLastListener:fe});return Te.event}e.fromNodeEventEmitter=j;function te(V,W,Q=K=>K){const K=(...ot)=>Te.fire(Q(...ot)),ae=()=>V.addEventListener(W,K),fe=()=>V.removeEventListener(W,K),Te=new D({onWillAddFirstListener:ae,onDidRemoveLastListener:fe});return Te.event}e.fromDOMEventEmitter=te;function F(V,W){let Q;const K=new Promise((ae,fe)=>{const Te=s(V)(ae,null,W);Q=()=>Te.dispose()});return K.cancel=Q,K}e.toPromise=F;function H(V){const W=new D;return V.then(Q=>{W.fire(Q)},()=>{W.fire(void 0)}).finally(()=>{W.dispose()}),W.event}e.fromPromise=H;function U(V,W){return V(Q=>W.fire(Q))}e.forward=U;function Y(V,W,Q){return W(Q),V(K=>W(K))}e.runAndSubscribe=Y;class he{constructor(W,Q){this._observable=W,this.f=0,this.g=!1;const K={onWillAddFirstListener:()=>{W.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{W.removeObserver(this)}};Q||t(K),this.emitter=new D(K),Q&&Q.add(this.emitter)}beginUpdate(W){this.f++}handlePossibleChange(W){}handleChange(W,Q){this.g=!0}endUpdate(W){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function re(V,W){return new he(V,W).emitter.event}e.fromObservable=re;function dt(V){return(W,Q,K)=>{let ae=0,fe=!1;const Te={beginUpdate(){ae++},endUpdate(){ae--,ae===0&&(V.reportChanges(),fe&&(fe=!1,W.call(Q)))},handlePossibleChange(){},handleChange(){fe=!0}};V.addObserver(Te),V.reportChanges();const ot={dispose(){V.removeObserver(Te)}};return K instanceof se?K.add(ot):Array.isArray(K)&&K.push(ot),ot}}e.fromObservableLight=dt})(Ve||(Ve={}));var kT=class C5{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${C5.f++}`,C5.all.add(this)}start(t){this.g=new Fi,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},Ex=-1,ST=class Z3{static{this.f=1}constructor(t,i,s=(Z3.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=i,this.name=s,this.h=0}dispose(){this.g?.clear()}check(t,i){const s=this.threshold;if(s<=0||i<s)return;this.g||(this.g=new Map);const r=this.g.get(t.value)||0;if(this.g.set(t.value,r+1),this.h-=1,this.h<=0){this.h=s*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new CT(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,i=0;for(const[s,r]of this.g)(!t||i<r)&&(t=[s,r],i=r);return t}},R1=class Q3{static create(){const t=new Error;return new Q3(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},CT=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},$T=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},IT=0,ud=class{constructor(e){this.value=e,this.id=IT++}},PT=2,kx=(e,t)=>{if(e instanceof ud)t(e);else for(let i=0;i<e.length;i++){const s=e[i];s&&t(s)}},D=class{constructor(e){this.z=0,this.f=e,this.g=Ex>0||this.f?.leakWarningThreshold?new ST(e?.onListenerError??lt,this.f?.leakWarningThreshold??Ex):void 0,this.j=this.f?._profName?new kT(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(xx){const e=this.u;queueMicrotask(()=>{kx(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,i)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new $T(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||lt)(l),X.None}if(this.m)return X.None;t&&(e=e.bind(t));const s=new ud(e);let r,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(s.stack=R1.create(),r=this.g.check(s.stack,this.z+1)),xx&&(s.stack=n??R1.create()),this.u?this.u instanceof ud?(this.w??=new DT,this.u=[this.u,s]):this.u.push(s):(this.f?.onWillAddFirstListener?.(this),this.u=s,this.f?.onDidAddFirstListener?.(this)),this.f?.onDidAddListener?.(this),this.z++;const o=ie(()=>{r?.(),this.A(s)});return i instanceof se?i.add(o):Array.isArray(i)&&i.push(o),o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[i]=void 0;const s=this.w.current===this;if(this.z*PT<=t.length){let r=0;for(let n=0;n<t.length;n++)t[n]?t[r++]=t[n]:s&&r<this.w.end&&(this.w.end--,r<this.w.i&&this.w.i--);t.length=r}}B(e,t){if(!e)return;const i=this.f?.onListenerError||lt;if(!i){e.value(t);return}try{e.value(t)}catch(s){i(s)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof ud)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},DT=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},fl=class extends D{async fireAsync(e,t,i){if(this.u)for(this.h||(this.h=new hn),kx(this.u,s=>this.h.push([s.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[s,r]=this.h.shift(),n=[],o={...r,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");i&&(a=i(a,s)),n.push(a)}};try{s(o)}catch(a){lt(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&lt(c.reason)})}}},pl=class extends D{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new hn,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},AT=class extends pl{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},TT=class extends D{constructor(e){super(e),this.h=[],this.k=e?.merge}fire(e){this.hasListeners()&&(this.h.push(e),this.h.length===1&&queueMicrotask(()=>{this.k?super.fire(this.k(this.h)):this.h.forEach(t=>super.fire(t)),this.h=[]}))}},RT=class{constructor(){this.f=!1,this.g=Ve.None,this.h=X.None,this.j=new D({onDidAddFirstListener:()=>{this.f=!0,this.h=this.g(this.j.fire,this.j)},onDidRemoveLastListener:()=>{this.f=!1,this.h.dispose()}}),this.event=this.j.event}set input(e){this.g=e,this.f&&(this.h.dispose(),this.h=e(this.j.fire,this.j))}dispose(){this.h.dispose(),this.j.dispose()}},Sx=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),Ye;(function(e){function t(i){return i===e.None||i===e.Cancelled||i instanceof hd?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ve.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Sx})})(Ye||(Ye={}));var hd=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?Sx:(this.b||(this.b=new D),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},Ke=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new hd),this.f}cancel(){this.f?this.f instanceof hd&&this.f.cancel():this.f=Ye.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof hd&&this.f.dispose():this.f=Ye.None}};function LT(){return globalThis._VSCODE_NLS_MESSAGES}function Cx(){return globalThis._VSCODE_NLS_LANGUAGE}var NT=Cx()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function dd(e,t){let i;return t.length===0?i=e:i=e.replace(/\{(\d+)\}/g,(s,r)=>{const n=r[0],o=t[n];let a=s;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),NT&&(i="\uFF3B"+i.replace(/[aouei]/g,"$&$&")+"\uFF3D"),i}function d(e,t,...i){return dd(typeof e=="number"?$x(e,t):t,i)}function $x(e,t){const i=LT()?.[e];if(typeof i!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return i}function fd(e,t,...i){let s;typeof e=="number"?s=$x(e,t):s=t;const r=dd(s,i);return{value:r,original:t===s?r:dd(t,i)}}var dn="en",gl=!1,ml=!1,vl=!1,MT=!1,Ix=!1,L1=!1,OT=!1,N1=!1,Px=!1,Dx=!1,pd=void 0,gd=dn,Ax=dn,FT=void 0,xr=void 0,Er=globalThis,Ki=void 0;typeof Er.vscode<"u"&&typeof Er.vscode.process<"u"?Ki=Er.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Ki=process);var Tx=typeof Ki?.versions?.electron=="string",UT=Tx&&Ki?.type==="renderer";if(typeof Ki=="object"){gl=Ki.platform==="win32",ml=Ki.platform==="darwin",vl=Ki.platform==="linux",MT=vl&&!!Ki.env.SNAP&&!!Ki.env.SNAP_REVISION,OT=Tx,Px=!!Ki.env.CI||!!Ki.env.BUILD_ARTIFACTSTAGINGDIRECTORY,pd=dn,gd=dn;const e=Ki.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);pd=t.userLocale,Ax=t.osLocale,gd=t.resolvedLanguage||dn,FT=t.languagePack?.translationsConfigFile}catch{}Ix=!0}else typeof navigator=="object"&&!UT?(xr=navigator.userAgent,gl=xr.indexOf("Windows")>=0,ml=xr.indexOf("Macintosh")>=0,N1=(xr.indexOf("Macintosh")>=0||xr.indexOf("iPad")>=0||xr.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,vl=xr.indexOf("Linux")>=0,Dx=xr?.indexOf("Mobi")>=0,L1=!0,gd=Cx()||dn,pd=navigator.language.toLowerCase(),Ax=pd):console.error("Unable to resolve platform.");var Rx;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(Rx||(Rx={}));function jT(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var md=0;ml?md=1:gl?md=3:vl&&(md=2);var Fe=gl,Ct=ml,$t=vl,Lx=Ix,xa=L1,BT=L1&&typeof Er.importScripts=="function",HT=BT?Er.origin:void 0,zT=N1,WT=Dx,so=Px,VT=md,Ys=xr,fn=gd,Nx;(function(e){function t(){return fn}e.value=t;function i(){return fn.length===2?fn==="en":fn.length>=3?fn[0]==="e"&&fn[1]==="n"&&fn[2]==="-":!1}e.isDefaultVariant=i;function s(){return fn==="en"}e.isDefault=s})(Nx||(Nx={}));var _T=typeof Er.postMessage=="function"&&!Er.importScripts,Mx=(()=>{if(_T){const e=[];Er.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let s=0,r=e.length;s<r;s++){const n=e[s];if(n.id===i.data.vscodeScheduleAsyncWork){e.splice(s,1),n.callback();return}}});let t=0;return i=>{const s=++t;e.push({id:s,callback:i}),Er.postMessage({vscodeScheduleAsyncWork:s},"*")}}return e=>setTimeout(e)})(),Ox;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(Ox||(Ox={}));var ro=ml||N1?2:gl?1:3,Fx=!0,Ux=!1;function jx(){if(!Ux){Ux=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,Fx=new Uint16Array(e.buffer)[0]===513}return Fx}var M1=!!(Ys&&Ys.indexOf("Chrome")>=0),qT=!!(Ys&&Ys.indexOf("Firefox")>=0),GT=!!(!M1&&Ys&&Ys.indexOf("Safari")>=0),Bx=!!(Ys&&Ys.indexOf("Edg/")>=0),WZ=!!(Ys&&Ys.indexOf("Android")>=0),no,O1=globalThis.vscode;if(typeof O1<"u"&&typeof O1.process<"u"){const e=O1.process;no={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?no={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:no={get platform(){return Fe?"win32":Ct?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var oo=no.cwd,kr=no.env,JT=no.platform,VZ=no.arch,YT=65,ZT=97,QT=90,XT=122,ao=46,oi=47,Ui=92,Sr=58,KT=63,Hx=class extends Error{constructor(e,t,i){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${r} ${s} of type ${t}`;n+=`. Received type ${typeof i}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function eR(e,t){if(e===null||typeof e!="object")throw new Hx(t,"Object",e)}function Ot(e,t){if(typeof e!="string")throw new Hx(t,"string",e)}var ji=JT==="win32";function Oe(e){return e===oi||e===Ui}function F1(e){return e===oi}function Cr(e){return e>=YT&&e<=QT||e>=ZT&&e<=XT}function vd(e,t,i,s){let r="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(s(c))break;c=oi}if(s(c)){if(!(o===l-1||a===1))if(a===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==ao||r.charCodeAt(r.length-2)!==ao){if(r.length>2){const u=r.lastIndexOf(i);u===-1?(r="",n=0):(r=r.slice(0,u),n=r.length-1-r.lastIndexOf(i)),o=l,a=0;continue}else if(r.length!==0){r="",n=0,o=l,a=0;continue}}t&&(r+=r.length>0?`${i}..`:"..",n=2)}else r.length>0?r+=`${i}${e.slice(o+1,l)}`:r=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===ao&&a!==-1?++a:a=-1}return r}function tR(e){return e?`${e[0]==="."?"":"."}${e}`:""}function zx(e,t){eR(t,"pathObject");const i=t.dir||t.root,s=t.base||`${t.name||""}${tR(t.ext)}`;return i?i===t.root?`${i}${s}`:`${i}${e}${s}`:s}var Ft={resolve(...e){let t="",i="",s=!1;for(let r=e.length-1;r>=-1;r--){let n;if(r>=0){if(n=e[r],Ot(n,`paths[${r}]`),n.length===0)continue}else t.length===0?n=oo():(n=kr[`=${t}`]||oo(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===Ui)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)Oe(u)&&(a=1,l=!0);else if(Oe(u))if(l=!0,Oe(n.charCodeAt(1))){let h=2,f=h;for(;h<o&&!Oe(n.charCodeAt(h));)h++;if(h<o&&h!==f){const p=n.slice(f,h);for(f=h;h<o&&Oe(n.charCodeAt(h));)h++;if(h<o&&h!==f){for(f=h;h<o&&!Oe(n.charCodeAt(h));)h++;(h===o||h!==f)&&(c=`\\\\${p}\\${n.slice(f,h)}`,a=h)}}}else a=1;else Cr(u)&&n.charCodeAt(1)===Sr&&(c=n.slice(0,2),a=2,o>2&&Oe(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(s){if(t.length>0)break}else if(i=`${n.slice(a)}\\${i}`,s=l,l&&t.length>0)break}return i=vd(i,!s,"\\",Oe),s?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){Ot(e,"path");const t=e.length;if(t===0)return".";let i=0,s,r=!1;const n=e.charCodeAt(0);if(t===1)return F1(n)?"\\":e;if(Oe(n))if(r=!0,Oe(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Oe(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Oe(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Oe(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(s=`\\\\${l}\\${e.slice(c,a)}`,i=a)}}}else i=1;else Cr(n)&&e.charCodeAt(1)===Sr&&(s=e.slice(0,2),i=2,t>2&&Oe(e.charCodeAt(2))&&(r=!0,i=3));let o=i<t?vd(e.slice(i),!r,"\\",Oe):"";if(o.length===0&&!r&&(o="."),o.length>0&&Oe(e.charCodeAt(t-1))&&(o+="\\"),!r&&s===void 0&&e.includes(":")){if(o.length>=2&&Cr(o.charCodeAt(0))&&o.charCodeAt(1)===Sr)return`.\\${o}`;let a=e.indexOf(":");do if(a===t-1||Oe(e.charCodeAt(a+1)))return`.\\${o}`;while((a=e.indexOf(":",a+1))!==-1)}return s===void 0?r?`\\${o}`:o:r?`${s}\\${o}`:`${s}${o}`},isAbsolute(e){Ot(e,"path");const t=e.length;if(t===0)return!1;const i=e.charCodeAt(0);return Oe(i)||t>2&&Cr(i)&&e.charCodeAt(1)===Sr&&Oe(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,i;for(let n=0;n<e.length;++n){const o=e[n];Ot(o,"path"),o.length>0&&(t===void 0?t=i=o:t+=`\\${o}`)}if(t===void 0)return".";let s=!0,r=0;if(typeof i=="string"&&Oe(i.charCodeAt(0))){++r;const n=i.length;n>1&&Oe(i.charCodeAt(1))&&(++r,n>2&&(Oe(i.charCodeAt(2))?++r:s=!1))}if(s){for(;r<t.length&&Oe(t.charCodeAt(r));)r++;r>=2&&(t=`\\${t.slice(r)}`)}return Ft.normalize(t)},relative(e,t){if(Ot(e,"from"),Ot(t,"to"),e===t)return"";const i=Ft.resolve(e),s=Ft.resolve(t);if(i===s||(e=i.toLowerCase(),t=s.toLowerCase(),e===t))return"";if(i.length!==e.length||s.length!==t.length){const g=i.split("\\"),v=s.split("\\");g[g.length-1]===""&&g.pop(),v[v.length-1]===""&&v.pop();const b=g.length,E=v.length,k=b<E?b:E;let I;for(I=0;I<k&&g[I].toLowerCase()===v[I].toLowerCase();I++);return I===0?s:I===k?E>k?v.slice(I).join("\\"):b>k?"..\\".repeat(b-1-I)+"..":"":"..\\".repeat(b-I)+v.slice(I).join("\\")}let r=0;for(;r<e.length&&e.charCodeAt(r)===Ui;)r++;let n=e.length;for(;n-1>r&&e.charCodeAt(n-1)===Ui;)n--;const o=n-r;let a=0;for(;a<t.length&&t.charCodeAt(a)===Ui;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===Ui;)c--;const l=c-a,u=o<l?o:l;let h=-1,f=0;for(;f<u;f++){const g=e.charCodeAt(r+f);if(g!==t.charCodeAt(a+f))break;g===Ui&&(h=f)}if(f!==u){if(h===-1)return s}else{if(l>u){if(t.charCodeAt(a+f)===Ui)return s.slice(a+f+1);if(f===2)return s.slice(a+f)}o>u&&(e.charCodeAt(r+f)===Ui?h=f:f===2&&(h=3)),h===-1&&(h=0)}let p="";for(f=r+h+1;f<=n;++f)(f===n||e.charCodeAt(f)===Ui)&&(p+=p.length===0?"..":"\\..");return a+=h,p.length>0?`${p}${s.slice(a,c)}`:(s.charCodeAt(a)===Ui&&++a,s.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=Ft.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Ui){if(t.charCodeAt(1)===Ui){const i=t.charCodeAt(2);if(i!==KT&&i!==ao)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(Cr(t.charCodeAt(0))&&t.charCodeAt(1)===Sr&&t.charCodeAt(2)===Ui)return`\\\\?\\${t}`;return t},dirname(e){Ot(e,"path");const t=e.length;if(t===0)return".";let i=-1,s=0;const r=e.charCodeAt(0);if(t===1)return Oe(r)?e:".";if(Oe(r)){if(i=s=1,Oe(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Oe(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Oe(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Oe(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(i=s=a+1)}}}}else Cr(r)&&e.charCodeAt(1)===Sr&&(i=t>2&&Oe(e.charCodeAt(2))?3:2,s=i);let n=-1,o=!0;for(let a=t-1;a>=s;--a)if(Oe(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(i===-1)return".";n=i}return e.slice(0,n)},basename(e,t){t!==void 0&&Ot(t,"suffix"),Ot(e,"path");let i=0,s=-1,r=!0,n;if(e.length>=2&&Cr(e.charCodeAt(0))&&e.charCodeAt(1)===Sr&&(i=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=i;--n){const c=e.charCodeAt(n);if(Oe(c)){if(!r){i=n+1;break}}else a===-1&&(r=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(s=n):(o=-1,s=a))}return i===s?s=a:s===-1&&(s=e.length),e.slice(i,s)}for(n=e.length-1;n>=i;--n)if(Oe(e.charCodeAt(n))){if(!r){i=n+1;break}}else s===-1&&(r=!1,s=n+1);return s===-1?"":e.slice(i,s)},extname(e){Ot(e,"path");let t=0,i=-1,s=0,r=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===Sr&&Cr(e.charCodeAt(0))&&(t=s=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Oe(c)){if(!n){s=a+1;break}continue}r===-1&&(n=!1,r=a+1),c===ao?i===-1?i=a:o!==1&&(o=1):i!==-1&&(o=-1)}return i===-1||r===-1||o===0||o===1&&i===r-1&&i===s+1?"":e.slice(i,r)},format:zx.bind(null,"\\"),parse(e){Ot(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.length;let s=0,r=e.charCodeAt(0);if(i===1)return Oe(r)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Oe(r)){if(s=1,Oe(e.charCodeAt(1))){let h=2,f=h;for(;h<i&&!Oe(e.charCodeAt(h));)h++;if(h<i&&h!==f){for(f=h;h<i&&Oe(e.charCodeAt(h));)h++;if(h<i&&h!==f){for(f=h;h<i&&!Oe(e.charCodeAt(h));)h++;h===i?s=h:h!==f&&(s=h+1)}}}}else if(Cr(r)&&e.charCodeAt(1)===Sr){if(i<=2)return t.root=t.dir=e,t;if(s=2,Oe(e.charCodeAt(2))){if(i===3)return t.root=t.dir=e,t;s=3}}s>0&&(t.root=e.slice(0,s));let n=-1,o=s,a=-1,c=!0,l=e.length-1,u=0;for(;l>=s;--l){if(r=e.charCodeAt(l),Oe(r)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),r===ao?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==s?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},iR=(()=>{if(ji){const e=/\\/g;return()=>{const t=oo().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>oo()})(),je={resolve(...e){let t="",i=!1;for(let s=e.length-1;s>=0&&!i;s--){const r=e[s];Ot(r,`paths[${s}]`),r.length!==0&&(t=`${r}/${t}`,i=r.charCodeAt(0)===oi)}if(!i){const s=iR();t=`${s}/${t}`,i=s.charCodeAt(0)===oi}return t=vd(t,!i,"/",F1),i?`/${t}`:t.length>0?t:"."},normalize(e){if(Ot(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===oi,i=e.charCodeAt(e.length-1)===oi;return e=vd(e,!t,"/",F1),e.length===0?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Ot(e,"path"),e.length>0&&e.charCodeAt(0)===oi},join(...e){if(e.length===0)return".";const t=[];for(let i=0;i<e.length;++i){const s=e[i];Ot(s,"path"),s.length>0&&t.push(s)}return t.length===0?".":je.normalize(t.join("/"))},relative(e,t){if(Ot(e,"from"),Ot(t,"to"),e===t||(e=je.resolve(e),t=je.resolve(t),e===t))return"";const i=1,s=e.length,r=s-i,n=1,o=t.length-n,a=r<o?r:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(i+l);if(h!==t.charCodeAt(n+l))break;h===oi&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===oi)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else r>a&&(e.charCodeAt(i+l)===oi?c=l:l===0&&(c=0));let u="";for(l=i+c+1;l<=s;++l)(l===s||e.charCodeAt(l)===oi)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(Ot(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===oi;let i=-1,s=!0;for(let r=e.length-1;r>=1;--r)if(e.charCodeAt(r)===oi){if(!s){i=r;break}}else s=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename(e,t){t!==void 0&&Ot(t,"suffix"),Ot(e,"path");let i=0,s=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===oi){if(!r){i=n+1;break}}else a===-1&&(r=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(s=n):(o=-1,s=a))}return i===s?s=a:s===-1&&(s=e.length),e.slice(i,s)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===oi){if(!r){i=n+1;break}}else s===-1&&(r=!1,s=n+1);return s===-1?"":e.slice(i,s)},extname(e){Ot(e,"path");let t=-1,i=0,s=-1,r=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e[o];if(a==="/"){if(!r){i=o+1;break}continue}s===-1&&(r=!1,s=o+1),a==="."?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||s===-1||n===0||n===1&&t===s-1&&t===i+1?"":e.slice(t,s)},format:zx.bind(null,"/"),parse(e){Ot(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.charCodeAt(0)===oi;let s;i?(t.root="/",s=1):s=0;let r=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=s;--c){const u=e.charCodeAt(c);if(u===oi){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===ao?r===-1?r=c:l!==1&&(l=1):r!==-1&&(l=-1)}if(o!==-1){const u=n===0&&i?1:n;r===-1||l===0||l===1&&r===o-1&&r===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,r),t.base=e.slice(u,o),t.ext=e.slice(r,o))}return n>0?t.dir=e.slice(0,n-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};je.win32=Ft.win32=Ft,je.posix=Ft.posix=je;var $r=ji?Ft.normalize:je.normalize,es=ji?Ft.isAbsolute:je.isAbsolute,Pe=ji?Ft.join:je.join,sR=ji?Ft.resolve:je.resolve,Ea=ji?Ft.relative:je.relative,mi=ji?Ft.dirname:je.dirname,vt=ji?Ft.basename:je.basename,wl=ji?Ft.extname:je.extname,_Z=ji?Ft.format:je.format,qZ=ji?Ft.parse:je.parse,GZ=ji?Ft.toNamespacedPath:je.toNamespacedPath,wt=ji?Ft.sep:je.sep,Wx=ji?Ft.delimiter:je.delimiter;function rR(e){return e}var nR=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=rR):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}},Qt=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}};function wd(e){return!e||typeof e!="string"?!0:e.trim().length===0}var oR=/{([^}]+)}/g;function Vx(e,t){return Object.keys(t).length===0?e:e.replace(oR,(i,s)=>t[s]??i)}function pn(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function aR(e,t){let i=0,s=e.indexOf(t);for(;s!==-1;)i++,s=e.indexOf(t,s+t.length);return i}function cR(e,t){if(!e||!t)return e;const i=t.length;if(i===0||e.length===0)return e;let s=0;for(;e.indexOf(t,s)===s;)s=s+i;return e.substring(s)}function gn(e,t){if(!e||!t)return e;const i=t.length,s=e.length;if(i===0||s===0)return e;let r=s,n=-1;for(;n=e.lastIndexOf(t,r-1),!(n===-1||n+i!==r);){if(n===0)return"";r=n}return e.substring(0,r)}function lR(e){return e.replace(/\*/g,"")}function _x(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=pn(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let s="";return i.global&&(s+="g"),i.matchCase||(s+="i"),i.multiline&&(s+="m"),i.unicode&&(s+="u"),new RegExp(e,s)}function qx(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function Gx(e){return e.split(/\r\n|\r|\n/)}function U1(e){for(let t=0,i=e.length;t<i;t++){const s=e.charCodeAt(t);if(s!==32&&s!==9)return t}return-1}function uR(e,t=e.length-1){for(let i=t;i>=0;i--){const s=e.charCodeAt(i);if(s!==32&&s!==9)return i}return-1}function co(e,t){return e<t?-1:e>t?1:0}function j1(e,t,i=0,s=e.length,r=0,n=t.length){for(;i<s&&r<n;i++,r++){const c=e.charCodeAt(i),l=t.charCodeAt(r);if(c<l)return-1;if(c>l)return 1}const o=s-i,a=n-r;return o<a?-1:o>a?1:0}function B1(e,t){return bl(e,t,0,e.length,0,t.length)}function bl(e,t,i=0,s=e.length,r=0,n=t.length){for(;i<s&&r<n;i++,r++){let c=e.charCodeAt(i),l=t.charCodeAt(r);if(c===l)continue;if(c>=128||l>=128)return j1(e.toLowerCase(),t.toLowerCase(),i,s,r,n);Jx(c)&&(c-=32),Jx(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=s-i,a=n-r;return o<a?-1:o>a?1:0}function Jx(e){return e>=97&&e<=122}function Yx(e){return e>=65&&e<=90}function hs(e,t){return e.length===t.length&&bl(e,t)===0}function bd(e,t){const i=t.length;return t.length>e.length?!1:bl(e,t,0,i)===0}function hR(e,t){const i=Math.min(e.length,t.length);let s;for(s=0;s<i;s++)if(e.charCodeAt(s)!==t.charCodeAt(s))return s;return i}function yd(e){return 55296<=e&&e<=56319}function xd(e){return 56320<=e&&e<=57343}function H1(e,t){return(e-55296<<10)+(t-56320)+65536}function Zx(e,t,i){const s=e.charCodeAt(i);if(yd(s)&&i+1<t){const r=e.charCodeAt(i+1);if(xd(r))return H1(s,r)}return s}function dR(e,t){const i=e.charCodeAt(t-1);if(xd(i)&&t>1){const s=e.charCodeAt(t-2);if(yd(s))return H1(s,i)}return i}var fR=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=dR(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=Zx(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},pR=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new fR(e,t)}nextGraphemeLength(){const e=sE.getInstance(),t=this.c,i=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const r=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(tE(s,n)){t.setOffset(r);break}s=n}return t.offset-i}prevGraphemeLength(){const e=sE.getInstance(),t=this.c,i=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const r=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(tE(n,s)){t.setOffset(r);break}s=n}return i-t.offset}eol(){return this.c.eol()}};function Qx(e,t){return new pR(e,t).nextGraphemeLength()}var z1=void 0;function gR(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function Xx(e){return z1||(z1=gR()),z1.test(e)}var mR=/^[\t\n\r\x20-\x7E]*$/;function vR(e){return mR.test(e)}var wR=/[\u2028\u2029]/;function Kx(e){return wR.test(e)}var bR=/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/,yR=/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/,xR=/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/,JZ=new RegExp("(?:"+[bR.source,yR.source,xR.source].join("|")+")","g"),ER="\uFEFF";function kR(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function SR(e,t){if(!e||!t||e.length<t.length)return!1;const i=t.length,s=e.toLowerCase();let r=0,n=-1;for(;r<i;){const o=s.indexOf(t[r],n+1);if(o<0)return!1;n=o,r++}return!0}function eE(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function CR(e){return e.charAt(0).toUpperCase()+e.slice(1)}function $R(e,t=1){if(t===0)return"";let i=-1;do i=e.indexOf(`
`,i+1),t--;while(t>0&&i>=0);return i===-1?e:(e[i-1]==="\r"&&i--,e.substr(0,i))}function tE(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var iE;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(iE||(iE={}));var sE=class Vh{static{this.c=null}static getInstance(){return Vh.c||(Vh.c=new Vh),Vh.c}constructor(){this.d=IR()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const i=this.d,s=i.length/3;let r=1;for(;r<=s;)if(t<i[3*r])r=2*r;else if(t>i[3*r+1])r=2*r+1;else return i[3*r+2];return 0}};function IR(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var rE;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap",e[e.space=32]="space"})(rE||(rE={}));var YZ=class _h{static{this.c=new Qt(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.d=new nR({getCacheKey:JSON.stringify},t=>{function i(u){const h=new Map;for(let f=0;f<u.length;f+=2)h.set(u[f],u[f+1]);return h}function s(u,h){const f=new Map(u);for(const[p,g]of h)f.set(p,g);return f}function r(u,h){if(!u)return h;const f=new Map;for(const[p,g]of u)h.has(p)&&f.set(p,g);return f}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=i(n[u]);a=r(a,h)}const c=i(n._common),l=s(c,a);return new _h(l)})}static getInstance(t){return _h.d.get(Array.from(t))}static{this.e=new Qt(()=>Object.keys(_h.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return _h.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let i=0;i<t.length;i++){const s=t.codePointAt(i);if(typeof s=="number"&&this.isAmbiguous(s))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},ZZ=class qh{static c(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this.d=void 0}static e(){return this.d||(this.d=new Set([...Object.values(qh.c())].flat())),this.d}static isInvisibleCharacter(t){return qh.e().has(t)}static containsInvisibleCharacter(t){for(let i=0;i<t.length;i++){const s=t.codePointAt(i);if(typeof s=="number"&&(qh.isInvisibleCharacter(s)||s===32))return!0}return!1}static get codePoints(){return qh.e()}};function mn(e){return e===47||e===92}function nE(e){return e.replace(/[\\/]/g,je.sep)}function PR(e){return e.indexOf("/")===-1&&(e=nE(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function W1(e,t=je.sep){if(!e)return"";const i=e.length,s=e.charCodeAt(0);if(mn(s)){if(mn(e.charCodeAt(1))&&!mn(e.charCodeAt(2))){let n=3;const o=n;for(;n<i&&!mn(e.charCodeAt(n));n++);if(o!==n&&!mn(e.charCodeAt(n+1))){for(n+=1;n<i;n++)if(mn(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(oE(s)&&e.charCodeAt(1)===58)return mn(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let r=e.indexOf("://");if(r!==-1){for(r+=3;r<i;r++)if(mn(e.charCodeAt(r)))return e.slice(0,r+1)}return""}var DR=/[\\/:\*\?"<>\|]/g,AR=/[/]/g,TR=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function RR(e,t=Fe){const i=t?DR:AR;return!(!e||e.length===0||/^\s+$/.test(e)||(i.lastIndex=0,i.test(e))||t&&TR.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function Ed(e,t,i){const s=e===t;return!i||s?s:!e||!t?!1:hs(e,t)}function lo(e,t,i,s=wt){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){if(!bd(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===s&&n--,e.charAt(n)===s}return t.charAt(t.length-1)!==s&&(t+=s),e.indexOf(t)===0}function oE(e){return e>=65&&e<=90||e>=97&&e<=122}function LR(e){return Fe?(e=gn(e,wt),e.endsWith(":")&&(e+=wt)):(e=gn(e,wt),e||(e=wt)),e}function aE(e){const t=$r(e);return Fe?e.length>3?!1:V1(t)&&(e.length===2||t.charCodeAt(2)===92):t===je.sep}function V1(e,t=Fe){return t?oE(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}function cE(e,t=Fe){return V1(e,t)?e[0]:void 0}var NR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",MR="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function OR(e,t,i=8){let s="";for(let n=0;n<i;n++){let o;n===0&&Fe&&!t&&(i===3||i===4)?o=MR:o=NR,s+=o.charAt(Math.floor(Math.random()*o.length))}let r;return t?r=`${t}-${s}`:r=s,e?Pe(e,r):r}var FR=/^\w[\w\d+.-]*$/,UR=/^\//,jR=/^\/\//;function BR(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!FR.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!UR.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(jR.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function HR(e,t){return!e&&!t?"file":e}function zR(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==ks&&(t=ks+t):t=ks;break}return t}var ft="",ks="/",WR=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,x=class t1{static isUri(t){return t instanceof t1?!0:!t||typeof t!="object"?!1:typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function"}constructor(t,i,s,r,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||ft,this.authority=t.authority||ft,this.path=t.path||ft,this.query=t.query||ft,this.fragment=t.fragment||ft):(this.scheme=HR(t,o),this.authority=i||ft,this.path=zR(this.scheme,s||ft),this.query=r||ft,this.fragment=n||ft,BR(this,o))}get fsPath(){return Sd(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:s,path:r,query:n,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=ft),s===void 0?s=this.authority:s===null&&(s=ft),r===void 0?r=this.path:r===null&&(r=ft),n===void 0?n=this.query:n===null&&(n=ft),o===void 0?o=this.fragment:o===null&&(o=ft),i===this.scheme&&s===this.authority&&r===this.path&&n===this.query&&o===this.fragment?this:new ka(i,s,r,n,o)}static parse(t,i=!1){const s=WR.exec(t);return s?new ka(s[2]||ft,Cd(s[4]||ft),Cd(s[5]||ft),Cd(s[7]||ft),Cd(s[9]||ft),i):new ka(ft,ft,ft,ft,ft)}static file(t){let i=ft;if(Fe&&(t=t.replace(/\\/g,ks)),t[0]===ks&&t[1]===ks){const s=t.indexOf(ks,2);s===-1?(i=t.substring(2),t=ks):(i=t.substring(2,s),t=t.substring(s)||ks)}return new ka("file",i,t,ft,ft)}static from(t,i){return new ka(t.scheme,t.authority,t.path,t.query,t.fragment,i)}static joinPath(t,...i){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let s;return Fe&&t.scheme==="file"?s=t1.file(Ft.join(Sd(t,!0),...i)).path:s=je.join(t.path,...i),t.with({path:s})}toString(t=!1){return _1(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof t1)return t;{const i=new ka(t);return i._formatted=t.external??null,i._fsPath=t._sep===lE?t.fsPath??null:null,i}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function kd(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var lE=Fe?1:void 0,ka=class extends x{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Sd(this,!1)),this._fsPath}toString(e=!1){return e?_1(this,!0):(this._formatted||(this._formatted=_1(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=lE),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},uE={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function hE(e,t,i){let s,r=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||i&&o===91||i&&o===93||i&&o===58)r!==-1&&(s+=encodeURIComponent(e.substring(r,n)),r=-1),s!==void 0&&(s+=e.charAt(n));else{s===void 0&&(s=e.substr(0,n));const a=uE[o];a!==void 0?(r!==-1&&(s+=encodeURIComponent(e.substring(r,n)),r=-1),s+=a):r===-1&&(r=n)}}return r!==-1&&(s+=encodeURIComponent(e.substring(r))),s!==void 0?s:e}function VR(e){let t;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s===35||s===63?(t===void 0&&(t=e.substr(0,i)),t+=uE[s]):t!==void 0&&(t+=e[i])}return t!==void 0?t:e}function Sd(e,t){let i;return e.authority&&e.path.length>1&&e.scheme==="file"?i=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?i=e.path.substr(1):i=e.path[1].toLowerCase()+e.path.substr(2):i=e.path,Fe&&(i=i.replace(/\//g,"\\")),i}function _1(e,t){const i=t?VR:hE;let s="",{scheme:r,authority:n,path:o,query:a,fragment:c}=e;if(r&&(s+=r,s+=":"),(n||r==="file")&&(s+=ks,s+=ks),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?s+=i(u,!1,!1):(s+=i(u.substr(0,l),!1,!1),s+=":",s+=i(u.substr(l+1),!1,!0)),s+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?s+=i(n,!1,!0):(s+=i(n.substr(0,l),!1,!0),s+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}s+=i(o,!0,!1)}return a&&(s+="?",s+=i(a,!1,!1)),c&&(s+="#",s+=t?c:hE(c,!1,!1)),s}function dE(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+dE(e.substr(3)):e}}var fE=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Cd(e){return e.match(fE)?e.replace(fE,t=>dE(t)):e}var G;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view"})(G||(G={}));function q1(e,t){return x.isUri(e)?hs(e.scheme,t):bd(e,t+":")}function _R(e,...t){return t.some(i=>q1(e,i))}var qR="tkn",GR=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=je.join(t??"/",JR(e))}getServerRootPath(){return this.f}get g(){return je.join(this.f,G.vscodeRemoteResource)}set(e,t,i){this.a[e]=t,this.b[e]=i}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return lt(o),e}const t=e.authority;let i=this.a[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const s=this.b[t],r=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(n+=`&${qR}=${encodeURIComponent(r)}`),x.from({scheme:xa?this.d:G.vscodeRemoteResource,authority:`${i}:${s}`,path:this.g,query:n})}},pE=new GR;function JR(e){return`${e.quality??"oss"}-${e.commit??"dev"}`}var YR="vs/../../node_modules",ZR="vs/../../node_modules.asar",gE="vscode-app",QR=class i1{static{this.a=gE}asBrowserUri(t){const i=this.b(t);return this.uriToBrowserUri(i)}uriToBrowserUri(t){return t.scheme===G.vscodeRemote?pE.rewrite(t):t.scheme===G.file&&(Lx||HT===`${G.vscodeFileResource}://${i1.a}`)?t.with({scheme:G.vscodeFileResource,authority:t.authority||i1.a,query:null,fragment:null}):t}asFileUri(t){const i=this.b(t);return this.uriToFileUri(i)}uriToFileUri(t){return t.scheme===G.vscodeFileResource?t.with({scheme:G.file,authority:t.authority!==i1.a?t.authority:null,query:null,fragment:null}):t}b(t){if(x.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return x.joinPath(x.parse(i,!0),t);const s=Pe(i,t);return x.file(s)}throw new Error("Cannot determine URI for module id!")}},G1=new QR,QZ=Object.freeze({"Cache-Control":"no-cache, no-store"}),XZ=Object.freeze({"Document-Policy":"include-js-call-stacks-in-crash-reports"}),mE;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";function s(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:x.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(i);if(a)return t.get(a)}e.getHeadersFromQuery=s;function r(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(i,c):n[i]=c}e.addSearchParam=r})(mE||(mE={}));function Ss(e){return Sd(e,!0)}var yl=class{constructor(e){this.a=e}compare(e,t,i=!1){return e===t?0:co(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===G.file)return lo(Ss(e),Ss(t),this.a(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(bE(e.authority,t.authority))return lo(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return x.joinPath(e,...t)}basenameOrAuthority(e){return ts(e)||e.authority}basename(e){return je.basename(e.path)}extname(e){return je.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===G.file?t=x.file(mi(Ss(e))).path:(t=je.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===G.file?t=x.file($r(Ss(e))).path:t=je.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!bE(e.authority,t.authority))return;if(e.scheme===G.file){const r=Ea(Ss(e),Ss(t));return Fe?nE(r):r}let i=e.path||"/";const s=t.path||"/";if(this.a(e)){let r=0;for(const n=Math.min(i.length,s.length);r<n&&!(i.charCodeAt(r)!==s.charCodeAt(r)&&i.charAt(r).toLowerCase()!==s.charAt(r).toLowerCase());r++);i=s.substr(0,r)+i.substr(r)}return je.relative(i,s)}resolvePath(e,t){if(e.scheme===G.file){const i=x.file(sR(Ss(e),t));return e.with({authority:i.authority,path:i.path})}return t=PR(t),e.with({path:je.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&hs(e,t)}hasTrailingPathSeparator(e,t=wt){if(e.scheme===G.file){const i=Ss(e);return i.length>W1(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=wt){return yE(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=wt){let i=!1;if(e.scheme===G.file){const s=Ss(e);i=s!==void 0&&s.length===W1(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;i=s.length===1&&s.charCodeAt(s.length-1)===47}return!i&&!yE(e,t)?e.with({path:e.path+"/"}):e}},Ge=new yl(()=>!1),J1=new yl(e=>e.scheme===G.file?!$t:!0),XR=new yl(e=>!0),Sa=Ge.isEqual.bind(Ge),KZ=Ge.isEqualOrParent.bind(Ge),eQ=Ge.getComparisonKey.bind(Ge),Y1=Ge.basenameOrAuthority.bind(Ge),ts=Ge.basename.bind(Ge),vE=Ge.extname.bind(Ge),xl=Ge.dirname.bind(Ge),xt=Ge.joinPath.bind(Ge),tQ=Ge.normalizePath.bind(Ge),wE=Ge.relativePath.bind(Ge),iQ=Ge.resolvePath.bind(Ge),KR=Ge.isAbsolutePath.bind(Ge),bE=Ge.isEqualAuthority.bind(Ge),yE=Ge.hasTrailingPathSeparator.bind(Ge),sQ=Ge.removeTrailingPathSeparator.bind(Ge),rQ=Ge.addTrailingPathSeparator.bind(Ge),xE;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(i){const s=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&s.set(a,c)});const n=i.path.substring(0,i.path.indexOf(";"));return n&&s.set(e.META_DATA_MIME,n),s}e.parseMetaData=t})(xE||(xE={}));var eL=Symbol("MicrotaskDelay");function vn(e){return!!e&&typeof e.then=="function"}function Ir(e){const t=new Ke,i=e(t.token);let s=!1;const r=new Promise((n,o)=>{const a=t.token.onCancellationRequested(()=>{s=!0,a.dispose(),o(new mt)});Promise.resolve(i).then(c=>{a.dispose(),t.dispose(),s?yx(c)&&c.dispose():n(c)},c=>{a.dispose(),t.dispose(),o(c)})});return new class{cancel(){t.cancel(),t.dispose()}then(n,o){return r.then(n,o)}catch(n){return this.then(void 0,n)}finally(n){return r.finally(n)}}}function tL(e,t,i){return new Promise((s,r)=>{const n=t.onCancellationRequested(()=>{n.dispose(),s(i)});e.then(s,r).finally(()=>n.dispose())})}function $d(e,t){return new Promise((i,s)=>{const r=t.onCancellationRequested(()=>{r.dispose(),s(new mt)});e.then(i,s).finally(()=>r.dispose())})}function ai(e){return new Promise((t,i)=>{const s=e();vn(s)?s.then(t,i):t(s)})}function EE(){let e,t;return{promise:new Promise((s,r)=>{e=s,t=r}),resolve:e,reject:t}}var iL=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const i=this.queue(this.d);return this.d=null,i};this.b=new Promise(i=>{this.a.then(t,t).then(i)})}return new Promise((t,i)=>{this.b.then(t,i)})}return this.a=e(),new Promise((t,i)=>{this.a.then(s=>{this.a=null,t(s)},s=>{this.a=null,i(s)})})}dispose(){this.f=!0}},sL=class{constructor(){this.d=Promise.resolve(null)}queue(e){return this.d=this.d.then(()=>e(),()=>e())}},rL=(e,t)=>{let i=!0;const s=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(s),i=!1}}},nL=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},kE=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((s,r)=>{this.d=s,this.f=r}).then(()=>{if(this.b=null,this.d=null,this.g){const s=this.g;return this.g=null,s()}}));const i=()=>{this.a=null,this.d?.(null)};return this.a=t===eL?nL(i):rL(t,i),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new mt),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},Id=class{constructor(e){this.a=new kE(e),this.b=new iL}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},ds=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function ii(e,t){return t?new Promise((i,s)=>{const r=setTimeout(()=>{n.dispose(),i()},e),n=t.onCancellationRequested(()=>{clearTimeout(r),n.dispose(),s(new mt)})}):Ir(i=>ii(e,i))}function Z1(e,t=0,i){const s=setTimeout(()=>{e(),i&&r.dispose()},t),r=ie(()=>{clearTimeout(s),i?.delete(r)});return i?.add(r),r}function oL(e,t=s=>!!s,i=null){let s=0;const r=e.length,n=()=>{if(s>=r)return Promise.resolve(i);const o=e[s++];return Promise.resolve(o()).then(c=>t(c)?Promise.resolve(c):n())};return n()}function aL(e,t=s=>!!s,i=null){if(e.length===0)return Promise.resolve(i);let s=e.length;const r=()=>{s=-1;for(const n of e)n.cancel?.()};return new Promise((n,o)=>{for(const a of e)a.then(c=>{--s>=0&&t(c)?(r(),n(c)):s===0&&n(i)}).catch(c=>{--s>=0&&(r(),o(c))})})}var cL=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new D}whenIdle(){return this.size>0?Ve.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,i)=>{this.g.push({factory:e,c:t,e:i}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},lL=class extends cL{constructor(){super(1)}},SE=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new is;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=Ge){const i=t.getComparisonKey(e);return this.a.get(i)?.size??0}queueFor(e,t,i=Ge){const s=i.getComparisonKey(e);let r=this.a.get(s);if(!r){r=new lL;const n=this.f++,o=Ve.once(r.onDrained)(()=>{r?.dispose(),this.a.delete(s),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new dl),this.d.set(n,o),this.a.set(s,r)}return r.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},CE=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,i=globalThis){if(this.f)throw new ki("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const s=i.setInterval(()=>{e()},t);this.d=ie(()=>{i.clearInterval(s),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},Zs=class{constructor(e,t){this.b=void 0,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=void 0)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==void 0}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=void 0,this.a&&this.h()}h(){this.a?.()}},$E=class{constructor(e,t){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.a=e,this.b=t,this.d=0,this.f=void 0,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=void 0)}schedule(e=this.b){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(e/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==void 0}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=void 0,this.a?.())}},uL=class extends Zs{constructor(e,t){super(e,t),this.j=[]}work(e){this.j.push(e),this.isScheduled()||this.schedule()}h(){const e=this.j;this.j=[],this.a?.(e)}dispose(){this.j=[],super.dispose()}},IE=class extends X{constructor(e,t){super(),this.h=e,this.j=t,this.a=[],this.b=this.B(new Js),this.f=!1,this.g=0}get pending(){return this.a.length}work(e){if(this.f)return!1;if(typeof this.h.maxBufferedWork=="number"){if(this.b.value){if(this.pending+e.length>this.h.maxBufferedWork)return!1}else if(this.pending+e.length-this.h.maxWorkChunkSize>this.h.maxBufferedWork)return!1}for(const i of e)this.a.push(i);const t=Date.now()-this.g;return!this.b.value&&(!this.h.waitThrottleDelayBetweenWorkUnits||t>=this.h.throttleDelay)?this.m():!this.b.value&&this.h.waitThrottleDelayBetweenWorkUnits&&this.r(Math.max(this.h.throttleDelay-t,0)),!0}m(){this.g=Date.now(),this.j(this.a.splice(0,this.h.maxWorkChunkSize)),this.a.length>0&&this.r()}r(e=this.h.throttleDelay){this.b.value=new Zs(()=>{this.b.clear(),this.m()},e),this.b.value.schedule()}dispose(){super.dispose(),this.a.length=0,this.f=!0}},PE,Pd;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Pd=(e,t,i)=>{Mx(()=>{if(s)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let s=!1;return{dispose(){s||(s=!0)}}}:Pd=(e,t,i)=>{const s=e.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let r=!1;return{dispose(){r||(r=!0,e.cancelIdleCallback(s))}}},PE=(e,t)=>Pd(globalThis,e,t)})();var hL=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(i){this.l=i}finally{this.g=!0}},this.f=Pd(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},dL=class extends hL{constructor(e){super(globalThis,e)}};async function fL(e,t,i){let s;for(let r=0;r<i;r++)try{return await e()}catch(n){s=n,await ii(t)}throw s}var DE;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(DE||(DE={}));var is=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}settleWith(e){return e.then(t=>this.complete(t),t=>this.error(t))}cancel(){return this.error(new mt)}},wn;(function(e){async function t(s){let r;const n=await Promise.all(s.map(o=>o.then(a=>a,a=>{r||(r=a)})));if(typeof r<"u")throw r;return n}e.settled=t;function i(s){return new Promise(async(r,n)=>{try{await s(r,n)}catch(o){n(o)}})}e.withAsyncBody=i})(wn||(wn={}));var AE;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(AE||(AE={}));var El=class os{static fromArray(t){return new os(i=>{i.emitMany(t)})}static fromPromise(t){return new os(async i=>{i.emitMany(await t)})}static fromPromisesResolveOrder(t){return new os(async i=>{await Promise.all(t.map(async s=>i.emitOne(await s)))})}static merge(t){return new os(async i=>{await Promise.all(t.map(async s=>{for await(const r of s)i.emitOne(r)}))})}static{this.EMPTY=os.fromArray([])}constructor(t,i){this.a=0,this.b=[],this.d=null,this.f=i,this.g=new D,queueMicrotask(async()=>{const s={emitOne:r=>this.h(r),emitMany:r=>this.j(r),reject:r=>this.l(r)};try{await Promise.resolve(t(s)),this.k()}catch(r){this.l(r)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await Ve.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new os(async s=>{for await(const r of t)s.emitOne(i(r))})}map(t){return os.map(this,t)}static filter(t,i){return new os(async s=>{for await(const r of t)i(r)&&s.emitOne(r)})}filter(t){return os.filter(this,t)}static coalesce(t){return os.filter(t,i=>!!i)}coalesce(){return os.coalesce(this)}static async toPromise(t){const i=[];for await(const s of t)i.push(s);return i}toPromise(){return os.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},Q1=class{constructor(e){this.a=new is,this.b=new El(s=>{if(t){s.reject(t);return}return i&&s.emitMany(i),this.d=r=>s.reject(r),this.f=r=>s.emitOne(r),this.g=r=>s.emitMany(r),this.a.p},e);let t,i;this.d=s=>{t||(t=s)},this.f=s=>{i||(i=[]),i.push(s)},this.g=s=>{i?s.forEach(r=>i.push(r)):i=s.slice()}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}emitMany(e){this.g(e)}};function Dd(e,t){return new pL(e,t)}var pL=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?lt(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let i;switch(e){case"data":i=this.c.data;break;case"end":i=this.c.end;break;case"error":i=this.c.error;break}if(i){const s=i.indexOf(t);s>=0&&i.splice(s,1)}}j(){if(this.b.data.length===0)return;if(typeof this.e=="function"){const t=this.e(this.b.data);this.g(t)}else for(const t of this.b.data)this.g(t);this.b.data.length=0;const e=[...this.d];this.d.length=0,e.forEach(t=>t())}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function gL(e,t){const i=[];let s;for(;(s=e.read())!==null;)i.push(s);return t(i)}function TE(e,t){return new Promise((i,s)=>{const r=[];X1(e,{onData:n=>{t&&r.push(n)},onError:n=>{t?s(n):i(void 0)},onEnd:()=>{i(t?t(r):void 0)}})})}function X1(e,t,i){e.on("error",s=>{i?.isCancellationRequested||t.onError(s)}),e.on("end",()=>{i?.isCancellationRequested||t.onEnd()}),e.on("data",s=>{i?.isCancellationRequested||t.onData(s)})}function mL(e,t){const i=Dd(t);return i.end(e),i}function vL(e,t,i){const s=Dd(i);return X1(e,{onData:r=>s.write(t.data(r)),onError:r=>s.error(t.error?t.error(r):r),onEnd:()=>s.end()}),s}var Ad=typeof Buffer<"u",wL=new Qt(()=>new Uint8Array(256)),K1,ev,_=class ws{static alloc(t){return Ad?new ws(Buffer.allocUnsafe(t)):new ws(new Uint8Array(t))}static wrap(t){return Ad&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new ws(t)}static fromString(t,i){return!(i?.dontUseNodeBuffer||!1)&&Ad?new ws(Buffer.from(t)):(K1||(K1=new TextEncoder),new ws(K1.encode(t)))}static fromByteArray(t){const i=ws.alloc(t.length);for(let s=0,r=t.length;s<r;s++)i.buffer[s]=t[s];return i}static concat(t,i){if(typeof i>"u"){i=0;for(let n=0,o=t.length;n<o;n++)i+=t[n].byteLength}const s=ws.alloc(i);let r=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];s.set(a,r),r+=a.byteLength}return s}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=ws.alloc(this.byteLength);return t.set(this),t}toString(){return Ad?this.buffer.toString():(ev||(ev=new TextDecoder),ev.decode(this.buffer))}slice(t,i){return new ws(this.buffer.subarray(t,i))}set(t,i){if(t instanceof ws)this.buffer.set(t.buffer,i);else if(t instanceof Uint8Array)this.buffer.set(t,i);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),i);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return Td(this.buffer,t)}writeUInt32BE(t,i){Rd(this.buffer,t,i)}readUInt32LE(t){return xL(this.buffer,t)}writeUInt32LE(t,i){EL(this.buffer,t,i)}readUInt8(t){return kL(this.buffer,t)}writeUInt8(t,i){SL(this.buffer,t,i)}indexOf(t,i=0){return RE(this.buffer,t instanceof ws?t.buffer:t,i)}equals(t){return this===t?!0:this.byteLength!==t.byteLength?!1:this.buffer.every((i,s)=>i===t.buffer[s])}};function RE(e,t,i=0){const s=t.byteLength,r=e.byteLength;if(s===0)return 0;if(s===1)return e.indexOf(t[0]);if(s>r-i)return-1;const n=wL.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=i+t.length-1,a=o,c=-1;for(;o<r;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function bL(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function yL(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255}function Td(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Rd(e,t,i){e[i+3]=t,t=t>>>8,e[i+2]=t,t=t>>>8,e[i+1]=t,t=t>>>8,e[i]=t}function xL(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function EL(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255,t=t>>>8,e[i+2]=t&255,t=t>>>8,e[i+3]=t&255}function kL(e,t){return e[t]}function SL(e,t,i){e[i]=t}function CL(e){return gL(e,t=>_.concat(t))}function $L(e){return TE(e,t=>_.concat(t))}function IL(e){return mL(e,t=>_.concat(t))}function PL(e){return vL(e,{data:t=>typeof t=="string"?_.fromString(t):_.wrap(t)},t=>_.concat(t))}function Ca(e){let t=0,i=0,s=0;const r=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(i){case 3:r[s++]=t|a,i=0;break;case 2:r[s++]=t|a>>>2,t=a<<6,i=3;break;case 1:r[s++]=t|a>>>4,t=a<<4,i=2;break;default:t=a<<2,i=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=s;for(;i>0;)n(0);return _.wrap(r).slice(0,o)}var DL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function kl({buffer:e},t=!0,i=!1){const s=i?AL:DL;let r="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];r+=s[a>>>2],r+=s[(a<<4|c>>>4)&63],r+=s[(c<<2|l>>>6)&63],r+=s[l&63]}if(n===1){const a=e[o+0];r+=s[a>>>2],r+=s[a<<4&63],t&&(r+="==")}else if(n===2){const a=e[o+0],c=e[o+1];r+=s[a>>>2],r+=s[(a<<4|c>>>4)&63],r+=s[c<<2&63],t&&(r+="=")}return r}var LE="0123456789abcdef";function NE({buffer:e}){let t="";for(let i=0;i<e.length;i++){const s=e[i];t+=LE[s>>>4],t+=LE[s&15]}return t}function TL(e){if(e.length%2!==0)throw new SyntaxError("Hex string must have an even length");const t=new Uint8Array(e.length>>1);for(let i=0;i<e.length;)t[i>>1]=ME(e,i++)<<4|ME(e,i++);return _.wrap(t)}function ME(e,t){const i=e.charCodeAt(t);if(i>=48&&i<=57)return i-48;if(i>=97&&i<=102)return i-87;if(i>=65&&i<=70)return i-55;throw new SyntaxError(`Invalid hex character at position ${t}`)}function tv(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function i(r,n){t.push(r,n?.startTime??Date.now())}function s(){const r=[];for(let n=0;n<t.length;n+=2)r.push({name:t[n],startTime:t[n+1]});return r}return{mark:i,getMarks:s}}function RL(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?tv():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const i of performance.getEntriesByType("mark"))t.push({name:i.name,startTime:Math.round(e+i.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return tv(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),tv()}function LL(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=RL()),e.MonacoPerformanceMarks}var OE=LL(globalThis),It=OE.mark,NL=OE.getMarks;import*as Sl from"fs";var Ld={};H2(Ld,{Promises:()=>it,RimRafMode:()=>uo,SymlinkSupport:()=>Si,configureFlushOnWrite:()=>rv,readdirSync:()=>zL,rimrafSync:()=>BL,whenDeleted:()=>VL,writeFileSync:()=>JL});import*as ze from"fs";import{tmpdir as ML}from"os";import{promisify as Cl}from"util";var OL=new ll(1e4);function Nd(e){return UE(e,"NFC",OL)}var FL=new ll(1e4);function FE(e){return UE(e,"NFD",FL)}var UL=/[^\u0000-\u0080]/;function UE(e,t,i){if(!e)return e;const s=i.get(e);if(s)return s;let r;return UL.test(e)?r=e.normalize(t):r=e,i.set(e,r),r}var uo;(function(e){e[e.UNLINK=0]="UNLINK",e[e.MOVE=1]="MOVE"})(uo||(uo={}));async function jE(e,t=uo.UNLINK,i){if(aE(e))throw new Error("rimraf - will refuse to recursively delete root");return t===uo.UNLINK?iv(e):jL(e,i)}async function jL(e,t=OR(ML())){try{try{await ze.promises.rename(e,t)}catch(i){return i.code==="ENOENT"?void 0:iv(e)}iv(t).catch(i=>{})}catch(i){if(i.code!=="ENOENT")throw i}}async function iv(e){return ze.promises.rm(e,{recursive:!0,force:!0,maxRetries:3})}function BL(e){if(aE(e))throw new Error("rimraf - will refuse to recursively delete root");ze.rmSync(e,{recursive:!0,force:!0,maxRetries:3})}async function Md(e,t){return BE(await(t?HL(e):ze.promises.readdir(e)))}async function HL(e){try{return await ze.promises.readdir(e,{withFileTypes:!0})}catch(s){console.warn("[node.js fs] readdir with filetypes failed with error: ",s)}const t=[],i=await Md(e);for(const s of i){let r=!1,n=!1,o=!1;try{const a=await ze.promises.lstat(Pe(e,s));r=a.isFile(),n=a.isDirectory(),o=a.isSymbolicLink()}catch(a){console.warn("[node.js fs] unexpected error from lstat after readdir: ",a)}t.push({name:s,isFile:()=>r,isDirectory:()=>n,isSymbolicLink:()=>o})}return t}function zL(e){return BE(ze.readdirSync(e))}function BE(e){return e.map(t=>typeof t=="string"?Ct?Nd(t):t:(t.name=Ct?Nd(t.name):t.name,t))}async function WL(e){const t=await Md(e),i=[];for(const s of t)await Si.existsDirectory(Pe(e,s))&&i.push(s);return i}function VL(e,t=1e3){return new Promise(i=>{let s=!1;const r=setInterval(()=>{s||(s=!0,ze.access(e,n=>{s=!1,n&&(clearInterval(r),i(void 0))}))},t)})}var Si;(function(e){async function t(r){let n;try{if(n=await ze.promises.lstat(r),!n.isSymbolicLink())return{stat:n}}catch{}try{return{stat:await ze.promises.stat(r),symbolicLink:n?.isSymbolicLink()?{dangling:!1}:void 0}}catch(o){if(o.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};if(Fe&&o.code==="EACCES")try{return{stat:await ze.promises.stat(await ze.promises.readlink(r)),symbolicLink:{dangling:!1}}}catch(a){if(a.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};throw a}throw o}}e.stat=t;async function i(r){try{const{stat:n,symbolicLink:o}=await e.stat(r);return n.isFile()&&o?.dangling!==!0}catch{}return!1}e.existsFile=i;async function s(r){try{const{stat:n,symbolicLink:o}=await e.stat(r);return n.isDirectory()&&o?.dangling!==!0}catch{}return!1}e.existsDirectory=s})(Si||(Si={}));var _L=new SE;function qL(e,t,i){return _L.queueFor(x.file(e),()=>{const s=HE(i);return new Promise((r,n)=>GL(e,t,s,o=>o?n(o):r()))},J1)}var sv=!0;function rv(e){sv=e}function GL(e,t,i,s){if(!sv)return ze.writeFile(e,t,{mode:i.mode,flag:i.flag},s);ze.open(e,i.flag,i.mode,(r,n)=>{if(r)return s(r);ze.writeFile(n,t,o=>{if(o)return ze.close(n,()=>s(o));ze.fdatasync(n,a=>(a&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",a),rv(!1)),ze.close(n,c=>s(c))))})})}function JL(e,t,i){const s=HE(i);if(!sv)return ze.writeFileSync(e,t,{mode:s.mode,flag:s.flag});const r=ze.openSync(e,s.flag,s.mode);try{ze.writeFileSync(r,t);try{ze.fdatasyncSync(r)}catch(n){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",n),rv(!1)}}finally{ze.closeSync(r)}}function HE(e){return e?{mode:typeof e.mode=="number"?e.mode:438,flag:typeof e.flag=="string"?e.flag:"w"}:{mode:438,flag:"w"}}async function YL(e,t,i=6e4){if(e!==t)try{Fe&&typeof i=="number"?await zE(e,t,Date.now(),i):await ze.promises.rename(e,t)}catch(s){if(e.toLowerCase()!==t.toLowerCase()&&s.code==="EXDEV"||e.endsWith("."))await WE(e,t,{preserveSymlinks:!1}),await jE(e,uo.MOVE);else throw s}}async function zE(e,t,i,s,r=0){try{return await ze.promises.rename(e,t)}catch(n){if(n.code!=="EACCES"&&n.code!=="EPERM"&&n.code!=="EBUSY")throw n;if(Date.now()-i>=s)throw console.error(`[node.js fs] rename failed after ${r} retries with error: ${n}`),n;if(r===0){let o=!1;try{const{stat:a}=await Si.stat(t);a.isFile()||(o=!0)}catch{}if(o)throw n}return await ii(Math.min(100,r*10)),zE(e,t,i,s,r+1)}}async function WE(e,t,i){return _E(e,t,{root:{source:e,target:t},options:i,handledSourcePaths:new Set})}var VE=511;async function _E(e,t,i){if(i.handledSourcePaths.has(e))return;i.handledSourcePaths.add(e);const{stat:s,symbolicLink:r}=await Si.stat(e);if(r){if(i.options.preserveSymlinks)try{return await XL(e,t,i)}catch{}if(r.dangling)return}return s.isDirectory()?ZL(e,t,s.mode&VE,i):QL(e,t,s.mode&VE)}async function ZL(e,t,i,s){await ze.promises.mkdir(t,{recursive:!0,mode:i});const r=await Md(e);for(const n of r)await _E(Pe(e,n),Pe(t,n),s)}async function QL(e,t,i){await ze.promises.copyFile(e,t),await ze.promises.chmod(t,i)}async function XL(e,t,i){let s=await ze.promises.readlink(e);lo(s,i.root.source,!$t)&&(s=Pe(i.root.target,s.substr(i.root.source.length+1))),await ze.promises.symlink(s,t)}var it=new class{get read(){return(e,t,i,s,r)=>new Promise((n,o)=>{ze.read(e,t,i,s,r,(a,c,l)=>a?o(a):n({bytesRead:c,buffer:l}))})}get write(){return(e,t,i,s,r)=>new Promise((n,o)=>{ze.write(e,t,i,s,r,(a,c,l)=>a?o(a):n({bytesWritten:c,buffer:l}))})}get fdatasync(){return Cl(ze.fdatasync)}get open(){return Cl(ze.open)}get close(){return Cl(ze.close)}get realpath(){return Cl(ze.realpath)}get ftruncate(){return Cl(ze.ftruncate)}async exists(e){try{return await ze.promises.access(e),!0}catch{return!1}}get readdir(){return Md}get readDirsInDir(){return WL}get writeFile(){return qL}get rm(){return jE}get rename(){return YL}get copy(){return WE}};async function qE(e){try{return await it.realpath(e)}catch{const i=GE(e);return await Sl.promises.access(i,Sl.constants.R_OK),i}}function KL(e){try{return Sl.realpathSync(e)}catch{const i=GE(e);return Sl.accessSync(i,Sl.constants.R_OK),i}}function GE(e){return gn($r(e),wt)}function JE(e){return(t,i,s)=>{let r=null,n=null;if(typeof s.value=="function"?(r="value",n=s.value):typeof s.get=="function"&&(r="get",n=s.get),!n||typeof i=="symbol")throw new Error("not supported");s[r]=e(n,i)}}function YE(e,t,i){let s=null,r=null;if(typeof i.value=="function"?(s="value",r=i.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof i.get=="function"&&(s="get",r=i.get),!r)throw new Error("not supported");const n=`$memoize$${t}`;i[s]=function(...o){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[n]}}function Od(e,t,i){return JE((s,r)=>{const n=`$debounce$${r}`,o=`$debounce$result$${r}`;return function(...a){this[o]||(this[o]=i?i():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{s.apply(this,a),this[o]=i?i():void 0},e)}})}function eN(e,t,i){return JE((s,r)=>{const n=`$throttle$timer$${r}`,o=`$throttle$result$${r}`,a=`$throttle$lastRun$${r}`,c=`$throttle$pending$${r}`;return function(...l){if(this[o]||(this[o]=i?i():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),s.apply(this,[this[o]]),this[o]=i?i():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),s.apply(this,[this[o]]),this[o]=i?i():void 0},u-Date.now()))}})}function tN(e){return JSON.stringify(e,iN)}function ZE(e){let t=JSON.parse(e);return t=Et(t),t}function iN(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function Et(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return x.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof _||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=Et(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=Et(e[i],t+1))}return e}var QE;(function(e){e[e.Promise=100]="Promise",e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"})(QE||(QE={}));function XE(e){switch(e){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}var KE;(function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"})(KE||(KE={}));function ek(e){switch(e){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}var ho;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"})(ho||(ho={}));function $a(e){let t=0;for(let i=0;;i+=7){const s=e.read(1);if(t|=(s.buffer[0]&127)<<i,!(s.buffer[0]&128))return t}}var sN=bn(0);function Ia(e,t){if(t===0){e.write(sN);return}let i=0;for(let r=t;r!==0;r=r>>>7)i++;const s=_.alloc(i);for(let r=0;t!==0;r++)s.buffer[r]=t&127,t=t>>>7,t>0&&(s.buffer[r]|=128);e.write(s)}var rN=class{constructor(e){this.b=e,this.a=0}read(e){const t=this.b.slice(this.a,this.a+e);return this.a+=t.byteLength,t}},nN=class{constructor(){this.a=[]}get buffer(){return _.concat(this.a)}write(e){this.a.push(e)}},vi;(function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.VSBuffer=3]="VSBuffer",e[e.Array=4]="Array",e[e.Object=5]="Object",e[e.Int=6]="Int"})(vi||(vi={}));function bn(e){const t=_.alloc(1);return t.writeUInt8(e,0),t}var fo={Undefined:bn(vi.Undefined),String:bn(vi.String),Buffer:bn(vi.Buffer),VSBuffer:bn(vi.VSBuffer),Array:bn(vi.Array),Object:bn(vi.Object),Uint:bn(vi.Int)},oN=typeof Buffer<"u";function nv(e,t){if(typeof t>"u")e.write(fo.Undefined);else if(typeof t=="string"){const i=_.fromString(t);e.write(fo.String),Ia(e,i.byteLength),e.write(i)}else if(oN&&Buffer.isBuffer(t)){const i=_.wrap(t);e.write(fo.Buffer),Ia(e,i.byteLength),e.write(i)}else if(t instanceof _)e.write(fo.VSBuffer),Ia(e,t.byteLength),e.write(t);else if(Array.isArray(t)){e.write(fo.Array),Ia(e,t.length);for(const i of t)nv(e,i)}else if(typeof t=="number"&&(t|0)===t)e.write(fo.Uint),Ia(e,t);else{const i=_.fromString(JSON.stringify(t));e.write(fo.Object),Ia(e,i.byteLength),e.write(i)}}function ov(e){switch(e.read(1).readUInt8(0)){case vi.Undefined:return;case vi.String:return e.read($a(e)).toString();case vi.Buffer:return e.read($a(e)).buffer;case vi.VSBuffer:return e.read($a(e));case vi.Array:{const i=$a(e),s=[];for(let r=0;r<i;r++)s.push(ov(e));return s}case vi.Object:return JSON.parse(e.read($a(e)).toString());case vi.Int:return $a(e)}}var tk;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(tk||(tk={}));var ik=class{constructor(e,t=null){this.l=e,this.a=!1,this.b=ho.Uninitialized,this.d=new Set,this.f=new Map,this.g=0,this.k=new D,this.onDidInitialize=this.k.event,this.h=this.l.onMessage(i=>this.s(i)),this.j=t}getChannel(e){const t=this;return{call(i,s,r){return t.a?Promise.reject(new mt):t.m(e,i,s,r)},listen(i,s){return t.a?Ve.None:t.o(e,i,s)}}}m(e,t,i,s=Ye.None){const r=this.g++,o={id:r,type:100,channelName:e,name:t,arg:i};if(s.isCancellationRequested)return Promise.reject(new mt);let a,c;return new Promise((u,h)=>{if(s.isCancellationRequested)return h(new mt);const f=()=>{const v=b=>{switch(b.type){case 201:this.f.delete(r),u(b.data);break;case 202:{this.f.delete(r);const E=new Error(b.data.message);E.stack=Array.isArray(b.data.stack)?b.data.stack.join(`
`):b.data.stack,E.name=b.data.name,h(E);break}case 203:this.f.delete(r),h(b.data);break}};this.f.set(r,v),this.p(o)};let p=null;this.b===ho.Idle?f():(p=Ir(v=>this.u()),p.then(()=>{p=null,f()}));const g=()=>{p?(p.cancel(),p=null):this.p({id:r,type:101}),h(new mt)};a=s.onCancellationRequested(g),c={dispose:cd(()=>{g(),a.dispose()})},this.d.add(c)}).finally(()=>{a?.dispose(),this.d.delete(c)})}o(e,t,i){const s=this.g++,n={id:s,type:102,channelName:e,name:t,arg:i};let o=null;const a=new D({onWillAddFirstListener:()=>{const l=()=>{this.d.add(a),this.p(n)};this.b===ho.Idle?l():(o=Ir(u=>this.u()),o.then(()=>{o=null,l()}))},onDidRemoveLastListener:()=>{o?(o.cancel(),o=null):(this.d.delete(a),this.p({id:s,type:103}))}}),c=l=>a.fire(l.data);return this.f.set(s,c),a.event}p(e){switch(e.type){case 100:case 102:{const t=this.q([e.type,e.id,e.channelName,e.name],e.arg);this.j?.logOutgoing(t,e.id,0,`${XE(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{const t=this.q([e.type,e.id]);this.j?.logOutgoing(t,e.id,0,XE(e.type));return}}}q(e,t=void 0){const i=new nN;return nv(i,e),nv(i,t),this.r(i.buffer)}r(e){try{return this.l.send(e),e.byteLength}catch{return 0}}s(e){const t=new rN(e),i=ov(t),s=ov(t),r=i[0];switch(r){case 200:return this.j?.logIncoming(e.byteLength,0,0,ek(r)),this.t({type:i[0]});case 201:case 202:case 204:case 203:return this.j?.logIncoming(e.byteLength,i[1],0,ek(r),s),this.t({type:i[0],id:i[1],data:s})}}t(e){if(e.type===200){this.b=ho.Idle,this.k.fire();return}this.f.get(e.id)?.(e)}get onDidInitializePromise(){return Ve.toPromise(this.onDidInitialize)}u(){return this.b===ho.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.a=!0,this.h&&(this.h.dispose(),this.h=null),Es(this.d.values()),this.d.clear()}};__decorate([YE],ik.prototype,"onDidInitializePromise",null);function aN(e){let t=!1;return{call(i,s,r){return t?e.call(i,s,r):ii(0).then(()=>t=!0).then(()=>e.call(i,s,r))},listen(i,s){if(t)return e.listen(i,s);const r=new RT;return ii(0).then(()=>t=!0).then(()=>r.input=e.listen(i,s)),r.event}}}var av;(function(e){function t(n,o,a){const c=n,l=a&&a.disableMarshalling,u=new Map;for(const h in c)s(h)&&u.set(h,Ve.buffer(c[h],!0,void 0,o));return new class{listen(h,f,p){const g=u.get(f);if(g)return g;const v=c[f];if(typeof v=="function"){if(r(f))return v.call(c,p);if(s(f))return u.set(f,Ve.buffer(c[f],!0,void 0,o)),u.get(f)}throw new xs(`Event not found: ${f}`)}call(h,f,p){const g=c[f];if(typeof g=="function"){if(!l&&Array.isArray(p))for(let b=0;b<p.length;b++)p[b]=Et(p[b]);let v=g.apply(c,p);return v instanceof Promise||(v=Promise.resolve(v)),v}throw new xs(`Method not found: ${f}`)}}}e.fromService=t;function i(n,o){const a=o&&o.disableMarshalling;return new Proxy({},{get(c,l){if(typeof l=="string")return o?.properties?.has(l)?o.properties.get(l):r(l)?function(u){return n.listen(l,u)}:s(l)?n.listen(l):async function(...u){let h;o&&!Tt(o.context)?h=[o.context,...u]:h=u;const f=await n.call(l,h);return a?f:Et(f)};throw new xs(`Property not found: ${String(l)}`)}})}e.toService=i;function s(n){return n[0]==="o"&&n[1]==="n"&&Yx(n.charCodeAt(2))}function r(n){return/^onDynamic/.test(n)&&Yx(n.charCodeAt(9))}})(av||(av={}));var sk;(function(e){e.Created="created",e.Read="read",e.Write="write",e.Open="open",e.Error="error",e.Close="close",e.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",e.NodeEndReceived="nodeEndReceived",e.NodeEndSent="nodeEndSent",e.NodeDrainBegin="nodeDrainBegin",e.NodeDrainEnd="nodeDrainEnd",e.zlibInflateError="zlibInflateError",e.zlibInflateData="zlibInflateData",e.zlibInflateInitialWrite="zlibInflateInitialWrite",e.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",e.zlibInflateWrite="zlibInflateWrite",e.zlibInflateFlushFired="zlibInflateFlushFired",e.zlibDeflateError="zlibDeflateError",e.zlibDeflateData="zlibDeflateData",e.zlibDeflateWrite="zlibDeflateWrite",e.zlibDeflateFlushFired="zlibDeflateFlushFired",e.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",e.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",e.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",e.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",e.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",e.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",e.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",e.ProtocolHeaderRead="protocolHeaderRead",e.ProtocolMessageRead="protocolMessageRead",e.ProtocolHeaderWrite="protocolHeaderWrite",e.ProtocolMessageWrite="protocolMessageWrite",e.ProtocolWrite="protocolWrite"})(sk||(sk={}));var Fd;(function(e){e.enableDiagnostics=!1,e.records=[];const t=new WeakMap;let i=0;function s(n,o){if(!t.has(n)){const a=String(++i);t.set(n,a)}return t.get(n)}function r(n,o,a,c){if(!e.enableDiagnostics)return;const l=s(n,o);if(c instanceof _||c instanceof Uint8Array||c instanceof ArrayBuffer||ArrayBuffer.isView(c)){const u=_.alloc(c.byteLength);u.set(c),e.records.push({timestamp:Date.now(),id:l,label:o,type:a,buff:u})}else e.records.push({timestamp:Date.now(),id:l,label:o,type:a,data:c})}e.traceSocketEvent=r})(Fd||(Fd={}));var rk;(function(e){e[e.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",e[e.WebSocketCloseEvent=1]="WebSocketCloseEvent"})(rk||(rk={}));var cv=null;function yn(){return cv||(cv=_.alloc(0)),cv}var nk=class{get byteLength(){return this.b}constructor(){this.a=[],this.b=0}acceptChunk(e){this.a.push(e),this.b+=e.byteLength}read(e){return this.c(e,!0)}peek(e){return this.c(e,!1)}c(e,t){if(e===0)return yn();if(e>this.b)throw new Error("Cannot read so many bytes!");if(this.a[0].byteLength===e){const n=this.a[0];return t&&(this.a.shift(),this.b-=e),n}if(this.a[0].byteLength>e){const n=this.a[0].slice(0,e);return t&&(this.a[0]=this.a[0].slice(e),this.b-=e),n}const i=_.alloc(e);let s=0,r=0;for(;e>0;){const n=this.a[r];if(n.byteLength>e){const o=n.slice(0,e);i.set(o,s),s+=e,t&&(this.a[r]=n.slice(e),this.b-=e),e-=e}else i.set(n,s),s+=n.byteLength,t?(this.a.shift(),this.b-=n.byteLength):r++,e-=n.byteLength}return i}},ok;(function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Control=2]="Control",e[e.Ack=3]="Ack",e[e.Disconnect=5]="Disconnect",e[e.ReplayRequest=6]="ReplayRequest",e[e.Pause=7]="Pause",e[e.Resume=8]="Resume",e[e.KeepAlive=9]="KeepAlive"})(ok||(ok={}));function ak(e){switch(e){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}var ck;(function(e){e[e.HeaderLength=13]="HeaderLength",e[e.AcknowledgeTime=2e3]="AcknowledgeTime",e[e.TimeoutTime=2e4]="TimeoutTime",e[e.ReconnectionGraceTime=108e5]="ReconnectionGraceTime",e[e.ReconnectionShortGraceTime=3e5]="ReconnectionShortGraceTime",e[e.KeepAliveSendTime=5e3]="KeepAliveSendTime"})(ck||(ck={}));var Qs=class{constructor(e,t,i,s){this.type=e,this.id=t,this.ack=i,this.data=s,this.writtenTime=0}get size(){return this.data.byteLength}},lk=class extends X{constructor(e){super(),this.f=this.B(new D),this.onMessage=this.f.event,this.g={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this.a=e,this.b=!1,this.c=new nk,this.B(this.a.onData(t=>this.acceptChunk(t))),this.lastReadTime=Date.now()}acceptChunk(e){if(!(!e||e.byteLength===0))for(this.lastReadTime=Date.now(),this.c.acceptChunk(e);this.c.byteLength>=this.g.readLen;){const t=this.c.read(this.g.readLen);if(this.g.readHead)this.g.readHead=!1,this.g.readLen=t.readUInt32BE(9),this.g.messageType=t.readUInt8(0),this.g.id=t.readUInt32BE(1),this.g.ack=t.readUInt32BE(5),this.a.traceSocketEvent("protocolHeaderRead",{messageType:ak(this.g.messageType),id:this.g.id,ack:this.g.ack,messageSize:this.g.readLen});else{const i=this.g.messageType,s=this.g.id,r=this.g.ack;if(this.g.readHead=!0,this.g.readLen=13,this.g.messageType=0,this.g.id=0,this.g.ack=0,this.a.traceSocketEvent("protocolMessageRead",t),this.f.fire(new Qs(i,s,r,t)),this.b)break}}}readEntireBuffer(){return this.c.read(this.c.byteLength)}dispose(){this.b=!0,super.dispose()}},uk=class{constructor(e){this.k=null,this.a=!1,this.b=!1,this.c=e,this.d=[],this.f=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this.a=!0}drain(){return this.flush(),this.c.drain()}flush(){this.m()}pause(){this.b=!0}resume(){this.b=!1,this.l()}write(e){if(this.a)return;e.writtenTime=Date.now(),this.lastWriteTime=Date.now();const t=_.alloc(13);t.writeUInt8(e.type,0),t.writeUInt32BE(e.id,1),t.writeUInt32BE(e.ack,5),t.writeUInt32BE(e.data.byteLength,9),this.c.traceSocketEvent("protocolHeaderWrite",{messageType:ak(e.type),id:e.id,ack:e.ack,messageSize:e.data.byteLength}),this.c.traceSocketEvent("protocolMessageWrite",e.data),this.j(t,e.data)}g(e,t){const i=this.f===0;return this.d.push(e,t),this.f+=e.byteLength+t.byteLength,i}h(){const e=_.concat(this.d,this.f);return this.d.length=0,this.f=0,e}j(e,t){this.g(e,t)&&this.l()}l(){this.k||(this.k=setTimeout(()=>{this.k=null,this.m()}))}m(){if(this.f===0||this.b)return;const e=this.h();this.c.traceSocketEvent("protocolWrite",{byteLength:e.byteLength}),this.c.write(e)}},po=class{constructor(){this.b=!1,this.c=!1,this.d=[],this.a=new D({onWillAddFirstListener:()=>{this.b=!0,queueMicrotask(()=>this.f())},onDidRemoveLastListener:()=>{this.b=!1}}),this.event=this.a.event}f(){if(!this.c){for(this.c=!0;this.b&&this.d.length>0;)this.a.fire(this.d.shift());this.c=!1}}fire(e){this.b?this.d.length>0?this.d.push(e):this.a.fire(e):this.d.push(e)}flushBuffer(){this.d=[]}},cN=class{constructor(e){this.data=e,this.next=null}},lN=class{constructor(){this.a=null,this.b=null}length(){let e=0,t=this.a;for(;t;)t=t.next,e++;return e}peek(){return this.a?this.a.data:null}toArray(){const e=[];let t=0,i=this.a;for(;i;)e[t++]=i.data,i=i.next;return e}pop(){if(this.a){if(this.a===this.b){this.a=null,this.b=null;return}this.a=this.a.next}}push(e){const t=new cN(e);if(!this.a){this.a=t,this.b=t;return}this.b.next=t,this.b=t}},uN=class mr{static{this.a=10}static{this.b=null}static getInstance(){return mr.b||(mr.b=new mr),mr.b}constructor(){this.c=[];const t=Date.now();for(let i=0;i<mr.a;i++)this.c[i]=t-1e3*i;setInterval(()=>{for(let i=mr.a;i>=1;i--)this.c[i]=this.c[i-1];this.c[0]=Date.now()},1e3)}d(){const t=Date.now(),i=(1+mr.a)*1e3;let s=0;for(let r=0;r<mr.a;r++)t-this.c[r]<=i&&s++;return 1-s/mr.a}hasHighLoad(){return this.d()>=.5}},lv=class{get unacknowledgedCount(){return this.d-this.f}constructor(e){this.v=new po,this.onControlMessage=this.v.event,this.w=new po,this.onMessage=this.w.event,this.x=new po,this.onDidDispose=this.x.event,this.y=new po,this.onSocketClose=this.y.event,this.z=new po,this.onSocketTimeout=this.z.event,this.t=e.loadEstimator??uN.getInstance(),this.u=e.sendKeepAlive??!0,this.a=!1,this.c=new lN,this.d=0,this.f=0,this.g=null,this.h=0,this.j=0,this.k=0,this.l=null,this.n=0,this.o=Date.now(),this.s=new se,this.p=e.socket,this.q=this.s.add(new uk(this.p)),this.r=this.s.add(new lk(this.p)),this.s.add(this.r.onMessage(t=>this.A(t))),this.s.add(this.p.onClose(t=>this.y.fire(t))),e.initialChunk&&this.r.acceptChunk(e.initialChunk),this.u?this.m=setInterval(()=>{this.E()},5e3):this.m=null}dispose(){this.g&&(clearTimeout(this.g),this.g=null),this.l&&(clearTimeout(this.l),this.l=null),this.m&&(clearInterval(this.m),this.m=null),this.s.dispose()}drain(){return this.q.drain()}sendDisconnect(){if(!this.b){this.b=!0;const e=new Qs(5,0,0,yn());this.q.write(e),this.q.flush()}}sendPause(){const e=new Qs(7,0,0,yn());this.q.write(e)}sendResume(){const e=new Qs(8,0,0,yn());this.q.write(e)}pauseSocketWriting(){this.q.pause()}getSocket(){return this.p}getMillisSinceLastIncomingData(){return Date.now()-this.r.lastReadTime}beginAcceptReconnection(e,t){this.a=!0,this.s.dispose(),this.s=new se,this.v.flushBuffer(),this.y.flushBuffer(),this.z.flushBuffer(),this.p.dispose(),this.n=0,this.o=Date.now(),this.p=e,this.q=this.s.add(new uk(this.p)),this.r=this.s.add(new lk(this.p)),this.s.add(this.r.onMessage(i=>this.A(i))),this.s.add(this.p.onClose(i=>this.y.fire(i))),this.r.acceptChunk(t)}endAcceptReconnection(){this.a=!1,this.j=this.h;const e=new Qs(3,0,this.j,yn());this.q.write(e);const t=this.c.toArray();for(let i=0,s=t.length;i<s;i++)this.q.write(t[i]);this.C()}acceptDisconnect(){this.x.fire()}A(e){if(e.ack>this.f){this.f=e.ack;do{const t=this.c.peek();if(t&&t.id<=e.ack)this.c.pop();else break}while(!0)}switch(e.type){case 0:break;case 1:{if(e.id>this.h)if(e.id!==this.h+1){const t=Date.now();t-this.n>1e4&&(this.n=t,this.q.write(new Qs(6,0,0,yn())))}else this.h=e.id,this.k=Date.now(),this.B(),this.w.fire(e.data);break}case 2:{this.v.fire(e.data);break}case 3:break;case 5:{this.x.fire();break}case 6:{const t=this.c.toArray();for(let i=0,s=t.length;i<s;i++)this.q.write(t[i]);this.C();break}case 7:{this.q.pause();break}case 8:{this.q.resume();break}case 9:break}}readEntireBuffer(){return this.r.readEntireBuffer()}flush(){this.q.flush()}send(e){const t=++this.d;this.j=this.h;const i=new Qs(1,t,this.j,e);this.c.push(i),this.a||(this.q.write(i),this.C())}sendControl(e){const t=new Qs(2,0,0,e);this.q.write(t)}B(){if(this.h<=this.j||this.l)return;const e=Date.now()-this.k;if(e>=2e3){this.D();return}this.l=setTimeout(()=>{this.l=null,this.B()},2e3-e+5)}C(){if(this.d<=this.f||this.g||this.a)return;const e=this.c.peek(),t=Date.now()-e.writtenTime,i=Date.now()-this.r.lastReadTime,s=Date.now()-this.o;if(t>=2e4&&i>=2e4&&s>=2e4&&!this.t.hasHighLoad()){this.o=Date.now(),this.z.fire({unacknowledgedMsgCount:this.c.length(),timeSinceOldestUnacknowledgedMsg:t,timeSinceLastReceivedSomeData:i});return}const r=Math.max(2e4-t,2e4-i,2e4-s,500);this.g=setTimeout(()=>{this.g=null,this.C()},r)}D(){if(this.h<=this.j)return;this.j=this.h;const e=new Qs(3,0,this.j,yn());this.q.write(e)}E(){this.j=this.h;const e=new Qs(9,0,this.j,yn());this.q.write(e)}};import"crypto";import"net";import{tmpdir as hN}from"os";import{createDeflateRaw as dN,createInflateRaw as fN}from"zlib";var ut=function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let s=0,r="";return r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r}}(),pN=3e4,$l=class{traceSocketEvent(e,t){Fd.traceSocketEvent(this.socket,this.debugLabel,e,t)}constructor(e,t=""){this.f=!0,this.debugLabel=t,this.socket=e,this.traceSocketEvent("created",{type:"NodeSocket"}),this.a=s=>{if(this.traceSocketEvent("error",{code:s?.code,message:s?.message}),s){if(s.code==="EPIPE")return;lt(s)}},this.socket.on("error",this.a);let i;this.b=s=>{this.traceSocketEvent("close",{hadError:s}),this.f=!1,i&&clearTimeout(i)},this.socket.on("close",this.b),this.d=()=>{this.traceSocketEvent("nodeEndReceived"),this.f=!1,i=setTimeout(()=>e.destroy(),pN)},this.socket.on("end",this.d)}dispose(){this.socket.off("error",this.a),this.socket.off("close",this.b),this.socket.off("end",this.d),this.socket.destroy()}onData(e){const t=i=>{this.traceSocketEvent("read",i),e(_.wrap(i))};return this.socket.on("data",t),{dispose:()=>this.socket.off("data",t)}}onClose(e){const t=i=>{e({type:0,hadError:i,error:void 0})};return this.socket.on("close",t),{dispose:()=>this.socket.off("close",t)}}onEnd(e){const t=()=>{e()};return this.socket.on("end",t),{dispose:()=>this.socket.off("end",t)}}write(e){if(!(this.socket.destroyed||!this.f))try{this.traceSocketEvent("write",e),this.socket.write(e.buffer,t=>{if(t){if(t.code==="EPIPE")return;lt(t)}})}catch(t){if(t.code==="EPIPE")return;lt(t)}}end(){this.traceSocketEvent("nodeEndSent"),this.socket.end()}drain(){return this.traceSocketEvent("nodeDrainBegin"),new Promise((e,t)=>{if(this.socket.bufferSize===0){this.traceSocketEvent("nodeDrainEnd"),e();return}const i=()=>{this.socket.off("close",i),this.socket.off("end",i),this.socket.off("error",i),this.socket.off("timeout",i),this.socket.off("drain",i),this.traceSocketEvent("nodeDrainEnd"),e()};this.socket.on("close",i),this.socket.on("end",i),this.socket.on("error",i),this.socket.on("timeout",i),this.socket.on("drain",i)})}},hk;(function(e){e[e.MinHeaderByteSize=2]="MinHeaderByteSize",e[e.MaxWebSocketMessageLength=262144]="MaxWebSocketMessageLength"})(hk||(hk={}));var dk;(function(e){e[e.PeekHeader=1]="PeekHeader",e[e.ReadHeader=2]="ReadHeader",e[e.ReadBody=3]="ReadBody",e[e.Fin=4]="Fin"})(dk||(dk={}));var gN=class extends X{get permessageDeflate(){return this.a.permessageDeflate}get recordedInflateBytes(){return this.a.recordedInflateBytes}traceSocketEvent(e,t){this.socket.traceSocketEvent(e,t)}constructor(e,t,i,s){super(),this.f=this.B(new D),this.g=this.B(new D),this.h=!1,this.j={state:1,readLen:2,fin:0,compressed:!1,firstFrameOfMessage:!0,mask:0,opcode:0},this.socket=e,this.traceSocketEvent("created",{type:"WebSocketNodeSocket",permessageDeflate:t,inflateBytesLength:i?.byteLength||0,recordInflateBytes:s}),this.a=this.B(new mN(this,t,i,s,this.f,(r,n)=>this.m(r,n))),this.B(this.a.onError(r=>{console.error(r),lt(r),this.g.fire({type:0,hadError:!0,error:r})})),this.b=new nk,this.B(this.socket.onData(r=>this.n(r))),this.B(this.socket.onClose(async r=>{this.a.isProcessingReadQueue()&&await Ve.toPromise(this.a.onDidFinishProcessingReadQueue),this.g.fire(r)}))}dispose(){this.a.isProcessingWriteQueue()?this.B(this.a.onDidFinishProcessingWriteQueue(()=>{this.dispose()})):(this.socket.dispose(),super.dispose())}onData(e){return this.f.event(e)}onClose(e){return this.g.event(e)}onEnd(e){return this.socket.onEnd(e)}write(e){let t=0;for(;t<e.byteLength;)this.a.writeMessage(e.slice(t,Math.min(t+262144,e.byteLength)),{compressed:!0,opcode:2}),t+=262144}m(e,{compressed:t,opcode:i}){if(this.h)return;this.traceSocketEvent("webSocketNodeSocketWrite",e);let s=2;e.byteLength<126?s+=0:e.byteLength<2**16?s+=2:s+=8;const r=_.alloc(s),n=t?64:0,o=i&15;if(r.writeUInt8(128|n|o,0),e.byteLength<126)r.writeUInt8(e.byteLength,1);else if(e.byteLength<2**16){r.writeUInt8(126,1);let a=1;r.writeUInt8(e.byteLength>>>8&255,++a),r.writeUInt8(e.byteLength>>>0&255,++a)}else{r.writeUInt8(127,1);let a=1;r.writeUInt8(0,++a),r.writeUInt8(0,++a),r.writeUInt8(0,++a),r.writeUInt8(0,++a),r.writeUInt8(e.byteLength>>>24&255,++a),r.writeUInt8(e.byteLength>>>16&255,++a),r.writeUInt8(e.byteLength>>>8&255,++a),r.writeUInt8(e.byteLength>>>0&255,++a)}this.socket.write(_.concat([r,e]))}end(){this.h=!0,this.socket.end()}n(e){if(e.byteLength!==0){for(this.b.acceptChunk(e);this.b.byteLength>=this.j.readLen;)if(this.j.state===1){const t=this.b.peek(this.j.readLen),i=t.readUInt8(0),s=(i&128)>>>7,r=(i&64)>>>6,n=i&15,o=t.readUInt8(1),a=(o&128)>>>7,c=o&127;this.j.state=2,this.j.readLen=2+(a?4:0)+(c===126?2:0)+(c===127?8:0),this.j.fin=s,this.j.firstFrameOfMessage&&(this.j.compressed=!!r),this.j.firstFrameOfMessage=!!s,this.j.mask=0,this.j.opcode=n,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{headerSize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,opcode:this.j.opcode})}else if(this.j.state===2){const t=this.b.read(this.j.readLen),i=t.readUInt8(1),s=(i&128)>>>7;let r=i&127,n=1;r===126?r=t.readUInt8(++n)*2**8+t.readUInt8(++n):r===127&&(r=t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n));let o=0;s&&(o=t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n)),this.j.state=3,this.j.readLen=r,this.j.mask=o,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{bodySize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,mask:this.j.mask,opcode:this.j.opcode})}else if(this.j.state===3){const t=this.b.read(this.j.readLen);this.traceSocketEvent("webSocketNodeSocketReadData",t),bN(t,this.j.mask),this.traceSocketEvent("webSocketNodeSocketUnmaskedData",t),this.j.state=1,this.j.readLen=2,this.j.mask=0,this.j.opcode<=2?this.a.acceptFrame(t,this.j.compressed,!!this.j.fin):this.j.opcode===9&&this.a.writeMessage(t,{compressed:!1,opcode:10})}}}async drain(){this.traceSocketEvent("webSocketNodeSocketDrainBegin"),this.a.isProcessingWriteQueue()&&await Ve.toPromise(this.a.onDidFinishProcessingWriteQueue),await this.socket.drain(),this.traceSocketEvent("webSocketNodeSocketDrainEnd")}},mN=class extends X{get permessageDeflate(){return!!(this.b&&this.f)}get recordedInflateBytes(){return this.b?this.b.recordedInflateBytes:_.alloc(0)}constructor(e,t,i,s,r,n){super(),this.n=e,this.r=r,this.s=n,this.a=this.B(new D),this.onError=this.a.event,this.g=[],this.h=[],this.j=this.B(new D),this.onDidFinishProcessingReadQueue=this.j.event,this.m=this.B(new D),this.onDidFinishProcessingWriteQueue=this.m.event,this.t=!1,this.y=!1,t?(this.b=this.B(new vN(this.n,s,i,{windowBits:15})),this.f=this.B(new wN(this.n,{windowBits:15})),this.B(this.b.onError(o=>this.a.fire(o))),this.B(this.f.onError(o=>this.a.fire(o)))):(this.b=null,this.f=null)}writeMessage(e,t){this.g.push({data:e,options:t}),this.u()}async u(){if(!this.t){for(this.t=!0;this.g.length>0;){const{data:e,options:t}=this.g.shift();if(this.f&&t.compressed){const i=await this.w(this.f,e);this.s(i,t)}else this.s(e,{...t,compressed:!1})}this.t=!1,this.m.fire()}}isProcessingWriteQueue(){return this.t}w(e,t){return new Promise((i,s)=>{e.write(t),e.flush(r=>i(r))})}acceptFrame(e,t,i){this.h.push({data:e,isCompressed:t,isLastFrameOfMessage:i}),this.z()}async z(){if(!this.y){for(this.y=!0;this.h.length>0;){const e=this.h.shift();if(this.b&&e.isCompressed){const t=await this.C(this.b,e.data,e.isLastFrameOfMessage);this.r.fire(t)}else this.r.fire(e.data)}this.y=!1,this.j.fire()}}isProcessingReadQueue(){return this.y}C(e,t,i){return new Promise((s,r)=>{e.write(t),i&&e.write(_.fromByteArray([0,0,255,255])),e.flush(n=>s(n))})}},vN=class extends X{get recordedInflateBytes(){return this.j?_.concat(this.f):_.alloc(0)}constructor(e,t,i,s){super(),this.h=e,this.j=t,this.a=this.B(new D),this.onError=this.a.event,this.f=[],this.g=[],this.b=fN(s),this.b.on("error",r=>{this.h.traceSocketEvent("zlibInflateError",{message:r?.message,code:r?.code}),this.a.fire(r)}),this.b.on("data",r=>{this.h.traceSocketEvent("zlibInflateData",r),this.g.push(_.wrap(r))}),i&&(this.h.traceSocketEvent("zlibInflateInitialWrite",i.buffer),this.b.write(i.buffer),this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateInitialFlushFired"),this.g.length=0}))}write(e){this.j&&this.f.push(e.clone()),this.h.traceSocketEvent("zlibInflateWrite",e),this.b.write(e.buffer)}flush(e){this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateFlushFired");const t=_.concat(this.g);this.g.length=0,e(t)})}},wN=class extends X{constructor(e,t){super(),this.g=e,this.a=this.B(new D),this.onError=this.a.event,this.f=[],this.b=dN({windowBits:15}),this.b.on("error",i=>{this.g.traceSocketEvent("zlibDeflateError",{message:i?.message,code:i?.code}),this.a.fire(i)}),this.b.on("data",i=>{this.g.traceSocketEvent("zlibDeflateData",i),this.f.push(_.wrap(i))})}write(e){this.g.traceSocketEvent("zlibDeflateWrite",e.buffer),this.b.write(e.buffer)}flush(e){this.b.flush(2,()=>{this.g.traceSocketEvent("zlibDeflateFlushFired");let t=_.concat(this.f);this.f.length=0,t=t.slice(0,t.byteLength-4),e(t)})}};function bN(e,t){if(t===0)return;const i=e.byteLength>>>2;for(let c=0;c<i;c++){const l=e.readUInt32BE(c*4);e.writeUInt32BE(l^t,c*4)}const s=i*4,r=e.byteLength-s,n=t>>>24&255,o=t>>>16&255,a=t>>>8&255;r>=1&&e.writeUInt8(e.readUInt8(s)^n,s),r>=2&&e.writeUInt8(e.readUInt8(s+1)^o,s+1),r>=3&&e.writeUInt8(e.readUInt8(s+2)^a,s+2)}var fk=process.env.XDG_RUNTIME_DIR,yN={2:107,1:103};function xN(){const e=ut();if(process.platform==="win32")return`\\\\.\\pipe\\vscode-ipc-${e}-sock`;const t=process.platform!=="darwin"&&fk?fk:hN(),i=Pe(t,`vscode-ipc-${e}.sock`);return EN(i),i}function EN(e){const t=yN[VT];typeof t=="number"&&e.length>=t&&console.warn(`WARNING: IPC handle "${e}" is longer than ${t} chars, try a shorter --user-data-dir`)}function Qe(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([i,s])=>{t[i]=s&&typeof s=="object"?Qe(s):s}),t}function pk(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const i=t.shift();Object.freeze(i);for(const s in i)if(gk.call(i,s)){const r=i[s];typeof r=="object"&&!Object.isFrozen(r)&&!pT(r)&&t.push(r)}}return e}var gk=Object.prototype.hasOwnProperty;function Pa(e,t){return uv(e,t,new Set)}function uv(e,t,i){if(Tt(e))return e;const s=t(e);if(typeof s<"u")return s;if(Array.isArray(e)){const r=[];for(const n of e)r.push(uv(n,t,i));return r}if(St(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const r={};for(const n in e)gk.call(e,n)&&(r[n]=uv(e[n],t,i));return i.delete(e),r}return e}function Pr(e,t,i=!0){return St(e)?(St(t)&&Object.keys(t).forEach(s=>{s in e?i&&(St(e[s])&&St(t[s])?Pr(e[s],t[s],i):e[s]=t[s]):e[s]=t[s]}),e):t}function wi(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let i,s;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!wi(e[i],t[i]))return!1}else{const r=[];for(s in e)r.push(s);r.sort();const n=[];for(s in t)n.push(s);if(n.sort(),!wi(r,n))return!1;for(i=0;i<r.length;i++)if(!wi(e[r[i]],t[r[i]]))return!1}return!0}function kN(e){const t=new Set;return JSON.stringify(e,(i,s)=>{if(St(s)||Array.isArray(s)){if(t.has(s))return"[Circular]";t.add(s)}return typeof s=="bigint"?`[BigInt ${s.toString()}]`:s})}function mk(e,t){const i=t.toLowerCase(),s=Object.keys(e).find(r=>r.toLowerCase()===i);return s?e[s]:e[t]}function vk(e,t){const i=Object.create(null);for(const[s,r]of Object.entries(e))t(s,r)&&(i[s]=r);return i}var wk={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},bk="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function SN(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of bk)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}var CN=SN();function yk(e){let t=CN;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}var xk=new hn;xk.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Ek(e,t,i,s,r){if(t=yk(t),r||(r=Zt.first(xk)),i.length>r.maxLen){let l=e-r.maxLen/2;return l<0?l=0:s+=l,i=i.substring(l,e+r.maxLen/2),Ek(e,t,i,s,r)}const n=Date.now(),o=e-1-s;let a=-1,c=null;for(let l=1;!(Date.now()-n>=r.timeBudget);l++){const u=o-r.windowSize*l;t.lastIndex=Math.max(0,u);const h=$N(t,i,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:s+1+c.index,endColumn:s+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function $N(e,t,i,s){let r;for(;r=e.exec(t);){const n=r.index||0;if(n<=i&&e.lastIndex>=i)return r;if(s>0&&n>s)return null}return null}var kk;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(kk||(kk={}));var IN=8,PN=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Xe=class{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return jd(e,t)}compute(e,t,i){return i}},Ud=class{constructor(e,t){this.newValue=e,this.didChange=t}};function jd(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new Ud(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const s=Array.isArray(e)&&Array.isArray(t)&&Oi(e,t);return new Ud(t,!s)}let i=!1;for(const s in t)if(t.hasOwnProperty(s)){const r=jd(e[s],t[s]);r.didChange&&(e[s]=r.newValue,i=!0)}return new Ud(e,i)}var go=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return jd(e,t)}validate(e){return this.defaultValue}},Da=class{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return jd(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}};function ee(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var ke=class extends Da{constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=i),super(e,t,i,s)}validate(e){return ee(e,this.defaultValue)}};function DN(e,t,i,s){if(typeof e>"u")return t;let r=parseInt(e,10);return isNaN(r)?t:(r=Math.max(i,r),r=Math.min(s,r),r|0)}var _e=class X3 extends Da{static clampedInt(t,i,s,r){return DN(t,i,s,r)}constructor(t,i,s,r,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=s,o.minimum=r,o.maximum=n),super(t,i,s,o),this.minimum=r,this.maximum=n}validate(t){return X3.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},Xs=class K3 extends Da{static clamp(t,i,s){return t<i?i:t>s?s:t}static float(t,i){if(typeof t=="number")return t;if(typeof t>"u")return i;const s=parseFloat(t);return isNaN(s)?i:s}constructor(t,i,s,r,n){typeof n<"u"&&(n.type="number",n.default=s),super(t,i,s,n),this.validationFn=r}validate(t){return this.validationFn(K3.float(t,this.defaultValue))}},Ci=class eA extends Da{static string(t,i){return typeof t!="string"?i:t}constructor(t,i,s,r=void 0){typeof r<"u"&&(r.type="string",r.default=s),super(t,i,s,r)}validate(t){return eA.string(t,this.defaultValue)}};function st(e,t,i,s){return typeof e!="string"?t:s&&e in s?s[e]:i.indexOf(e)===-1?t:e}var et=class extends Da{constructor(e,t,i,s,r=void 0){typeof r<"u"&&(r.type="string",r.enum=s,r.default=i),super(e,t,i,r),this.c=s}validate(e){return st(e,this.defaultValue,this.c)}},Il=class extends Xe{constructor(e,t,i,s,r,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=r,o.default=s),super(e,t,i,o),this.c=r,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function AN(e,t){return Array.isArray(e)?e.map(i=>String(i)):t}function TN(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var RN=class extends Xe{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(308,null),d(309,null),d(310,null)],default:"auto",tags:["accessibility"],description:d(311,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}},LN=class extends Xe{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(24,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(312,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(313,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:ee(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:ee(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},Sk;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(Sk||(Sk={}));function NN(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Cs;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(Cs||(Cs={}));function Ck(e){switch(e){case"line":return Cs.Line;case"block":return Cs.Block;case"underline":return Cs.Underline;case"line-thin":return Cs.LineThin;case"block-outline":return Cs.BlockOutline;case"underline-thin":return Cs.UnderlineThin}}var MN=class extends go{constructor(){super(149)}compute(e,t,i){const s=["monaco-editor"];return t.get(42)&&s.push(t.get(42)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(76)==="default"?s.push("mouse-default"):t.get(76)==="copy"&&s.push("mouse-copy"),t.get(117)&&s.push("showUnused"),t.get(146)&&s.push("showDeprecated"),s.join(" ")}},ON=class extends ke{constructor(){super(39,"emptySelectionClipboard",!0,{description:d(314,null)})}compute(e,t,i){return i&&e.emptySelectionClipboard}},FN=class extends Xe{constructor(){const e={cursorMoveOnType:!0,findOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(44,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(315,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(316,null),d(317,null),d(318,null)],description:d(319,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(320,null),d(321,null),d(322,null)],description:d(323,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(324,null),included:Ct},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(325,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:d(326,null)},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(327,null),d(328,null)],description:d(329,null)},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(330,null),d(331,null)],description:d(332,null)},"editor.find.findOnType":{type:"boolean",default:e.findOnType,description:d(333,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:ee(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),findOnType:ee(t.findOnType,this.defaultValue.findOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":st(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":st(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:ee(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:ee(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:ee(t.loop,this.defaultValue.loop),history:st(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:st(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}},UN=class Zc extends Xe{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(54,"fontLigatures",Zc.OFF,{anyOf:[{type:"boolean",description:d(334,null)},{type:"string",description:d(335,null)}],description:d(336,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?Zc.OFF:t==="true"?Zc.ON:t:t?Zc.ON:Zc.OFF}},jN=class Qc extends Xe{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(57,"fontVariations",Qc.OFF,{anyOf:[{type:"boolean",description:d(337,null)},{type:"string",description:d(338,null)}],description:d(339,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?Qc.OFF:t==="true"?Qc.TRANSLATE:t:t?Qc.TRANSLATE:Qc.OFF}compute(t,i,s){return t.fontInfo.fontVariationSettings}},BN=class extends go{constructor(){super(53)}compute(e,t,i){return e.fontInfo}},HN=class extends go{constructor(){super(148)}compute(e,t,i){return e.inputMode==="overtype"?t.get(85):t.get(29)}},zN=class extends go{constructor(){super(157)}compute(e,t){return e.editContextSupported&&t.get(38)}},WN=class extends Da{constructor(){super(55,"fontSize",Ar.fontSize,{type:"number",minimum:6,maximum:100,default:Ar.fontSize,description:d(340,null)})}validate(e){const t=Xs.float(e,this.defaultValue);return t===0?Ar.fontSize:Xs.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}},VN=class Xc extends Xe{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(56,"fontWeight",Ar.fontWeight,{anyOf:[{type:"number",minimum:Xc.d,maximum:Xc.e,errorMessage:d(341,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Xc.c}],default:Ar.fontWeight,description:d(342,null)})}validate(t){return t==="normal"||t==="bold"?t:String(_e.clampedInt(t,Ar.fontWeight,Xc.d,Xc.e))}},_N=class extends Xe{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(343,null),d(344,null),d(345,null)]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(61,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(346,null)},"editor.gotoLocation.multipleDefinitions":{description:d(347,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(348,null),...t},"editor.gotoLocation.multipleDeclarations":{description:d(349,null),...t},"editor.gotoLocation.multipleImplementations":{description:d(350,null),...t},"editor.gotoLocation.multipleReferences":{description:d(351,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:d(352,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:d(353,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:d(354,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:d(355,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:d(356,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:st(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??st(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??st(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??st(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??st(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??st(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??st(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Ci.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Ci.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Ci.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Ci.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Ci.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:Ci.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},qN=class extends Xe{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(63,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d(357,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(358,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(359,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:d(360,null)},"editor.hover.above":{type:"boolean",default:e.above,description:d(361,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ee(t.enabled,this.defaultValue.enabled),delay:_e.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:ee(t.sticky,this.defaultValue.sticky),hidingDelay:_e.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:ee(t.above,this.defaultValue.above)}}},$k;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})($k||($k={}));var GN=class s1 extends go{constructor(){super(152)}compute(t,i,s){return s1.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const i=t.height/t.lineHeight,s=Math.floor(t.paddingTop/t.lineHeight);let r=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(r=Math.max(r,i-1));const n=(s+t.viewLineCount+r)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:i,extraLinesBeforeFirstLine:s,extraLinesBeyondLastLine:r,desiredRatio:n,minimapLineCount:o}}static c(t,i){const s=t.outerWidth,r=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*r),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:r};const o=i.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let f=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const p=t.minimap.maxColumn,g=t.minimap.size,v=t.minimap.side,b=t.verticalScrollbarWidth,E=t.viewLineCount,k=t.remainingWidth,I=t.isViewportWrapping,B=h?2:3;let j=Math.floor(n*r);const te=j/n;let F=!1,H=!1,U=B*f,Y=f/n,he=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:ae,extraLinesBeforeFirstLine:fe,extraLinesBeyondLastLine:Te,desiredRatio:ot,minimapLineCount:Ce}=s1.computeContainedMinimapLineCount({viewLineCount:E,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:r,lineHeight:c,pixelRatio:n});if(E/Ce>1)F=!0,H=!0,f=1,U=1,Y=f/n;else{let Dt=!1,Gt=f+1;if(g==="fit"){const fi=Math.ceil((fe+E+Te)*U);I&&a&&k<=i.stableFitRemainingWidth?(Dt=!0,Gt=i.stableFitMaxMinimapScale):Dt=fi>j}if(g==="fill"||Dt){F=!0;const fi=f;U=Math.min(c*n,Math.max(1,Math.floor(1/ot))),I&&a&&k<=i.stableFitRemainingWidth&&(Gt=i.stableFitMaxMinimapScale),f=Math.min(Gt,Math.max(1,Math.floor(U/B))),f>fi&&(he=Math.min(2,f/fi)),Y=f/n/he,j=Math.ceil(Math.max(ae,fe+E+Te)*U),I?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=k,i.stableFitMaxMinimapScale=f):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const re=Math.floor(p*Y),dt=Math.min(re,Math.max(0,Math.floor((k-b-2)*Y/(l+Y)))+IN);let V=Math.floor(n*dt);const W=V/n;V=Math.floor(V*he);const Q=h?1:2,K=v==="left"?0:s-dt-b;return{renderMinimap:Q,minimapLeft:K,minimapWidth:dt,minimapHeightIsEditorHeight:F,minimapIsSampling:H,minimapScale:f,minimapLineHeight:U,minimapCanvasInnerWidth:V,minimapCanvasInnerHeight:j,minimapCanvasOuterWidth:W,minimapCanvasOuterHeight:te}}static computeLayout(t,i){const s=i.outerWidth|0,r=i.outerHeight|0,n=i.lineHeight|0,o=i.lineNumbersDigitCount|0,a=i.typicalHalfwidthCharacterWidth,c=i.maxDigitWidth,l=i.pixelRatio,u=i.viewLineCount,h=t.get(143),f=h==="inherit"?t.get(142):h,p=f==="inherit"?t.get(138):f,g=t.get(141),v=i.isDominatedByLongLines,b=t.get(60),E=t.get(70).renderType!==0,k=t.get(71),I=t.get(111),B=t.get(89),j=t.get(75),te=t.get(109),F=te.verticalScrollbarSize,H=te.verticalHasArrows,U=te.arrowSize,Y=te.horizontalScrollbarSize,he=t.get(46),re=t.get(116)!=="never";let dt=t.get(68);he&&re&&(dt+=16);let V=0;if(E){const jt=Math.max(o,k);V=Math.round(jt*c)}let W=0;b&&(W=n*i.glyphMarginDecorationLaneCount);let Q=0,K=Q+W,ae=K+V,fe=ae+dt;const Te=s-W-V-dt;let ot=!1,Ce=!1,qt=-1;f==="inherit"&&v?(ot=!0,Ce=!0):p==="on"||p==="bounded"?Ce=!0:p==="wordWrapColumn"&&(qt=g);const Dt=s1.c({outerWidth:s,outerHeight:r,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:I,paddingTop:B.top,paddingBottom:B.bottom,minimap:j,verticalScrollbarWidth:F,viewLineCount:u,remainingWidth:Te,isViewportWrapping:Ce},i.memory||new PN);Dt.renderMinimap!==0&&Dt.minimapLeft===0&&(Q+=Dt.minimapWidth,K+=Dt.minimapWidth,ae+=Dt.minimapWidth,fe+=Dt.minimapWidth);const Gt=Te-Dt.minimapWidth,fi=Math.max(1,Math.floor((Gt-F-2)/a)),xi=H?U:0;return Ce&&(qt=Math.max(1,fi),p==="bounded"&&(qt=Math.min(qt,g))),{width:s,height:r,glyphMarginLeft:Q,glyphMarginWidth:W,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:K,lineNumbersWidth:V,decorationsLeft:ae,decorationsWidth:dt,contentLeft:fe,contentWidth:Gt,minimap:Dt,viewportColumn:fi,isWordWrapMinified:ot,isViewportWrapping:Ce,wrappingColumn:qt,verticalScrollbarWidth:F,horizontalScrollbarHeight:Y,overviewRuler:{top:xi,width:F,height:r-2*xi,right:0}}}},JN=class extends Xe{constructor(){super(145,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(362,null),d(363,null)],type:"string",enum:["simple","advanced"],default:"simple",description:d(364,null)}})}validate(e){return st(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}},Dr;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(Dr||(Dr={}));var YN=class extends Xe{constructor(){const e={enabled:Dr.OnCode};super(67,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[Dr.Off,Dr.OnCode,Dr.On],default:e.enabled,enumDescriptions:[d(365,null),d(366,null),d(367,null)],description:d(368,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:st(e.enabled,this.defaultValue.enabled,[Dr.Off,Dr.OnCode,Dr.On])}}},ZN=class extends Xe{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(121,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(369,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(370,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(371,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(372,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ee(t.enabled,this.defaultValue.enabled),maxLineCount:_e.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:st(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:ee(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},QN=class extends Xe{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(147,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(373,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(374,null),d(375,null,Ct?"Ctrl+Option":"Ctrl+Alt"),d(376,null,Ct?"Ctrl+Option":"Ctrl+Alt"),d(377,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(378,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(379,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(380,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d(381,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:st(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:_e.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Ci.string(t.fontFamily,this.defaultValue.fontFamily),padding:ee(t.padding,this.defaultValue.padding),maximumLength:_e.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},XN=class extends Xe{constructor(){super(68,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):_e.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?_e.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}},KN=class extends Xs{constructor(){super(69,"lineHeight",Ar.lineHeight,e=>Xs.clamp(e,0,150),{markdownDescription:d(382,null)})}compute(e,t,i){return e.fontInfo.lineHeight}},eM=class extends Xe{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(75,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(383,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:d(384,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(385,null),d(386,null),d(387,null)],default:e.size,description:d(388,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(389,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(390,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(391,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(392,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(393,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(394,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(395,null)},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:d(396,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(397,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(398,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;let i=this.defaultValue.markSectionHeaderRegex;const s=e.markSectionHeaderRegex;if(typeof s=="string")try{new RegExp(s,"d"),i=s}catch{}return{enabled:ee(t.enabled,this.defaultValue.enabled),autohide:ee(t.autohide,this.defaultValue.autohide),size:st(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:st(t.side,this.defaultValue.side,["right","left"]),showSlider:st(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:ee(t.renderCharacters,this.defaultValue.renderCharacters),scale:_e.clampedInt(t.scale,1,1,3),maxColumn:_e.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:ee(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:ee(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:i,sectionHeaderFontSize:Xs.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Xs.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function tM(e){return e==="ctrlCmd"?Ct?"metaKey":"ctrlKey":"altKey"}var iM=class extends Xe{constructor(){super(89,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(399,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(400,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:_e.clampedInt(t.top,0,0,1e3),bottom:_e.clampedInt(t.bottom,0,0,1e3)}}},sM=class extends Xe{constructor(){const e={enabled:!0,cycle:!0};super(91,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(401,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(402,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ee(t.enabled,this.defaultValue.enabled),cycle:ee(t.cycle,this.defaultValue.cycle)}}},rM=class extends go{constructor(){super(150)}compute(e,t,i){return e.pixelRatio}},nM=class extends Xe{constructor(){super(93,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},oM=class extends Xe{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(403,null),d(404,null),d(405,null)]}];super(95,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(406,null)},comments:{anyOf:t,default:e.comments,description:d(407,null)},other:{anyOf:t,default:e.other,description:d(408,null)}},default:e,markdownDescription:d(409,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:s}=e,r=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=st(t,this.defaultValue.other,r),typeof i=="boolean"?o=i?"on":"off":o=st(i,this.defaultValue.comments,r),typeof s=="boolean"?a=s?"on":"off":a=st(s,this.defaultValue.strings,r),{other:n,comments:o,strings:a}}},Ik;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(Ik||(Ik={}));var aM=class extends Xe{constructor(){super(70,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(410,null),d(411,null),d(412,null),d(413,null)],default:"on",description:d(414,null)})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}},cM=class extends Xe{constructor(){const e=[],t={type:"number",description:d(415,null)};super(108,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(416,null),format:"color-hex"}}}]},default:e,description:d(417,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:_e.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const s=i;t.push({column:_e.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((i,s)=>i.column-s.column),t}return this.defaultValue}},lM=class extends Xe{constructor(){super(98,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function Pk(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var uM=class extends Xe{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(109,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(418,null),d(419,null),d(420,null)],default:"auto",description:d(421,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(422,null),d(423,null),d(424,null)],default:"auto",description:d(425,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(426,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(427,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(428,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(429,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=_e.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=_e.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:_e.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Pk(t.vertical,this.defaultValue.vertical),horizontal:Pk(t.horizontal,this.defaultValue.horizontal),useShadows:ee(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:ee(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:ee(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:ee(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:ee(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:_e.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:s,verticalSliderSize:_e.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:ee(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:ee(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},$s="inUntrustedWorkspace",mo={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},hM=class extends Xe{constructor(){const e={nonBasicASCII:$s,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:$s,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(131,"unicodeHighlight",e,{[mo.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,$s],default:e.nonBasicASCII,description:d(430,null)},[mo.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(431,null)},[mo.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(432,null)},[mo.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,$s],default:e.includeComments,description:d(433,null)},[mo.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,$s],default:e.includeStrings,description:d(434,null)},[mo.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(435,null),additionalProperties:{type:"boolean"}},[mo.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(436,null)}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(wi(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(wi(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const s=super.applyUpdate(e,t);return i?new Ud(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Aa(t.nonBasicASCII,$s,[!0,!1,$s]),invisibleCharacters:ee(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:ee(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Aa(t.includeComments,$s,[!0,!1,$s]),includeStrings:Aa(t.includeStrings,$s,[!0,!1,$s]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[s,r]of Object.entries(e))r===!0&&(i[s]=!0);return i}},dM=class extends Xe{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!0,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:"auto",allowCodeShifting:"always",useMultiLineGhostText:!0},experimental:{suppressInlineSuggestions:[]}};super(65,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(437,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(438,null),d(439,null),d(440,null)],description:d(441,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d(442,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(443,null)},"editor.inlineSuggest.experimental.suppressInlineSuggestions":{type:"array",tags:["experimental","onExp"],items:{type:"string"},description:d(444,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(445,null)},"editor.inlineSuggest.edits.allowCodeShifting":{type:"string",default:e.edits.allowCodeShifting,description:d(446,null),enum:["always","horizontal","never"],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:d(447,null),enum:["auto","never"],enumDescriptions:[d(448,null),d(449,null)],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:d(450,null),tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ee(t.enabled,this.defaultValue.enabled),mode:st(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:st(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:ee(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:ee(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Ci.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:ee(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{enabled:ee(t.edits?.enabled,this.defaultValue.edits.enabled),showCollapsed:ee(t.edits?.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:st(t.edits?.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,["always","horizontal","never"]),renderSideBySide:st(t.edits?.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"]),useMultiLineGhostText:ee(t.edits?.useMultiLineGhostText,this.defaultValue.edits.useMultiLineGhostText)},experimental:{suppressInlineSuggestions:AN(t.experimental?.suppressInlineSuggestions,this.defaultValue.experimental.suppressInlineSuggestions)}}}},fM=class extends Xe{constructor(){const e={enabled:wk.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:wk.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(16,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(451,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(452,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ee(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:ee(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},pM=class extends Xe{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(17,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(453,null),d(454,null),d(455,null)],default:e.bracketPairs,description:d(456,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(457,null),d(458,null),d(459,null)],default:e.bracketPairsHorizontal,description:d(460,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(461,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(462,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(463,null),d(464,null),d(465,null)],default:e.highlightActiveIndentation,description:d(466,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Aa(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Aa(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:ee(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:ee(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Aa(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Aa(e,t,i){const s=i.indexOf(e);return s===-1?t:i[s]}var gM=class extends Xe{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(124,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(467,null),d(468,null)],default:e.insertMode,description:d(469,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(470,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(471,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(472,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(473,null),d(474,null),d(475,null),d(476,null)],default:e.selectionMode,markdownDescription:d(477,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(478,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(479,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(480,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(481,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(482,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(483,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(484,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(485,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(486,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(487,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(488,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(489,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(490,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(491,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(492,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(493,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(494,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(495,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(496,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(497,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(498,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(499,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(500,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(501,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(502,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(503,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(504,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(505,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(506,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(507,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(508,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(509,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(510,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(511,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(512,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(513,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(514,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:st(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:ee(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:ee(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:ee(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:ee(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:st(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:ee(t.showIcons,this.defaultValue.showIcons),showStatusBar:ee(t.showStatusBar,this.defaultValue.showStatusBar),preview:ee(t.preview,this.defaultValue.preview),previewMode:st(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:ee(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:ee(t.showMethods,this.defaultValue.showMethods),showFunctions:ee(t.showFunctions,this.defaultValue.showFunctions),showConstructors:ee(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:ee(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:ee(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:ee(t.showFields,this.defaultValue.showFields),showVariables:ee(t.showVariables,this.defaultValue.showVariables),showClasses:ee(t.showClasses,this.defaultValue.showClasses),showStructs:ee(t.showStructs,this.defaultValue.showStructs),showInterfaces:ee(t.showInterfaces,this.defaultValue.showInterfaces),showModules:ee(t.showModules,this.defaultValue.showModules),showProperties:ee(t.showProperties,this.defaultValue.showProperties),showEvents:ee(t.showEvents,this.defaultValue.showEvents),showOperators:ee(t.showOperators,this.defaultValue.showOperators),showUnits:ee(t.showUnits,this.defaultValue.showUnits),showValues:ee(t.showValues,this.defaultValue.showValues),showConstants:ee(t.showConstants,this.defaultValue.showConstants),showEnums:ee(t.showEnums,this.defaultValue.showEnums),showEnumMembers:ee(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:ee(t.showKeywords,this.defaultValue.showKeywords),showWords:ee(t.showWords,this.defaultValue.showWords),showColors:ee(t.showColors,this.defaultValue.showColors),showFiles:ee(t.showFiles,this.defaultValue.showFiles),showReferences:ee(t.showReferences,this.defaultValue.showReferences),showFolders:ee(t.showFolders,this.defaultValue.showFolders),showTypeParameters:ee(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:ee(t.showSnippets,this.defaultValue.showSnippets),showUsers:ee(t.showUsers,this.defaultValue.showUsers),showIssues:ee(t.showIssues,this.defaultValue.showIssues)}}},mM=class extends Xe{constructor(){super(119,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(515,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(516,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:ee(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:ee(e.selectSubwords,this.defaultValue.selectSubwords)}}},vM=class extends Xe{constructor(){const e=[];super(136,"wordSegmenterLocales",e,{anyOf:[{description:d(517,null),type:"string"},{description:d(518,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}},Dk;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(Dk||(Dk={}));var wM=class extends Xe{constructor(){super(144,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(519,null),d(520,null),d(521,null),d(522,null)],description:d(523,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}},bM=class extends go{constructor(){super(153)}compute(e,t,i){const s=t.get(152);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}},yM=class extends Xe{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(37,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(524,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(525,null),enum:["afterDrop","never"],enumDescriptions:[d(526,null),d(527,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ee(t.enabled,this.defaultValue.enabled),showDropSelector:st(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},xM=class extends Xe{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(90,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(528,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(529,null),enum:["afterPaste","never"],enumDescriptions:[d(530,null),d(531,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ee(t.enabled,this.defaultValue.enabled),showPasteSelector:st(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},EM="Consolas, 'Courier New', monospace",kM="Menlo, Monaco, 'Courier New', monospace",SM="'Droid Sans Mono', 'monospace', monospace",Ar={fontFamily:Ct?kM:Fe?EM:SM,fontWeight:"normal",fontSize:Ct?12:14,lineHeight:0,letterSpacing:0},CM=[];function T(e){return CM[e.id]=e,e}var Ak;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.allowVariableLineHeights=4]="allowVariableLineHeights",e[e.ariaLabel=5]="ariaLabel",e[e.ariaRequired=6]="ariaRequired",e[e.autoClosingBrackets=7]="autoClosingBrackets",e[e.autoClosingComments=8]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=9]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=10]="autoClosingDelete",e[e.autoClosingOvertype=11]="autoClosingOvertype",e[e.autoClosingQuotes=12]="autoClosingQuotes",e[e.autoIndent=13]="autoIndent",e[e.automaticLayout=14]="automaticLayout",e[e.autoSurround=15]="autoSurround",e[e.bracketPairColorization=16]="bracketPairColorization",e[e.guides=17]="guides",e[e.codeLens=18]="codeLens",e[e.codeLensFontFamily=19]="codeLensFontFamily",e[e.codeLensFontSize=20]="codeLensFontSize",e[e.colorDecorators=21]="colorDecorators",e[e.colorDecoratorsLimit=22]="colorDecoratorsLimit",e[e.columnSelection=23]="columnSelection",e[e.comments=24]="comments",e[e.contextmenu=25]="contextmenu",e[e.copyWithSyntaxHighlighting=26]="copyWithSyntaxHighlighting",e[e.cursorBlinking=27]="cursorBlinking",e[e.cursorSmoothCaretAnimation=28]="cursorSmoothCaretAnimation",e[e.cursorStyle=29]="cursorStyle",e[e.cursorSurroundingLines=30]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=31]="cursorSurroundingLinesStyle",e[e.cursorWidth=32]="cursorWidth",e[e.disableLayerHinting=33]="disableLayerHinting",e[e.disableMonospaceOptimizations=34]="disableMonospaceOptimizations",e[e.domReadOnly=35]="domReadOnly",e[e.dragAndDrop=36]="dragAndDrop",e[e.dropIntoEditor=37]="dropIntoEditor",e[e.experimentalEditContextEnabled=38]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=39]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=40]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=41]="experimentalWhitespaceRendering",e[e.extraEditorClassName=42]="extraEditorClassName",e[e.fastScrollSensitivity=43]="fastScrollSensitivity",e[e.find=44]="find",e[e.fixedOverflowWidgets=45]="fixedOverflowWidgets",e[e.folding=46]="folding",e[e.foldingStrategy=47]="foldingStrategy",e[e.foldingHighlight=48]="foldingHighlight",e[e.foldingImportsByDefault=49]="foldingImportsByDefault",e[e.foldingMaximumRegions=50]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=51]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=52]="fontFamily",e[e.fontInfo=53]="fontInfo",e[e.fontLigatures=54]="fontLigatures",e[e.fontSize=55]="fontSize",e[e.fontWeight=56]="fontWeight",e[e.fontVariations=57]="fontVariations",e[e.formatOnPaste=58]="formatOnPaste",e[e.formatOnType=59]="formatOnType",e[e.glyphMargin=60]="glyphMargin",e[e.gotoLocation=61]="gotoLocation",e[e.hideCursorInOverviewRuler=62]="hideCursorInOverviewRuler",e[e.hover=63]="hover",e[e.inDiffEditor=64]="inDiffEditor",e[e.inlineSuggest=65]="inlineSuggest",e[e.letterSpacing=66]="letterSpacing",e[e.lightbulb=67]="lightbulb",e[e.lineDecorationsWidth=68]="lineDecorationsWidth",e[e.lineHeight=69]="lineHeight",e[e.lineNumbers=70]="lineNumbers",e[e.lineNumbersMinChars=71]="lineNumbersMinChars",e[e.linkedEditing=72]="linkedEditing",e[e.links=73]="links",e[e.matchBrackets=74]="matchBrackets",e[e.minimap=75]="minimap",e[e.mouseStyle=76]="mouseStyle",e[e.mouseWheelScrollSensitivity=77]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=78]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=79]="multiCursorMergeOverlapping",e[e.multiCursorModifier=80]="multiCursorModifier",e[e.multiCursorPaste=81]="multiCursorPaste",e[e.multiCursorLimit=82]="multiCursorLimit",e[e.occurrencesHighlight=83]="occurrencesHighlight",e[e.occurrencesHighlightDelay=84]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=85]="overtypeCursorStyle",e[e.overtypeOnPaste=86]="overtypeOnPaste",e[e.overviewRulerBorder=87]="overviewRulerBorder",e[e.overviewRulerLanes=88]="overviewRulerLanes",e[e.padding=89]="padding",e[e.pasteAs=90]="pasteAs",e[e.parameterHints=91]="parameterHints",e[e.peekWidgetDefaultFocus=92]="peekWidgetDefaultFocus",e[e.placeholder=93]="placeholder",e[e.definitionLinkOpensInPeek=94]="definitionLinkOpensInPeek",e[e.quickSuggestions=95]="quickSuggestions",e[e.quickSuggestionsDelay=96]="quickSuggestionsDelay",e[e.readOnly=97]="readOnly",e[e.readOnlyMessage=98]="readOnlyMessage",e[e.renameOnType=99]="renameOnType",e[e.renderControlCharacters=100]="renderControlCharacters",e[e.renderFinalNewline=101]="renderFinalNewline",e[e.renderLineHighlight=102]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=103]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=104]="renderValidationDecorations",e[e.renderWhitespace=105]="renderWhitespace",e[e.revealHorizontalRightPadding=106]="revealHorizontalRightPadding",e[e.roundedSelection=107]="roundedSelection",e[e.rulers=108]="rulers",e[e.scrollbar=109]="scrollbar",e[e.scrollBeyondLastColumn=110]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=111]="scrollBeyondLastLine",e[e.scrollPredominantAxis=112]="scrollPredominantAxis",e[e.selectionClipboard=113]="selectionClipboard",e[e.selectionHighlight=114]="selectionHighlight",e[e.selectOnLineNumbers=115]="selectOnLineNumbers",e[e.showFoldingControls=116]="showFoldingControls",e[e.showUnused=117]="showUnused",e[e.snippetSuggestions=118]="snippetSuggestions",e[e.smartSelect=119]="smartSelect",e[e.smoothScrolling=120]="smoothScrolling",e[e.stickyScroll=121]="stickyScroll",e[e.stickyTabStops=122]="stickyTabStops",e[e.stopRenderingLineAfter=123]="stopRenderingLineAfter",e[e.suggest=124]="suggest",e[e.suggestFontSize=125]="suggestFontSize",e[e.suggestLineHeight=126]="suggestLineHeight",e[e.suggestOnTriggerCharacters=127]="suggestOnTriggerCharacters",e[e.suggestSelection=128]="suggestSelection",e[e.tabCompletion=129]="tabCompletion",e[e.tabIndex=130]="tabIndex",e[e.unicodeHighlighting=131]="unicodeHighlighting",e[e.unusualLineTerminators=132]="unusualLineTerminators",e[e.useShadowDOM=133]="useShadowDOM",e[e.useTabStops=134]="useTabStops",e[e.wordBreak=135]="wordBreak",e[e.wordSegmenterLocales=136]="wordSegmenterLocales",e[e.wordSeparators=137]="wordSeparators",e[e.wordWrap=138]="wordWrap",e[e.wordWrapBreakAfterCharacters=139]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=140]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=141]="wordWrapColumn",e[e.wordWrapOverride1=142]="wordWrapOverride1",e[e.wordWrapOverride2=143]="wordWrapOverride2",e[e.wrappingIndent=144]="wrappingIndent",e[e.wrappingStrategy=145]="wrappingStrategy",e[e.showDeprecated=146]="showDeprecated",e[e.inlayHints=147]="inlayHints",e[e.effectiveCursorStyle=148]="effectiveCursorStyle",e[e.editorClassName=149]="editorClassName",e[e.pixelRatio=150]="pixelRatio",e[e.tabFocusMode=151]="tabFocusMode",e[e.layoutInfo=152]="layoutInfo",e[e.wrappingInfo=153]="wrappingInfo",e[e.defaultColorDecorators=154]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=155]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=156]="inlineCompletionsAccessibilityVerbose",e[e.effectiveExperimentalEditContextEnabled=157]="effectiveExperimentalEditContextEnabled"})(Ak||(Ak={}));var pQ={acceptSuggestionOnCommitCharacter:T(new ke(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(532,null)})),acceptSuggestionOnEnter:T(new et(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(533,null),""],markdownDescription:d(534,null)})),accessibilitySupport:T(new RN),accessibilityPageSize:T(new _e(3,"accessibilityPageSize",500,1,1073741824,{description:d(535,null),tags:["accessibility"]})),allowVariableLineHeights:T(new ke(4,"allowVariableLineHeights",!0)),ariaLabel:T(new Ci(5,"ariaLabel",d(536,null))),ariaRequired:T(new ke(6,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:T(new ke(9,"screenReaderAnnounceInlineSuggestion",!0,{description:d(537,null),tags:["accessibility"]})),autoClosingBrackets:T(new et(7,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(538,null),d(539,null),""],description:d(540,null)})),autoClosingComments:T(new et(8,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(541,null),d(542,null),""],description:d(543,null)})),autoClosingDelete:T(new et(10,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(544,null),""],description:d(545,null)})),autoClosingOvertype:T(new et(11,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(546,null),""],description:d(547,null)})),autoClosingQuotes:T(new et(12,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(548,null),d(549,null),""],description:d(550,null)})),autoIndent:T(new Il(13,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],TN,{enumDescriptions:[d(551,null),d(552,null),d(553,null),d(554,null),d(555,null)],description:d(556,null)})),automaticLayout:T(new ke(14,"automaticLayout",!1)),autoSurround:T(new et(15,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(557,null),d(558,null),d(559,null),""],description:d(560,null)})),bracketPairColorization:T(new fM),bracketPairGuides:T(new pM),stickyTabStops:T(new ke(122,"stickyTabStops",!1,{description:d(561,null)})),codeLens:T(new ke(18,"codeLens",!0,{description:d(562,null)})),codeLensFontFamily:T(new Ci(19,"codeLensFontFamily","",{description:d(563,null)})),codeLensFontSize:T(new _e(20,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(564,null)})),colorDecorators:T(new ke(21,"colorDecorators",!0,{description:d(565,null)})),colorDecoratorActivatedOn:T(new et(155,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(566,null),d(567,null),d(568,null)],description:d(569,null)})),colorDecoratorsLimit:T(new _e(22,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(570,null)})),columnSelection:T(new ke(23,"columnSelection",!1,{description:d(571,null)})),comments:T(new LN),contextmenu:T(new ke(25,"contextmenu",!0)),copyWithSyntaxHighlighting:T(new ke(26,"copyWithSyntaxHighlighting",!0,{description:d(572,null)})),cursorBlinking:T(new Il(27,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],NN,{description:d(573,null)})),cursorSmoothCaretAnimation:T(new et(28,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(574,null),d(575,null),d(576,null)],description:d(577,null)})),cursorStyle:T(new Il(29,"cursorStyle",Cs.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Ck,{description:d(578,null)})),overtypeCursorStyle:T(new Il(85,"overtypeCursorStyle",Cs.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],Ck,{description:d(579,null)})),cursorSurroundingLines:T(new _e(30,"cursorSurroundingLines",0,0,1073741824,{description:d(580,null)})),cursorSurroundingLinesStyle:T(new et(31,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(581,null),d(582,null)],markdownDescription:d(583,null)})),cursorWidth:T(new _e(32,"cursorWidth",0,0,1073741824,{markdownDescription:d(584,null)})),disableLayerHinting:T(new ke(33,"disableLayerHinting",!1)),disableMonospaceOptimizations:T(new ke(34,"disableMonospaceOptimizations",!1)),domReadOnly:T(new ke(35,"domReadOnly",!1)),dragAndDrop:T(new ke(36,"dragAndDrop",!0,{description:d(585,null)})),emptySelectionClipboard:T(new ON),dropIntoEditor:T(new yM),experimentalEditContextEnabled:T(new ke(38,"experimentalEditContextEnabled",!0,{description:d(586,null),included:M1||Bx||Lx})),stickyScroll:T(new ZN),experimentalGpuAcceleration:T(new et(40,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[d(587,null),d(588,null)],description:d(589,null)})),experimentalWhitespaceRendering:T(new et(41,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(590,null),d(591,null),d(592,null)],description:d(593,null)})),extraEditorClassName:T(new Ci(42,"extraEditorClassName","")),fastScrollSensitivity:T(new Xs(43,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:d(594,null)})),find:T(new FN),fixedOverflowWidgets:T(new ke(45,"fixedOverflowWidgets",!1)),folding:T(new ke(46,"folding",!0,{description:d(595,null)})),foldingStrategy:T(new et(47,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(596,null),d(597,null)],description:d(598,null)})),foldingHighlight:T(new ke(48,"foldingHighlight",!0,{description:d(599,null)})),foldingImportsByDefault:T(new ke(49,"foldingImportsByDefault",!1,{description:d(600,null)})),foldingMaximumRegions:T(new _e(50,"foldingMaximumRegions",5e3,10,65e3,{description:d(601,null)})),unfoldOnClickAfterEndOfLine:T(new ke(51,"unfoldOnClickAfterEndOfLine",!1,{description:d(602,null)})),fontFamily:T(new Ci(52,"fontFamily",Ar.fontFamily,{description:d(603,null)})),fontInfo:T(new BN),fontLigatures2:T(new UN),fontSize:T(new WN),fontWeight:T(new VN),fontVariations:T(new jN),formatOnPaste:T(new ke(58,"formatOnPaste",!1,{description:d(604,null)})),formatOnType:T(new ke(59,"formatOnType",!1,{description:d(605,null)})),glyphMargin:T(new ke(60,"glyphMargin",!0,{description:d(606,null)})),gotoLocation:T(new _N),hideCursorInOverviewRuler:T(new ke(62,"hideCursorInOverviewRuler",!1,{description:d(607,null)})),hover:T(new qN),inDiffEditor:T(new ke(64,"inDiffEditor",!1)),letterSpacing:T(new Xs(66,"letterSpacing",Ar.letterSpacing,e=>Xs.clamp(e,-5,20),{description:d(608,null)})),lightbulb:T(new YN),lineDecorationsWidth:T(new XN),lineHeight:T(new KN),lineNumbers:T(new aM),lineNumbersMinChars:T(new _e(71,"lineNumbersMinChars",5,1,300)),linkedEditing:T(new ke(72,"linkedEditing",!1,{description:d(609,null)})),links:T(new ke(73,"links",!0,{description:d(610,null)})),matchBrackets:T(new et(74,"matchBrackets","always",["always","near","never"],{description:d(611,null)})),minimap:T(new eM),mouseStyle:T(new et(76,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:T(new Xs(77,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:d(612,null)})),mouseWheelZoom:T(new ke(78,"mouseWheelZoom",!1,{markdownDescription:d(Ct?613:614,null)})),multiCursorMergeOverlapping:T(new ke(79,"multiCursorMergeOverlapping",!0,{description:d(615,null)})),multiCursorModifier:T(new Il(80,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],tM,{markdownEnumDescriptions:[d(616,null),d(617,null)],markdownDescription:d(618,null)})),multiCursorPaste:T(new et(81,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(619,null),d(620,null)],markdownDescription:d(621,null)})),multiCursorLimit:T(new _e(82,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(622,null)})),occurrencesHighlight:T(new et(83,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(623,null),d(624,null),d(625,null)],markdownDescription:d(626,null)})),occurrencesHighlightDelay:T(new _e(84,"occurrencesHighlightDelay",0,0,2e3,{description:d(627,null),tags:["preview"]})),overtypeOnPaste:T(new ke(86,"overtypeOnPaste",!0,{description:d(628,null)})),overviewRulerBorder:T(new ke(87,"overviewRulerBorder",!0,{description:d(629,null)})),overviewRulerLanes:T(new _e(88,"overviewRulerLanes",3,0,3)),padding:T(new iM),pasteAs:T(new xM),parameterHints:T(new sM),peekWidgetDefaultFocus:T(new et(92,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(630,null),d(631,null)],description:d(632,null)})),placeholder:T(new nM),definitionLinkOpensInPeek:T(new ke(94,"definitionLinkOpensInPeek",!1,{description:d(633,null)})),quickSuggestions:T(new oM),quickSuggestionsDelay:T(new _e(96,"quickSuggestionsDelay",10,0,1073741824,{description:d(634,null)})),readOnly:T(new ke(97,"readOnly",!1)),readOnlyMessage:T(new lM),renameOnType:T(new ke(99,"renameOnType",!1,{description:d(635,null),markdownDeprecationMessage:d(636,null)})),renderControlCharacters:T(new ke(100,"renderControlCharacters",!0,{description:d(637,null),restricted:!0})),renderFinalNewline:T(new et(101,"renderFinalNewline",$t?"dimmed":"on",["off","on","dimmed"],{description:d(638,null)})),renderLineHighlight:T(new et(102,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(639,null)],description:d(640,null)})),renderLineHighlightOnlyWhenFocus:T(new ke(103,"renderLineHighlightOnlyWhenFocus",!1,{description:d(641,null)})),renderValidationDecorations:T(new et(104,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:T(new et(105,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(642,null),d(643,null),d(644,null),""],description:d(645,null)})),revealHorizontalRightPadding:T(new _e(106,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:T(new ke(107,"roundedSelection",!0,{description:d(646,null)})),rulers:T(new cM),scrollbar:T(new uM),scrollBeyondLastColumn:T(new _e(110,"scrollBeyondLastColumn",4,0,1073741824,{description:d(647,null)})),scrollBeyondLastLine:T(new ke(111,"scrollBeyondLastLine",!0,{description:d(648,null)})),scrollPredominantAxis:T(new ke(112,"scrollPredominantAxis",!0,{description:d(649,null)})),selectionClipboard:T(new ke(113,"selectionClipboard",!0,{description:d(650,null),included:$t})),selectionHighlight:T(new ke(114,"selectionHighlight",!0,{description:d(651,null)})),selectOnLineNumbers:T(new ke(115,"selectOnLineNumbers",!0)),showFoldingControls:T(new et(116,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(652,null),d(653,null),d(654,null)],description:d(655,null)})),showUnused:T(new ke(117,"showUnused",!0,{description:d(656,null)})),showDeprecated:T(new ke(146,"showDeprecated",!0,{description:d(657,null)})),inlayHints:T(new QN),snippetSuggestions:T(new et(118,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(658,null),d(659,null),d(660,null),d(661,null)],description:d(662,null)})),smartSelect:T(new mM),smoothScrolling:T(new ke(120,"smoothScrolling",!1,{description:d(663,null)})),stopRenderingLineAfter:T(new _e(123,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:T(new gM),inlineSuggest:T(new dM),inlineCompletionsAccessibilityVerbose:T(new ke(156,"inlineCompletionsAccessibilityVerbose",!1,{description:d(664,null)})),suggestFontSize:T(new _e(125,"suggestFontSize",0,0,1e3,{markdownDescription:d(665,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:T(new _e(126,"suggestLineHeight",0,0,1e3,{markdownDescription:d(666,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:T(new ke(127,"suggestOnTriggerCharacters",!0,{description:d(667,null)})),suggestSelection:T(new et(128,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(668,null),d(669,null),d(670,null)],description:d(671,null)})),tabCompletion:T(new et(129,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(672,null),d(673,null),d(674,null)],description:d(675,null)})),tabIndex:T(new _e(130,"tabIndex",0,-1,1073741824)),unicodeHighlight:T(new hM),unusualLineTerminators:T(new et(132,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(676,null),d(677,null),d(678,null)],description:d(679,null)})),useShadowDOM:T(new ke(133,"useShadowDOM",!0)),useTabStops:T(new ke(134,"useTabStops",!0,{description:d(680,null)})),wordBreak:T(new et(135,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(681,null),d(682,null)],description:d(683,null)})),wordSegmenterLocales:T(new vM),wordSeparators:T(new Ci(137,"wordSeparators",bk,{description:d(684,null)})),wordWrap:T(new et(138,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(685,null),d(686,null),d(687,null),d(688,null)],description:d(689,null)})),wordWrapBreakAfterCharacters:T(new Ci(139,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:T(new Ci(140,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:T(new _e(141,"wordWrapColumn",80,1,1073741824,{markdownDescription:d(690,null)})),wordWrapOverride1:T(new et(142,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:T(new et(143,"wordWrapOverride2","inherit",["off","on","inherit"])),effectiveCursorStyle:T(new HN),editorClassName:T(new MN),defaultColorDecorators:T(new et(154,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[d(691,null),d(692,null),d(693,null)],description:d(694,null)})),pixelRatio:T(new rM),tabFocusMode:T(new ke(151,"tabFocusMode",!1,{markdownDescription:d(695,null)})),layoutInfo:T(new GN),wrappingInfo:T(new bM),wrappingIndent:T(new wM),wrappingStrategy:T(new JN),effectiveExperimentalEditContextEnabled:T(new zN)},Bi,hv=globalThis.vscode;if(typeof hv<"u"&&typeof hv.context<"u"){const e=hv.context.configuration();if(e)Bi=e.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(Bi=globalThis._VSCODE_PRODUCT_JSON,kr.VSCODE_DEV&&Object.assign(Bi,{nameShort:`${Bi.nameShort} Dev`,nameLong:`${Bi.nameLong} Dev`,dataFolderName:`${Bi.dataFolderName}-dev`,serverDataFolderName:Bi.serverDataFolderName?`${Bi.serverDataFolderName}-dev`:void 0}),!Bi.version){const e=globalThis._VSCODE_PACKAGE_JSON;Object.assign(Bi,{version:e.version})}}else Bi={nameShort:"Code",nameLong:"Visual Studio Code",applicationName:"code",win32x64AppId:"{{EA457B21-F73E-494C-ACAB-524FDE069978}",win32arm64AppId:"{{A5270FC5-65AD-483E-AC30-2C276B63D0AC}",win32x64UserAppId:"{{771FD6B0-FA20-440A-A002-3B3BAC16DC50}",win32arm64UserAppId:"{{D9E514E7-1A56-452D-9337-2990C0DC4310}",win32NameVersion:"Microsoft Visual Studio Code",win32DirName:"Microsoft VS Code",win32SetupExeBasename:"VSCodeSetup",win32AppUserModelId:"Microsoft.VisualStudioCode",win32ShellNameShort:"Code",win32MutexName:"vscode",win32RegValueName:"VSCode",darwinCredits:"resources/darwin/Credits.rtf",darwinBundleIdentifier:"com.microsoft.VSCode",darwinProfileUUID:"EBAE60D6-C8A2-4419-92FF-24F8AD5077AB",darwinProfilePayloadUUID:"C6B5723A-6539-4F31-8A4E-3CC96E51F48C",darwinExecutable:"VSCode",linuxIconName:"vscode",licenseFileName:"LICENSE.rtf",licenseName:"Multiple, see https://code.visualstudio.com/license",serverGreeting:[],serverLicense:["*","* Visual Studio Code Server","*","* By using the software, you agree to","* the Visual Studio Code Server License Terms (https://aka.ms/vscode-server-license) and","* the Microsoft Privacy Statement (https://privacy.microsoft.com/en-US/privacystatement).","*"],serverLicensePrompt:"Do you accept the terms in the License Agreement (Y/n)?",serverApplicationName:"code-server",urlProtocol:"vscode",dataFolderName:".vscode",serverDataFolderName:".vscode-server",downloadUrl:"https://code.visualstudio.com",updateUrl:"https://update.code.visualstudio.com",webUrl:"https://vscode.dev",webEndpointUrl:"https://main.vscode-cdn.net",webEndpointUrlTemplate:"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}",nlsCoreBaseUrl:"https://www.vscode-unpkg.net/nls/",webviewContentExternalBaseUrlTemplate:"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",quality:"stable",extensionsGallery:{nlsBaseUrl:"https://www.vscode-unpkg.net/_lp/",serviceUrl:"https://marketplace.visualstudio.com/_apis/public/gallery",itemUrl:"https://marketplace.visualstudio.com/items",publisherUrl:"https://marketplace.visualstudio.com/publishers",resourceUrlTemplate:"https://{publisher}.vscode-unpkg.net/{publisher}/{name}/{version}/{path}",extensionUrlTemplate:"https://www.vscode-unpkg.net/_gallery/{publisher}/{name}/latest",controlUrl:"https://main.vscode-cdn.net/extensions/marketplace.json",accessSKUs:["copilot_enterprise_seat","copilot_enterprise_seat_quota","copilot_enterprise_seat_multi_quota","copilot_enterprise_seat_assignment","copilot_enterprise_seat_assignment_quota","copilot_enterprise_seat_assignment_multi_quota","copilot_enterprise_trial_seat","copilot_enterprise_trial_seat_quota","copilot_for_business_seat","copilot_for_business_seat_quota","copilot_for_business_seat_multi_quota","copilot_for_business_seat_assignment","copilot_for_business_seat_assignment_quota","copilot_for_business_seat_assignment_multi_quota","copilot_for_business_trial_seat","copilot_for_business_trial_seat_quota"]},extensionProperties:{"github.copilot-chat":{hasPrereleaseVersion:!1,excludeVersionRange:"<=0.16.1"},"github.copilot":{hasPrereleaseVersion:!0}},defaultAccount:{authenticationProvider:{id:"github",enterpriseProviderId:"github-enterprise",enterpriseProviderConfig:"github.copilot.advanced.authProvider",scopes:["user:email"]},chatEntitlementUrl:"https://api.github.com/copilot_internal/user",tokenEntitlementUrl:"https://api.github.com/copilot_internal/v2/token"},profileTemplatesUrl:"https://main.vscode-cdn.net/core/profile-templates.json",extensionPublisherOrgs:["microsoft"],trustedExtensionPublishers:["microsoft","github"],extensionRecommendations:{"ms-dotnettools.csdevkit":{onFileOpen:[{pathGlob:"{**/*.cs,**/global.json,**/*.csproj,**/*.cshtml,**/*.sln}",important:!0},{languages:["csharp"],important:!0},{pathGlob:"{**/project.json,**/appsettings.json}"}]},"ms-python.python":{onFileOpen:[{pathGlob:"{**/*.py}",important:!0},{languages:["python"],important:!0},{pathGlob:"{**/*.ipynb}"}]},"ms-toolsai.jupyter":{onFileOpen:[{pathGlob:"{**/*.py}",contentPattern:"^#\\s*%%$",important:!0,whenInstalled:["ms-python.python"]},{pathGlob:"{**/*.ipynb}"}]},"ms-toolsai.datawrangler":{onFileOpen:[{pathGlob:"{**/*.ipynb}",contentPattern:"import\\s*pandas|from\\s*pandas",whenInstalled:["ms-toolsai.jupyter"]}]},"golang.Go":{onFileOpen:[{pathGlob:"**/*.go",important:!0},{languages:["go"],important:!0}]},"vscjava.vscode-java-pack":{onFileOpen:[{pathGlob:"{**/*.java}",important:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]},{languages:["java"],important:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}]},"ms-vscode.PowerShell":{onFileOpen:[{pathGlob:"{**/*.ps1,**/*.psd1,**/*.psm1}",important:!0},{languages:["powershell"],important:!0},{pathGlob:"{**/*.ps.config,**/*.ps1.config}"}]},"ms-toolsai.prompty":{onFileOpen:[{pathGlob:"{**/*.prompty}",important:!1}]},"typespec.typespec-vscode":{onFileOpen:[{pathGlob:"{**/*.tsp,**/tspconfig.yaml}",important:!0}]},"ms-vscode.cpptools-extension-pack":{onFileOpen:[{pathGlob:"{**/*.c,**/*.cpp,**/*.cc,**/.cxx,**/*.hh,**/*.hpp,**/*.hxx,**/*.h}",important:!0,whenNotInstalled:["llvm-vs-code-extensions.vscode-clangd"]},{languages:["c","cpp"],important:!0,whenNotInstalled:["llvm-vs-code-extensions.vscode-clangd"]}]},"ms-azuretools.vscode-containers":{onFileOpen:[{pathGlob:"{**/dockerfile,**/Dockerfile,**/docker-compose.yml,**/docker-compose.*.yml}",important:!0,whenNotInstalled:["ms-azuretools.vscode-docker"]},{languages:["dockerfile"],important:!0,whenNotInstalled:["ms-azuretools.vscode-docker"]},{pathGlob:"{**/*.cs,**/project.json,**/global.json,**/*.csproj,**/*.cshtml,**/*.sln,**/appsettings.json,**/*.py,**/*.ipynb,**/*.js,**/*.ts,**/package.json}",whenNotInstalled:["ms-azuretools.vscode-docker"]}]},"vue.volar":{onFileOpen:[{pathGlob:"{**/*.vue}",important:!0},{languages:["vue"],important:!0}]},"ms-vscode.makefile-tools":{onFileOpen:[{pathGlob:"{**/makefile,**/Makefile}",important:!0},{languages:["makefile"],important:!0}]},"ms-vscode.cmake-tools":{onFileOpen:[{pathGlob:"{**/CMakeLists.txt}",important:!0}]},"ms-azure-devops.azure-pipelines":{onFileOpen:[{pathGlob:"{**/azure-pipelines.yaml}",important:!0}]},"msazurermtools.azurerm-vscode-tools":{onFileOpen:[{pathGlob:"{**/azuredeploy.json}",important:!0}]},"ms-vscode-remote.remote-containers":{onFileOpen:[{pathGlob:"{**/devcontainer.json}",important:!0}]},"ms-azuretools.vscode-bicep":{onFileOpen:[{pathGlob:"{**/*.bicep}",important:!0,whenNotInstalled:["ms-azuretools.rad-vscode-bicep"]}]},"svelte.svelte-vscode":{onFileOpen:[{pathGlob:"{**/*.svelte}",important:!0}]},"ms-vscode.vscode-github-issue-notebooks":{onFileOpen:[{pathGlob:"{**/*.github-issues}",important:!0}]},"ms-playwright.playwright":{onFileOpen:[{pathGlob:"{**/*playwright*.config.ts,**/*playwright*.config.js,**/*playwright*.config.mjs}",important:!0}]},"vscjava.vscode-gradle":{onFileOpen:[{pathGlob:"{**/gradlew,**/gradlew.bat,**/build.gradle,**/build.gradle.kts,**/settings.gradle,**/settings.gradle.kts}",important:!0}]},"REditorSupport.r":{onFileOpen:[{pathGlob:"{**/*.r}",important:!0},{languages:["r"],important:!0}]},"firefox-devtools.vscode-firefox-debug":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.jsx,**/*.es6,**/.babelrc}"}]},"ms-edgedevtools.vscode-edge-devtools":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.css,**/*.html}"}]},"Ionide.Ionide-fsharp":{onFileOpen:[{pathGlob:"{**/*.fsx,**/*.fsi,**/*.fs,**/*.ml,**/*.mli}"}]},"dbaeumer.vscode-eslint":{onFileOpen:[{pathGlob:"{**/*.js,**/*.jsx,**/*.es6,**/.eslintrc.*,**/.eslintrc,**/.babelrc,**/jsconfig.json}"}]},"bmewburn.vscode-intelephense-client":{onFileOpen:[{pathGlob:"{**/*.php,**/php.ini}"}]},"xdebug.php-debug":{onFileOpen:[{pathGlob:"{**/*.php,**/php.ini}"}]},"rust-lang.rust-analyzer":{onFileOpen:[{pathGlob:"{**/*.rs,**/*.rslib}"}]},"DavidAnson.vscode-markdownlint":{onFileOpen:[{pathGlob:"{**/*.md}"}]},"EditorConfig.EditorConfig":{onFileOpen:[{pathGlob:"{**/.editorconfig}"}]},"HookyQR.beautify":{onFileOpen:[{pathGlob:"{**/.jsbeautifyrc}"}]},"donjayamanne.githistory":{onFileOpen:[{pathGlob:"{**/.gitignore,**/.git}"}]},"eamodio.gitlens":{onFileOpen:[{pathGlob:"{**/.gitignore,**/.git}"}]},"Shopify.ruby-lsp":{onFileOpen:[{pathGlob:"{**/*.rb,**/*.erb,**/*.reek,**/.fasterer.yml,**/ruby-lint.yml,**/.rubocop.yml}"}]},"swiftlang.swift-vscode":{onFileOpen:[{pathGlob:"{**/*.swift,**/*.swiftinterface}",important:!0}]},"DotJoshJohnson.xml":{onFileOpen:[{pathGlob:"{**/*.xml}"}]},"stylelint.vscode-stylelint":{onFileOpen:[{pathGlob:"{**/.stylelintrc,**/stylelint.config.js}"}]},"ms-mssql.mssql":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"mtxr.sqltools":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"usqlextpublisher.usql-vscode-ext":{onFileOpen:[{pathGlob:"{**/*.usql}"}]},"ms-vscode.sublime-keybindings":{onFileOpen:[{pathGlob:"{**/.sublime-project,**/.sublime-workspace}"}]},"k--kato.intellij-idea-keybindings":{onFileOpen:[{pathGlob:"{**/.idea}"}]},"christian-kohler.npm-intellisense":{onFileOpen:[{pathGlob:"{**/package.json}"}]},"cake-build.cake-vscode":{onFileOpen:[{pathGlob:"{**/build.cake}"}]},"Angular.ng-template":{onFileOpen:[{pathGlob:"{**/.angular-cli.json,**/angular.json,**/*.ng.html,**/*.ng,**/*.ngml}"}]},"vscjava.vscode-maven":{onFileOpen:[{pathGlob:"**/pom.xml"}]},"ms-azuretools.vscode-azureterraform":{onFileOpen:[{pathGlob:"**/*.tf"}]},"HashiCorp.terraform":{onFileOpen:[{pathGlob:"**/*.tf"}]},"vsciot-vscode.vscode-arduino":{onFileOpen:[{pathGlob:"**/*.ino"}]},"ms-kubernetes-tools.vscode-kubernetes-tools":{onFileOpen:[{pathGlob:"{**/Chart.yaml}"}]},"Oracle.oracledevtools":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"betterthantomorrow.calva":{onFileOpen:[{pathGlob:"{**/*.clj,**/*.cljs}"}]},"vmware.vscode-boot-dev-pack":{onFileOpen:[{pathGlob:"{**/application.properties}"}]},"GitHub.copilot":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.jsx,**/*.py,**/*.go,**/*.rb,**/*.html,**/*.css,**/*.php,**/*.cpp,**/*.vue,**/*.c,**/*.sql,**/*.java,**/*.cs,**/*.rs,**/*.dart,**/*.ps,**/*.ps1,**/*.tex}"}],onSettingsEditorOpen:{descriptionOverride:"GitHub Copilot is an AI pair programmer tool that helps you write code faster and smarter."}},"GitHub.vscode-github-actions":{onFileOpen:[{pathGlob:"{**/.github/workflows/*.yml}",important:!0}]},"circleci.circleci":{onFileOpen:[{pathGlob:"{**/.circleci/config.yml}"}]},"mechatroner.rainbow-csv":{onFileOpen:[{pathGlob:"**/*.csv",important:!0}]},"tomoki1207.pdf":{onFileOpen:[{pathGlob:"**/*.pdf",important:!0}]},"Redis.redis-for-vscode":{onFileOpen:[{pathGlob:"{**/redis.*,**/redis-server.*,**/redis_*,**/redisinsight.*}",important:!0}]},"SonarSource.sonarlint-vscode":{onFileOpen:[{pathGlob:"{**/sonar-project.properties,**/sonarcloud.properties,**/sonarlint.*}",important:!0}]}},keymapExtensionTips:["vscodevim.vim","ms-vscode.sublime-keybindings","ms-vscode.atom-keybindings","ms-vscode.brackets-keybindings","ms-vscode.vs-keybindings","ms-vscode.notepadplusplus-keybindings","k--kato.intellij-idea-keybindings","lfs.vscode-emacs-friendly","alphabotsec.vscode-eclipse-keybindings","alefragnani.delphi-keybindings"],languageExtensionTips:["ms-python.python","ms-vscode.cpptools-extension-pack","ms-dotnettools.csdevkit","ms-toolsai.jupyter","vscjava.vscode-java-pack","ecmel.vscode-html-css","vue.volar","bmewburn.vscode-intelephense-client","dsznajder.es7-react-js-snippets","golang.go","ms-vscode.powershell","dart-code.dart-code","rust-lang.rust-analyzer","Shopify.ruby-lsp","GitHub.copilot"],configBasedExtensionTips:{git:{configPath:".git/config",configName:"Git",recommendations:{"github.vscode-pull-request-github":{name:"GitHub Pull Request",contentPattern:"^\\s*url\\s*=\\s*https:\\/\\/github\\.com.*$"},"eamodio.gitlens":{name:"GitLens"}}},devContainer:{configPath:".devcontainer/devcontainer.json",configName:"Dev Container",recommendations:{"ms-vscode-remote.remote-containers":{name:"Dev Containers",important:!0}}},maven:{configPath:"pom.xml",configName:"Maven",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]},"vmware.vscode-boot-dev-pack":{name:"Spring Boot Extension Pack",isExtensionPack:!0}}},gradle:{configPath:"build.gradle",configName:"Gradle",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},"github-pull-request":{configPath:".vscode/.github-pull-request.rec",configName:"GitHub",configScheme:"vscode-vfs",recommendations:{"github.vscode-pull-request-github":{name:"GitHub Pull Request",important:!0}}},"pyproject-formatter":{configPath:"pyproject.toml",configName:"Python Formatter",recommendations:{"ms-python.black-formatter":{name:"Black Formatter",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?black"?\\s*[\\].])|("black\\s*["[(<=>!~;@])'},"ms-python.autopep8":{name:"Autopep8",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?autopep8"?\\s*[\\].])|("autopep8\\s*["[(<=>!~;@])'}}},"pep8-formatter":{configPath:".pep8",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8"}}},"python-setup-cgf-formatter":{configPath:"setup.cfg",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8",contentPattern:"^\\[pep8\\]"}}},"tox-ini-formatter":{configPath:"tox.ini",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8",contentPattern:"^\\[pep8\\]"}}},"pyproject-linter":{configPath:"pyproject.toml",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?pylint"?\\s*[\\].])|("pylint\\s*["[(<=>!~;@])'},"charliermarsh.ruff":{name:"Ruff",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?ruff"?\\s*[\\].])|("ruff\\s*["[(<=>!~;@])'},"ms-python.mypy-type-checker":{name:"Mypy Type Checker",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?mypy"?\\s*[\\].])|("mypy\\s*["[(<=>!~;@])'},"ms-python.flake8":{name:"Flake8",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?flake8"?\\s*[\\].])|("flake8\\s*["[(<=>!~;@])'}}},".pylintrc-linter":{configPath:".pylintrc",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint"}}},"pylintrc-linter":{configPath:"pylintrc",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint"}}},"mypy-ini-linter":{configPath:".mypy.ini",configName:"Python Linter",recommendations:{"ms-python.mypy-type-checker":{name:"Mypy Type Checker"}}},"tox-ini-linter":{configPath:"tox.ini",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8",contentPattern:"^\\[flake8\\]"}}},".flake8-linter":{configPath:".flake8",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8"}}},"python-setup-cgf-linter":{configPath:"setup.cfg",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8",contentPattern:"^\\[flake8\\]"}}}},exeBasedExtensionTips:{az:{friendlyName:"Azure CLI",windowsPath:"%ProgramFiles(x86)%\\Microsoft SDKs\\Azure\\CLI2\\wbin\\az.cmd",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"},"ms-azuretools.vscode-azure-github-copilot":{name:"GitHub Copilot for Azure"}}},azd:{friendlyName:"Azure Dev CLI",windowsPath:"%USERPROFILE%\\AppData\\Local\\Programs\\Azure Dev CLI\\azd.exe",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"},"ms-azuretools.vscode-azure-github-copilot":{name:"GitHub Copilot for Azure"}}},"azd-user":{friendlyName:"Azure Dev CLI",windowsPath:"%ProgramFiles%\\Azure Dev CLI\\azd.exe",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"},"ms-azuretools.vscode-azure-github-copilot":{name:"GitHub Copilot for Azure"}}},"azure-powershell":{friendlyName:"Azure PowerShell",windowsPath:"%USERPROFILE%\\.Azure",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"}}},heroku:{friendlyName:"Heroku CLI",windowsPath:"%ProgramFiles%\\Heroku\\bin\\heroku.cmd",recommendations:{"ms-azuretools.vscode-azureappservice":{name:"Azure App Service"},"pkosta2005.heroku-command":{name:"heroku-cli"}}},mongo:{friendlyName:"Mongo",windowsPath:"%ProgramFiles%\\MongoDB\\Server\\3.6\\bin\\mongod.exe",recommendations:{"ms-azuretools.vscode-cosmosdb":{name:"Azure Databases"}}},serverless:{friendlyName:"Serverless framework",windowsPath:"%APPDATA%\\npm\\serverless.cmd",recommendations:{"ms-azuretools.vscode-azurefunctions":{name:"Azure Functions"}}},func:{friendlyName:"Azure Function SDK",windowsPath:"%APPDATA%\\npm\\func.cmd",recommendations:{"ms-azuretools.vscode-azurefunctions":{name:"Azure Functions"}}},mysql:{friendlyName:"MySQL",windowsPath:"%ProgramFiles%\\MySQL\\MySQL Server 8.0\\bin\\mysqld.exe",recommendations:{"mtxr.sqltools":{name:"SQLTools"}}},postgres:{friendlyName:"PostgreSQL",windowsPath:"%ProgramFiles%\\PostgreSQL\\11\\bin\\psql.exe",recommendations:{"ms-ossdata.vscode-postgresql":{name:"PostgreSQL"},"mtxr.sqltools":{name:"SQLTools"}}},sqlcmd:{friendlyName:"SQL CLI",recommendations:{"ms-mssql.mssql":{name:"SQL Server (mssql)"}}},now:{friendlyName:"Now CLI",windowsPath:"%APPDATA%\\npm\\now.cmd",recommendations:{"ms-azuretools.vscode-azureappservice":{name:"Azure App Service"},"ms-azuretools.vscode-containers":{name:"Docker"}}},docker:{friendlyName:"Docker",windowsPath:"%ProgramFiles%\\Docker\\Docker\\Resources\\bin\\docker.exe",recommendations:{"ms-azuretools.vscode-containers":{name:"Docker",important:!0,whenNotInstalled:["ms-azuretools.vscode-docker"]},"ms-vscode-remote.remote-containers":{name:"Dev Containers",important:!0},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"}}},kubectl:{friendlyName:"Kubernetes",windowsPath:"%ProgramFiles%\\Docker\\Docker\\Resources\\bin\\kubectl.exe",recommendations:{"ms-azuretools.vscode-containers":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"},"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},ng:{friendlyName:"Angular CLI",windowsPath:"%APPDATA%\\npmexit\\ng.cmd",recommendations:{"johnpapa.Angular2":{name:"Angular Snippets"}}},"create-react-app":{friendlyName:"Create React App",windowsPath:"%APPDATA%\\npm\\create-react-app.cmd",recommendations:{"msjsdiag.vscode-react-native":{name:"React Native Tools"}}},"react-native":{friendlyName:"React Native",windowsPath:"%APPDATA%\\npm\\react-native-cli",recommendations:{"msjsdiag.vscode-react-native":{name:"React Native Tools"}}},p4:{friendlyName:"Perforce",recommendations:{"slevesque.perforce":{name:"Perforce for VS Code"}}},hg:{friendlyName:"Mercurial",recommendations:{"mrcrowl.hg":{name:"Hg"}}},git:{friendlyName:"Git",windowsPath:"%ProgramFiles%\\Git\\git-bash.exe",recommendations:{"eamodio.gitlens":{name:"GitLens"}}},svn:{friendlyName:"Subversion",windowsPath:"%ProgramFiles%\\TortoiseSVN\\bin\\TortoiseProc.exe",recommendations:{"johnstoncode.svn-scm":{name:"SVN"}}},subl:{friendlyName:"Sublime",windowsPath:"%ProgramFiles%\\Sublime Text3\\sublime_text.exe",recommendations:{"ms-vscode.sublime-keybindings":{name:"Sublime Text Keymap and Settings Importer"}}},atom:{friendlyName:"Atom",windowsPath:"%USERPROFILE%\\AppData\\Local\\atom\\bin\\atom.cmd",recommendations:{"ms-vscode.atom-keybindings":{name:"Atom Keymap"}}},brackets:{friendlyName:"Brackets",windowsPath:"%ProgramFiles(x86)%\\Brackets\\Brackets.exe",recommendations:{"ms-vscode.brackets-keybindings":{name:"Brackets Keymap"}}},notepadplusplus:{friendlyName:"Notepad++",windowsPath:"%ProgramFiles%\\Notepad++\\Notepad++.exe",recommendations:{"ms-vscode.notepadplusplus-keybindings":{name:"Notepad++ keymap"}}},vi:{friendlyName:"VIM",windowsPath:"%ProgramFiles(x86)%\\Vim\\vim80\\gvim.exe",recommendations:{"vscodevim.vim":{name:"Vim"}}},mvn:{friendlyName:"Maven",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},gradle:{friendlyName:"Gradle",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},ollama:{friendlyName:"Ollama",windowsPath:"%USERPROFILE%\\AppData\\Local\\Programs\\Ollama\\ollama.exe",recommendations:{"ms-windows-ai-studio.windows-ai-studio":{name:"AI Toolkit for Visual Studio Code"}}},"Microsoft Edge":{friendlyName:"Microsoft Edge",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Dev":{friendlyName:"Microsoft Edge Dev",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge Dev\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Beta":{friendlyName:"Microsoft Edge Beta",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge Beta\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Canary":{friendlyName:"Microsoft Edge Canary",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge SxS\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Mozilla Firefox (x86)":{friendlyName:"Mozilla Firefox",windowsPath:"%ProgramFiles(x86)%\\Mozilla Firefox\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox Developer Edition (x86)":{friendlyName:"Mozilla Firefox Developer Edition",windowsPath:"%ProgramFiles(x86)%\\Firefox Developer Edition\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox":{friendlyName:"Mozilla Firefox",windowsPath:"%ProgramFiles%\\Mozilla Firefox\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox Developer Edition":{friendlyName:"Mozilla Firefox Developer Edition",windowsPath:"%ProgramFiles%\\Firefox Developer Edition\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},cordova:{friendlyName:"Cordova",windowsPath:"%APPDATA%\\npm\\cordova",recommendations:{"msjsdiag.cordova-tools":{name:"Cordova Tools"}}},gcloud:{friendlyName:"Google GCloud CLI",windowsPath:"%ProgramFiles(x86)%\\Google\\Cloud SDK\\google-cloud-sdk\\bin\\gcloud.cmd",recommendations:{"GoogleCloudTools.cloudcode":{name:"Cloud Code"}}},skaffold:{friendlyName:"Skaffold Code to Cluster",recommendations:{"ms-azuretools.vscode-containers":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"}}},minikube:{friendlyName:"MiniKube Local Kubernetes Cluster",recommendations:{"ms-azuretools.vscode-containers":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"},"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},podman:{friendlyName:"Podman",recommendations:{"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},wsl:{friendlyName:"Windows Subsystem for Linux (WSL)",windowsPath:"%WINDIR%\\system32\\lxss\\LxssManager.dll",recommendations:{"ms-vscode-remote.remote-wsl":{name:"WSL"}}}},webExtensionTips:["tyriar.luna-paint","codespaces-contrib.codeswing","ms-vscode.vscode-github-issue-notebooks","esbenp.prettier-vscode","hediet.vscode-drawio"],virtualWorkspaceExtensionTips:{"vscode-vfs":{friendlyName:"Remote Repositories",extensionId:"ms-vscode.remote-repositories",startEntry:{helpLink:"https://aka.ms/vscode-remote/remote-repositories",startConnectLabel:"Remote Repository",startCommand:"remoteHub.continueOn.openRepository",priority:5}}},remoteExtensionTips:{wsl:{friendlyName:"WSL",extensionId:"ms-vscode-remote.remote-wsl",supportedPlatforms:["Windows","Web"],startEntry:{helpLink:"https://aka.ms/vscode-remote/wsl",startConnectLabel:"WSL",startCommand:"remote-wsl.connect",priority:3}},"ssh-remote":{friendlyName:"Remote - SSH",extensionId:"ms-vscode-remote.remote-ssh",supportedPlatforms:["Windows","Linux","Mac"],startEntry:{helpLink:"https://aka.ms/vscode-remote/ssh",startConnectLabel:"SSH ",startCommand:"opensshremotes.openEmptyWindowInCurrentWindow",priority:1}},"dev-container":{friendlyName:"Dev Containers",extensionId:"ms-vscode-remote.remote-containers",supportedPlatforms:["Windows","Linux","Mac"],startEntry:{helpLink:"https://aka.ms/vscode-remote/containers",startConnectLabel:"Dev Container",startCommand:"remote-containers.reopenInContainer",priority:2}},"attached-container":{friendlyName:"Dev Containers",extensionId:"ms-vscode-remote.remote-containers"},codespaces:{friendlyName:"GitHub Codespaces",extensionId:"github.codespaces",startEntry:{helpLink:"https://aka.ms/vscode-remote-codespaces",startConnectLabel:"GitHub Codespace ",startCommand:"github.codespaces.connect",priority:4}},tunnel:{friendlyName:"Remote - Tunnels",extensionId:"ms-vscode.remote-server",startEntry:{helpLink:"https://aka.ms/remote-tunnels-doc",startConnectLabel:"Tunnel",startCommand:"remote-tunnels.connectCurrentWindowToTunnel",priority:0}}},commandPaletteSuggestedCommandIds:["workbench.action.files.openFile","workbench.action.files.openFileFolder","workbench.action.files.openFolder","workbench.action.remote.showMenu","editor.action.formatDocument","editor.action.commentLine","workbench.action.tasks.runTask","workbench.action.openSettings2","workbench.action.selectTheme","workbench.action.openWalkthrough","workbench.action.openIssueReporter"],extensionKeywords:{md:["Markdown"],js:["JavaScript"],jsx:["JavaScript"],es6:["JavaScript"],html:["Html"],ts:["TypeScript"],tsx:["TypeScript"],css:["CSS"],scss:["SASS"],txt:["Text"],php:["PHP"],php3:["PHP"],php4:["PHP"],ph3:["PHP"],ph4:["PHP"],xml:["XML"],py:["Python"],pyc:["Python"],pyd:["Python"],pyo:["Python"],pyw:["Python"],pyz:["Python"],java:["Java"],class:["Java"],jar:["Java"],c:["c","objective c","objective-c"],m:["objective c","objective-c"],mm:["objective c","objective-c"],cpp:["cpp","c plus plus","c","c++"],cc:["cpp","c plus plus","c","c++"],cxx:["cpp","c plus plus","c++"],hh:["cpp","c plus plus","c++"],hpp:["cpp","c++"],h:["cpp","c plus plus","c++","c","objective c","objective-c"],sql:["sql"],sh:["bash"],bash:["bash"],zsh:["bash","zshell"],cs:["c#","csharp"],csproj:["c#","csharp"],sln:["c#","csharp"],go:["go"],sty:["latex"],tex:["latex"],ps:["powershell"],ps1:["powershell"],rs:["rust"],rslib:["rust"],hs:["haskell"],lhs:["haskell"],scm:["scheme"],ss:["scheme"],clj:["clojure"],cljs:["clojure"],cljc:["clojure"],edn:["clojure"],erl:["erlang"],hrl:["erlang"],scala:["scala"],sc:["scala"],pl:["perl"],pm:["perl"],t:["perl"],pod:["perl"],groovy:["groovy"],swift:["swift"],rb:["ruby"],rbw:["ruby"],jl:["julia"],f:["fortran"],for:["fortran"],f90:["fortran"],f95:["fortran"],coffee:["CoffeeScript"],litcoffee:["CoffeeScript"],yaml:["yaml"],yml:["yaml"],dart:["dart"],json:["json"]},extensionAllowedBadgeProviders:["api.travis-ci.com","app.fossa.io","badge.buildkite.com","badge.fury.io","badgen.net","badges.frapsoft.com","badges.gitter.im","cdn.travis-ci.com","ci.appveyor.com","circleci.com","cla.opensource.microsoft.com","codacy.com","codeclimate.com","codecov.io","coveralls.io","david-dm.org","deepscan.io","dev.azure.com","docs.rs","flat.badgen.net","gitlab.com","godoc.org","goreportcard.com","img.shields.io","isitmaintained.com","marketplace.visualstudio.com","nodesecurity.io","opencollective.com","snyk.io","travis-ci.com","travis-ci.org","visualstudio.com","vsmarketplacebadge.apphb.com"],extensionAllowedBadgeProvidersRegex:["^https:\\/\\/github\\.com\\/[^/]+\\/[^/]+\\/(actions\\/)?workflows\\/.*badge\\.svg"],crashReporter:{productName:"VSCode",companyName:"Microsoft"},appCenter:{"win32-x64":"appcenter://code?aid=a4e3233c-699c-46ec-b4f4-9c2a77254662","win32-arm64":"appcenter://code?aid=3712d786-7cc8-4f11-8b08-cc12eab6d4f7","linux-x64":"appcenter://code?aid=fba07a4d-84bd-4fc8-a125-9640fc8ce171",darwin:"appcenter://code?aid=860d6632-f65b-490b-85a8-3e72944f7774","darwin-arm64":"appcenter://code?aid=be71415d-3893-4ae5-b453-e537b9668a10","darwin-universal":"appcenter://code?aid=de75e3cc-e22f-4f42-a03f-1409c21d8af8"},enableTelemetry:!0,aiConfig:{ariaKey:"5bbf946d11a54f6783919c455abaddaf-fd62977b-c92d-4714-a45d-649d06980372-7168"},msftInternalDomains:["redmond.corp.microsoft.com","northamerica.corp.microsoft.com","fareast.corp.microsoft.com","ntdev.corp.microsoft.com","wingroup.corp.microsoft.com","southpacific.corp.microsoft.com","wingroup.windeploy.ntdev.microsoft.com","ddnet.microsoft.com","europe.corp.microsoft.com"],documentationUrl:"https://go.microsoft.com/fwlink/?LinkID=533484#vscode",serverDocumentationUrl:"https://aka.ms/vscode-server-doc",releaseNotesUrl:"https://go.microsoft.com/fwlink/?LinkID=533483#vscode",keyboardShortcutsUrlMac:"https://go.microsoft.com/fwlink/?linkid=832143",keyboardShortcutsUrlLinux:"https://go.microsoft.com/fwlink/?linkid=832144",keyboardShortcutsUrlWin:"https://go.microsoft.com/fwlink/?linkid=832145",introductoryVideosUrl:"https://go.microsoft.com/fwlink/?linkid=832146",tipsAndTricksUrl:"https://go.microsoft.com/fwlink/?linkid=852118",newsletterSignupUrl:"https://www.research.net/r/vsc-newsletter",youTubeUrl:"https://aka.ms/vscode-youtube",requestFeatureUrl:"https://go.microsoft.com/fwlink/?LinkID=533482",reportIssueUrl:"https://github.com/Microsoft/vscode/issues/new",reportMarketplaceIssueUrl:"https://github.com/microsoft/vsmarketplace/issues/new",licenseUrl:"https://go.microsoft.com/fwlink/?LinkID=533485",serverLicenseUrl:"https://aka.ms/vscode-server-license",privacyStatementUrl:"https://go.microsoft.com/fwlink/?LinkId=521839",showTelemetryOptOut:!0,npsSurveyUrl:"https://aka.ms/vscode-nps",checksumFailMoreInfoUrl:"https://go.microsoft.com/fwlink/?LinkId=828886",electronRepository:"Microsoft/vscode-electron-prebuilt",nodejsRepository:"Microsoft/vscode-node",settingsSearchUrl:"https://bingsettingssearch.trafficmanager.net/api/Search",surveys:[{surveyId:"cpp.1",surveyUrl:"https://www.research.net/r/VBVV6C6",languageId:"cpp",editCount:10,userProbability:.15},{surveyId:"java.2",surveyUrl:"https://www.research.net/r/vscodejava",languageId:"java",editCount:10,userProbability:.3},{surveyId:"javascript.1",surveyUrl:"https://www.research.net/r/vscode-js",languageId:"javascript",editCount:10,userProbability:.05},{surveyId:"typescript.1",surveyUrl:"https://www.research.net/r/vscode-ts",languageId:"typescript",editCount:10,userProbability:.05},{surveyId:"csharp.1",surveyUrl:"https://www.research.net/r/8KGJ9V8",languageId:"csharp",editCount:10,userProbability:.1}],extensionsEnabledWithApiProposalVersion:["GitHub.copilot-chat","ms-vscode.vscode-commander","ms-vscode.vscode-copilot-vision"],extensionEnabledApiProposals:{"ms-azuretools.vscode-dev-azurecloudshell":["contribEditSessions"],"ms-vscode.vscode-selfhost-test-provider":["testObserver","testRelatedCode"],"VisualStudioExptTeam.vscodeintellicode-completions":["inlineCompletionsAdditions"],"ms-vsliveshare.vsliveshare":["contribMenuBarHome","contribShareMenu","contribStatusBarItems","diffCommand","documentFiltersExclusive","fileSearchProvider","findTextInFiles","notebookCellExecutionState","notebookLiveShare","terminalDimensions","terminalDataWriteEvent","textSearchProvider"],"ms-vscode.js-debug":["portsAttributes","findTextInFiles","workspaceTrust","tunnels"],"ms-toolsai.vscode-ai-remote":["resolvers"],"ms-python.python":["codeActionAI","contribEditorContentMenu","quickPickSortByLabel","portsAttributes","testObserver","quickPickItemTooltip","terminalDataWriteEvent","terminalExecuteCommandEvent","notebookReplDocument","notebookVariableProvider","terminalShellEnv"],"ms-python.vscode-python-envs":["terminalShellEnv"],"ms-dotnettools.dotnet-interactive-vscode":["notebookMessaging"],"GitHub.codespaces":["contribEditSessions","contribMenuBarHome","contribRemoteHelp","contribViewsRemote","resolvers","tunnels","terminalDataWriteEvent","treeViewReveal","notebookKernelSource"],"ms-vscode.azure-repos":["extensionRuntime","fileSearchProvider","textSearchProvider"],"ms-vscode.remote-repositories":["canonicalUriProvider","contribEditSessions","contribRemoteHelp","contribMenuBarHome","contribViewsRemote","contribViewsWelcome","contribShareMenu","documentFiltersExclusive","editSessionIdentityProvider","extensionRuntime","fileSearchProvider","quickPickSortByLabel","workspaceTrust","shareProvider","scmActionButton","scmSelectedProvider","scmValidation","textSearchProvider","timeline"],"ms-vscode-remote.remote-wsl":["resolvers","contribRemoteHelp","contribViewsRemote","telemetry"],"ms-vscode-remote.remote-ssh":["resolvers","tunnels","terminalDataWriteEvent","contribRemoteHelp","contribViewsRemote","telemetry"],"ms-vscode.remote-server":["resolvers","tunnels","contribViewsWelcome"],"ms-vscode.remote-explorer":["contribRemoteHelp","contribViewsRemote","extensionsAny"],"ms-vscode-remote.remote-containers":["contribEditSessions","resolvers","portsAttributes","tunnels","workspaceTrust","terminalDimensions","contribRemoteHelp","contribViewsRemote"],"ms-vscode.js-debug-nightly":["portsAttributes","findTextInFiles","workspaceTrust","tunnels"],"ms-vscode.lsif-browser":["documentFiltersExclusive"],"ms-vscode.vscode-speech":["speech"],"GitHub.vscode-pull-request-github":["activeComment","codiconDecoration","codeActionRanges","commentingRangeHint","commentReactor","commentReveal","commentThreadApplicability","contribAccessibilityHelpContent","contribCommentEditorActionsMenu","contribCommentPeekContext","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","contribEditorContentMenu","contribMultiDiffEditorMenus","contribShareMenu","diffCommand","quickDiffProvider","shareProvider","tabInputTextMerge","tokenInformation","treeViewMarkdownMessage"],"GitHub.copilot":["inlineCompletionsAdditions"],"GitHub.copilot-nightly":["inlineCompletionsAdditions"],"GitHub.copilot-chat":["interactive","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","chatParticipantAdditions","defaultChatParticipant","embeddings","chatEditing","chatProvider","mappedEditsProvider","aiRelatedInformation","aiSettingsSearch","codeActionAI","findTextInFiles","findTextInFiles2","textSearchProvider","textSearchProvider2","activeComment","commentReveal","contribSourceControlInputBoxMenu","contribCommentEditorActionsMenu","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","newSymbolNamesProvider","findFiles2","chatReferenceDiagnostic","extensionsAny","authLearnMore","testObserver","aiTextSearchProvider","documentFiltersExclusive","chatParticipantPrivate","contribDebugCreateConfiguration","inlineEdit","inlineCompletionsAdditions","chatReferenceBinaryData","languageModelSystem","languageModelCapabilities","languageModelDataPart","chatStatusItem","taskProblemMatcherStatus","contribLanguageModelToolSets"],"GitHub.remotehub":["contribRemoteHelp","contribMenuBarHome","contribViewsRemote","contribViewsWelcome","documentFiltersExclusive","extensionRuntime","fileSearchProvider","quickPickSortByLabel","workspaceTrust","scmSelectedProvider","scmValidation","textSearchProvider","timeline"],"ms-python.gather":["notebookCellExecutionState"],"ms-python.vscode-pylance":["mcpConfigurationProvider","terminalShellEnv"],"ms-python.debugpy":["contribViewsWelcome","debugVisualization","portsAttributes"],"ms-toolsai.jupyter-renderers":["contribNotebookStaticPreloads"],"ms-toolsai.jupyter":["notebookDeprecated","notebookMessaging","notebookMime","portsAttributes","quickPickSortByLabel","notebookKernelSource","interactiveWindow","notebookControllerAffinityHidden","contribNotebookStaticPreloads","quickPickItemTooltip","notebookExecution","notebookCellExecution","notebookVariableProvider","notebookReplDocument"],"donjayamanne.kusto":["notebookVariableProvider"],"ms-toolsai.tensorboard":["portsAttributes"],"dbaeumer.vscode-eslint":[],"ms-vscode.azure-sphere-tools-ui":["tunnels"],"ms-azuretools.vscode-azureappservice":["terminalDataWriteEvent"],"ms-vscode.anycode":["extensionsAny"],"ms-vscode.cpptools":["terminalDataWriteEvent","chatParticipantAdditions"],"vscjava.vscode-java-pack":[],"ms-dotnettools.csdevkit":["inlineCompletionsAdditions"],"ms-dotnettools.vscodeintellicode-csharp":["inlineCompletionsAdditions"],"microsoft-IsvExpTools.powerplatform-vscode":["fileSearchProvider","textSearchProvider"],"microsoft-IsvExpTools.powerplatform-vscode-preview":["fileSearchProvider","textSearchProvider"],"TeamsDevApp.ms-teams-vscode-extension":["chatParticipantAdditions","languageModelSystem"],"ms-toolsai.datawrangler":[],"ms-vscode.vscode-commander":[],"ms-vscode.vscode-websearchforcopilot":[],"ms-vscode.vscode-copilot-vision":["chatReferenceBinaryData","codeActionAI"],"ms-autodev.vscode-autodev":["chatParticipantAdditions"]},tasConfig:{endpoint:"https://default.exp-tas.com/vscode/ab",telemetryEventName:"query-expfeature",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext"},extensionKind:{"Shan.code-settings-sync":["ui"],"shalldie.background":["ui"],"techer.open-in-browser":["ui"],"CoenraadS.bracket-pair-colorizer-2":["ui"],"CoenraadS.bracket-pair-colorizer":["ui","workspace"],"hiro-sun.vscode-emacs":["ui","workspace"],"hnw.vscode-auto-open-markdown-preview":["ui","workspace"],"wayou.vscode-todo-highlight":["ui","workspace"],"aaron-bond.better-comments":["ui","workspace"],"vscodevim.vim":["ui"],"ollyhayes.colmak-vim":["ui"]},extensionPointExtensionKind:{typescriptServerPlugins:["workspace"]},extensionSyncedKeys:{"ritwickdey.liveserver":["liveServer.setup.version"]},extensionVirtualWorkspacesSupport:{"esbenp.prettier-vscode":{default:!1},"msjsdiag.debugger-for-chrome":{default:!1},"redhat.java":{default:!1},"HookyQR.beautify":{default:!1},"ritwickdey.LiveServer":{default:!1},"VisualStudioExptTeam.vscodeintellicode":{default:!1},"octref.vetur":{default:!1},"formulahendry.code-runner":{default:!1},"xdebug.php-debug":{default:!1},"ms-mssql.mssql":{default:!1},"christian-kohler.path-intellisense":{default:!1},"eg2.tslint":{default:!1},"eg2.vscode-npm-script":{default:!1},"donjayamanne.githistory":{default:!1},"Zignd.html-css-class-completion":{default:!1},"christian-kohler.npm-intellisense":{default:!1},"EditorConfig.EditorConfig":{default:!1},"austin.code-gnu-global":{default:!1},"johnpapa.Angular2":{default:!1},"ms-vscode.vscode-typescript-tslint-plugin":{default:!1},"DotJoshJohnson.xml":{default:!1},"techer.open-in-browser":{default:!1},"tht13.python":{default:!1},"bmewburn.vscode-intelephense-client":{default:!1},"Angular.ng-template":{default:!1},"xdebug.php-pack":{default:!1},"dbaeumer.jshint":{default:!1},"yzhang.markdown-all-in-one":{default:!1},"Dart-Code.flutter":{default:!1},"streetsidesoftware.code-spell-checker":{default:!1},"rebornix.Ruby":{default:!1},"ms-vscode.sublime-keybindings":{default:!1},"mitaki28.vscode-clang":{default:!1},"steoates.autoimport":{default:!1},"donjayamanne.python-extension-pack":{default:!1},"shd101wyy.markdown-preview-enhanced":{default:!1},"mikestead.dotenv":{default:!1},"pranaygp.vscode-css-peek":{default:!1},"ikappas.phpcs":{default:!1},"platformio.platformio-ide":{default:!1},"jchannon.csharpextensions":{default:!1},"gruntfuggly.todo-tree":{default:!1}},linkProtectionTrustedDomains:["https://*.visualstudio.com","https://*.microsoft.com","https://aka.ms","https://*.gallerycdn.vsassets.io","https://*.github.com","https://login.microsoftonline.com","https://*.vscode.dev","https://*.github.dev","https://gh.io","https://portal.azure.com","https://raw.githubusercontent.com","https://private-user-images.githubusercontent.com","https://avatars.githubusercontent.com"],trustedExtensionAuthAccess:{github:["vscode.github","github.remotehub","ms-vscode.remote-server","github.vscode-pull-request-github","github.codespaces","github.copilot","github.copilot-chat","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azure-github-copilot"],"github-enterprise":["vscode.github","github.remotehub","ms-vscode.remote-server","github.vscode-pull-request-github","github.codespaces","github.copilot","github.copilot-chat","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azure-github-copilot"],microsoft:["ms-vscode.azure-repos","ms-vscode.remote-server","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azure-github-copilot","ms-azuretools.vscode-azureresourcegroups","ms-azuretools.vscode-dev-azurecloudshell","ms-edu.vscode-learning","ms-toolsai.vscode-ai","ms-toolsai.vscode-ai-remote"],"microsoft-sovereign-cloud":["ms-vscode.azure-repos","ms-vscode.remote-server","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azure-github-copilot","ms-azuretools.vscode-azureresourcegroups","ms-azuretools.vscode-dev-azurecloudshell","ms-edu.vscode-learning","ms-toolsai.vscode-ai","ms-toolsai.vscode-ai-remote"],"__GitHub.copilot-chat":["ms-azuretools.vscode-azure-github-copilot","github.vscode-pull-request-github"]},trustedExtensionProtocolHandlers:["vscode.git","vscode.github-authentication","vscode.microsoft-authentication"],inheritAuthAccountPreference:{"github.copilot":["github.copilot-chat"]},auth:{loginUrl:"https://login.microsoftonline.com/common/oauth2/authorize",tokenUrl:"https://login.microsoftonline.com/common/oauth2/token",redirectUrl:"https://vscode-redirect.azurewebsites.net/",clientId:"aebc6443-996d-45c2-90f0-388ff96faa56"},"configurationSync.store":{url:"https://vscode-sync.trafficmanager.net/",stableUrl:"https://vscode-sync.trafficmanager.net/",insidersUrl:"https://vscode-sync-insiders.trafficmanager.net/",canSwitch:!1,authenticationProviders:{github:{scopes:["user:email"]},microsoft:{scopes:["openid","profile","email","offline_access"]}}},"editSessions.store":{url:"https://vscode-sync.trafficmanager.net/",authenticationProviders:{microsoft:{scopes:["openid","profile","email","offline_access"]},github:{scopes:["user:email"]}}},tunnelServerQualities:{stable:{serverApplicationName:"code-server"},exploration:{serverApplicationName:"code-server-exploration"},insider:{serverApplicationName:"code-server-insiders"}},tunnelApplicationName:"code-tunnel",tunnelApplicationConfig:{editorWebUrl:"https://vscode.dev",extension:{friendlyName:"Remote - Tunnels",extensionId:"ms-vscode.remote-server"},authenticationProviders:{github:{scopes:["user:email","read:org"]},microsoft:{scopes:["46da2f7e-b5ef-422a-88d4-2a7f9de6a0b2/.default","profile","openid"]}}},win32TunnelServiceMutex:"vscode-tunnelservice",win32TunnelMutex:"vscode-tunnel",commonlyUsedSettings:["editor.fontSize","editor.formatOnSave","files.autoSave","GitHub.copilot.manageExtension","editor.defaultFormatter","editor.fontFamily","editor.wordWrap","files.exclude","workbench.colorTheme","editor.tabSize","editor.mouseWheelZoom","editor.formatOnPaste"],aiGeneratedWorkspaceTrust:{title:"This workspace was generated by GitHub Copilot",checkboxText:"Trust the contents of all files in this workspace",trustOption:"Yes, I trust the contents",dontTrustOption:"No, I don't trust the contents",startupTrustRequestLearnMore:"If you don't trust the contents of the files generated by GitHub Copilot, we recommend continuing in restricted mode. See [our docs](https://aka.ms/vscode-workspace-trust) to learn more. "},defaultChatAgent:{extensionId:"GitHub.copilot",chatExtensionId:"GitHub.copilot-chat",documentationUrl:"https://aka.ms/github-copilot-overview",termsStatementUrl:"https://aka.ms/github-copilot-terms-statement",privacyStatementUrl:"https://aka.ms/github-copilot-privacy-statement",skusDocumentationUrl:"https://aka.ms/github-copilot-plans",publicCodeMatchesUrl:"https://aka.ms/github-copilot-match-public-code",manageSettingsUrl:"https://aka.ms/github-copilot-settings",managePlanUrl:"https://aka.ms/github-copilot-manage-plan",manageOverageUrl:"https://aka.ms/github-copilot-manage-overage",upgradePlanUrl:"https://aka.ms/github-copilot-upgrade-plan",signUpUrl:"https://aka.ms/github-sign-up",providerId:"github",providerName:"GitHub",enterpriseProviderId:"github-enterprise",enterpriseProviderName:"GHE.com",providerUriSetting:"github-enterprise.uri",providerScopes:[["user:email"],["read:user"],["read:user","user:email","repo","workflow"]],entitlementUrl:"https://api.github.com/copilot_internal/user",entitlementSignupLimitedUrl:"https://api.github.com/copilot_internal/subscribe_limited_user",chatQuotaExceededContext:"github.copilot.chat.quotaExceeded",completionsQuotaExceededContext:"github.copilot.completions.quotaExceeded",walkthroughCommand:"github.copilot.open.walkthrough",completionsMenuCommand:"github.copilot.toggleStatusMenu",completionsRefreshTokenCommand:"github.copilot.signIn",chatRefreshTokenCommand:"github.copilot.refreshToken",generateCommitMessageCommand:"github.copilot.git.generateCommitMessage",completionsAdvancedSetting:"github.copilot.advanced",completionsEnablementSetting:"github.copilot.enable",nextEditSuggestionsSetting:"github.copilot.nextEditSuggestions.enabled"},chatParticipantRegistry:"https://main.vscode-cdn.net/extensions/chat.json",remoteDefaultExtensionsIfInstalledLocally:["GitHub.copilot","GitHub.copilot-chat","GitHub.vscode-pull-request-github"],extensionConfigurationPolicy:{"github.copilot.nextEditSuggestions.enabled":{name:"CopilotNextEditSuggestions",minimumVersion:"1.99"}},builtInExtensions:[{name:"ms-vscode.js-debug-companion",version:"1.1.3",sha256:"7380a890787452f14b2db7835dfa94de538caf358ebc263f9d46dd68ac52de93",repo:"https://github.com/microsoft/vscode-js-debug-companion",metadata:{id:"99cb0b7f-7354-4278-b8da-6cc79972169d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.js-debug",version:"1.100.1",sha256:"8c2218df3422d45b95e96d9d28cdc4aa4426a2799aaaedd862d3f60ecab03844",repo:"https://github.com/microsoft/vscode-js-debug",metadata:{id:"25629058-ddac-4e17-abba-74678e126c5d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.vscode-js-profile-table",version:"1.0.10",sha256:"7361748ddf9fd09d8a2ed1f2a2d7376a2cf9aae708692820b799708385c38e08",repo:"https://github.com/microsoft/vscode-js-profile-visualizer",metadata:{id:"7e52b41b-71ad-457b-ab7e-0620f1fc4feb",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}}],version:"1.101.2",commit:"2901c5ac6db8a986a5666c3af51ff804d05af0d4",date:"2025-06-24T20:27:15.391Z"},Object.keys(Bi).length===0&&Object.assign(Bi,{version:"1.95.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});var $M=Bi,Tk=class tA{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++tA.count}},Rk=[];function N(e){const t=new Tk(e);return Rk[t.nid]=t,t}function Bd(e){return Rk[e].sid}var bi=class{constructor(e){this.value=e}},Lk;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Lk||(Lk={}));var Nk;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(Nk||(Nk={}));var Mk;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(Mk||(Mk={}));var Ok;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(Ok||(Ok={}));var Fk;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(Fk||(Fk={}));var Uk;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(Uk||(Uk={}));var jk;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(jk||(jk={}));var dv;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(dv||(dv={}));var gQ=class iA{static{this.a=0}static mixin(t){return t._id=iA.a++,t}},Bk;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(Bk||(Bk={}));var Hk;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(Hk||(Hk={}));var zk;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(zk||(zk={}));var Z={MainThreadAuthentication:N("MainThreadAuthentication"),MainThreadBulkEdits:N("MainThreadBulkEdits"),MainThreadLanguageModels:N("MainThreadLanguageModels"),MainThreadEmbeddings:N("MainThreadEmbeddings"),MainThreadChatAgents2:N("MainThreadChatAgents2"),MainThreadCodeMapper:N("MainThreadCodeMapper"),MainThreadLanguageModelTools:N("MainThreadChatSkills"),MainThreadClipboard:N("MainThreadClipboard"),MainThreadCommands:N("MainThreadCommands"),MainThreadComments:N("MainThreadComments"),MainThreadConfiguration:N("MainThreadConfiguration"),MainThreadConsole:N("MainThreadConsole"),MainThreadDebugService:N("MainThreadDebugService"),MainThreadDecorations:N("MainThreadDecorations"),MainThreadDiagnostics:N("MainThreadDiagnostics"),MainThreadDialogs:N("MainThreadDiaglogs"),MainThreadDocuments:N("MainThreadDocuments"),MainThreadDocumentContentProviders:N("MainThreadDocumentContentProviders"),MainThreadTextEditors:N("MainThreadTextEditors"),MainThreadEditorInsets:N("MainThreadEditorInsets"),MainThreadEditorTabs:N("MainThreadEditorTabs"),MainThreadErrors:N("MainThreadErrors"),MainThreadTreeViews:N("MainThreadTreeViews"),MainThreadDownloadService:N("MainThreadDownloadService"),MainThreadLanguageFeatures:N("MainThreadLanguageFeatures"),MainThreadLanguages:N("MainThreadLanguages"),MainThreadLogger:N("MainThreadLogger"),MainThreadMessageService:N("MainThreadMessageService"),MainThreadOutputService:N("MainThreadOutputService"),MainThreadProgress:N("MainThreadProgress"),MainThreadQuickDiff:N("MainThreadQuickDiff"),MainThreadQuickOpen:N("MainThreadQuickOpen"),MainThreadStatusBar:N("MainThreadStatusBar"),MainThreadSecretState:N("MainThreadSecretState"),MainThreadStorage:N("MainThreadStorage"),MainThreadSpeech:N("MainThreadSpeechProvider"),MainThreadTelemetry:N("MainThreadTelemetry"),MainThreadTerminalService:N("MainThreadTerminalService"),MainThreadTerminalShellIntegration:N("MainThreadTerminalShellIntegration"),MainThreadWebviews:N("MainThreadWebviews"),MainThreadWebviewPanels:N("MainThreadWebviewPanels"),MainThreadWebviewViews:N("MainThreadWebviewViews"),MainThreadCustomEditors:N("MainThreadCustomEditors"),MainThreadUrls:N("MainThreadUrls"),MainThreadUriOpeners:N("MainThreadUriOpeners"),MainThreadProfileContentHandlers:N("MainThreadProfileContentHandlers"),MainThreadWorkspace:N("MainThreadWorkspace"),MainThreadFileSystem:N("MainThreadFileSystem"),MainThreadFileSystemEventService:N("MainThreadFileSystemEventService"),MainThreadExtensionService:N("MainThreadExtensionService"),MainThreadSCM:N("MainThreadSCM"),MainThreadSearch:N("MainThreadSearch"),MainThreadShare:N("MainThreadShare"),MainThreadTask:N("MainThreadTask"),MainThreadWindow:N("MainThreadWindow"),MainThreadLabelService:N("MainThreadLabelService"),MainThreadNotebook:N("MainThreadNotebook"),MainThreadNotebookDocuments:N("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:N("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:N("MainThreadNotebookKernels"),MainThreadNotebookRenderers:N("MainThreadNotebookRenderers"),MainThreadInteractive:N("MainThreadInteractive"),MainThreadTheming:N("MainThreadTheming"),MainThreadTunnelService:N("MainThreadTunnelService"),MainThreadManagedSockets:N("MainThreadManagedSockets"),MainThreadTimeline:N("MainThreadTimeline"),MainThreadTesting:N("MainThreadTesting"),MainThreadLocalization:N("MainThreadLocalizationShape"),MainThreadMcp:N("MainThreadMcpShape"),MainThreadAiRelatedInformation:N("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:N("MainThreadAiEmbeddingVector"),MainThreadChatStatus:N("MainThreadChatStatus"),MainThreadAiSettingsSearch:N("MainThreadAiSettingsSearch")},ce={ExtHostCodeMapper:N("ExtHostCodeMapper"),ExtHostCommands:N("ExtHostCommands"),ExtHostConfiguration:N("ExtHostConfiguration"),ExtHostDiagnostics:N("ExtHostDiagnostics"),ExtHostDebugService:N("ExtHostDebugService"),ExtHostDecorations:N("ExtHostDecorations"),ExtHostDocumentsAndEditors:N("ExtHostDocumentsAndEditors"),ExtHostDocuments:N("ExtHostDocuments"),ExtHostDocumentContentProviders:N("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:N("ExtHostDocumentSaveParticipant"),ExtHostEditors:N("ExtHostEditors"),ExtHostTreeViews:N("ExtHostTreeViews"),ExtHostFileSystem:N("ExtHostFileSystem"),ExtHostFileSystemInfo:N("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:N("ExtHostFileSystemEventService"),ExtHostLanguages:N("ExtHostLanguages"),ExtHostLanguageFeatures:N("ExtHostLanguageFeatures"),ExtHostQuickOpen:N("ExtHostQuickOpen"),ExtHostQuickDiff:N("ExtHostQuickDiff"),ExtHostStatusBar:N("ExtHostStatusBar"),ExtHostShare:N("ExtHostShare"),ExtHostExtensionService:N("ExtHostExtensionService"),ExtHostLogLevelServiceShape:N("ExtHostLogLevelServiceShape"),ExtHostTerminalService:N("ExtHostTerminalService"),ExtHostTerminalShellIntegration:N("ExtHostTerminalShellIntegration"),ExtHostSCM:N("ExtHostSCM"),ExtHostSearch:N("ExtHostSearch"),ExtHostTask:N("ExtHostTask"),ExtHostWorkspace:N("ExtHostWorkspace"),ExtHostWindow:N("ExtHostWindow"),ExtHostWebviews:N("ExtHostWebviews"),ExtHostWebviewPanels:N("ExtHostWebviewPanels"),ExtHostCustomEditors:N("ExtHostCustomEditors"),ExtHostWebviewViews:N("ExtHostWebviewViews"),ExtHostEditorInsets:N("ExtHostEditorInsets"),ExtHostEditorTabs:N("ExtHostEditorTabs"),ExtHostProgress:N("ExtHostProgress"),ExtHostComments:N("ExtHostComments"),ExtHostSecretState:N("ExtHostSecretState"),ExtHostStorage:N("ExtHostStorage"),ExtHostUrls:N("ExtHostUrls"),ExtHostUriOpeners:N("ExtHostUriOpeners"),ExtHostProfileContentHandlers:N("ExtHostProfileContentHandlers"),ExtHostOutputService:N("ExtHostOutputService"),ExtHostLabelService:N("ExtHostLabelService"),ExtHostNotebook:N("ExtHostNotebook"),ExtHostNotebookDocuments:N("ExtHostNotebookDocuments"),ExtHostNotebookEditors:N("ExtHostNotebookEditors"),ExtHostNotebookKernels:N("ExtHostNotebookKernels"),ExtHostNotebookRenderers:N("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:N("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:N("ExtHostInteractive"),ExtHostChatAgents2:N("ExtHostChatAgents"),ExtHostLanguageModelTools:N("ExtHostChatSkills"),ExtHostChatProvider:N("ExtHostChatProvider"),ExtHostSpeech:N("ExtHostSpeech"),ExtHostEmbeddings:N("ExtHostEmbeddings"),ExtHostAiRelatedInformation:N("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:N("ExtHostAiEmbeddingVector"),ExtHostAiSettingsSearch:N("ExtHostAiSettingsSearch"),ExtHostTheming:N("ExtHostTheming"),ExtHostTunnelService:N("ExtHostTunnelService"),ExtHostManagedSockets:N("ExtHostManagedSockets"),ExtHostAuthentication:N("ExtHostAuthentication"),ExtHostTimeline:N("ExtHostTimeline"),ExtHostTesting:N("ExtHostTesting"),ExtHostTelemetry:N("ExtHostTelemetry"),ExtHostLocalization:N("ExtHostLocalization"),ExtHostMcp:N("ExtHostMcp")};function Wk(e){return e.toJSON()}var IM=class{constructor(e){this.a=e}transformIncoming(e){const t=this.a.transformIncoming(e);return t===e?e:Wk(x.from(t))}transformOutgoing(e){const t=this.a.transformOutgoing(e);return t===e?e:Wk(x.from(t))}transformOutgoingURI(e){const t=this.a.transformOutgoing(e);return t===e?e:x.from(t)}transformOutgoingScheme(e){return this.a.transformOutgoingScheme(e)}},mQ=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function Vk(e,t,i,s){if(!e||s>200)return null;if(typeof e=="object"){if(e.$mid===1)return i?x.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof _)return null;for(const r in e)if(Object.hasOwnProperty.call(e,r)){const n=Vk(e[r],t,i,s+1);n!==null&&(e[r]=n)}}return null}function Pl(e,t){const i=Vk(e,t,!1,0);return i===null?e:i}var _k=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):lt(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},PM=class extends _k{constructor(){super(),this.h=!0,this.i=new mt}},qk;function fv(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var pv="$$ref$$",DM={[pv]:-1};function Gk(e,t=null,i=!1){const s=[];return{jsonString:(i?fv:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return DM;if(typeof o=="object"){if(o instanceof _){const a=s.push(o)-1;return{[pv]:a}}if(t)return t(n,o)}return o}),referencedBuffers:s}}function Jk(e,t,i){return JSON.parse(e,(s,r)=>{if(r){const n=r[pv];if(typeof n=="number")return t[n];if(i&&r.$mid===1)return i.transformIncoming(r)}return r})}function Yk(e,t){return JSON.stringify(e,t)}function AM(e){return e?(t,i)=>i&&i.$mid===1?e.transformOutgoing(i):i:null}var Zk;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(Zk||(Zk={}));var Qk;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(Qk||(Qk={}));var TM=()=>{},RM=Symbol.for("rpcProtocol"),LM=Symbol.for("rpcProxy"),NM=class $5 extends X{static{qk=RM}static{this.a=3*1e3}constructor(t,i=null,s=null){super(),this[qk]=!0,this.b=this.B(new D),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=i,this.g=s,this.h=AM(this.g),this.j=!1,this.m=[],this.s=[];for(let r=0,n=Tk.count;r<n;r++)this.m[r]=null,this.s[r]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new Zs(()=>this.H(),1e3)),this.B(this.c.onMessage(r=>this.L(r)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const i=this.w[t];delete this.w[t],i.resolveErr(al())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+$5.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+$5.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?Pl(t,this.g):t}getProxy(t){const{nid:i,sid:s}=t;return this.s[i]||(this.s[i]=this.J(i,s)),this.s[i]}J(t,i){const s={get:(r,n)=>(typeof n=="string"&&!r[n]&&n.charCodeAt(0)===36&&(r[n]=(...o)=>this.U(t,n,o)),n===LM?i:r[n])};return new Proxy(Object.create(null),s)}set(t,i){return this.m[t.nid]=i,i}assertRegistered(t){for(let i=0,s=t.length;i<s;i++){const r=t[i];if(!this.m[r.nid])throw new Error(`Missing proxy instance ${r.sid}`)}}L(t){if(this.j)return;const i=t.byteLength,s=Lt.read(t,0),r=s.readUInt8(),n=s.readUInt32();switch(r){case 1:case 2:{let{rpcId:o,method:a,args:c}=fs.deserializeRequestJSONArgs(s);this.g&&(c=Pl(c,this.g)),this.M(i,n,o,a,c,r===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=fs.deserializeRequestMixedArgs(s);this.g&&(c=Pl(c,this.g)),this.M(i,n,o,a,c,r===4);break}case 5:{this.f?.logIncoming(i,n,0,"ack"),this.G(n);break}case 6:{this.N(i,n);break}case 7:{this.O(i,n,void 0);break}case 9:{let o=fs.deserializeReplyOKJSON(s);this.g&&(o=Pl(o,this.g)),this.O(i,n,o);break}case 10:{const o=fs.deserializeReplyOKJSONWithBuffers(s,this.g);this.O(i,n,o);break}case 8:{const o=fs.deserializeReplyOKVSBuffer(s);this.O(i,n,o);break}case 11:{let o=fs.deserializeReplyErrError(s);this.g&&(o=Pl(o,this.g)),this.P(i,n,o);break}case 12:{this.P(i,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,i,s,r,n,o){this.f?.logIncoming(t,i,1,`receiveRequest ${Bd(s)}.${r}(`,n);const a=String(i);let c,l;if(o){const h=new Ke;n.push(h.token),c=this.Q(s,r,n),l=()=>h.cancel()}else c=this.Q(s,r,n),l=TM;this.u[a]=l;const u=fs.serializeAcknowledged(i);this.f?.logOutgoing(u.byteLength,i,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const f=fs.serializeReplyOK(i,h,this.h);this.f?.logOutgoing(f.byteLength,i,1,"reply:",h),this.c.send(f)},h=>{delete this.u[a];const f=fs.serializeReplyErr(i,h);this.f?.logOutgoing(f.byteLength,i,1,"replyErr:",h),this.c.send(f)})}N(t,i){this.f?.logIncoming(t,i,1,"receiveCancel");const s=String(i);this.u[s]?.()}O(t,i,s){this.f?.logIncoming(t,i,0,"receiveReply:",s);const r=String(i);if(!this.w.hasOwnProperty(r))return;const n=this.w[r];delete this.w[r],n.resolveOk(s)}P(t,i,s){this.f?.logIncoming(t,i,0,"receiveReplyErr:",s);const r=String(i);if(!this.w.hasOwnProperty(r))return;const n=this.w[r];delete this.w[r];let o;s&&(s.$isError?(o=new Error,o.name=s.name,o.message=s.message,o.stack=s.stack):o=s),n.resolveErr(o)}Q(t,i,s){try{return Promise.resolve(this.S(t,i,s))}catch(r){return Promise.reject(r)}}S(t,i,s){const r=this.m[t];if(!r)throw new Error("Unknown actor "+Bd(t));const n=r[i];if(typeof n!="function")throw new Error("Unknown method "+i+" on actor "+Bd(t));return n.apply(r,s)}U(t,i,s){if(this.j)return new PM;let r=null;if(s.length>0&&Ye.isCancellationToken(s[s.length-1])&&(r=s.pop()),r&&r.isCancellationRequested)return Promise.reject(al());const n=fs.serializeRequestArguments(s,this.h),o=++this.t,a=String(o),c=new _k,l=new se;r&&l.add(r.onCancellationRequested(()=>{const h=fs.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.w[a]=new MM(c,l),this.F(o);const u=fs.serializeRequest(o,t,i,n,!!r);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${Bd(t)}.${i}(`,s),this.c.send(u),c}},MM=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},Lt=class I5{static alloc(t,i,s){const r=new I5(_.alloc(s+1+4),0);return r.writeUInt8(t),r.writeUInt32(i),r}static read(t,i){return new I5(t,i)}get buffer(){return this.a}constructor(t,i){this.a=t,this.b=i}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const s=this.a.slice(this.b,this.b+t).toString();return this.b+=t,s}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const s=this.a.slice(this.b,this.b+t).toString();return this.b+=t,s}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t);return this.b+=t,i}static sizeMixedArray(t){let i=0;i+=1;for(let s=0,r=t.length;s<r;s++){const n=t[s];switch(i+=1,n.type){case 1:i+=this.sizeLongString(n.value);break;case 2:i+=this.sizeVSBuffer(n.value);break;case 3:i+=this.sizeUInt32,i+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)i+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return i}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let i=0,s=t.length;i<s;i++){const r=t[i];switch(r.type){case 1:this.writeUInt8(1),this.writeLongString(r.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(r.value);break;case 3:this.writeUInt8(3),this.writeUInt32(r.buffers.length),this.writeLongString(r.value);for(let n=0;n<r.buffers.length;++n)this.writeBuffer(r.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const i=new Array(t);for(let s=0;s<t;s++)switch(this.readUInt8()){case 1:i[s]=this.readLongString();break;case 2:i[s]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());i[s]=new bi(Jk(o,a,null));break}case 4:i[s]=void 0;break}return i}},Xk;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(Xk||(Xk={}));var fs=class{static a(e){for(let t=0,i=e.length;t<i;t++)if(e[t]instanceof _||e[t]instanceof bi||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const i=[];for(let s=0,r=e.length;s<r;s++){const n=e[s];if(n instanceof _)i[s]={type:2,value:n};else if(typeof n>"u")i[s]={type:4};else if(n instanceof bi){const{jsonString:o,referencedBuffers:a}=Gk(n.value,t);i[s]={type:3,value:_.fromString(o),buffers:a}}else i[s]={type:1,value:_.fromString(Yk(n,t))}}return{type:1,args:i}}return{type:0,args:Yk(e,t)}}static serializeRequest(e,t,i,s,r){switch(s.type){case 0:return this.b(e,t,i,s.args,r);case 1:return this.c(e,t,i,s.args,r)}}static b(e,t,i,s,r){const n=_.fromString(i),o=_.fromString(s);let a=0;a+=Lt.sizeUInt8(),a+=Lt.sizeShortString(n),a+=Lt.sizeLongString(o);const c=Lt.alloc(r?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),s=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(s)}}static c(e,t,i,s,r){const n=_.fromString(i);let o=0;o+=Lt.sizeUInt8(),o+=Lt.sizeShortString(n),o+=Lt.sizeMixedArray(s);const a=Lt.alloc(r?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(s),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),s=e.readMixedArray(),r=new Array(s.length);for(let n=0,o=s.length;n<o;n++){const a=s[n];typeof a=="string"?r[n]=JSON.parse(a):r[n]=a}return{rpcId:t,method:i,args:r}}static serializeAcknowledged(e){return Lt.alloc(5,e,0).buffer}static serializeCancel(e){return Lt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,i){if(typeof t>"u")return this.d(e);if(t instanceof _)return this.e(e,t);if(t instanceof bi){const{jsonString:s,referencedBuffers:r}=Gk(t.value,i,!0);return this.g(e,s,r)}else return this.f(e,fv(t,i))}static d(e){return Lt.alloc(7,e,0).buffer}static e(e,t){let i=0;i+=Lt.sizeVSBuffer(t);const s=Lt.alloc(8,e,i);return s.writeVSBuffer(t),s.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const i=_.fromString(t);let s=0;s+=Lt.sizeLongString(i);const r=Lt.alloc(9,e,s);return r.writeLongString(i),r.buffer}static g(e,t,i){const s=_.fromString(t);let r=0;r+=Lt.sizeUInt32,r+=Lt.sizeLongString(s);for(const o of i)r+=Lt.sizeVSBuffer(o);const n=Lt.alloc(10,e,r);n.writeUInt32(i.length),n.writeLongString(s);for(const o of i)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),s=e.readLongString(),r=[];for(let n=0;n<i;++n)r.push(e.readVSBuffer());return new bi(Jk(s,r,t))}static serializeReplyErr(e,t){const i=t?fv(ma(t),null):void 0;if(typeof i!="string")return this.h(e);const s=_.fromString(i);let r=0;r+=Lt.sizeLongString(s);const n=Lt.alloc(11,e,r);return n.writeLongString(s),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return Lt.alloc(12,e,0).buffer}},Kk;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(Kk||(Kk={}));var eS;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(eS||(eS={}));var Is;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(i){return i[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(Is||(Is={}));var Dl=q("instantiationService");function OM(e,t,i){t[Is.DI_TARGET]===t?t[Is.DI_DEPENDENCIES].push({id:e,index:i}):(t[Is.DI_DEPENDENCIES]=[{id:e,index:i}],t[Is.DI_TARGET]=t)}function q(e){if(Is.serviceIds.has(e))return Is.serviceIds.get(e);const t=function(i,s,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");OM(t,i,r)};return t.toString=()=>e,Is.serviceIds.set(e,t),t}function vQ(e){return e}function gv(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var tS=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],iS;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(iS||(iS={}));var sS;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(sS||(sS={}));var qe=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const i=typeof e=="string"?e:e.value,s=typeof t=="string"?t:t.value;return hs(i,s)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},vo=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(qe.toKey(e))}delete(e){return this.c.delete(qe.toKey(e))}has(e){return this.c.has(qe.toKey(e))}},Tr=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(qe.toKey(e))}get(e){return this.c.get(qe.toKey(e))}has(e){return this.c.has(qe.toKey(e))}set(e,t){this.c.set(qe.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},rS=class extends Error{constructor(e,t,i){super(`Error in extension ${qe.toKey(e)}: ${i??t.message}`,{cause:t}),this.name="ExtensionError",this.extension=e}},wQ=q("IBuiltinExtensionsScannerService");function mv(e,t){return t&&(e.stack||e.stacktrace)?d(110,null,oS(e),nS(e.stack)||nS(e.stacktrace)):oS(e)}function nS(e){return Array.isArray(e)?e.join(`
`):e}function oS(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?d(111,null,e.message):e.message||d(112,null)}function Ks(e=null,t=!1){if(!e)return d(113,null);if(Array.isArray(e)){const i=yt(e),s=Ks(i[0],t);return i.length>1?d(114,null,s,i.length):s}if(Ue(e))return e;if(e.detail){const i=e.detail;if(i.error)return mv(i.error,t);if(i.exception)return mv(i.exception,t)}return e.stack?mv(e,t):e.message?e.message:d(115,null)}function Rr(e){return vv(e,0)}function vv(e,t){switch(typeof e){case"object":return e===null?Lr(349,t):Array.isArray(e)?UM(e,t):jM(e,t);case"string":return wv(e,t);case"boolean":return FM(e,t);case"number":return Lr(e,t);case"undefined":return Lr(937,t);default:return Lr(617,t)}}function Lr(e,t){return(t<<5)-t+e|0}function FM(e,t){return Lr(e?433:863,t)}function wv(e,t){t=Lr(149417,t);for(let i=0,s=e.length;i<s;i++)t=Lr(e.charCodeAt(i),t);return t}function UM(e,t){return t=Lr(104579,t),e.reduce((i,s)=>vv(s,i),t)}function jM(e,t){return t=Lr(181387,t),Object.keys(e).sort().reduce((i,s)=>(i=wv(s,i),vv(e[s],i)),t)}var aS;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(aS||(aS={}));function bv(e,t,i=32){const s=i-t,r=~((1<<s)-1);return(e<<t|(r&e)>>>s)>>>0}function Al(e,t=32){return e instanceof ArrayBuffer?NE(_.wrap(new Uint8Array(e))):(e>>>0).toString(16).padStart(t/4,"0")}var bQ=class sA{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const i=t.length;if(i===0)return;const s=this.p;let r=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(yd(o))if(a+1<i){const l=t.charCodeAt(a+1);xd(l)?(a++,c=H1(o,l)):c=65533}else{n=o;break}else xd(o)&&(c=65533);if(r=this.w(s,r,c),a++,a<i)o=t.charCodeAt(a);else break}this.r=r,this.u=n}w(t,i,s){return s<128?t[i++]=s:s<2048?(t[i++]=192|(s&1984)>>>6,t[i++]=128|(s&63)>>>0):s<65536?(t[i++]=224|(s&61440)>>>12,t[i++]=128|(s&4032)>>>6,t[i++]=128|(s&63)>>>0):(t[i++]=240|(s&1835008)>>>18,t[i++]=128|(s&258048)>>>12,t[i++]=128|(s&4032)>>>6,t[i++]=128|(s&63)>>>0),i>=64&&(this.y(),i-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),i}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),Al(this.h)+Al(this.l)+Al(this.m)+Al(this.n)+Al(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=sA.g,i=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,i.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,bv(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let s=this.h,r=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=r&n|~r&o,l=1518500249):h<40?(c=r^n^o,l=1859775393):h<60?(c=r&n|r&o|n&o,l=2400959708):(c=r^n^o,l=3395469782),u=bv(s,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=bv(r,30),r=s,s=u;this.h=this.h+s&4294967295,this.l=this.l+r&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},cS;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(cS||(cS={}));function yv(...e){switch(e.length){case 1:return d(1818,null,e[0]);case 2:return d(1819,null,e[0],e[1]);case 3:return d(1820,null,e[0],e[1],e[2]);default:return}}var BM=d(1821,null),HM=d(1822,null),Tl=class P5{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw k1(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const i=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:i})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const i=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:i})}else this.h(126)?this.k(9):this.l(yv("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(yv("&&"));break;case 124:this.h(124)?this.k(16):this.l(yv("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const i=this.d,s=this.c.substring(this.d,this.e),r={type:19,offset:this.d,lexeme:s};this.g.push({offset:i,lexeme:s,additionalInfo:t}),this.f.push(r)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const i=this.c.substring(this.d,this.e),s=P5.b.get(i);s?this.k(s):this.f.push({type:17,lexeme:i,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(BM);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,i=!1,s=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(HM);return}const n=this.c.charCodeAt(t);if(i)i=!1;else if(n===47&&!s){t++;break}else n===91?s=!0:n===92?i=!0:n===93&&(s=!1);t++}for(;t<this.c.length&&P5.a.has(this.c.charCodeAt(t));)t++;this.e=t;const r=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:r,offset:this.d})}r(){return this.e>=this.c.length}},si=new Map;si.set("false",!1),si.set("true",!0),si.set("isMac",Ct),si.set("isLinux",$t),si.set("isWindows",Fe),si.set("isWeb",xa),si.set("isMacNative",Ct&&!xa),si.set("isEdge",Bx),si.set("isFirefox",qT),si.set("isChrome",M1),si.set("isSafari",GT);var zM=Object.prototype.hasOwnProperty,lS;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(lS||(lS={}));var WM={regexParsingWithErrorRecovery:!0},VM=d(1798,null),_M=d(1799,null),qM=d(1800,null),uS=d(1801,null),GM=d(1802,null),JM=d(1803,null),YM=d(1804,null),ZM=d(1805,null),hS=class Gh{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=WM){this.k=t,this.d=new Tl,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:VM,offset:0,lexeme:"",additionalInfo:_M});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const i=this.l();if(!this.E()){const s=this.D(),r=s.type===17?JM:void 0;throw this.h.push({message:GM,offset:s.offset,lexeme:Tl.getLexeme(s),additionalInfo:r}),Gh.c}return i}catch(i){if(i!==Gh.c)throw i;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const i=this.o();t.push(i)}return t.length===1?t[0]:Nt.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const i=this.s();t.push(i)}return t.length===1?t[0]:Nt.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),$i.INSTANCE;case 12:return this.z(),Hi.INSTANCE;case 0:{this.z();const i=this.l();return this.A(1,uS),i?.negate()}case 17:return this.z(),Nl.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),Nt.true();case 12:return this.z(),Nt.false();case 0:{this.z();const i=this.l();return this.A(1,uS),i}case 17:{const i=t.lexeme;if(this.z(),this.y(9)){const r=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),r.type!==10)throw this.B("REGEX",r);const n=r.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",r)}return $v.create(i,c)}switch(r.type){case 10:case 19:{const n=[r.lexeme];this.z();let o=this.D(),a=0;for(let f=0;f<r.lexeme.length;f++)r.lexeme.charCodeAt(f)===40?a++:r.lexeme.charCodeAt(f)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let f=0;f<o.lexeme.length;f++)o.lexeme.charCodeAt(f)===40?a++:r.lexeme.charCodeAt(f)===41&&a--}if(a<0)break;n.push(Tl.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",r)}return Nt.regex(i,h)}case 18:{const n=r.lexeme;this.z();let o=null;if(!wd(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",r)}}}if(o===null)throw this.B("REGEX",r);return $v.create(i,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,qM);const r=this.u();return Nt.notIn(i,r)}switch(this.D().type){case 3:{this.z();const r=this.u();if(this.x().type===18)return Nt.equals(i,r);switch(r){case"true":return Nt.has(i);case"false":return Nt.not(i);default:return Nt.equals(i,r)}}case 4:{this.z();const r=this.u();if(this.x().type===18)return Nt.notEquals(i,r);switch(r){case"true":return Nt.not(i);case"false":return Nt.has(i);default:return Nt.notEquals(i,r)}}case 5:return this.z(),Sv.create(i,this.u());case 6:return this.z(),Cv.create(i,this.u());case 7:return this.z(),zd.create(i,this.u());case 8:return this.z(),kv.create(i,this.u());case 13:return this.z(),Nt.in(i,this.u());default:return Nt.has(i)}}case 20:throw this.h.push({message:YM,offset:t.offset,lexeme:"",additionalInfo:ZM}),Gh.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,i){if(this.C(t))return this.z();throw this.B(i,this.D())}B(t,i,s){const r=d(1806,null,t,Tl.getLexeme(i)),n=i.offset,o=Tl.getLexeme(i);return this.h.push({message:r,offset:n,lexeme:o,additionalInfo:s}),Gh.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},Nt=class{static false(){return $i.INSTANCE}static true(){return Hi.INSTANCE}static has(e){return Ll.create(e)}static equals(e,t){return xv.create(e,t)}static notEquals(e,t){return Ev.create(e,t)}static regex(e,t){return $v.create(e,t)}static in(e,t){return dS.create(e,t)}static notIn(e,t){return fS.create(e,t)}static not(e){return Nl.create(e)}static and(...e){return gS.create(e,null,!0)}static or(...e){return Iv.create(e,null,!0)}static greater(e,t){return zd.create(e,t)}static greaterEquals(e,t){return kv.create(e,t)}static smaller(e,t){return Sv.create(e,t)}static smallerEquals(e,t){return Cv.create(e,t)}static{this.c=new hS({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function QM(e){const t=new hS({regexParsingWithErrorRecovery:!1});return e.map(i=>(t.parse(i),t.lexingErrors.length>0?t.lexingErrors.map(s=>({errorMessage:s.additionalInfo?d(1807,null,s.additionalInfo):d(1808,null),offset:s.offset,length:s.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(s=>({errorMessage:s.additionalInfo?`${s.message}. ${s.additionalInfo}`:s.message,offset:s.offset,length:s.lexeme.length})):[]))}function Rl(e,t){return e.cmp(t)}var $i=class rA{static{this.INSTANCE=new rA}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return Hi.INSTANCE}},Hi=class nA{static{this.INSTANCE=new nA}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return $i.INSTANCE}},Ll=class oA{static create(t,i=null){const s=si.get(t);return typeof s=="boolean"?s?Hi.INSTANCE:$i.INSTANCE:new oA(t,i)}constructor(t,i){this.key=t,this.c=i,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:mS(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=si.get(this.key);return typeof t=="boolean"?t?Hi.INSTANCE:$i.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=Nl.create(this.key,this)),this.c}},xv=class aA{static create(t,i,s=null){if(typeof i=="boolean")return i?Ll.create(t,s):Nl.create(t,s);const r=si.get(t);return typeof r=="boolean"?i===(r?"true":"false")?Hi.INSTANCE:$i.INSTANCE:new aA(t,i,s)}constructor(t,i,s){this.c=t,this.d=i,this.f=s,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:wo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=si.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?Hi.INSTANCE:$i.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=Ev.create(this.c,this.d,this)),this.f}},dS=class cA{static create(t,i){return new cA(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:wo(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.f),s=t.getValue(this.d);return Array.isArray(i)?i.includes(s):typeof s=="string"&&typeof i=="object"&&i!==null?zM.call(i,s):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=fS.create(this.d,this.f)),this.c}},fS=class lA{static create(t,i){return new lA(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=11,this.c=dS.create(t,i)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},Ev=class uA{static create(t,i,s=null){if(typeof i=="boolean")return i?Nl.create(t,s):Ll.create(t,s);const r=si.get(t);return typeof r=="boolean"?i===(r?"true":"false")?$i.INSTANCE:Hi.INSTANCE:new uA(t,i,s)}constructor(t,i,s){this.c=t,this.d=i,this.f=s,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:wo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=si.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?$i.INSTANCE:Hi.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=xv.create(this.c,this.d,this)),this.f}},Nl=class hA{static create(t,i=null){const s=si.get(t);return typeof s=="boolean"?s?$i.INSTANCE:Hi.INSTANCE:new hA(t,i)}constructor(t,i){this.c=t,this.d=i,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:mS(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=si.get(this.c);return typeof t=="boolean"?t?$i.INSTANCE:Hi.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=Ll.create(this.c,this)),this.d}};function Hd(e,t){if(typeof e=="string"){const i=parseFloat(e);isNaN(i)||(e=i)}return typeof e=="string"||typeof e=="number"?t(e):$i.INSTANCE}var zd=class dA{static create(t,i,s=null){return Hd(i,r=>new dA(t,r,s))}constructor(t,i,s){this.c=t,this.d=i,this.f=s,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:wo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=Cv.create(this.c,this.d,this)),this.f}},kv=class fA{static create(t,i,s=null){return Hd(i,r=>new fA(t,r,s))}constructor(t,i,s){this.c=t,this.d=i,this.f=s,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:wo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=Sv.create(this.c,this.d,this)),this.f}},Sv=class pA{static create(t,i,s=null){return Hd(i,r=>new pA(t,r,s))}constructor(t,i,s){this.c=t,this.d=i,this.f=s,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:wo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=kv.create(this.c,this.d,this)),this.f}},Cv=class gA{static create(t,i,s=null){return Hd(i,r=>new gA(t,r,s))}constructor(t,i,s){this.c=t,this.d=i,this.f=s,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:wo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=zd.create(this.c,this.d,this)),this.f}},$v=class mA{static create(t,i){return new mA(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const i=this.f?this.f.source:"",s=t.f?t.f.source:"";return i<s?-1:i>s?1:0}equals(t){if(t.type===this.type){const i=this.f?this.f.source:"",s=t.f?t.f.source:"";return this.d===t.d&&i===s}return!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.d);return this.f?this.f.test(i):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=XM.create(this)),this.c}},XM=class D5{static create(t){return new D5(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new D5(this.c.map(t))}negate(){return this.c}};function pS(e){let t=null;for(let i=0,s=e.length;i<s;i++){const r=e[i].substituteConstants();if(e[i]!==r&&t===null){t=[];for(let n=0;n<i;n++)t[n]=e[n]}t!==null&&(t[i]=r)}return t===null?e:t}var gS=class Kc{static create(t,i,s){return Kc.d(t,i,s)}constructor(t,i){this.expr=t,this.c=i,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,s=this.expr.length;i<s;i++){const r=Rl(this.expr[i],t.expr[i]);if(r!==0)return r}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,s=this.expr.length;i<s;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=pS(this.expr);return t===this.expr?this:Kc.create(t,this.c,!1)}evaluate(t){for(let i=0,s=this.expr.length;i<s;i++)if(!this.expr[i].evaluate(t))return!1;return!0}static d(t,i,s){const r=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return $i.INSTANCE;if(o.type===6){r.push(...o.expr);continue}r.push(o)}if(r.length===0&&n)return Hi.INSTANCE;if(r.length!==0){if(r.length===1)return r[0];r.sort(Rl);for(let o=1;o<r.length;o++)r[o-1].equals(r[o])&&(r.splice(o,1),o--);if(r.length===1)return r[0];for(;r.length>1;){const o=r[r.length-1];if(o.type!==9)break;r.pop();const a=r.pop(),c=r.length===0,l=Iv.create(o.expr.map(u=>Kc.create([u,a],null,s)),null,c);l&&(r.push(l),r.sort(Rl))}if(r.length===1)return r[0];if(s){for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++)if(r[o].negate().equals(r[a]))return $i.INSTANCE;if(r.length===1)return r[0]}return new Kc(r,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new Kc(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());this.c=Iv.create(t,this,!0)}return this.c}},Iv=class ua{static create(t,i,s){return ua.d(t,i,s)}constructor(t,i){this.expr=t,this.c=i,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,s=this.expr.length;i<s;i++){const r=Rl(this.expr[i],t.expr[i]);if(r!==0)return r}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,s=this.expr.length;i<s;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=pS(this.expr);return t===this.expr?this:ua.create(t,this.c,!1)}evaluate(t){for(let i=0,s=this.expr.length;i<s;i++)if(this.expr[i].evaluate(t))return!0;return!1}static d(t,i,s){let r=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return Hi.INSTANCE;if(c.type===9){r=r.concat(c.expr);continue}r.push(c)}}if(r.length===0&&n)return $i.INSTANCE;r.sort(Rl)}if(r.length!==0){if(r.length===1)return r[0];for(let o=1;o<r.length;o++)r[o-1].equals(r[o])&&(r.splice(o,1),o--);if(r.length===1)return r[0];if(s){for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++)if(r[o].negate().equals(r[a]))return Hi.INSTANCE;if(r.length===1)return r[0]}return new ua(r,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new ua(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());for(;t.length>1;){const i=t.shift(),s=t.shift(),r=[];for(const n of vS(i))for(const o of vS(s))r.push(gS.create([n,o],null,!1));t.unshift(ua.create(r,null,!1))}this.c=ua.create(t,this,!0)}return this.c}},$=class r1 extends Ll{static{this.d=[]}static all(){return r1.d.values()}constructor(t,i,s){super(t,null),this.f=i,typeof s=="object"?r1.d.push({...s,key:t}):s!==!0&&r1.d.push({key:t,description:s,type:i!=null?typeof i:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return xv.create(this.key,t)}notEqualsTo(t){return Ev.create(this.key,t)}greater(t){return zd.create(this.key,t)}},Wd=q("contextKeyService");function mS(e,t){return e<t?-1:e>t?1:0}function wo(e,t,i,s){return e<i?-1:e>i?1:t<s?-1:t>s?1:0}function vS(e){return e.type===9?e.expr:[e]}var De=q("logService"),xn=q("loggerService"),oe;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(oe||(oe={}));var KM=oe.Info;function eO(e,t){return e!==oe.Off&&e<=t}function tO(e,t,i){switch(t){case oe.Trace:e.trace(i);break;case oe.Debug:e.debug(i);break;case oe.Info:e.info(i);break;case oe.Warning:e.warn(i);break;case oe.Error:e.error(i);break;case oe.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function Ta(e,t=!1){let i="";for(let s=0;s<e.length;s++){let r=e[s];if(r instanceof Error&&(r=Ks(r,t)),typeof r=="object")try{r=JSON.stringify(r)}catch{}i+=(s>0?" ":"")+r}return i}var wS=class extends X{constructor(){super(...arguments),this.b=KM,this.c=this.B(new D),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return eO(this.b,e)}g(e){return this.q.isDisposed?!1:this.f(e)}},Pv=class extends wS{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.g(oe.Trace)&&this.m(oe.Trace,Ta([e,...t],!0))}debug(e,...t){this.g(oe.Debug)&&this.m(oe.Debug,Ta([e,...t]))}info(e,...t){this.g(oe.Info)&&this.m(oe.Info,Ta([e,...t]))}warn(e,...t){this.g(oe.Warning)&&this.m(oe.Warning,Ta([e,...t]))}error(e,...t){if(this.g(oe.Error))if(e instanceof Error){const i=Array.prototype.slice.call(arguments);i[0]=e.stack,this.m(oe.Error,Ta(i))}else this.m(oe.Error,Ta([e,...t]))}flush(){}},iO=class extends wS{constructor(e){super(),this.h=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.h)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.h)i.trace(e,...t)}debug(e,...t){for(const i of this.h)i.debug(e,...t)}info(e,...t){for(const i of this.h)i.info(e,...t)}warn(e,...t){for(const i of this.h)i.warn(e,...t)}error(e,...t){for(const i of this.h)i.error(e,...t)}flush(){for(const e of this.h)e.flush()}dispose(){for(const e of this.h)e.dispose();super.dispose()}},sO=class extends X{constructor(e,t,i){if(super(),this.j=e,this.m=t,this.b=new Ht,this.f=this.B(new D),this.onDidChangeLoggers=this.f.event,this.g=this.B(new D),this.onDidChangeLogLevel=this.g.event,this.h=this.B(new D),this.onDidChangeVisibility=this.h.event,i)for(const s of i)this.b.set(s.resource,{logger:void 0,info:s})}n(e){return Ue(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.n(e)?.logger}createLogger(e,t){const i=this.s(e),s=Ue(e)?e:t?.id??Rr(i.toString()).toString(16);let r=this.b.get(i)?.logger;const n=t?.logLevel==="always"?oe.Trace:t?.logLevel;r||(r=this.t(i,n??this.getLogLevel(i)??this.j,{...t,id:s}));const o={logger:r,info:{resource:i,id:s,logLevel:n,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(i,o),r}s(e){return Ue(e)?xt(this.m,`${e}.log`):e}setLogLevel(e,t){if(x.isUri(e)){const i=e,s=t,r=this.b.get(i);r&&s!==r.info.logLevel&&(r.info.logLevel=s===this.j?void 0:s,r.logger?.setLevel(s),this.b.set(r.info.resource,r),this.g.fire([i,s]))}else{this.j=e;for(const[i,s]of this.b.entries())this.b.get(i)?.info.logLevel===void 0&&s.logger?.setLevel(this.j);this.g.fire(this.j)}}setVisibility(e,t){const i=this.n(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this.b.set(i.info.resource,i),this.h.fire([i.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.j}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.f.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.s(e),i=this.b.get(t);i&&(i.logger&&i.logger.dispose(),this.b.delete(t),this.f.fire({added:[],removed:[i.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function rO(e){switch(e){case oe.Trace:return"trace";case oe.Debug:return"debug";case oe.Info:return"info";case oe.Warning:return"warn";case oe.Error:return"error";case oe.Off:return"off"}}function nO(e){switch(e){case"trace":return oe.Trace;case"debug":return oe.Debug;case"info":return oe.Info;case"warn":return oe.Warning;case"error":return oe.Error;case"critical":return oe.Error;case"off":return oe.Off}}var yQ=new $("logLevel",rO(oe.Info)),er=class{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}},bS=[],yS;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(yS||(yS={}));function Re(e,t,i){t instanceof er||(t=new er(t,[],!!i)),bS.push([e,t])}function oO(){return bS}var Dv=class{constructor(...e){this.a=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this.a.get(e);return this.a.set(e,t),i}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},kt=q("IExtHostInitDataService"),aO=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},xS=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);i.outgoing.set(s.key,s),s.incoming.set(i.key,i)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const i of this.a.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let i=this.a.get(t);return i||(i=new aO(t,e),this.a.set(t,i)),i}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,i]of this.a)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const i=new Set([e]),s=this.c(t,i);if(s)return s}}c(e,t){for(const[i,s]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const r=this.c(s,t);if(r)return r;t.delete(i)}}},cO=!1,ES=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},lO=class A5{constructor(t=new Dv,i=!1,s,r=cO){this.i=t,this.j=i,this.k=s,this.l=r,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(Dl,this),this._globalGraph=r?s?._globalGraph??new xS(n=>n):void 0}dispose(){if(!this.f){this.f=!0,Es(this.h),this.h.clear();for(const t of this.g)yx(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,i){this.m();const s=this,r=new class extends A5{dispose(){s.h.delete(r),super.dispose()}}(t,this.j,this,this.l);return this.h.add(r),i?.add(r),r}invokeFunction(t,...i){this.m();const s=Av.traceInvocation(this.l,t);let r=!1;try{return t({get:o=>{if(r)throw k1("service accessor is only valid during the invocation of its target method");const a=this.s(o,s);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...i)}finally{r=!0,s.stop()}}createInstance(t,...i){this.m();let s,r;return t instanceof er?(s=Av.traceCreation(this.l,t.ctor),r=this.o(t.ctor,t.staticArguments.concat(i),s)):(s=Av.traceCreation(this.l,t),r=this.o(t,i,s)),s.stop(),r}o(t,i=[],s){const r=Is.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of r){const c=this.s(a.id,s);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=r.length>0?r[0].index:i.length;if(i.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${i.length} static arguments`);const a=o-i.length;a>0?i=i.concat(new Array(a)):i=i.slice(0,o)}return Reflect.construct(t,i.concat(n))}q(t,i){if(this.i.get(t)instanceof er)this.i.set(t,i);else if(this.k)this.k.q(t,i);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const i=this.i.get(t);return!i&&this.k?this.k.r(t):i}s(t,i){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const s=this.r(t);return s instanceof er?this.u(t,s,i.branch(t,!0)):(i.branch(t,!1),s)}u(t,i,s){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,i,s)}finally{this.t.delete(t)}}v(t,i,s){const r=new xS(c=>c.id.toString());let n=0;const o=[{id:t,desc:i,_trace:s}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),r.lookupOrInsertNode(c),n++>1e3)throw new ES(r);for(const l of Is.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof er){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};r.insertEdge(c,h),o.push(h)}}}}for(;;){const c=r.roots();if(c.length===0){if(!r.isEmpty())throw new ES(r);break}for(const{data:l}of c){if(this.r(l.id)instanceof er){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}r.removeNode(l)}}return this.r(t)}w(t,i,s=[],r,n){if(this.i.get(t)instanceof er)return this.x(t,i,s,r,n,this.g);if(this.k)return this.k.w(t,i,s,r,n);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}x(t,i,s=[],r,n,o){if(r){const a=new A5(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new dL(()=>{const u=a.o(i,s,n);for(const[h,f]of c){const p=u[h];if(typeof p=="function")for(const g of f)g.disposable=p.apply(u,g.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let g=c.get(h);return g||(g=new hn,c.set(h,g)),(b,E,k)=>{if(l.isInitialized)return l.value[h](b,E,k);{const I={listener:[b,E,k],disposable:void 0},B=g.push(I);return ie(()=>{B(),I.disposable?.dispose()})}}}if(h in u)return u[h];const f=l.value;let p=f[h];return typeof p!="function"||(p=p.bind(f),u[h]=p),p},set(u,h,f){return l.value[h]=f,!0},getPrototypeOf(u){return i.prototype}})}else{const a=this.o(i,s,n);return o.add(a),a}}y(t,i){if(i&&console.warn(t),this.j)throw new Error(t)}},kS;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(kS||(kS={}));var Av=class vr{static{this.all=new Set}static{this.c=new class extends vr{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,i){return t?new vr(2,i.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):vr.c}static traceCreation(t,i){return t?new vr(1,i.name):vr.c}static{this.f=0}constructor(t,i){this.type=t,this.name=i,this.g=Date.now(),this.h=[]}branch(t,i){const s=new vr(3,t.toString());return this.h.push([t,i,s]),s}stop(){const t=Date.now()-this.g;vr.f+=t;let i=!1;function s(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){i=!0,a.push(`${c}CREATES -> ${l}`);const f=s(n+1,h);f&&a.push(f)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const r=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${s(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${vr.f.toFixed(2)}ms)`];(t>2||i)&&vr.all.add(r.join(`
`))}},Ae=q("IExtHostRpcService"),uO=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},Ml=q("IURITransformerService"),hO=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},dO=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),i=this.b.charCodeAt(this.c);return t-i}value(){return this.b[this.c]}},fO=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?j1(e,this.b,0,e.length,this.c,this.d):bl(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},SS=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const i=this.b.charCodeAt(t);if(!(i===47||this.f&&i===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?j1(e,this.b,0,e.length,this.d,this.e):bl(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},CS;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(CS||(CS={}));var $S=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new SS(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return B1(e,this.c.scheme);if(this.d[this.e]===2)return B1(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return co(e,this.c.query);if(this.d[this.e]===5)return co(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},bo=class T5{static{this.Val=Symbol("undefined_placeholder")}static wrap(t){return t===void 0?T5.Val:t}static unwrap(t){return t===T5.Val?void 0:t}},Vd=class{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}isEmpty(){return!this.left&&!this.mid&&!this.right&&this.value===void 0}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},IS;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(IS||(IS={}));var En=class Jh{static forUris(t=()=>!1,i=()=>!1){return new Jh(new $S(t,i))}static forPaths(t=!1){return new Jh(new SS(void 0,!t))}static forStrings(){return new Jh(new dO)}static forConfigKeys(){return new Jh(new fO)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,i){if(i){const s=i.slice(0);cx(s);for(const r of s)this.set(r,t)}else{const s=t.slice(0);cx(s);for(const r of s)this.set(r[0],r[1])}}set(t,i){const s=this.b.reset(t);let r;this.c||(this.c=new Vd,this.c.segment=s.value());const n=[];for(r=this.c;;){const a=s.cmp(r.segment);if(a>0)r.left||(r.left=new Vd,r.left.segment=s.value()),n.push([-1,r]),r=r.left;else if(a<0)r.right||(r.right=new Vd,r.right.segment=s.value()),n.push([1,r]),r=r.right;else if(s.hasNext())s.next(),r.mid||(r.mid=new Vd,r.mid.segment=s.value()),n.push([0,r]),r=r.mid;else break}const o=bo.unwrap(r.value);r.value=bo.wrap(i),r.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return bo.unwrap(this.d(t)?.value)}d(t){const i=this.b.reset(t);let s=this.c;for(;s;){const r=i.cmp(s.segment);if(r>0)s=s.left;else if(r<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else break}return s}has(t){const i=this.d(t);return!(i?.value===void 0&&i?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,i){const s=this.b.reset(t),r=[];let n=this.c;for(;n;){const o=s.cmp(n.segment);if(o>0)r.push([-1,n]),n=n.left;else if(o<0)r.push([1,n]),n=n.right;else if(s.hasNext())s.next(),r.push([0,n]),n=n.mid;else break}if(n){if(i?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=[[1,n]],a=this.f(n.right,o);if(a.key){n.key=a.key,n.value=a.value,n.segment=a.segment;const c=a.right;if(o.length>1){const[u,h]=o[o.length-1];switch(u){case-1:h.left=c;break;case 0:P1(!1);case 1:P1(!1)}}else n.right=c;const l=this.g(o);if(r.length>0){const[u,h]=r[r.length-1];switch(u){case-1:h.left=l;break;case 0:h.mid=l;break;case 1:h.right=l;break}}else this.c=l}}else{const o=n.left??n.right;if(r.length>0){const[a,c]=r[r.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}this.c=this.g(r)??this.c}}f(t,i){for(;t.left;)i.push([-1,t]),t=t.left;return t}g(t){for(let i=t.length-1;i>=0;i--){const s=t[i][1];s.updateHeight();const r=s.balanceFactor();if(r>1?(s.right.balanceFactor()>=0||(s.right=s.right.rotateRight()),t[i][1]=s.rotateLeft()):r<-1&&(s.left.balanceFactor()<=0||(s.left=s.left.rotateLeft()),t[i][1]=s.rotateRight()),i>0)switch(t[i-1][0]){case-1:t[i-1][1].left=t[i][1];break;case 1:t[i-1][1].right=t[i][1];break;case 0:t[i-1][1].mid=t[i][1];break}else return t[0][1]}}findSubstr(t){const i=this.b.reset(t);let s=this.c,r;for(;s;){const n=i.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(i.hasNext())i.next(),r=bo.unwrap(s.value)||r,s=s.mid;else break}return s&&bo.unwrap(s.value)||r}findSuperstr(t){return this.h(t,!1)}h(t,i){const s=this.b.reset(t);let r=this.c;for(;r;){const n=s.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(s.hasNext())s.next(),r=r.mid;else return r.mid?this.j(r.mid):i?bo.unwrap(r.value):void 0}}hasElementOrSubtree(t){return this.h(t,!0)!==void 0}forEach(t){for(const[i,s]of this)t(s,i)}*[Symbol.iterator](){yield*this.j(this.c)}j(t){const i=[];return this.l(t,i),i[Symbol.iterator]()}l(t,i){t&&(t.left&&this.l(t.left,i),t.value!==void 0&&i.push([t.key,bo.unwrap(t.value)]),t.mid&&this.l(t.mid,i),t.right&&this.l(t.right,i))}_isBalanced(){const t=i=>{if(!i)return!0;const s=i.balanceFactor();return s<-1||s>1?!1:t(i.left)&&t(i.right)};return t(this.c)}};function pO(e,t,i){return Math.min(Math.max(e,t),i)}var gO=class{constructor(){this.a=0}getNext(){return this.a++}},mO=class{constructor(){this.a=1,this.b=0}update(e){return this.b=this.b+(e-this.b)/this.a,this.a+=1,this.b}get value(){return this.b}},Ol;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(Ol||(Ol={})),function(e){const t="error",i="warning",s="warn",r="info",n="ignore";function o(c){return c?hs(t,c)?e.Error:hs(i,c)||hs(s,c)?e.Warning:hs(r,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return i;case e.Info:return r;default:return n}}e.toString=a}(Ol||(Ol={}));var Mt=Ol,vO=Mt,xQ=q("notificationService"),PS;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.OPTIONAL=1]="OPTIONAL",e[e.SILENT=2]="SILENT",e[e.URGENT=3]="URGENT"})(PS||(PS={}));var DS;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(DS||(DS={}));var AS;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(AS||(AS={}));var _d=q("contextService");function wO(e){const t=e;return typeof t?.id=="string"&&x.isUri(t.uri)}function bO(e){const t=e;return typeof t?.id=="string"&&x.isUri(t.configPath)}var TS;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(TS||(TS={}));var yO=class{get folders(){return this.g}set folders(e){this.g=e,this.n()}constructor(e,t,i,s,r){this.h=e,this.j=i,this.k=s,this.l=r,this.c=En.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=En.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},Tv=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return xt(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function Rv(e){return new Tv({uri:e,index:0,name:Y1(e)},{uri:e.toString()})}var RS="code-workspace",xO=`.${RS}`,EQ=[{name:d(2661,null),extensions:[RS]}];function EO(e){return(typeof e=="string"?wl(e):vE(e))===xO}var kO=class{constructor(){this.a=new Set(Object.keys(G)),this.b=new Map,this.extUri=new yl(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},Ra=q("IExtHostFileSystemInfo"),Lv=Object.freeze({create:e=>va(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>Lv.split(e).filter(t=>!t.startsWith("#"))}),kQ=new Uint32Array(10),LS;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(LS||(LS={}));var NS;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(NS||(NS={}));var MS;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(MS||(MS={}));var SQ=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),CQ=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),$Q=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),IQ=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function OS(...e){return function(t,i){for(let s=0,r=e.length;s<r;s++){const n=e[s](t,i);if(n)return n}return null}}var PQ=FS.bind(void 0,!1),Nv=FS.bind(void 0,!0);function FS(e,t,i){if(!i||i.length<t.length)return null;let s;return e?s=bd(i,t):s=i.indexOf(t)===0,s?t.length>0?[{start:0,end:t.length}]:[]:null}function SO(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return i===-1?null:[{start:i,end:i+e.length}]}function CO(e,t){return Mv(e.toLowerCase(),t.toLowerCase(),0,0)}function Mv(e,t,i,s){if(i===e.length)return[];if(s===t.length)return null;if(e[i]===t[s]){let r=null;return(r=Mv(e,t,i+1,s+1))?jS({start:s,end:s+1},r):null}return Mv(e,t,i,s+1)}function Ov(e){return 97<=e&&e<=122}function Fl(e){return 65<=e&&e<=90}function Fv(e){return 48<=e&&e<=57}function $O(e){return e===32||e===9||e===10||e===13}var IO=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>IO.add(e.charCodeAt(0)));function US(e){return Ov(e)||Fl(e)||Fv(e)}function jS(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function BS(e,t){for(let i=t;i<e.length;i++){const s=e.charCodeAt(i);if(Fl(s)||Fv(s)||i>0&&!US(e.charCodeAt(i-1)))return i}return e.length}function Uv(e,t,i,s){if(i===e.length)return[];if(s===t.length)return null;if(e[i]!==t[s].toLowerCase())return null;{let r=null,n=s+1;for(r=Uv(e,t,i+1,s+1);!r&&(n=BS(t,n))<t.length;)r=Uv(e,t,i+1,n),n++;return r===null?null:jS({start:s,end:s+1},r)}}function PO(e){let t=0,i=0,s=0,r=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),Fl(n)&&t++,Ov(n)&&i++,US(n)&&s++,Fv(n)&&r++;const o=t/e.length,a=i/e.length,c=s/e.length,l=r/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function DO(e){const{upperPercent:t,lowerPercent:i}=e;return i===0&&t>.6}function AO(e){const{upperPercent:t,lowerPercent:i,alphaPercent:s,numericPercent:r}=e;return i>.2&&t<.8&&s>.6&&r<.2}function TO(e){let t=0,i=0,s=0,r=0;for(let n=0;n<e.length;n++)s=e.charCodeAt(n),Fl(s)&&t++,Ov(s)&&i++,$O(s)&&r++;return(t===0||i===0)&&r===0?e.length<=30:t<=5}function HS(e,t){if(!t||(t=t.trim(),t.length===0)||!TO(e))return null;t.length>60&&(t=t.substring(0,60));const i=PO(t);if(!AO(i)){if(!DO(i))return null;t=t.toLowerCase()}let s=null,r=0;for(e=e.toLowerCase();r<t.length&&(s=Uv(e,t,0,r))===null;)r=BS(t,r+1);return s}var DQ=OS(Nv,HS,SO),AQ=OS(Nv,HS,CO),TQ=new ll(1e4),qd=128;function jv(){const e=[],t=[];for(let i=0;i<=qd;i++)t[i]=0;for(let i=0;i<=qd;i++)e.push(t.slice(0));return e}function zS(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}var RQ=zS(2*qd),LQ=zS(2*qd),NQ=jv(),MQ=jv(),OQ=jv(),WS;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(WS||(WS={}));var VS;(function(e){e.Default=[-100,0];function t(i){return!i||i.length===2&&i[0]===-100&&i[1]===0}e.isDefault=t})(VS||(VS={}));var FQ=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},Bv=Object.create(null);function m(e,t){if(Ue(t)){const i=Bv[t];if(i===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return Bv[e]=t,{id:e}}function RO(){return Bv}var LO={add:m("add",6e4),plus:m("plus",6e4),gistNew:m("gist-new",6e4),repoCreate:m("repo-create",6e4),lightbulb:m("lightbulb",60001),lightBulb:m("light-bulb",60001),repo:m("repo",60002),repoDelete:m("repo-delete",60002),gistFork:m("gist-fork",60003),repoForked:m("repo-forked",60003),gitPullRequest:m("git-pull-request",60004),gitPullRequestAbandoned:m("git-pull-request-abandoned",60004),recordKeys:m("record-keys",60005),keyboard:m("keyboard",60005),tag:m("tag",60006),gitPullRequestLabel:m("git-pull-request-label",60006),tagAdd:m("tag-add",60006),tagRemove:m("tag-remove",60006),person:m("person",60007),personFollow:m("person-follow",60007),personOutline:m("person-outline",60007),personFilled:m("person-filled",60007),gitBranch:m("git-branch",60008),gitBranchCreate:m("git-branch-create",60008),gitBranchDelete:m("git-branch-delete",60008),sourceControl:m("source-control",60008),mirror:m("mirror",60009),mirrorPublic:m("mirror-public",60009),star:m("star",60010),starAdd:m("star-add",60010),starDelete:m("star-delete",60010),starEmpty:m("star-empty",60010),comment:m("comment",60011),commentAdd:m("comment-add",60011),alert:m("alert",60012),warning:m("warning",60012),search:m("search",60013),searchSave:m("search-save",60013),logOut:m("log-out",60014),signOut:m("sign-out",60014),logIn:m("log-in",60015),signIn:m("sign-in",60015),eye:m("eye",60016),eyeUnwatch:m("eye-unwatch",60016),eyeWatch:m("eye-watch",60016),circleFilled:m("circle-filled",60017),primitiveDot:m("primitive-dot",60017),closeDirty:m("close-dirty",60017),debugBreakpoint:m("debug-breakpoint",60017),debugBreakpointDisabled:m("debug-breakpoint-disabled",60017),debugHint:m("debug-hint",60017),terminalDecorationSuccess:m("terminal-decoration-success",60017),primitiveSquare:m("primitive-square",60018),edit:m("edit",60019),pencil:m("pencil",60019),info:m("info",60020),issueOpened:m("issue-opened",60020),gistPrivate:m("gist-private",60021),gitForkPrivate:m("git-fork-private",60021),lock:m("lock",60021),mirrorPrivate:m("mirror-private",60021),close:m("close",60022),removeClose:m("remove-close",60022),x:m("x",60022),repoSync:m("repo-sync",60023),sync:m("sync",60023),clone:m("clone",60024),desktopDownload:m("desktop-download",60024),beaker:m("beaker",60025),microscope:m("microscope",60025),vm:m("vm",60026),deviceDesktop:m("device-desktop",60026),file:m("file",60027),fileText:m("file-text",60027),more:m("more",60028),ellipsis:m("ellipsis",60028),kebabHorizontal:m("kebab-horizontal",60028),mailReply:m("mail-reply",60029),reply:m("reply",60029),organization:m("organization",60030),organizationFilled:m("organization-filled",60030),organizationOutline:m("organization-outline",60030),newFile:m("new-file",60031),fileAdd:m("file-add",60031),newFolder:m("new-folder",60032),fileDirectoryCreate:m("file-directory-create",60032),trash:m("trash",60033),trashcan:m("trashcan",60033),history:m("history",60034),clock:m("clock",60034),folder:m("folder",60035),fileDirectory:m("file-directory",60035),symbolFolder:m("symbol-folder",60035),logoGithub:m("logo-github",60036),markGithub:m("mark-github",60036),github:m("github",60036),terminal:m("terminal",60037),console:m("console",60037),repl:m("repl",60037),zap:m("zap",60038),symbolEvent:m("symbol-event",60038),error:m("error",60039),stop:m("stop",60039),variable:m("variable",60040),symbolVariable:m("symbol-variable",60040),array:m("array",60042),symbolArray:m("symbol-array",60042),symbolModule:m("symbol-module",60043),symbolPackage:m("symbol-package",60043),symbolNamespace:m("symbol-namespace",60043),symbolObject:m("symbol-object",60043),symbolMethod:m("symbol-method",60044),symbolFunction:m("symbol-function",60044),symbolConstructor:m("symbol-constructor",60044),symbolBoolean:m("symbol-boolean",60047),symbolNull:m("symbol-null",60047),symbolNumeric:m("symbol-numeric",60048),symbolNumber:m("symbol-number",60048),symbolStructure:m("symbol-structure",60049),symbolStruct:m("symbol-struct",60049),symbolParameter:m("symbol-parameter",60050),symbolTypeParameter:m("symbol-type-parameter",60050),symbolKey:m("symbol-key",60051),symbolText:m("symbol-text",60051),symbolReference:m("symbol-reference",60052),goToFile:m("go-to-file",60052),symbolEnum:m("symbol-enum",60053),symbolValue:m("symbol-value",60053),symbolRuler:m("symbol-ruler",60054),symbolUnit:m("symbol-unit",60054),activateBreakpoints:m("activate-breakpoints",60055),archive:m("archive",60056),arrowBoth:m("arrow-both",60057),arrowDown:m("arrow-down",60058),arrowLeft:m("arrow-left",60059),arrowRight:m("arrow-right",60060),arrowSmallDown:m("arrow-small-down",60061),arrowSmallLeft:m("arrow-small-left",60062),arrowSmallRight:m("arrow-small-right",60063),arrowSmallUp:m("arrow-small-up",60064),arrowUp:m("arrow-up",60065),bell:m("bell",60066),bold:m("bold",60067),book:m("book",60068),bookmark:m("bookmark",60069),debugBreakpointConditionalUnverified:m("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:m("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:m("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:m("debug-breakpoint-data-unverified",60072),debugBreakpointData:m("debug-breakpoint-data",60073),debugBreakpointDataDisabled:m("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:m("debug-breakpoint-log-unverified",60074),debugBreakpointLog:m("debug-breakpoint-log",60075),debugBreakpointLogDisabled:m("debug-breakpoint-log-disabled",60075),briefcase:m("briefcase",60076),broadcast:m("broadcast",60077),browser:m("browser",60078),bug:m("bug",60079),calendar:m("calendar",60080),caseSensitive:m("case-sensitive",60081),check:m("check",60082),checklist:m("checklist",60083),chevronDown:m("chevron-down",60084),chevronLeft:m("chevron-left",60085),chevronRight:m("chevron-right",60086),chevronUp:m("chevron-up",60087),chromeClose:m("chrome-close",60088),chromeMaximize:m("chrome-maximize",60089),chromeMinimize:m("chrome-minimize",60090),chromeRestore:m("chrome-restore",60091),circleOutline:m("circle-outline",60092),circle:m("circle",60092),debugBreakpointUnverified:m("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:m("terminal-decoration-incomplete",60092),circleSlash:m("circle-slash",60093),circuitBoard:m("circuit-board",60094),clearAll:m("clear-all",60095),clippy:m("clippy",60096),closeAll:m("close-all",60097),cloudDownload:m("cloud-download",60098),cloudUpload:m("cloud-upload",60099),code:m("code",60100),collapseAll:m("collapse-all",60101),colorMode:m("color-mode",60102),commentDiscussion:m("comment-discussion",60103),creditCard:m("credit-card",60105),dash:m("dash",60108),dashboard:m("dashboard",60109),database:m("database",60110),debugContinue:m("debug-continue",60111),debugDisconnect:m("debug-disconnect",60112),debugPause:m("debug-pause",60113),debugRestart:m("debug-restart",60114),debugStart:m("debug-start",60115),debugStepInto:m("debug-step-into",60116),debugStepOut:m("debug-step-out",60117),debugStepOver:m("debug-step-over",60118),debugStop:m("debug-stop",60119),debug:m("debug",60120),deviceCameraVideo:m("device-camera-video",60121),deviceCamera:m("device-camera",60122),deviceMobile:m("device-mobile",60123),diffAdded:m("diff-added",60124),diffIgnored:m("diff-ignored",60125),diffModified:m("diff-modified",60126),diffRemoved:m("diff-removed",60127),diffRenamed:m("diff-renamed",60128),diff:m("diff",60129),diffSidebyside:m("diff-sidebyside",60129),discard:m("discard",60130),editorLayout:m("editor-layout",60131),emptyWindow:m("empty-window",60132),exclude:m("exclude",60133),extensions:m("extensions",60134),eyeClosed:m("eye-closed",60135),fileBinary:m("file-binary",60136),fileCode:m("file-code",60137),fileMedia:m("file-media",60138),filePdf:m("file-pdf",60139),fileSubmodule:m("file-submodule",60140),fileSymlinkDirectory:m("file-symlink-directory",60141),fileSymlinkFile:m("file-symlink-file",60142),fileZip:m("file-zip",60143),files:m("files",60144),filter:m("filter",60145),flame:m("flame",60146),foldDown:m("fold-down",60147),foldUp:m("fold-up",60148),fold:m("fold",60149),folderActive:m("folder-active",60150),folderOpened:m("folder-opened",60151),gear:m("gear",60152),gift:m("gift",60153),gistSecret:m("gist-secret",60154),gist:m("gist",60155),gitCommit:m("git-commit",60156),gitCompare:m("git-compare",60157),compareChanges:m("compare-changes",60157),gitMerge:m("git-merge",60158),githubAction:m("github-action",60159),githubAlt:m("github-alt",60160),globe:m("globe",60161),grabber:m("grabber",60162),graph:m("graph",60163),gripper:m("gripper",60164),heart:m("heart",60165),home:m("home",60166),horizontalRule:m("horizontal-rule",60167),hubot:m("hubot",60168),inbox:m("inbox",60169),issueReopened:m("issue-reopened",60171),issues:m("issues",60172),italic:m("italic",60173),jersey:m("jersey",60174),json:m("json",60175),kebabVertical:m("kebab-vertical",60176),key:m("key",60177),law:m("law",60178),lightbulbAutofix:m("lightbulb-autofix",60179),linkExternal:m("link-external",60180),link:m("link",60181),listOrdered:m("list-ordered",60182),listUnordered:m("list-unordered",60183),liveShare:m("live-share",60184),loading:m("loading",60185),location:m("location",60186),mailRead:m("mail-read",60187),mail:m("mail",60188),markdown:m("markdown",60189),megaphone:m("megaphone",60190),mention:m("mention",60191),milestone:m("milestone",60192),gitPullRequestMilestone:m("git-pull-request-milestone",60192),mortarBoard:m("mortar-board",60193),move:m("move",60194),multipleWindows:m("multiple-windows",60195),mute:m("mute",60196),noNewline:m("no-newline",60197),note:m("note",60198),octoface:m("octoface",60199),openPreview:m("open-preview",60200),package:m("package",60201),paintcan:m("paintcan",60202),pin:m("pin",60203),play:m("play",60204),run:m("run",60204),plug:m("plug",60205),preserveCase:m("preserve-case",60206),preview:m("preview",60207),project:m("project",60208),pulse:m("pulse",60209),question:m("question",60210),quote:m("quote",60211),radioTower:m("radio-tower",60212),reactions:m("reactions",60213),references:m("references",60214),refresh:m("refresh",60215),regex:m("regex",60216),remoteExplorer:m("remote-explorer",60217),remote:m("remote",60218),remove:m("remove",60219),replaceAll:m("replace-all",60220),replace:m("replace",60221),repoClone:m("repo-clone",60222),repoForcePush:m("repo-force-push",60223),repoPull:m("repo-pull",60224),repoPush:m("repo-push",60225),report:m("report",60226),requestChanges:m("request-changes",60227),rocket:m("rocket",60228),rootFolderOpened:m("root-folder-opened",60229),rootFolder:m("root-folder",60230),rss:m("rss",60231),ruby:m("ruby",60232),saveAll:m("save-all",60233),saveAs:m("save-as",60234),save:m("save",60235),screenFull:m("screen-full",60236),screenNormal:m("screen-normal",60237),searchStop:m("search-stop",60238),server:m("server",60240),settingsGear:m("settings-gear",60241),settings:m("settings",60242),shield:m("shield",60243),smiley:m("smiley",60244),sortPrecedence:m("sort-precedence",60245),splitHorizontal:m("split-horizontal",60246),splitVertical:m("split-vertical",60247),squirrel:m("squirrel",60248),starFull:m("star-full",60249),starHalf:m("star-half",60250),symbolClass:m("symbol-class",60251),symbolColor:m("symbol-color",60252),symbolConstant:m("symbol-constant",60253),symbolEnumMember:m("symbol-enum-member",60254),symbolField:m("symbol-field",60255),symbolFile:m("symbol-file",60256),symbolInterface:m("symbol-interface",60257),symbolKeyword:m("symbol-keyword",60258),symbolMisc:m("symbol-misc",60259),symbolOperator:m("symbol-operator",60260),symbolProperty:m("symbol-property",60261),wrench:m("wrench",60261),wrenchSubaction:m("wrench-subaction",60261),symbolSnippet:m("symbol-snippet",60262),tasklist:m("tasklist",60263),telescope:m("telescope",60264),textSize:m("text-size",60265),threeBars:m("three-bars",60266),thumbsdown:m("thumbsdown",60267),thumbsup:m("thumbsup",60268),tools:m("tools",60269),triangleDown:m("triangle-down",60270),triangleLeft:m("triangle-left",60271),triangleRight:m("triangle-right",60272),triangleUp:m("triangle-up",60273),twitter:m("twitter",60274),unfold:m("unfold",60275),unlock:m("unlock",60276),unmute:m("unmute",60277),unverified:m("unverified",60278),verified:m("verified",60279),versions:m("versions",60280),vmActive:m("vm-active",60281),vmOutline:m("vm-outline",60282),vmRunning:m("vm-running",60283),watch:m("watch",60284),whitespace:m("whitespace",60285),wholeWord:m("whole-word",60286),window:m("window",60287),wordWrap:m("word-wrap",60288),zoomIn:m("zoom-in",60289),zoomOut:m("zoom-out",60290),listFilter:m("list-filter",60291),listFlat:m("list-flat",60292),listSelection:m("list-selection",60293),selection:m("selection",60293),listTree:m("list-tree",60294),debugBreakpointFunctionUnverified:m("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:m("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:m("debug-breakpoint-function-disabled",60296),debugStackframeActive:m("debug-stackframe-active",60297),circleSmallFilled:m("circle-small-filled",60298),debugStackframeDot:m("debug-stackframe-dot",60298),terminalDecorationMark:m("terminal-decoration-mark",60298),debugStackframe:m("debug-stackframe",60299),debugStackframeFocused:m("debug-stackframe-focused",60299),debugBreakpointUnsupported:m("debug-breakpoint-unsupported",60300),symbolString:m("symbol-string",60301),debugReverseContinue:m("debug-reverse-continue",60302),debugStepBack:m("debug-step-back",60303),debugRestartFrame:m("debug-restart-frame",60304),debugAlt:m("debug-alt",60305),callIncoming:m("call-incoming",60306),callOutgoing:m("call-outgoing",60307),menu:m("menu",60308),expandAll:m("expand-all",60309),feedback:m("feedback",60310),gitPullRequestReviewer:m("git-pull-request-reviewer",60310),groupByRefType:m("group-by-ref-type",60311),ungroupByRefType:m("ungroup-by-ref-type",60312),account:m("account",60313),gitPullRequestAssignee:m("git-pull-request-assignee",60313),bellDot:m("bell-dot",60314),debugConsole:m("debug-console",60315),library:m("library",60316),output:m("output",60317),runAll:m("run-all",60318),syncIgnored:m("sync-ignored",60319),pinned:m("pinned",60320),githubInverted:m("github-inverted",60321),serverProcess:m("server-process",60322),serverEnvironment:m("server-environment",60323),pass:m("pass",60324),issueClosed:m("issue-closed",60324),stopCircle:m("stop-circle",60325),playCircle:m("play-circle",60326),record:m("record",60327),debugAltSmall:m("debug-alt-small",60328),vmConnect:m("vm-connect",60329),cloud:m("cloud",60330),merge:m("merge",60331),export:m("export",60332),graphLeft:m("graph-left",60333),magnet:m("magnet",60334),notebook:m("notebook",60335),redo:m("redo",60336),checkAll:m("check-all",60337),pinnedDirty:m("pinned-dirty",60338),passFilled:m("pass-filled",60339),circleLargeFilled:m("circle-large-filled",60340),circleLarge:m("circle-large",60341),circleLargeOutline:m("circle-large-outline",60341),combine:m("combine",60342),gather:m("gather",60342),table:m("table",60343),variableGroup:m("variable-group",60344),typeHierarchy:m("type-hierarchy",60345),typeHierarchySub:m("type-hierarchy-sub",60346),typeHierarchySuper:m("type-hierarchy-super",60347),gitPullRequestCreate:m("git-pull-request-create",60348),runAbove:m("run-above",60349),runBelow:m("run-below",60350),notebookTemplate:m("notebook-template",60351),debugRerun:m("debug-rerun",60352),workspaceTrusted:m("workspace-trusted",60353),workspaceUntrusted:m("workspace-untrusted",60354),workspaceUnknown:m("workspace-unknown",60355),terminalCmd:m("terminal-cmd",60356),terminalDebian:m("terminal-debian",60357),terminalLinux:m("terminal-linux",60358),terminalPowershell:m("terminal-powershell",60359),terminalTmux:m("terminal-tmux",60360),terminalUbuntu:m("terminal-ubuntu",60361),terminalBash:m("terminal-bash",60362),arrowSwap:m("arrow-swap",60363),copy:m("copy",60364),personAdd:m("person-add",60365),filterFilled:m("filter-filled",60366),wand:m("wand",60367),debugLineByLine:m("debug-line-by-line",60368),inspect:m("inspect",60369),layers:m("layers",60370),layersDot:m("layers-dot",60371),layersActive:m("layers-active",60372),compass:m("compass",60373),compassDot:m("compass-dot",60374),compassActive:m("compass-active",60375),azure:m("azure",60376),issueDraft:m("issue-draft",60377),gitPullRequestClosed:m("git-pull-request-closed",60378),gitPullRequestDraft:m("git-pull-request-draft",60379),debugAll:m("debug-all",60380),debugCoverage:m("debug-coverage",60381),runErrors:m("run-errors",60382),folderLibrary:m("folder-library",60383),debugContinueSmall:m("debug-continue-small",60384),beakerStop:m("beaker-stop",60385),graphLine:m("graph-line",60386),graphScatter:m("graph-scatter",60387),pieChart:m("pie-chart",60388),bracket:m("bracket",60175),bracketDot:m("bracket-dot",60389),bracketError:m("bracket-error",60390),lockSmall:m("lock-small",60391),azureDevops:m("azure-devops",60392),verifiedFilled:m("verified-filled",60393),newline:m("newline",60394),layout:m("layout",60395),layoutActivitybarLeft:m("layout-activitybar-left",60396),layoutActivitybarRight:m("layout-activitybar-right",60397),layoutPanelLeft:m("layout-panel-left",60398),layoutPanelCenter:m("layout-panel-center",60399),layoutPanelJustify:m("layout-panel-justify",60400),layoutPanelRight:m("layout-panel-right",60401),layoutPanel:m("layout-panel",60402),layoutSidebarLeft:m("layout-sidebar-left",60403),layoutSidebarRight:m("layout-sidebar-right",60404),layoutStatusbar:m("layout-statusbar",60405),layoutMenubar:m("layout-menubar",60406),layoutCentered:m("layout-centered",60407),target:m("target",60408),indent:m("indent",60409),recordSmall:m("record-small",60410),errorSmall:m("error-small",60411),terminalDecorationError:m("terminal-decoration-error",60411),arrowCircleDown:m("arrow-circle-down",60412),arrowCircleLeft:m("arrow-circle-left",60413),arrowCircleRight:m("arrow-circle-right",60414),arrowCircleUp:m("arrow-circle-up",60415),layoutSidebarRightOff:m("layout-sidebar-right-off",60416),layoutPanelOff:m("layout-panel-off",60417),layoutSidebarLeftOff:m("layout-sidebar-left-off",60418),blank:m("blank",60419),heartFilled:m("heart-filled",60420),map:m("map",60421),mapHorizontal:m("map-horizontal",60421),foldHorizontal:m("fold-horizontal",60421),mapFilled:m("map-filled",60422),mapHorizontalFilled:m("map-horizontal-filled",60422),foldHorizontalFilled:m("fold-horizontal-filled",60422),circleSmall:m("circle-small",60423),bellSlash:m("bell-slash",60424),bellSlashDot:m("bell-slash-dot",60425),commentUnresolved:m("comment-unresolved",60426),gitPullRequestGoToChanges:m("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:m("git-pull-request-new-changes",60428),searchFuzzy:m("search-fuzzy",60429),commentDraft:m("comment-draft",60430),send:m("send",60431),sparkle:m("sparkle",60432),insert:m("insert",60433),mic:m("mic",60434),thumbsdownFilled:m("thumbsdown-filled",60435),thumbsupFilled:m("thumbsup-filled",60436),coffee:m("coffee",60437),snake:m("snake",60438),game:m("game",60439),vr:m("vr",60440),chip:m("chip",60441),piano:m("piano",60442),music:m("music",60443),micFilled:m("mic-filled",60444),repoFetch:m("repo-fetch",60445),copilot:m("copilot",60446),lightbulbSparkle:m("lightbulb-sparkle",60447),robot:m("robot",60448),sparkleFilled:m("sparkle-filled",60449),diffSingle:m("diff-single",60450),diffMultiple:m("diff-multiple",60451),surroundWith:m("surround-with",60452),share:m("share",60453),gitStash:m("git-stash",60454),gitStashApply:m("git-stash-apply",60455),gitStashPop:m("git-stash-pop",60456),vscode:m("vscode",60457),vscodeInsiders:m("vscode-insiders",60458),codeOss:m("code-oss",60459),runCoverage:m("run-coverage",60460),runAllCoverage:m("run-all-coverage",60461),coverage:m("coverage",60462),githubProject:m("github-project",60463),mapVertical:m("map-vertical",60464),foldVertical:m("fold-vertical",60464),mapVerticalFilled:m("map-vertical-filled",60465),foldVerticalFilled:m("fold-vertical-filled",60465),goToSearch:m("go-to-search",60466),percentage:m("percentage",60467),sortPercentage:m("sort-percentage",60467),attach:m("attach",60468),goToEditingSession:m("go-to-editing-session",60469),editSession:m("edit-session",60470),codeReview:m("code-review",60471),copilotWarning:m("copilot-warning",60472),python:m("python",60473),copilotLarge:m("copilot-large",60474),copilotWarningLarge:m("copilot-warning-large",60475),keyboardTab:m("keyboard-tab",60476),copilotBlocked:m("copilot-blocked",60477),copilotNotConnected:m("copilot-not-connected",60478),flag:m("flag",60479),lightbulbEmpty:m("lightbulb-empty",60480),symbolMethodArrow:m("symbol-method-arrow",60481),copilotUnavailable:m("copilot-unavailable",60482),repoPinned:m("repo-pinned",60483),keyboardTabAbove:m("keyboard-tab-above",60484),keyboardTabBelow:m("keyboard-tab-below",60485),gitPullRequestDone:m("git-pull-request-done",60486),mcp:m("mcp",60487),extensionsLarge:m("extensions-large",60488),layoutPanelDock:m("layout-panel-dock",60489),layoutSidebarLeftDock:m("layout-sidebar-left-dock",60490),layoutSidebarRightDock:m("layout-sidebar-right-dock",60491)},NO={dialogError:m("dialog-error","error"),dialogWarning:m("dialog-warning","warning"),dialogInfo:m("dialog-info","info"),dialogClose:m("dialog-close","close"),treeItemExpanded:m("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:m("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:m("tree-filter-on-type-off","list-selection"),treeFilterClear:m("tree-filter-clear","close"),treeItemLoading:m("tree-item-loading","loading"),menuSelection:m("menu-selection","check"),menuSubmenu:m("menu-submenu","chevron-right"),menuBarMore:m("menubar-more","more"),scrollbarButtonLeft:m("scrollbar-button-left","triangle-left"),scrollbarButtonRight:m("scrollbar-button-right","triangle-right"),scrollbarButtonUp:m("scrollbar-button-up","triangle-up"),scrollbarButtonDown:m("scrollbar-button-down","triangle-down"),toolBarMore:m("toolbar-more","more"),quickInputBack:m("quick-input-back","arrow-left"),dropDownButton:m("drop-down-button",60084),symbolCustomColor:m("symbol-customcolor",60252),exportIcon:m("export",60332),workspaceUnspecified:m("workspace-unspecified",60355),newLine:m("newline",60394),thumbsDownFilled:m("thumbsdown-filled",60435),thumbsUpFilled:m("thumbsup-filled",60436),gitFetch:m("git-fetch",60445),lightbulbSparkleAutofix:m("lightbulb-sparkle-autofix",60447),debugBreakpointPending:m("debug-breakpoint-pending",60377)},le={...LO,...NO},La;(function(e){function t(i){return!!i&&typeof i=="object"&&typeof i.id=="string"}e.isThemeColor=t})(La||(La={}));var Ut;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(f){const p=t.exec(f.id);if(!p)return i(le.error);const[,g,v]=p,b=["codicon","codicon-"+g];return v&&b.push("codicon-modifier-"+v.substring(1)),b}e.asClassNameArray=i;function s(f){return i(f).join(" ")}e.asClassName=s;function r(f){return"."+i(f).join(".")}e.asCSSSelector=r;function n(f){return!!f&&typeof f=="object"&&typeof f.id=="string"&&(typeof f.color>"u"||La.isThemeColor(f.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(f){const p=o.exec(f);if(!p)return;const[,g]=p;return{id:g}}e.fromString=a;function c(f){return{id:f}}e.fromId=c;function l(f,p){let g=f.id;const v=g.lastIndexOf("~");return v!==-1&&(g=g.substring(0,v)),p&&(g=`${g}~${p}`),{id:g}}e.modify=l;function u(f){const p=f.id.lastIndexOf("~");if(p!==-1)return f.id.substring(p+1)}e.getModifier=u;function h(f,p){return f.id===p.id&&f.color?.id===p.color?.id}e.isEqual=h})(Ut||(Ut={}));var Hv=new RegExp(`\\$\\(${Ut.iconNameExpression}(?:${Ut.iconModifierExpression})?\\)`,"g"),MO=new RegExp(`(\\\\)?${Hv.source}`,"g");function OO(e){return e.replace(MO,(t,i)=>i?t:`\\${t}`)}var UQ=new RegExp(`\\\\${Hv.source}`,"g"),jQ=new RegExp(`(\\s)?(\\\\)?${Hv.source}(\\s)?`,"g"),BQ=new RegExp(`\\$\\(${Ut.iconNameCharacter}+\\)`,"g"),_S;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(_S||(_S={}));var Na=class vA{static lift(t){const i=new vA(t.value,t);return i.uris=t.uris,i.baseUri=t.baseUri?x.revive(t.baseUri):void 0,i}constructor(t="",i=!1){if(this.value=t,typeof this.value!="string")throw Ie("value");typeof i=="boolean"?(this.isTrusted=i,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=i.isTrusted??void 0,this.supportThemeIcons=i.supportThemeIcons??!1,this.supportHtml=i.supportHtml??!1)}appendText(t,i=0){return this.value+=FO(this.supportThemeIcons?OO(t):t).replace(/([ \t]+)/g,(s,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,i===1?`\\
`:`

`),this}appendMarkdown(t){return this.value+=t,this}appendCodeblock(t,i){return this.value+=`
${UO(i,t)}
`,this}appendLink(t,i,s){return this.value+="[",this.value+=this.c(i,"]"),this.value+="](",this.value+=this.c(String(t),")"),s&&(this.value+=` "${this.c(this.c(s,'"'),")")}"`),this.value+=")",this}c(t,i){const s=new RegExp(pn(i),"g");return t.replace(s,(r,n)=>t.charAt(n-1)!=="\\"?`\\${r}`:r)}};function Nr(e){return e instanceof Na?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function FO(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function UO(e,t){const i=e.match(/^`+/gm)?.reduce((r,n)=>r.length>n.length?r:n).length??0,s=i>=3?i+1:3;return[`${"`".repeat(s)}${t}`,e,`${"`".repeat(s)}`].join(`
`)}function jO(e){const t=[],i=e.split("|").map(r=>r.trim());e=i[0];const s=i[1];if(s){const r=/height=(\d+)/.exec(s),n=/width=(\d+)/.exec(s),o=r?r[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function zv(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var yo=zv();function qS(e){yo=e}var GS=/[&<>"']/,BO=new RegExp(GS.source,"g"),JS=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,HO=new RegExp(JS.source,"g"),zO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},YS=e=>zO[e];function ss(e,t){if(t){if(GS.test(e))return e.replace(BO,YS)}else if(JS.test(e))return e.replace(HO,YS);return e}var WO=/(^|[^\[])\^/g;function ht(e,t){let i=typeof e=="string"?e:e.source;t=t||"";const s={replace:(r,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(WO,"$1"),i=i.replace(r,o),s},getRegex:()=>new RegExp(i,t)};return s}function ZS(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var Ul={exec:()=>null};function QS(e,t){const i=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),s=i.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function jl(e,t,i){const s=e.length;if(s===0)return"";let r=0;for(;r<s;){const n=e.charAt(s-r-1);if(n===t&&!i)r++;else if(n!==t&&i)r++;else break}return e.slice(0,s-r)}function VO(e,t){if(e.indexOf(t[1])===-1)return-1;let i=0;for(let s=0;s<e.length;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])i++;else if(e[s]===t[1]&&(i--,i<0))return s;return-1}function XS(e,t,i,s){const r=t.href,n=t.title?ss(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){s.state.inLink=!0;const a={type:"link",raw:i,href:r,title:n,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,a}return{type:"image",raw:i,href:r,title:n,text:ss(o)}}function _O(e,t){const i=e.match(/^(\s+)(?:```)/);if(i===null)return t;const s=i[1];return t.split(`
`).map(r=>{const n=r.match(/^\s+/);if(n===null)return r;const[o]=n;return o.length>=s.length?r.slice(s.length):r}).join(`
`)}var Gd=class{options;rules;lexer;constructor(e){this.options=e||yo}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:jl(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],s=_O(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const s=jl(i,"#");(this.options.pedantic||!s||/ $/.test(s))&&(i=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:jl(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=jl(t[0],`
`).split(`
`),s="",r="";const n=[];for(;i.length>0;){let o=!1;const a=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))a.push(i[c]),o=!0;else if(!o)a.push(i[c]);else break;i=i.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");s=s?`${s}
${l}`:l,r=r?`${r}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,i.length===0)break;const f=n[n.length-1];if(f?.type==="code")break;if(f?.type==="blockquote"){const p=f,g=p.raw+`
`+i.join(`
`),v=this.blockquote(g);n[n.length-1]=v,s=s.substring(0,s.length-p.raw.length)+v.raw,r=r.substring(0,r.length-p.text.length)+v.text;break}else if(f?.type==="list"){const p=f,g=p.raw+`
`+i.join(`
`),v=this.list(g);n[n.length-1]=v,s=s.substring(0,s.length-f.raw.length)+v.raw,r=r.substring(0,r.length-p.raw.length)+v.raw,i=g.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:n,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const s=i.length>1,r={type:"list",raw:"",ordered:s,start:s?+i.slice(0,-1):"",loose:!1,items:[]};i=s?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=s?i:"[*+-]");const n=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,b=>" ".repeat(3*b.length)),h=e.split(`
`,1)[0],f=!u.trim(),p=0;if(this.options.pedantic?(p=2,l=u.trimStart()):f?p=t[1].length+1:(p=t[2].search(/[^ ]/),p=p>4?1:p,l=u.slice(p),p+=t[1].length),f&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const b=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),E=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),k=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),I=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const B=e.split(`
`,1)[0];if(h=B,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),k.test(h)||I.test(h)||b.test(h)||E.test(e))break;if(h.search(/[^ ]/)>=p||!h.trim())l+=`
`+h.slice(p);else{if(f||u.search(/[^ ]/)>=4||k.test(u)||I.test(u)||E.test(u))break;l+=`
`+h}!f&&!h.trim()&&(f=!0),c+=B+`
`,e=e.substring(B.length+1),u=h.slice(p)}}r.loose||(o?r.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let g=null,v;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(v=g[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:c,task:!!g,checked:v,loose:!1,text:l,tokens:[]}),r.raw+=c}r.items[r.items.length-1].raw=r.items[r.items.length-1].raw.trimEnd(),r.items[r.items.length-1].text=r.items[r.items.length-1].text.trimEnd(),r.raw=r.raw.trimEnd();for(let a=0;a<r.items.length;a++)if(this.lexer.state.top=!1,r.items[a].tokens=this.lexer.blockTokens(r.items[a].text,[]),!r.loose){const c=r.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));r.loose=l}if(r.loose)for(let a=0;a<r.items.length;a++)r.items[a].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:s,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=QS(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),r=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===s.length){for(const o of s)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<i.length;o++)n.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:n.align[o]});for(const o of r)n.rows.push(QS(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:ss(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const n=jl(i.slice(0,-1),"\\");if((i.length-n.length)%2===0)return}else{const n=VO(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],r="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);n&&(s=n[1],r=n[3])}else r=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(i)?s=s.slice(1):s=s.slice(1,-1)),XS(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const s=(i[2]||i[1]).replace(/\s+/g," "),r=t[s.toLowerCase()];if(!r){const n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return XS(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const n=[...s[0]].length-1;let o,a,c=n,l=0;const u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(s=u.exec(t))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(a=[...o].length,s[3]||s[4]){c+=a;continue}else if((s[5]||s[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...s[0]][0].length,f=e.slice(0,n+s.index+h+a);if(Math.min(n,a)%2){const g=f.slice(1,-1);return{type:"em",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const s=/[^ ]/.test(i),r=/^ /.test(i)&&/ $/.test(i);return s&&r&&(i=i.substring(1,i.length-1)),i=ss(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,s;return t[2]==="@"?(i=ss(t[1]),s="mailto:"+i):(i=ss(t[1]),s=i),{type:"link",raw:t[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,s;if(t[2]==="@")i=ss(t[0]),s="mailto:"+i;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(r!==t[0]);i=ss(t[0]),t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=t[0]:i=ss(t[0]),{type:"text",raw:t[0],text:i}}}},qO=/^(?: *(?:\n|$))+/,GO=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,JO=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Bl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,YO=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,KS=/(?:[*+-]|\d{1,9}[.)])/,e6=ht(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,KS).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Wv=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ZO=/^[^\n]+/,Vv=/(?!\s*\])(?:\\.|[^\[\]\\])+/,QO=ht(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Vv).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),XO=ht(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,KS).getRegex(),Jd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_v=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,KO=ht("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",_v).replace("tag",Jd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),t6=ht(Wv).replace("hr",Bl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jd).getRegex(),eF=ht(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",t6).getRegex(),qv={blockquote:eF,code:GO,def:QO,fences:JO,heading:YO,hr:Bl,html:KO,lheading:e6,list:XO,newline:qO,paragraph:t6,table:Ul,text:ZO},i6=ht("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Bl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jd).getRegex(),tF={...qv,table:i6,paragraph:ht(Wv).replace("hr",Bl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",i6).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jd).getRegex()},iF={...qv,html:ht(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_v).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ul,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ht(Wv).replace("hr",Bl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",e6).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},s6=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,sF=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,r6=/^( {2,}|\\)\n(?!\s*$)/,rF=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Hl="\\p{P}\\p{S}",nF=ht(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Hl).getRegex(),oF=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,aF=ht(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Hl).getRegex(),cF=ht("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Hl).getRegex(),lF=ht("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Hl).getRegex(),uF=ht(/\\([punct])/,"gu").replace(/punct/g,Hl).getRegex(),hF=ht(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),dF=ht(_v).replace("(?:-->|$)","-->").getRegex(),fF=ht("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",dF).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Yd=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,pF=ht(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Yd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),n6=ht(/^!?\[(label)\]\[(ref)\]/).replace("label",Yd).replace("ref",Vv).getRegex(),o6=ht(/^!?\[(ref)\](?:\[\])?/).replace("ref",Vv).getRegex(),gF=ht("reflink|nolink(?!\\()","g").replace("reflink",n6).replace("nolink",o6).getRegex(),Gv={_backpedal:Ul,anyPunctuation:uF,autolink:hF,blockSkip:oF,br:r6,code:sF,del:Ul,emStrongLDelim:aF,emStrongRDelimAst:cF,emStrongRDelimUnd:lF,escape:s6,link:pF,nolink:o6,punctuation:nF,reflink:n6,reflinkSearch:gF,tag:fF,text:rF,url:Ul},mF={...Gv,link:ht(/^!?\[(label)\]\((.*?)\)/).replace("label",Yd).getRegex(),reflink:ht(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Yd).getRegex()},Jv={...Gv,escape:ht(s6).replace("])","~|])").getRegex(),url:ht(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},vF={...Jv,br:ht(r6).replace("{2,}","*").getRegex(),text:ht(Jv.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Zd={normal:qv,gfm:tF,pedantic:iF},zl={normal:Gv,gfm:Jv,breaks:vF,pedantic:mF},xo=class R5{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||yo,this.options.tokenizer=this.options.tokenizer||new Gd,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:Zd.normal,inline:zl.normal};this.options.pedantic?(i.block=Zd.pedantic,i.inline=zl.pedantic):this.options.gfm&&(i.block=Zd.gfm,this.options.breaks?i.inline=zl.breaks:i.inline=zl.gfm),this.tokenizer.rules=i}static get rules(){return{block:Zd,inline:zl}}static lex(t,i){return new R5(i).lex(t)}static lexInline(t,i){return new R5(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){const s=this.inlineQueue[i];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,i=[],s=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let r,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},t,i))?(t=t.substring(r.raw.length),i.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+r.raw,n.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+r.raw,n.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),i.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){n=i[i.length-1],s&&n?.type==="paragraph"?(n.raw+=`
`+r.raw,n.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(r),s=o.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),n=i[i.length-1],n&&n.type==="text"?(n.raw+=`
`+r.raw,n.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(r);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,i}inline(t,i=[]){return this.inlineQueue.push({src:t,tokens:i}),i}inlineTokens(t,i=[]){let s,r,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(s=u.call({lexer:this},t,i))?(t=t.substring(s.raw.length),i.push(s),!0):!1))){if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),r=i[i.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):i.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length),r=i[i.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):i.push(s);continue}if(s=this.tokenizer.emStrong(t,o,l)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.autolink(t)){t=t.substring(s.raw.length),i.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t))){t=t.substring(s.raw.length),i.push(s);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(s=this.tokenizer.inlineText(n)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(l=s.raw.slice(-1)),c=!0,r=i[i.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):i.push(s);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return i}},Qd=class{options;parser;constructor(e){this.options=e||yo}space(e){return""}code({text:e,lang:t,escaped:i}){const s=(t||"").match(/^\S*/)?.[0],r=e.replace(/\n$/,"")+`
`;return s?'<pre><code class="language-'+ss(s)+'">'+(i?r:ss(r,!0))+`</code></pre>
`:"<pre><code>"+(i?r:ss(r,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,i=e.start;let s="";for(let o=0;o<e.items.length;o++){const a=e.items[o];s+=this.listitem(a)}const r=t?"ol":"ul",n=t&&i!==1?' start="'+i+'"':"";return"<"+r+n+`>
`+s+"</"+r+`>
`}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let r=0;r<e.header.length;r++)i+=this.tablecell(e.header[r]);t+=this.tablerow({text:i});let s="";for(let r=0;r<e.rows.length;r++){const n=e.rows[r];i="";for(let o=0;o<n.length;o++)i+=this.tablecell(n[o]);s+=this.tablerow({text:i})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const s=this.parser.parseInline(i),r=ZS(e);if(r===null)return s;e=r;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+s+"</a>",n}image({href:e,title:t,text:i}){const s=ZS(e);if(s===null)return i;e=s;let r=`<img src="${e}" alt="${i}"`;return t&&(r+=` title="${t}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},Yv=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Eo=class L5{options;renderer;textRenderer;constructor(t){this.options=t||yo,this.options.renderer=this.options.renderer||new Qd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Yv}static parse(t,i){return new L5(i).parse(t)}static parseInline(t,i){return new L5(i).parseInline(t)}parse(t,i=!0){let s="";for(let r=0;r<t.length;r++){const n=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){s+=c||"";continue}}const o=n;switch(o.type){case"space":{s+=this.renderer.space(o);continue}case"hr":{s+=this.renderer.hr(o);continue}case"heading":{s+=this.renderer.heading(o);continue}case"code":{s+=this.renderer.code(o);continue}case"table":{s+=this.renderer.table(o);continue}case"blockquote":{s+=this.renderer.blockquote(o);continue}case"list":{s+=this.renderer.list(o);continue}case"html":{s+=this.renderer.html(o);continue}case"paragraph":{s+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;r+1<t.length&&t[r+1].type==="text";)a=t[++r],c+=`
`+this.renderer.text(a);i?s+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):s+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return s}parseInline(t,i){i=i||this.renderer;let s="";for(let r=0;r<t.length;r++){const n=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){s+=a||"";continue}}const o=n;switch(o.type){case"escape":{s+=i.text(o);break}case"html":{s+=i.html(o);break}case"link":{s+=i.link(o);break}case"image":{s+=i.image(o);break}case"strong":{s+=i.strong(o);break}case"em":{s+=i.em(o);break}case"codespan":{s+=i.codespan(o);break}case"br":{s+=i.br(o);break}case"del":{s+=i.del(o);break}case"text":{s+=i.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return s}},Xd=class{options;constructor(e){this.options=e||yo}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},wF=class{defaults=zv();options=this.setOptions;parse=this.parseMarkdown(xo.lex,Eo.parse);parseInline=this.parseMarkdown(xo.lexInline,Eo.parseInline);Parser=Eo;Renderer=Qd;TextRenderer=Yv;Lexer=xo;Tokenizer=Gd;Hooks=Xd;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const s of e)switch(i=i.concat(t.call(this,s)),s.type){case"table":{const r=s;for(const n of r.header)i=i.concat(this.walkTokens(n.tokens,t));for(const n of r.rows)for(const o of n)i=i.concat(this.walkTokens(o.tokens,t));break}case"list":{const r=s;i=i.concat(this.walkTokens(r.items,t));break}default:{const r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(n=>{const o=r[n].flat(1/0);i=i.concat(this.walkTokens(o,t))}):r.tokens&&(i=i.concat(this.walkTokens(r.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const s={...i};if(s.async=this.defaults.async||s.async||!1,i.extensions&&(i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const n=t.renderers[r.name];n?t.renderers[r.name]=function(...o){let a=r.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[r.level];n?n.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),s.extensions=t),i.renderer){const r=this.defaults.renderer||new Qd(this.defaults);for(const n in i.renderer){if(!(n in r))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=i.renderer[o],c=r[o];r[o]=(...l)=>{let u=a.apply(r,l);return u===!1&&(u=c.apply(r,l)),u||""}}s.renderer=r}if(i.tokenizer){const r=this.defaults.tokenizer||new Gd(this.defaults);for(const n in i.tokenizer){if(!(n in r))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=i.tokenizer[o],c=r[o];r[o]=(...l)=>{let u=a.apply(r,l);return u===!1&&(u=c.apply(r,l)),u}}s.tokenizer=r}if(i.hooks){const r=this.defaults.hooks||new Xd;for(const n in i.hooks){if(!(n in r))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=i.hooks[o],c=r[o];Xd.passThroughHooks.has(n)?r[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(r,l)).then(h=>c.call(r,h));const u=a.call(r,l);return c.call(r,u)}:r[o]=(...l)=>{let u=a.apply(r,l);return u===!1&&(u=c.apply(r,l)),u}}s.hooks=r}if(i.walkTokens){const r=this.defaults.walkTokens,n=i.walkTokens;s.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),r&&(a=a.concat(r.call(this,o))),a}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return xo.lex(e,t??this.defaults)}parser(e,t){return Eo.parse(e,t??this.defaults)}parseMarkdown(e,t){return(s,r)=>{const n={...r},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(s):s).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(s=o.hooks.preprocess(s));let c=e(s,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+ss(i.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(i);throw i}}},ko=new wF;function ct(e,t){return ko.parse(e,t)}ct.options=ct.setOptions=function(e){return ko.setOptions(e),ct.defaults=ko.defaults,qS(ct.defaults),ct},ct.getDefaults=zv,ct.defaults=yo,ct.use=function(...e){return ko.use(...e),ct.defaults=ko.defaults,qS(ct.defaults),ct},ct.walkTokens=function(e,t){return ko.walkTokens(e,t)},ct.parseInline=ko.parseInline,ct.Parser=Eo,ct.parser=Eo.parse,ct.Renderer=Qd,ct.TextRenderer=Yv,ct.Lexer=xo,ct.lexer=xo.lex,ct.Tokenizer=Gd,ct.Hooks=Xd,ct.parse=ct;var HQ=ct.options,zQ=ct.setOptions,WQ=ct.use,VQ=ct.walkTokens,_Q=ct.parseInline,qQ=Eo.parse,GQ=xo.lex,tr=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"}),bF=/^(.+)\/(.+?)(;.+)?$/;function a6(e,t){const i=bF.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}var yi=Symbol("unset"),yF=class{constructor(){this.root=new Zv,this.a=0}get size(){return this.a}get nodes(){return this.root.children?.values()||Zt.empty()}get entries(){return this.root.children?.entries()||Zt.empty()}insert(e,t,i){this.c(e,s=>s._value=t,i)}mutate(e,t){this.c(e,i=>i._value=t(i._value===yi?void 0:i._value))}mutatePath(e,t){this.c(e,()=>{},i=>t(i))}delete(e){const t=this.b(e);if(!t)return;let i=t.length-1;const s=t[i].node._value;if(s!==yi){for(this.a--,t[i].node._value=yi;i>0;i--){const{node:r,part:n}=t[i];if(r.children?.size||r._value!==yi)break;t[i-1].node.children.delete(n)}return s}}*deleteRecursive(e){const t=this.b(e);if(!t)return;const i=t[t.length-1].node;for(let s=t.length-1;s>0;s--){const r=t[s-1];if(r.node.children.delete(t[s].part),r.node.children.size>0||r.node._value!==yi)break}for(const s of c6(i))s._value!==yi&&(this.a--,yield s._value);i===this.root&&(this.root._value=yi,this.root.children=void 0)}find(e){let t=this.root;for(const i of e){const s=t.children?.get(i);if(!s)return;t=s}return t._value===yi?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const i of e){const s=t.children?.get(i);if(!s)return!1;if(s._value!==yi)return!0;t=s}return!1}hasKeyOrChildren(e){let t=this.root;for(const i of e){const s=t.children?.get(i);if(!s)return!1;t=s}return!0}hasKey(e){let t=this.root;for(const i of e){const s=t.children?.get(i);if(!s)return!1;t=s}return t._value!==yi}b(e){const t=[{part:"",node:this.root}];let i=0;for(const s of e){const r=t[i].node.children?.get(s);if(!r)return;t.push({part:s,node:r}),i++}return t}c(e,t,i){let s=this.root;for(const o of e){if(s.children)if(s.children.has(o))s=s.children.get(o);else{const a=new Zv;s.children.set(o,a),s=a}else{const a=new Zv;s.children=new Map([[o,a]]),s=a}i?.(s)}const r=s._value===yi?0:1;t(s);const n=s._value===yi?0:1;this.a+=n-r}*values(){for(const{_value:e}of c6(this.root))e!==yi&&(yield e)}};function*c6(e){const t=[e];for(;t.length>0;){const i=t.pop();if(yield i,i.children)for(const s of i.children.values())t.push(s)}}var Zv=class{constructor(){this._value=yi}get value(){return this._value===yi?void 0:this._value}set value(e){this._value=e===void 0?yi:e}},rs=class ha{constructor(t,i){this.lineNumber=t,this.column=i}with(t=this.lineNumber,i=this.column){return t===this.lineNumber&&i===this.column?this:new ha(t,i)}delta(t=0,i=0){return this.with(Math.max(1,this.lineNumber+t),Math.max(1,this.column+i))}equals(t){return ha.equals(this,t)}static equals(t,i){return!t&&!i?!0:!!t&&!!i&&t.lineNumber===i.lineNumber&&t.column===i.column}isBefore(t){return ha.isBefore(this,t)}static isBefore(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<i.column}isBeforeOrEqual(t){return ha.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<=i.column}static compare(t,i){const s=t.lineNumber|0,r=i.lineNumber|0;if(s===r){const n=t.column|0,o=i.column|0;return n-o}return s-r}clone(){return new ha(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new ha(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},We=class _t{constructor(t,i,s,r){t>s||t===s&&i>r?(this.startLineNumber=s,this.startColumn=r,this.endLineNumber=t,this.endColumn=i):(this.startLineNumber=t,this.startColumn=i,this.endLineNumber=s,this.endColumn=r)}isEmpty(){return _t.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return _t.containsPosition(this,t)}static containsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<t.startColumn||i.lineNumber===t.endLineNumber&&i.column>t.endColumn)}static strictContainsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<=t.startColumn||i.lineNumber===t.endLineNumber&&i.column>=t.endColumn)}containsRange(t){return _t.containsRange(this,t)}static containsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>t.endColumn)}strictContainsRange(t){return _t.strictContainsRange(this,t)}static strictContainsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<=t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>=t.endColumn)}plusRange(t){return _t.plusRange(this,t)}static plusRange(t,i){let s,r,n,o;return i.startLineNumber<t.startLineNumber?(s=i.startLineNumber,r=i.startColumn):i.startLineNumber===t.startLineNumber?(s=i.startLineNumber,r=Math.min(i.startColumn,t.startColumn)):(s=t.startLineNumber,r=t.startColumn),i.endLineNumber>t.endLineNumber?(n=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(n=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new _t(s,r,n,o)}intersectRanges(t){return _t.intersectRanges(this,t)}static intersectRanges(t,i){let s=t.startLineNumber,r=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=i.startLineNumber,c=i.startColumn,l=i.endLineNumber,u=i.endColumn;return s<a?(s=a,r=c):s===a&&(r=Math.max(r,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),s>n||s===n&&r>o?null:new _t(s,r,n,o)}equalsRange(t){return _t.equalsRange(this,t)}static equalsRange(t,i){return!t&&!i?!0:!!t&&!!i&&t.startLineNumber===i.startLineNumber&&t.startColumn===i.startColumn&&t.endLineNumber===i.endLineNumber&&t.endColumn===i.endColumn}getEndPosition(){return _t.getEndPosition(this)}static getEndPosition(t){return new rs(t.endLineNumber,t.endColumn)}getStartPosition(){return _t.getStartPosition(this)}static getStartPosition(t){return new rs(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new _t(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new _t(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return _t.collapseToStart(this)}static collapseToStart(t){return new _t(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return _t.collapseToEnd(this)}static collapseToEnd(t){return new _t(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new _t(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t,i=t){return new _t(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new _t(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn)}static areIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<=i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<=t.startColumn)}static areOnlyIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber-1||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn-1||i.endLineNumber<t.startLineNumber-1||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn-1)}static compareRangesUsingStarts(t,i){if(t&&i){const n=t.startLineNumber|0,o=i.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=i.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=i.endLineNumber|0;if(l===u){const h=t.endColumn|0,f=i.endColumn|0;return h-f}return l-u}return a-c}return n-o}return(t?1:0)-(i?1:0)}static compareRangesUsingEnds(t,i){return t.endLineNumber===i.endLineNumber?t.endColumn===i.endColumn?t.startLineNumber===i.startLineNumber?t.startColumn-i.startColumn:t.startLineNumber-i.startLineNumber:t.endColumn-i.endColumn:t.endLineNumber-i.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},l6=class{static insert(e,t){return{range:new We(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}},xF=class{constructor(){this.a=new Map,this.b=new Map,this.c=new D,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),ie(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const i=new EF(this,e,t);return this.b.set(e,i),ie(()=>{const s=this.b.get(e);!s||s!==i||(this.b.delete(e),s.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this.b.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this.b.get(e);return!!(!i||i.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},EF=class extends X{get isResolved(){return this.c}constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},u6;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(u6||(u6={}));var h6;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Tool=27]="Tool",e[e.Snippet=28]="Snippet"})(h6||(h6={}));var d6;(function(e){const t=new Map;t.set(0,le.symbolMethod),t.set(1,le.symbolFunction),t.set(2,le.symbolConstructor),t.set(3,le.symbolField),t.set(4,le.symbolVariable),t.set(5,le.symbolClass),t.set(6,le.symbolStruct),t.set(7,le.symbolInterface),t.set(8,le.symbolModule),t.set(9,le.symbolProperty),t.set(10,le.symbolEvent),t.set(11,le.symbolOperator),t.set(12,le.symbolUnit),t.set(13,le.symbolValue),t.set(15,le.symbolEnum),t.set(14,le.symbolConstant),t.set(15,le.symbolEnum),t.set(16,le.symbolEnumMember),t.set(17,le.symbolKeyword),t.set(28,le.symbolSnippet),t.set(18,le.symbolText),t.set(19,le.symbolColor),t.set(20,le.symbolFile),t.set(21,le.symbolReference),t.set(22,le.symbolCustomColor),t.set(23,le.symbolFolder),t.set(24,le.symbolTypeParameter),t.set(25,le.account),t.set(26,le.issues),t.set(27,le.tools);function i(o){let a=t.get(o);return a||(console.info("No codicon found for CompletionItemKind "+o),a=le.symbolProperty),a}e.toIcon=i;function s(o){switch(o){case 0:return d(813,null);case 1:return d(814,null);case 2:return d(815,null);case 3:return d(816,null);case 4:return d(817,null);case 5:return d(818,null);case 6:return d(819,null);case 7:return d(820,null);case 8:return d(821,null);case 9:return d(822,null);case 10:return d(823,null);case 11:return d(824,null);case 12:return d(825,null);case 13:return d(826,null);case 14:return d(827,null);case 15:return d(828,null);case 16:return d(829,null);case 17:return d(830,null);case 18:return d(831,null);case 19:return d(832,null);case 20:return d(833,null);case 21:return d(834,null);case 22:return d(835,null);case 23:return d(836,null);case 24:return d(837,null);case 25:return d(838,null);case 26:return d(839,null);case 27:return d(840,null);case 28:return d(841,null);default:return""}}e.toLabel=s;const r=new Map;r.set("method",0),r.set("function",1),r.set("constructor",2),r.set("field",3),r.set("variable",4),r.set("class",5),r.set("struct",6),r.set("interface",7),r.set("module",8),r.set("property",9),r.set("event",10),r.set("operator",11),r.set("unit",12),r.set("value",13),r.set("constant",14),r.set("enum",15),r.set("enum-member",16),r.set("enumMember",16),r.set("keyword",17),r.set("snippet",28),r.set("text",18),r.set("color",19),r.set("file",20),r.set("reference",21),r.set("customcolor",22),r.set("folder",23),r.set("type-parameter",24),r.set("typeParameter",24),r.set("account",25),r.set("issue",26),r.set("tool",27);function n(o,a){let c=r.get(o);return typeof c>"u"&&!a&&(c=9),c}e.fromString=n})(d6||(d6={}));var f6;(function(e){e[e.Deprecated=1]="Deprecated"})(f6||(f6={}));var p6;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(p6||(p6={}));var g6;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(g6||(g6={}));var m6;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(m6||(m6={}));var Kd;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(Kd||(Kd={}));var ef;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(ef||(ef={}));var v6;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(v6||(v6={}));var w6;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(w6||(w6={}));var b6;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(b6||(b6={}));var y6;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(y6||(y6={}));function kF(e){return e&&x.isUri(e.uri)&&We.isIRange(e.range)&&(We.isIRange(e.originSelectionRange)||We.isIRange(e.targetSelectionRange))}function SF(e){return e&&x.isUri(e.uri)&&We.isIRange(e.range)}var x6;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(x6||(x6={}));var JQ={17:d(842,null),16:d(843,null),4:d(844,null),13:d(845,null),8:d(846,null),9:d(847,null),21:d(848,null),23:d(849,null),7:d(850,null),0:d(851,null),11:d(852,null),10:d(853,null),19:d(854,null),5:d(855,null),1:d(856,null),2:d(857,null),20:d(858,null),15:d(859,null),18:d(860,null),24:d(861,null),3:d(862,null),6:d(863,null),14:d(864,null),22:d(865,null),25:d(866,null),12:d(867,null)},E6;(function(e){e[e.Deprecated=1]="Deprecated"})(E6||(E6={}));var k6;(function(e){const t=new Map;t.set(0,le.symbolFile),t.set(1,le.symbolModule),t.set(2,le.symbolNamespace),t.set(3,le.symbolPackage),t.set(4,le.symbolClass),t.set(5,le.symbolMethod),t.set(6,le.symbolProperty),t.set(7,le.symbolField),t.set(8,le.symbolConstructor),t.set(9,le.symbolEnum),t.set(10,le.symbolInterface),t.set(11,le.symbolFunction),t.set(12,le.symbolVariable),t.set(13,le.symbolConstant),t.set(14,le.symbolString),t.set(15,le.symbolNumber),t.set(16,le.symbolBoolean),t.set(17,le.symbolArray),t.set(18,le.symbolObject),t.set(19,le.symbolKey),t.set(20,le.symbolNull),t.set(21,le.symbolEnumMember),t.set(22,le.symbolStruct),t.set(23,le.symbolEvent),t.set(24,le.symbolOperator),t.set(25,le.symbolTypeParameter);function i(n){let o=t.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=le.symbolProperty),o}e.toIcon=i;const s=new Map;s.set(0,20),s.set(1,8),s.set(2,8),s.set(3,8),s.set(4,5),s.set(5,0),s.set(6,9),s.set(7,3),s.set(8,2),s.set(9,15),s.set(10,7),s.set(11,1),s.set(12,4),s.set(13,14),s.set(14,18),s.set(15,13),s.set(16,13),s.set(17,13),s.set(18,13),s.set(19,17),s.set(20,13),s.set(21,16),s.set(22,6),s.set(23,10),s.set(24,11),s.set(25,24);function r(n){let o=s.get(n);return o===void 0&&(console.info("No completion kind found for SymbolKind "+n),o=20),o}e.toCompletionKind=r})(k6||(k6={}));var CF=class{static asEditOperation(e){const t=We.lift(e.range);return t.isEmpty()?l6.insert(t.getStartPosition(),e.text):l6.replace(t,e.text)}static isTextEdit(e){const t=e;return typeof t.text=="string"&&We.isIRange(t.range)}},Ma=class Yn{static{this.Comment=new Yn("comment")}static{this.Imports=new Yn("imports")}static{this.Region=new Yn("region")}static fromValue(t){switch(t){case"comment":return Yn.Comment;case"imports":return Yn.Imports;case"region":return Yn.Region}return new Yn(t)}constructor(t){this.value=t}},S6;(function(e){e[e.AIGenerated=1]="AIGenerated"})(S6||(S6={}));var tf;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(tf||(tf={}));var Qv;(function(e){function t(i){return!i||typeof i!="object"?!1:typeof i.id=="string"&&typeof i.title=="string"}e.is=t})(Qv||(Qv={}));var Oa;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Oa||(Oa={}));var Wl;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Wl||(Wl={}));var Vl;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Vl||(Vl={}));var C6;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(C6||(C6={}));var $6;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})($6||($6={}));var I6;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(I6||(I6={}));var YQ=new xF,P6;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(P6||(P6={}));var sf;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(sf||(sf={}));var D6;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(D6||(D6={}));var Ii;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(Ii||(Ii={})),function(e){function t(c,l){return l-c}e.compare=t;const i=Object.create(null);i[e.Error]=d(2108,null),i[e.Warning]=d(2109,null),i[e.Info]=d(2110,null);function s(c){return i[c]||""}e.toString=s;const r=Object.create(null);r[e.Error]=d(2111,null),r[e.Warning]=d(2112,null),r[e.Info]=d(2113,null);function n(c){return r[c]||""}e.toStringPlural=n;function o(c){switch(c){case Mt.Error:return e.Error;case Mt.Warning:return e.Warning;case Mt.Info:return e.Info;case Mt.Ignore:return e.Hint}}e.fromSeverity=o;function a(c){switch(c){case e.Error:return Mt.Error;case e.Warning:return Mt.Warning;case e.Info:return Mt.Info;case e.Hint:return Mt.Ignore}}e.toSeverity=a}(Ii||(Ii={}));var A6;(function(e){const t="";function i(r){return s(r,!0)}e.makeKey=i;function s(r,n){const o=[t];return r.source?o.push(r.source.replace("\xA6","\\\xA6")):o.push(t),r.code?typeof r.code=="string"?o.push(r.code.replace("\xA6","\\\xA6")):o.push(r.code.value.replace("\xA6","\\\xA6")):o.push(t),r.severity!==void 0&&r.severity!==null?o.push(Ii.toString(r.severity)):o.push(t),r.message&&n?o.push(r.message.replace("\xA6","\\\xA6")):o.push(t),r.startLineNumber!==void 0&&r.startLineNumber!==null?o.push(r.startLineNumber.toString()):o.push(t),r.startColumn!==void 0&&r.startColumn!==null?o.push(r.startColumn.toString()):o.push(t),r.endLineNumber!==void 0&&r.endLineNumber!==null?o.push(r.endLineNumber.toString()):o.push(t),r.endColumn!==void 0&&r.endColumn!==null?o.push(r.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=s})(A6||(A6={}));var ZQ=q("markerService"),$F=class{constructor(){this.a=new Map}add(e,t){gi(Ue(e)),gi(St(t)),gi(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}dispose(){this.a.forEach(e=>{wx(e.dispose)&&e.dispose()}),this.a.clear()}},Xt=new $F,T6=q("fileService");function Fa(e){return e.create===!0}var zi;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(zi||(zi={}));var kn;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(kn||(kn={}));var R6;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(R6||(R6={}));var L6;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(L6||(L6={}));var pe;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(pe||(pe={}));var rf=class wA extends Error{static create(t,i){const s=new wA(t.toString(),i);return N6(s,i),s}constructor(t,i){super(t),this.code=i}};function Mr(e,t){return rf.create(e,t)}function IF(e){return e||Mr(d(2020,null),pe.Unknown)}function N6(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function nf(e){if(!e)return pe.Unknown;if(e instanceof rf)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return pe.Unknown;switch(t[1]){case pe.FileExists:return pe.FileExists;case pe.FileIsADirectory:return pe.FileIsADirectory;case pe.FileNotADirectory:return pe.FileNotADirectory;case pe.FileNotFound:return pe.FileNotFound;case pe.FileTooLarge:return pe.FileTooLarge;case pe.FileWriteLocked:return pe.FileWriteLocked;case pe.NoPermissions:return pe.NoPermissions;case pe.Unavailable:return pe.Unavailable}return pe.Unknown}function PF(e){if(e instanceof Xv)return e.fileOperationResult;switch(nf(e)){case pe.FileNotFound:return 1;case pe.FileIsADirectory:return 0;case pe.FileNotADirectory:return 9;case pe.FileWriteLocked:return 5;case pe.NoPermissions:return 6;case pe.FileExists:return 4;case pe.FileTooLarge:return 7;default:return 10}}var M6;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(M6||(M6={}));var O6;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(O6||(O6={}));var QQ=class n1{static{this.a=null}constructor(t,i){this.c=i,this.b=void 0,this.d=new Qt(()=>{const s=En.forUris(()=>this.c);return s.fill(this.rawAdded.map(r=>[r,!0])),s}),this.f=new Qt(()=>{const s=En.forUris(()=>this.c);return s.fill(this.rawUpdated.map(r=>[r,!0])),s}),this.g=new Qt(()=>{const s=En.forUris(()=>this.c);return s.fill(this.rawDeleted.map(r=>[r,!0])),s}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const s of t){switch(s.type){case 1:this.rawAdded.push(s.resource);break;case 0:this.rawUpdated.push(s.resource);break;case 2:this.rawDeleted.push(s.resource);break}this.b!==n1.a&&(typeof s.cId=="number"?this.b===void 0?this.b=s.cId:this.b!==s.cId&&(this.b=n1.a):this.b!==void 0&&(this.b=n1.a))}}contains(t,...i){return this.h(t,{includeChildren:!1},...i)}affects(t,...i){return this.h(t,{includeChildren:!0},...i)}h(t,i,...s){if(!t)return!1;const r=s.length>0;return!!((!r||s.includes(1))&&(this.d.value.get(t)||i.includeChildren&&this.d.value.findSuperstr(t))||(!r||s.includes(0))&&(this.f.value.get(t)||i.includeChildren&&this.f.value.findSuperstr(t))||(!r||s.includes(2))&&(this.g.value.findSubstr(t)||i.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}};function DF(e,t,i){return!e||!t||e===t||t.length>e.length?!1:(t.charAt(t.length-1)!==wt&&(t+=wt),i?bd(e,t):e.indexOf(t)===0)}var Xv=class extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}},F6;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(F6||(F6={}));var U6;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(U6||(U6={}));var AF="";function j6(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var B6=class Ni{static{this.KB=1024}static{this.MB=Ni.KB*Ni.KB}static{this.GB=Ni.MB*Ni.KB}static{this.TB=Ni.GB*Ni.KB}static formatSize(t){return us(t)||(t=0),t<Ni.KB?d(2021,null,t.toFixed(0)):t<Ni.MB?d(2022,null,(t/Ni.KB).toFixed(2)):t<Ni.GB?d(2023,null,(t/Ni.MB).toFixed(2)):t<Ni.TB?d(2024,null,(t/Ni.GB).toFixed(2)):d(2025,null,(t/Ni.TB).toFixed(2))}},TF=class extends X{constructor(e,t="",i="",s=!0,r){super(),this.j=this.B(new D),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=i,this.z=s,this.D=r}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},XQ=class N5{constructor(){this.id=N5.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let i=[];for(const s of t)s.length&&(i.length?i=[...i,new N5,...s]:i=s);return i}static{this.ID="vs.actions.separator"}async run(){}},KQ=class bA extends TF{static{this.ID="vs.actions.empty"}constructor(){super(bA.ID,d(44,null),void 0,!1)}},RF={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},LF={id:"default",displayName:d(4296,null),providerDisplayName:d(4297,null)},H6;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(H6||(H6={}));var z6;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(z6||(z6={}));function of(e){if(Sn(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function W6(e){if(Sn(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function Kv(e){if(Sn(e)||of(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function af(e){if(Sn(e))return!1;const t=e;return x.isUri(t?.base?.resource)&&x.isUri(t?.input1?.resource)&&x.isUri(t?.input2?.resource)&&x.isUri(t?.result?.resource)}var V6;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(V6||(V6={}));var _6;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(_6||(_6={}));var NF=class{constructor(){this.a=new Map}registerSource(e,t){let i=this.a.get(e);return i||(i={source:e,label:t},this.a.set(e,i)),i.source}getSourceLabel(e){return this.a.get(e)?.label??e}},eX=new NF,q6;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(q6||(q6={}));var MF=class extends X{};function Sn(e){return e instanceof MF}function OF(e){const t=e;return x.isUri(t?.preferredResource)}function FF(e){const t=e;return Sn(t?.primary)&&Sn(t?.secondary)}function UF(e){const t=e;return Sn(t?.modified)&&Sn(t?.original)}var G6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(G6||(G6={}));var J6;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(J6||(J6={}));var Cn;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(Cn||(Cn={}));var jF=class{getOriginalUri(e,t){if(!e)return;if(af(e))return Z6.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:s,secondary:r}=this.a(e);if(s&&r){if(t?.supportSideBySide===Cn.BOTH)return{primary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Cn.ANY)return this.getOriginalUri(s,{filterByScheme:t.filterByScheme})??this.getOriginalUri(r,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Cn.PRIMARY?s:r}}if(of(e)||W6(e)||Kv(e)||af(e))return;const i=OF(e)?e.preferredResource:e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}a(e){return FF(e)||Kv(e)?{primary:e.primary,secondary:e.secondary}:UF(e)||of(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(af(e))return Z6.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:s,secondary:r}=this.a(e);if(s&&r){if(t?.supportSideBySide===Cn.BOTH)return{primary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Cn.ANY)return this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(r,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Cn.PRIMARY?s:r}}if(of(e)||W6(e)||Kv(e)||af(e))return;const i=e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(i=>e.scheme===i))return e}else if(t===e.scheme)return e}},Y6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(Y6||(Y6={}));var Z6=new jF,Q6;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Q6||(Q6={}));var BF=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(Dl);for(const[i,s]of this.c)this.e(i,s,t);this.c.clear()}e(e,t,i){const s=i.createInstance(t);this.d.set(e,s)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return wa(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),ie(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};Xt.add(RF.EditorFactory,new BF);var X6;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(X6||(X6={}));var $n=class{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return HF(e,this)}},K6=new Map,e0=new WeakMap;function HF(e,t){const i=e0.get(e);if(i)return i;const s=zF(e,t);if(s){let r=K6.get(s)??0;r++,K6.set(s,r);const n=r===1?s:`${s}#${r}`;return e0.set(e,n),n}}function zF(e,t){const i=e0.get(e);if(i)return i;const s=t.owner?VF(t.owner)+".":"";let r;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(r=n(),r!==void 0)return s+r}else return s+n;const o=t.referenceFn;if(o!==void 0&&(r=t0(o),r!==void 0))return s+r;if(t.owner!==void 0){const a=WF(t.owner,e);if(a!==void 0)return s+a}}function WF(e,t){for(const i in e)if(e[i]===t)return i}var e8=new Map,t8=new WeakMap;function VF(e){const t=t8.get(e);if(t)return t;const i=i8(e)??"Object";let s=e8.get(i)??0;s++,e8.set(i,s);const r=s===1?i:`${i}#${s}`;return t8.set(e,r),r}function i8(e){const t=e.constructor;if(t)return t.name==="Object"?void 0:t.name}function t0(e){const t=e.toString(),s=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(s?s[1]:void 0)?.trim()}var _l=(e,t)=>e===t;function i0(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!i0(e[i],t[i]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const i=e,s=t,r=Object.keys(i),n=Object.keys(s),o=new Set(n);if(r.length!==n.length)return!1;for(const a of r)if(!o.has(a)||!i0(i[a],s[a]))return!1;return!0}return!1}function s8(e){const t=new Error("BugIndicatingErrorRecovery: "+e);lt(t),console.error("recovered from an error that indicates a bug",t)}var So;function s0(e){So?So instanceof r8?So.loggers.push(e):So=new r8([So,e]):So=e}function ri(){return So}var r0=void 0;function _F(e){r0=e}function qF(e){r0&&r0(e)}var r8=class{constructor(e){this.loggers=e}handleObservableCreated(e){for(const t of this.loggers)t.handleObservableCreated(e)}handleOnListenerCountChanged(e,t){for(const i of this.loggers)i.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(const i of this.loggers)i.handleObservableUpdated(e,t)}handleAutorunCreated(e){for(const t of this.loggers)t.handleAutorunCreated(e)}handleAutorunDisposed(e){for(const t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,i){for(const s of this.loggers)s.handleAutorunDependencyChanged(e,t,i)}handleAutorunStarted(e){for(const t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(const t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,i){for(const s of this.loggers)s.handleDerivedDependencyChanged(e,t,i)}handleDerivedCleared(e){for(const t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(const t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(const t of this.loggers)t.handleEndTransaction(e)}};function ql(e,t){const i=new n8(e,t);try{e(i)}finally{i.finish()}}function GF(e,t,i){e?t(e):ql(t,i)}var n8=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],ri()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():t0(this._fn)}updateObserver(e,t){if(!this.a){s8("Transaction already finished!"),ql(i=>{i.updateObserver(e,t)});return}this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;if(!e){s8("transaction.finish() has already been called!");return}for(let t=0;t<e.length;t++){const{observer:i,observable:s}=e[t];i.endUpdate(s)}this.a=null,ri()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this.a}},n0;function JF(e){n0=e}var o8;function YF(e){o8=e}var a8;function ZF(e){a8=e}var QF=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,s=t===void 0?e:t;return n0({owner:i,debugName:()=>{const r=t0(s);if(r!==void 0)return r;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(o)return`${this.debugName}.${o[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:s},r=>s(this.read(r),r))}flatten(){return n0({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(o8(this,t)),this}keepObserved(e){return e.add(a8(this)),this}get b(){return this.get()}},cf=class extends QF{constructor(){super(),this.f=new Set,ri()?.handleObservableCreated(this)}addObserver(e){const t=this.f.size;this.f.add(e),t===0&&this.g(),t!==this.f.size&&ri()?.handleOnListenerCountChanged(this,this.f.size)}removeObserver(e){const t=this.f.delete(e);t&&this.f.size===0&&this.h(),t&&ri()?.handleOnListenerCountChanged(this,this.f.size)}g(){}h(){}log(){const e=!!ri();return qF(this),e||ri()?.handleObservableCreated(this),this}debugGetObservers(){return this.f}};function lf(e,t){let i;return typeof e=="string"?i=new $n(void 0,e,void 0):i=new $n(e,void 0,void 0),new o0(i,t,_l)}var o0=class extends cf{get debugName(){return this.c.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this.c=e,this.d=i,this.a=t,ri()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this.a}set(e,t,i){if(i===void 0&&this.d(this.a,e))return;let s;t||(t=s=new n8(()=>{},()=>`Setting ${this.debugName}`));try{const r=this.a;this.i(e),ri()?.handleObservableUpdated(this,{oldValue:r,newValue:e,change:i,didChange:!0,hadValue:!0});for(const n of this.f)t.updateObserver(n,this),n.handleChange(this,i)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this.a}`}i(e){this.a=e}debugGetState(){return{value:this.a}}debugSetValue(e){this.a=e}},c8;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(c8||(c8={}));var l8=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i){this._debugNameData=e,this._runFn=t,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.i=!1,this.n=void 0,this.p=void 0,this.h=this.j?.createChangeSummary(void 0),ri()?.handleAutorunCreated(this),this.k(),ba(this)}dispose(){if(!this.c){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),this.n!==void 0&&this.n.dispose(),this.p!==void 0&&this.p.dispose(),ri()?.handleAutorunDisposed(this),ya(this)}}k(){const e=this.g;this.g=this.f,this.f=e,this.a=3;try{if(!this.c){ri()?.handleAutorunStarted(this);const t=this.h,i=this.p;i!==void 0&&(this.p=void 0);try{this.i=!0,this.j&&(this.j.beforeUpdate?.(this,t),this.h=this.j.createChangeSummary(t)),this.n!==void 0&&(this.n.dispose(),this.n=void 0),this._runFn(this,t)}catch(s){nd(s)}finally{this.i=!1,i!==void 0&&i.dispose()}}}finally{this.c||ri()?.handleAutorunFinished(this);for(const t of this.g)t.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.a===3&&(this.a=1),this.b++}endUpdate(e){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const t of this.f)if(t.reportChanges(),this.a===2)break}this.a!==3&&this.k()}while(this.a!==3)}finally{this.b--}gx(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.l(e)&&(this.a=1)}handleChange(e,t){if(this.l(e)){ri()?.handleAutorunDependencyChanged(this,e,t);try{(this.j?this.j.handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.h):!0)&&(this.a=2)}catch(i){nd(i)}}}l(e){return this.f.has(e)&&!this.g.has(e)}m(){if(!this.i)throw new ki("The reader object cannot be used outside its compute function!")}readObservable(e){if(this.m(),this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}get store(){if(this.m(),this.c)throw new ki("Cannot access store after dispose");return this.n===void 0&&(this.n=new se),this.n}get delayedStore(){if(this.m(),this.c)throw new ki("Cannot access store after dispose");return this.p===void 0&&(this.p=new se),this.p}debugGetState(){return{isRunning:this.i,updateCount:this.b,dependencies:this.f,state:this.a}}debugRerun(){this.i?this.a=2:this.k()}};function u8(e){return new l8(new $n(void 0,void 0,e),e,void 0)}var h8;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(h8||(h8={}));var Ps=class extends cf{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,s=void 0,r){super(),this._debugNameData=e,this._computeFn=t,this.w=i,this.x=s,this.y=r,this.a=0,this.c=void 0,this.i=0,this.j=new Set,this.k=new Set,this.l=void 0,this.m=!1,this.n=!1,this.p=!1,this.q=!1,this.s=!1,this.t=void 0,this.u=void 0,this.v=null,this.l=this.w?.createChangeSummary(void 0)}h(){this.a=0,this.c=void 0,ri()?.handleDerivedCleared(this);for(const e of this.j)e.removeObserver(this);this.j.clear(),this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.u!==void 0&&(this.u.dispose(),this.u=void 0),this.x?.()}get(){if(this.n,this.f.size===0){let t;try{this.s=!0;let i;this.w&&(i=this.w.createChangeSummary(void 0),this.w.beforeUpdate?.(this,i)),t=this._computeFn(this,i)}finally{this.s=!1}return this.h(),t}else{do{if(this.a===1){for(const t of this.j)if(t.reportChanges(),this.a===2)break}this.a===1&&(this.a=3),this.a!==3&&this.A()}while(this.a!==3);return this.c}}A(){let e=!1;this.n=!0,this.p=!1;const t=this.k;this.k=this.j,this.j=t;try{const i=this.l;this.s=!0,this.w&&(this.q=!0,this.w.beforeUpdate?.(this,i),this.q=!1,this.l=this.w?.createChangeSummary(i));const s=this.a!==0,r=this.c;this.a=3;const n=this.u;n!==void 0&&(this.u=void 0);try{this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.c=this._computeFn(this,i)}finally{this.s=!1;for(const o of this.k)o.removeObserver(this);this.k.clear(),n!==void 0&&n.dispose()}e=this.p||s&&!this.y(r,this.c),ri()?.handleObservableUpdated(this,{oldValue:r,newValue:this.c,change:void 0,didChange:e,hadValue:s})}catch(i){nd(i)}if(this.n=!1,!this.p&&e)for(const i of this.f)i.handleChange(this,void 0);else this.p=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.m)throw new ki("Cyclic deriveds are not supported yet!");this.i++,this.m=!0;try{const t=this.i===1;if(this.a===3&&(this.a=1,!t))for(const i of this.f)i.handlePossibleChange(this);if(t)for(const i of this.f)i.beginUpdate(this)}finally{this.m=!1}}endUpdate(e){if(this.i--,this.i===0){const t=[...this.f];for(const i of t)i.endUpdate(this);if(this.v){const i=[...this.v];this.v=null;for(const s of i)s.endUpdate(this)}}gx(()=>this.i>=0)}handlePossibleChange(e){if(this.a===3&&this.j.has(e)&&!this.k.has(e)){this.a=1;for(const t of this.f)t.handlePossibleChange(this)}}handleChange(e,t){if(this.j.has(e)&&!this.k.has(e)||this.q){ri()?.handleDerivedDependencyChanged(this,e,t);let i=!1;try{i=this.w?this.w.handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.l):!0}catch(r){nd(r)}const s=this.a===3;if(i&&(this.a===1||s)&&(this.a=2,s))for(const r of this.f)r.handlePossibleChange(this)}}B(){if(!this.s)throw new ki("The reader object cannot be used outside its compute function!")}readObservable(e){this.B(),e.addObserver(this);const t=e.get();return this.j.add(e),this.k.delete(e),t}reportChange(e){this.B(),this.p=!0;for(const t of this.f)t.handleChange(this,e)}get store(){return this.B(),this.t===void 0&&(this.t=new se),this.t}get delayedStore(){return this.B(),this.u===void 0&&(this.u=new se),this.u}addObserver(e){const t=!this.f.has(e)&&this.i>0;super.addObserver(e),t&&(this.v&&this.v.has(e)?this.v.delete(e):e.beginUpdate(this))}removeObserver(e){this.f.has(e)&&this.i>0&&(this.v||(this.v=new Set),this.v.add(e)),super.removeObserver(e)}debugGetState(){return{state:this.a,updateCount:this.i,isComputing:this.n,dependencies:this.j,value:this.c}}debugSetValue(e){this.c=e}setValue(e,t,i){this.c=e;const s=this.f;t.updateObserver(this,this);for(const r of s)r.handleChange(this,i)}};function XF(e,t){return t!==void 0?new Ps(new $n(e,void 0,t),t,void 0,void 0,_l):new Ps(new $n(void 0,void 0,e),e,void 0,void 0,_l)}function d8(e,t){return new Ps(new $n(e.owner,e.debugName,e.debugReferenceFn),t,void 0,e.onLastObserverRemoved,e.equalsFn??_l)}JF(d8);var KF=class yA{static fromFn(t){return new yA(t())}constructor(t){this.a=lf(this,void 0),this.promiseResult=this.a,this.resolvedValue=XF(this,i=>{const s=this.promiseResult.read(i);if(s)return s.getDataOrThrow()}),this.promise=t.then(i=>(ql(s=>{this.a.set(new f8(i,void 0),s)}),i),i=>{throw ql(s=>{this.a.set(new f8(void 0,i),s)}),i})}},f8=class{constructor(e,t){this.data=e,this.error=t}getDataOrThrow(){if(this.error)throw this.error;return this.data}};function a0(...e){let t,i,s;return e.length===3?[t,i,s]=e:[i,s]=e,new Co(new $n(t,void 0,s),i,s,()=>Co.globalTransaction,_l)}var Co=class extends cf{constructor(e,t,i,s,r){super(),this.e=e,this.i=t,this._getValue=i,this.j=s,this.k=r,this.c=!1,this.n=n=>{const o=this._getValue(n),a=this.a,c=!this.c||!this.k(a,o);let l=!1;c&&(this.a=o,this.c&&(l=!0,GF(this.j(),u=>{ri()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.c});for(const h of this.f)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.l();return"Event fired"+(u?`: ${u}`:"")})),this.c=!0),l||ri()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.c})}}l(){return this.e.getDebugName(this)}get debugName(){const e=this.l();return"From Event"+(e?`: ${e}`:"")}g(){this.d=this.i(this.n)}h(){this.d.dispose(),this.d=void 0,this.c=!1,this.a=void 0}get(){return this.d?(this.c||this.n(void 0),this.a):this._getValue(void 0)}debugSetValue(e){this.a=e}};(function(e){e.Observer=Co;function t(i,s){let r=!1;Co.globalTransaction===void 0&&(Co.globalTransaction=i,r=!0);try{s()}finally{r&&(Co.globalTransaction=void 0)}}e.batchEventsGlobally=t})(a0||(a0={}));function eU(e){const t=new p8(!1,void 0);return e.addObserver(t),ie(()=>{e.removeObserver(t)})}ZF(eU);function tU(e,t){const i=new p8(!0,t);e.addObserver(i);try{i.beginUpdate(e)}finally{i.endUpdate(e)}return ie(()=>{e.removeObserver(i)})}YF(tU);var p8=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a===1&&this.b&&(this.c?this.c(e.get()):e.reportChanges()),this.a--}handlePossibleChange(e){}handleChange(e,t){}};function iU(e,t){return new sU(typeof e=="string"?e:new $n(e,void 0,void 0),t)}var sU=class extends cf{constructor(e,t){super(),this.c=t,this.e=()=>{ql(i=>{for(const s of this.f)i.updateObserver(s,this),s.handleChange(this,void 0)},()=>this.debugName)},this.debugName=typeof e=="string"?e:e.getDebugName(this)??"Observable Signal From Event"}g(){this.a=this.c(this.e)}h(){this.a.dispose(),this.a=void 0}get(){}},uf;function rU(e){uf||(uf=new g8,s0(uf)),uf.addFilteredObj(e)}var g8=class{constructor(){this.a=0,this.f=new WeakMap}addFilteredObj(e){this.b||(this.b=new Set),this.b.add(e)}c(e){return this.b?.has(e)??!0}d(e){return nU([Ua(cU("|  ",this.a)),e])}e(e){return e.hadValue?e.didChange?[Ua(" "),ps(Or(e.oldValue,70),{color:"red",strikeThrough:!0}),Ua(" "),ps(Or(e.newValue,60),{color:"green"})]:[Ua(" (unchanged)")]:[Ua(" "),ps(Or(e.newValue,60),{color:"green"}),Ua(" (initial)")]}handleObservableCreated(e){if(e instanceof Ps){const t=e;if(this.f.set(t,new Set),!1){const s=[];t.__debugUpdating=s;const r=t.beginUpdate;t.beginUpdate=o=>(s.push(o),r.apply(t,[o]));const n=t.endUpdate;t.endUpdate=o=>{const a=s.indexOf(o);return a===-1&&console.error("endUpdate called without beginUpdate",t.debugName,o.debugName),s.splice(a,1),n.apply(t,[o])}}}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this.c(e)){if(e instanceof Ps){this._handleDerivedRecomputed(e,t);return}console.log(...this.d([ja("observable value changed"),ps(e.debugName,{color:"BlueViolet"}),...this.e(t)]))}}formatChanges(e){if(e.size!==0)return ps(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,i){this.c(e)&&this.f.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this.c(e))return;const i=this.f.get(e);i&&(console.log(...this.d([ja("derived recomputed"),ps(e.debugName,{color:"BlueViolet"}),...this.e(t),this.formatChanges(i),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),i.clear())}handleDerivedCleared(e){this.c(e)&&console.log(...this.d([ja("derived cleared"),ps(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this.c(e)&&console.log(...this.d([ja("observable from event triggered"),ps(e.debugName,{color:"BlueViolet"}),...this.e(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this.c(e)&&this.f.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,i){this.c(e)&&this.f.get(e).add(t)}handleAutorunStarted(e){const t=this.f.get(e);t&&(this.c(e)&&console.log(...this.d([ja("autorun"),ps(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++)}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this.c(e)&&console.log(...this.d([ja("transaction"),ps(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function nU(e){const t=new Array,i=[];let s="";function r(o){if("length"in o)for(const a of o)a&&r(a);else"text"in o?(s+=`%c${o.text}`,t.push(o.style),o.data&&i.push(...o.data)):"data"in o&&i.push(...o.data)}r(e);const n=[s,...t];return n.push(...i),n}function Ua(e){return ps(e,{color:"black"})}function ja(e){return ps(lU(`${e}: `,10),{color:"black",bold:!0})}function ps(e,t={color:"black"}){function i(r){return Object.entries(r).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const s={color:t.color};return t.strikeThrough&&(s["text-decoration"]="line-through"),t.bold&&(s["font-weight"]="bold"),{text:e,style:i(s)}}function Or(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?oU(e,t):aU(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function oU(e,t){let i="[ ",s=!0;for(const r of e){if(s||(i+=", "),i.length-5>t){i+="...";break}s=!1,i+=`${Or(r,t-i.length)}`}return i+=" ]",i}function aU(e,t){if(typeof e.toString=="function"&&e.toString!==Object.prototype.toString){const n=e.toString();return n.length<=t?n:n.substring(0,t-3)+"..."}const i=i8(e);let s=i?i+"(":"{ ",r=!0;for(const[n,o]of Object.entries(e)){if(r||(s+=", "),s.length-5>t){s+="...";break}r=!1,s+=`${n}: ${Or(o,t-s.length)}`}return s+=i?")":" }",s}function cU(e,t){let i="";for(let s=1;s<=t;s++)i+=e;return i}function lU(e,t){for(;e.length<t;)e+=" ";return e}var uU=class M5{static createHost(t,i){return new M5(t,i)}static createClient(t,i){return new M5(t,i)}constructor(t,i){this.b=t,this.c=i,this.a=this.b({handleNotification:n=>{const o=n,a=this.c().notifications[o[0]];if(!a)throw new Error(`Unknown notification "${o[0]}"!`);a(...o[1])},handleRequest:n=>{const o=n;try{return{type:"result",value:this.c().requests[o[0]](...o[1])}}catch(a){return{type:"error",value:a}}}});const s=new Proxy({},{get:(n,o)=>async(...a)=>{const c=await this.a.sendRequest([o,a]);if(c.type==="error")throw c.value;return c.value}}),r=new Proxy({},{get:(n,o)=>(...a)=>{this.a.sendNotification([o,a])}});this.api={notifications:r,requests:s}}};function hU(e,t){const i=globalThis;let s=[],r;const{channel:n,handler:o}=dU({sendNotification:c=>{r?r.sendNotification(c):s.push(c)}});let a;return(i.$$debugValueEditor_debugChannels??(i.$$debugValueEditor_debugChannels={}))[e]=c=>{a=t(),r=c;for(const l of s)c.sendNotification(l);return s=[],o},uU.createClient(n,()=>{if(!a)throw new Error("Not supported");return a})}function dU(e){let t;return{channel:s=>(t=s,{sendNotification:r=>{e.sendNotification(r)},sendRequest:r=>{throw new Error("not supported")}}),handler:{handleRequest:s=>s.type==="notification"?t?.handleNotification(s.data):t?.handleRequest(s.data)}}}function m8(e,t){const i=e.split(`
`);let s=-1;for(const r of i.slice(1)){if(s++,t&&t.test(r))continue;const n=fU(r);if(n)return n}}function fU(e){const t=e.match(/\((.*):(\d+):(\d+)\)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:e};const i=e.match(/at ([^\(\)]*):(\d+):(\d+)/);if(i)return{fileName:i[1],line:parseInt(i[2]),column:parseInt(i[3]),id:e}}var pU=class{constructor(){this.a=void 0}throttle(e,t){this.a===void 0&&(this.a=setTimeout(()=>{this.a=void 0,e()},t))}dispose(){this.a!==void 0&&clearTimeout(this.a)}};function v8(e,t){for(const i in t)e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?v8(e[i],t[i]):e[i]=t[i]}function w8(e,t){for(const i in t)t[i]===null?delete e[i]:e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?w8(e[i],t[i]):e[i]=t[i]}var gU=class Yh{static{this.a=void 0}static getInstance(){return Yh.a===void 0&&(Yh.a=new Yh),Yh.a}j(){const t=[],i=[...this.h];if(i.length===0)return;const s=i.flatMap(n=>n.debugGetUpdatingObservers()??[]).map(n=>n.observer),r=new Set;for(;s.length>0;){const n=s.shift();if(r.has(n))continue;r.add(n);const o=this.n(n,a=>{r.has(a)||s.push(a)});o&&t.push(o)}return{names:i.map(n=>n.getDebugName()??"tx"),affected:t}}k(t){const i=this.f.get(t);if(!i){lt(new ki("No info found"));return}return i}m(t){const i=this.f.get(t);if(!i){lt(new ki("No info found"));return}return i}n(t,i){if(t instanceof Ps){const s=[...t.debugGetObservers()];for(const c of s)i(c);const r=this.k(t);if(!r)return;const n=t.debugGetState(),o={name:t.debugName,instanceId:r.instanceId,updateCount:n.updateCount},a=[...r.changedObservables].map(c=>this.f.get(c)?.instanceId).filter(Xi);if(n.isComputing)return{...o,type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1};switch(n.state){case 0:return{...o,type:"observable/derived",state:"noValue"};case 3:return{...o,type:"observable/derived",state:"upToDate"};case 2:return{...o,type:"observable/derived",state:"stale",changedDependencies:a};case 1:return{...o,type:"observable/derived",state:"possiblyStale"}}}else if(t instanceof l8){const s=this.m(t);if(!s)return;const r={name:t.debugName,instanceId:s.instanceId,updateCount:s.updateCount},n=[...s.changedObservables].map(o=>this.f.get(o).instanceId);if(t.debugGetState().isRunning)return{...r,type:"autorun",state:"updating",changedDependencies:n};switch(t.debugGetState().state){case 3:return{...r,type:"autorun",state:"upToDate"};case 2:return{...r,type:"autorun",state:"stale",changedDependencies:n};case 1:return{...r,type:"autorun",state:"possiblyStale"}}}}p(t){const i=this.k(t);if(i)return{name:t.debugName,instanceId:i.instanceId}}q(t){if(t instanceof Ps)return{name:t.toString(),instanceId:this.k(t)?.instanceId};const i=this.m(t);if(i)return{name:t.toString(),instanceId:i.instanceId}}constructor(){this.b=0,this.c=0,this.e=new Map,this.f=new WeakMap,this.g=new Map,this.h=new Set,this.i=hU("observableDevTools",()=>({notifications:{setDeclarationIdFilter:t=>{},logObservableValue:t=>{console.log("logObservableValue",t)},flushUpdates:()=>{this.w()},resetUpdates:()=>{this.r=null,this.i.api.notifications.handleChange(this.u,!0)}},requests:{getDeclarations:()=>{const t={};for(const i of this.e.values())t[i.id]=i;return{decls:t}},getSummarizedInstances:()=>null,getObservableValueInfo:t=>({observers:[...this.g.get(t).debugGetObservers()].map(s=>this.q(s)).filter(Xi)}),getDerivedInfo:t=>{const i=this.g.get(t);return{dependencies:[...i.debugGetState().dependencies].map(s=>this.p(s)).filter(Xi),observers:[...i.debugGetObservers()].map(s=>this.q(s)).filter(Xi)}},getAutorunInfo:t=>({dependencies:[...this.g.get(t).debugGetState().dependencies].map(s=>this.p(s)).filter(Xi)}),getTransactionState:()=>this.j(),setValue:(t,i)=>{const s=this.g.get(t);if(s instanceof Ps)s.debugSetValue(i);else if(s instanceof o0)s.debugSetValue(i);else if(s instanceof Co)s.debugSetValue(i);else throw new ki("Observable is not supported");const r=[...s.debugGetObservers()];for(const n of r)n.beginUpdate(s);for(const n of r)n.handleChange(s,void 0);for(const n of r)n.endUpdate(s)},getValue:t=>{const i=this.g.get(t);if(i instanceof Ps)return Or(i.debugGetState().value,200);if(i instanceof o0)return Or(i.debugGetState().value,200)}}})),this.r=null,this.s=new pU,this.u={},this.w=()=>{this.r!==null&&(this.i.api.notifications.handleChange(this.r,!1),this.r=null)}}v(t){w8(this.u,t),this.r===null?this.r=t:v8(this.r,t),this.s.throttle(this.w,10)}x(t){let i=!0,s;const r=Error;for(;;){const o=r.stackTraceLimit;r.stackTraceLimit=i?6:20;const a=new Error().stack;r.stackTraceLimit=o;let c=m8(a,/[/\\]observableInternal[/\\]|\.observe|[/\\]util(s)?\./);if(!i&&!c&&(c=m8(a,/[/\\]observableInternal[/\\]|\.observe/)),c){s=c;break}if(!i){console.error("Could not find location for declaration",new Error().stack),s={fileName:"unknown",line:0,column:0,id:"unknown"};break}i=!1}let n=this.e.get(s.id);return n===void 0&&(n={id:this.b++,type:t,url:s.fileName,line:s.line,column:s.column},this.e.set(s.id,n),this.v({decls:{[n.id]:n}})),n.id}handleObservableCreated(t){const s={declarationId:this.x("observable/value"),instanceId:this.c++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this.f.set(t,s)}handleOnListenerCountChanged(t,i){const s=this.k(t);if(s){if(s.listenerCount===0&&i>0){const r=t instanceof Ps?"observable/derived":"observable/value";this.g.set(s.instanceId,t),this.v({instances:{[s.instanceId]:{instanceId:s.instanceId,declarationId:s.declarationId,formattedValue:s.lastValue,type:r,name:t.debugName}}})}else s.listenerCount>0&&i===0&&(this.v({instances:{[s.instanceId]:null}}),this.g.delete(s.instanceId));s.listenerCount=i}}handleObservableUpdated(t,i){if(t instanceof Ps){this._handleDerivedRecomputed(t,i);return}const s=this.k(t);s&&i.didChange&&(s.lastValue=Or(i.newValue,30),s.listenerCount>0&&this.v({instances:{[s.instanceId]:{formattedValue:s.lastValue}}}))}handleAutorunCreated(t){const s={declarationId:this.x("autorun"),instanceId:this.c++,updateCount:0,changedObservables:new Set};this.f.set(t,s),this.g.set(s.instanceId,t),s&&this.v({instances:{[s.instanceId]:{instanceId:s.instanceId,declarationId:s.declarationId,runCount:0,type:"autorun",name:t.debugName}}})}handleAutorunDisposed(t){const i=this.m(t);i&&(this.v({instances:{[i.instanceId]:null}}),this.f.delete(t),this.g.delete(i.instanceId))}handleAutorunDependencyChanged(t,i,s){const r=this.m(t);r&&r.changedObservables.add(i)}handleAutorunStarted(t){}handleAutorunFinished(t){const i=this.m(t);i&&(i.changedObservables.clear(),i.updateCount++,this.v({instances:{[i.instanceId]:{runCount:i.updateCount}}}))}handleDerivedDependencyChanged(t,i,s){const r=this.k(t);r&&r.changedObservables.add(i)}_handleDerivedRecomputed(t,i){const s=this.k(t);if(!s)return;const r=Or(i.newValue,30);s.updateCount++,s.changedObservables.clear(),s.lastValue=r,s.listenerCount>0&&this.v({instances:{[s.instanceId]:{formattedValue:r,recomputationCount:s.updateCount}}})}handleDerivedCleared(t){const i=this.k(t);i&&(i.lastValue=void 0,i.changedObservables.clear(),i.listenerCount>0&&this.v({instances:{[i.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(t){this.h.add(t)}handleEndTransaction(t){this.h.delete(t)}};_F(rU);var mU=!1;mU&&s0(new g8),kr&&kr.VSCODE_DEV_DEBUG&&s0(gU.getInstance());var ir=class as{static fromTo(t,i){return new as(t,i)}static addRange(t,i){let s=0;for(;s<i.length&&i[s].endExclusive<t.start;)s++;let r=s;for(;r<i.length&&i[r].start<=t.endExclusive;)r++;if(s===r)i.splice(s,0,t);else{const n=Math.min(t.start,i[s].start),o=Math.max(t.endExclusive,i[r-1].endExclusive);i.splice(s,r-s,new as(n,o))}}static tryCreate(t,i){if(!(t>i))return new as(t,i)}static ofLength(t){return new as(0,t)}static ofStartAndLength(t,i){return new as(t,t+i)}static emptyAt(t){return new as(t,t)}constructor(t,i){if(this.start=t,this.endExclusive=i,t>i)throw new ki(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(t){return new as(this.start+t,this.endExclusive+t)}deltaStart(t){return new as(this.start+t,this.endExclusive)}deltaEnd(t){return new as(this.start,this.endExclusive+t)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(t){return this.start===t.start&&this.endExclusive===t.endExclusive}containsRange(t){return this.start<=t.start&&t.endExclusive<=this.endExclusive}contains(t){return this.start<=t&&t<this.endExclusive}join(t){return new as(Math.min(this.start,t.start),Math.max(this.endExclusive,t.endExclusive))}intersect(t){const i=Math.max(this.start,t.start),s=Math.min(this.endExclusive,t.endExclusive);if(i<=s)return new as(i,s)}intersectionLength(t){const i=Math.max(this.start,t.start),s=Math.min(this.endExclusive,t.endExclusive);return Math.max(0,s-i)}intersects(t){const i=Math.max(this.start,t.start),s=Math.min(this.endExclusive,t.endExclusive);return i<s}intersectsOrTouches(t){const i=Math.max(this.start,t.start),s=Math.min(this.endExclusive,t.endExclusive);return i<=s}isBefore(t){return this.endExclusive<=t.start}isAfter(t){return this.start>=t.endExclusive}slice(t){return t.slice(this.start,this.endExclusive)}substring(t){return t.substring(this.start,this.endExclusive)}clip(t){if(this.isEmpty)throw new ki(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,t))}clipCyclic(t){if(this.isEmpty)throw new ki(`Invalid clipping range: ${this.toString()}`);return t<this.start?this.endExclusive-(this.start-t)%this.length:t>=this.endExclusive?this.start+(t-this.start)%this.length:t}map(t){const i=[];for(let s=this.start;s<this.endExclusive;s++)i.push(t(s));return i}forEach(t){for(let i=this.start;i<this.endExclusive;i++)t(i)}joinRightTouching(t){if(this.endExclusive!==t.start)throw new ki(`Invalid join: ${this.toString()} and ${t.toString()}`);return new as(this.start,t.endExclusive)}};function b8(){return Object.create(null)}var $o="**",c0="/",hf="[/\\\\]",df="[^/\\\\]",vU=/\//g;function y8(e,t){switch(e){case 0:return"";case 1:return`${df}*?`;default:return`(?:${hf}|${df}+${hf}${t?`|${hf}${df}+`:""})*?`}}function Gl(e,t){if(!e)return[];const i=[];let s=!1,r=!1,n="";for(const o of e){switch(o){case t:if(!s&&!r){i.push(n),n="";continue}break;case"{":s=!0;break;case"}":s=!1;break;case"[":r=!0;break;case"]":r=!1;break}n+=o}return n&&i.push(n),i}function x8(e){if(!e)return"";let t="";const i=Gl(e,c0);if(i.every(s=>s===$o))t=".*";else{let s=!1;i.forEach((r,n)=>{if(r===$o){if(s)return;t+=y8(2,n===i.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of r){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===c0?h="":h=pn(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const f=`(?:${Gl(a,",").map(p=>x8(p)).join("|")})`;t+=f,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=df;continue;case"*":t+=y8(1);continue;default:t+=pn(u)}}n<i.length-1&&(i[n+1]!==$o||n+2<i.length)&&(t+=hf)}s=r===$o})}return t}var wU=/^\*\*\/\*\.[\w\.-]+$/,bU=/^\*\*\/([\w\.-]+)\/?$/,yU=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,xU=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,EU=/^\*\*((\/[\w\.-]+)+)\/?$/,kU=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,E8=new ll(1e4),k8=function(){return!1},sr=function(){return null};function l0(e,t){if(!e)return sr;let i;typeof e!="string"?i=e.pattern:i=e,i=i.trim();const s=`${i}_${!!t.trimForExclusions}`;let r=E8.get(s);if(r)return S8(r,e);let n;return wU.test(i)?r=SU(i.substr(4),i):(n=bU.exec(u0(i,t)))?r=CU(n[1],i):(t.trimForExclusions?xU:yU).test(i)?r=$U(i,t):(n=EU.exec(u0(i,t)))?r=C8(n[1].substr(1),i,!0):(n=kU.exec(u0(i,t)))?r=C8(n[1],i,!1):r=IU(i),E8.set(s,r),S8(r,e)}function S8(e,t){if(typeof t=="string")return e;const i=function(s,r){return lo(s,t.base,!$t)?e(cR(s.substr(t.base.length),wt),r):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function u0(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function SU(e,t){return function(i,s){return typeof i=="string"&&i.endsWith(e)?t:null}}function CU(e,t){const i=`/${e}`,s=`\\${e}`,r=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(i)||o.endsWith(s)?t:null},n=[e];return r.basenames=n,r.patterns=[t],r.allBasenames=n,r}function $U(e,t){const i=P8(e.slice(1,-1).split(",").map(a=>l0(a,t)).filter(a=>a!==sr),e),s=i.length;if(!s)return sr;if(s===1)return i[0];const r=function(a,c){for(let l=0,u=i.length;l<u;l++)if(i[l](a,c))return e;return null},n=i.find(a=>!!a.allBasenames);n&&(r.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function C8(e,t,i){const s=wt===je.sep,r=s?e:e.replace(vU,wt),n=wt+r,o=je.sep+e;let a;return i?a=function(c,l){return typeof c=="string"&&(c===r||c.endsWith(n)||!s&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===r||!s&&c===e)?t:null},a.allPaths=[(i?"*/":"./")+e],a}function IU(e){try{const t=new RegExp(`^${x8(e)}$`);return function(i){return t.lastIndex=0,typeof i=="string"&&t.test(i)?e:null}}catch{return sr}}function Ba(e,t,i){return!e||typeof t!="string"?!1:Ds(e)(t,void 0,i)}function Ds(e,t={}){if(!e)return k8;if(typeof e=="string"||PU(e)){const i=l0(e,t);if(i===sr)return k8;const s=function(r,n){return!!i(r,n)};return i.allBasenames&&(s.allBasenames=i.allBasenames),i.allPaths&&(s.allPaths=i.allPaths),s}return DU(e,t)}function PU(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function $8(e){return e.allBasenames||[]}function I8(e){return e.allPaths||[]}function DU(e,t){const i=P8(Object.getOwnPropertyNames(e).map(a=>AU(a,e[a],t)).filter(a=>a!==sr)),s=i.length;if(!s)return sr;if(!i.some(a=>!!a.requiresSiblings)){if(s===1)return i[0];const a=function(u,h){let f;for(let p=0,g=i.length;p<g;p++){const v=i[p](u,h);if(typeof v=="string")return v;vn(v)&&(f||(f=[]),f.push(v))}return f?(async()=>{for(const p of f){const g=await p;if(typeof g=="string")return g}return null})():null},c=i.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=i.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const r=function(a,c,l){let u,h;for(let f=0,p=i.length;f<p;f++){const g=i[f];g.requiresSiblings&&l&&(c||(c=vt(a)),u||(u=c.substr(0,c.length-wl(a).length)));const v=g(a,c,u,l);if(typeof v=="string")return v;vn(v)&&(h||(h=[]),h.push(v))}return h?(async()=>{for(const f of h){const p=await f;if(typeof p=="string")return p}return null})():null},n=i.find(a=>!!a.allBasenames);n&&(r.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function AU(e,t,i){if(t===!1)return sr;const s=l0(e,i);if(s===sr)return sr;if(typeof t=="boolean")return s;if(t){const r=t.when;if(typeof r=="string"){const n=(o,a,c,l)=>{if(!l||!s(o,a))return null;const u=r.replace("$(basename)",()=>c),h=l(u);return vn(h)?h.then(f=>f?e:null):h?e:null};return n.requiresSiblings=!0,n}}return s}function P8(e,t){const i=e.filter(a=>!!a.basenames);if(i.length<2)return e;const s=i.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let r;if(t){r=[];for(let a=0,c=s.length;a<c;a++)r.push(t)}else r=i.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=s.indexOf(c);return l!==-1?r[l]:null};n.basenames=s,n.patterns=r,n.allBasenames=s;const o=e.filter(a=>!a.basenames);return o.push(n),o}function D8(e,t){return Oi(e,t,(i,s)=>typeof i=="string"&&typeof s=="string"?i===s:typeof i!="string"&&typeof s!="string"?i.base===s.base&&i.pattern===s.pattern:!1)}var TU=q("notebookDocumentService"),h0=["W","X","Y","Z","a","b","c","d","e","f"],RU=new RegExp(`^[${h0.join("")}]+`),A8=7;function d0(e){if(e.scheme!==G.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(RU,""),A8),s=Ca(e.fragment.substring(t+1)).toString();if(!isNaN(i))return{handle:i,notebook:e.with({scheme:s,fragment:null})}}function LU(e,t){const i=t.toString(A8),r=`${i.length<h0.length?h0[i.length-1]:"z"}${i}s${kl(_.fromString(e.scheme),!0,!0)}`;return e.with({scheme:G.vscodeNotebookCell,fragment:r})}function NU(e){if(e.scheme!==G.vscodeNotebookMetadata)return;const t=Ca(e.fragment).toString();return e.with({scheme:t,fragment:null})}function MU(e){const t=`${kl(_.fromString(e.scheme),!0,!0)}`;return e.with({scheme:G.vscodeNotebookMetadata,fragment:t})}function T8(e){if(e.scheme!==G.vscodeNotebookCellOutput)return;const t=new URLSearchParams(e.query),i=t.get("openIn");if(!i)return;const s=t.get("outputId")??void 0,r=d0(e.with({scheme:G.vscodeNotebookCell,query:null})),n=t.get("outputIndex")?parseInt(t.get("outputIndex")||"",10):void 0,o=r?r.notebook:e.with({scheme:t.get("notebookScheme")||G.file,fragment:null,query:null}),a=t.get("cellIndex")?parseInt(t.get("cellIndex")||"",10):void 0;return{notebook:o,openIn:i,outputId:s,outputIndex:n,cellHandle:r?.handle,cellFragment:e.fragment,cellIndex:a}}var OU=class{constructor(){this.a=new Ht}getNotebook(e){if(e.scheme===G.vscodeNotebookCell){const t=d0(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}if(e.scheme===G.vscodeNotebookCellOutput){const t=T8(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Re(TU,OU,1);var Ha;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Ha||(Ha={}));var tX=["application/json","application/javascript","text/html","image/svg+xml",tr.latex,tr.markdown,"image/png","image/jpeg",tr.text],iX=[tr.latex,tr.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",tr.text],R8;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(R8||(R8={}));var L8;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(L8||(L8={}));var N8;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(N8||(N8={}));var M8;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(M8||(M8={}));var O8;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(O8||(O8={}));var As;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(As||(As={}));var F8;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(F8||(F8={}));var U8;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(U8||(U8={}));var j8;(function(e){e.scheme=G.vscodeNotebookMetadata;function t(s){return MU(s)}e.generate=t;function i(s){return NU(s)}e.parse=i})(j8||(j8={}));var ff;(function(e){e.scheme=G.vscodeNotebookCell;function t(l,u){return LU(l,u)}e.generate=t;function i(l){return d0(l)}e.parse=i;function s(l,u){return l.with({scheme:G.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"editor",outputId:u??"",notebookScheme:l.scheme!==G.file?l.scheme:""}).toString()})}e.generateCellOutputUriWithId=s;function r(l,u,h){return l.with({scheme:G.vscodeNotebookCellOutput,fragment:u.fragment,query:new URLSearchParams({openIn:"notebook",outputIndex:String(h)}).toString()})}e.generateCellOutputUriWithIndex=r;function n(l,u,h,f,p){return l.with({scheme:G.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"notebookOutputEditor",notebook:l.toString(),cellIndex:String(h),outputId:f,outputIndex:String(p)}).toString()})}e.generateOutputEditorUri=n;function o(l){return T8(l)}e.parseCellOutputUri=o;function a(l,u,h){return e.generate(l,u).with({scheme:h})}e.generateCellPropertyUri=a;function c(l,u){if(l.scheme===u)return e.parse(l.with({scheme:e.scheme}))}e.parseCellPropertyUri=c})(ff||(ff={}));var sX=new $("notebookEditorCursorAtBoundary","none"),rX=new $("notebookEditorCursorAtLineBoundary","none"),B8;(function(e){e.default="default",e.option="option"})(B8||(B8={}));var H8;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(H8||(H8={}));var z8;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(z8||(z8={}));var nX=class o1{static{this.d="notebook/"}static create(t,i){return`${o1.d}${t}/${i??t}`}static parse(t){if(t.startsWith(o1.d)){const i=t.substring(o1.d.length).split("/");if(i.length===2)return{notebookType:i[0],viewType:i[1]}}}};function W8(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var FU=new TextDecoder;function UU(e){const t=[];let i=!1;for(const o of e)(t.length===0||i)&&(t.push(o),i=!0);let s=BU(t);const r=_.concat(t.map(o=>_.wrap(o))),n=_U(r);return s=s||n.byteLength!==r.byteLength,{data:n,didCompression:s}}var pf="\x1B[A",f0=pf.split("").map(e=>e.charCodeAt(0)),jU=10;function BU(e){let t=!1;return e.forEach((i,s)=>{if(s===0||i.length<pf.length)return;const r=e[s-1],n=i.subarray(0,pf.length);if(n[0]===f0[0]&&n[1]===f0[1]&&n[2]===f0[2]){const o=r.lastIndexOf(jU);if(o===-1)return;t=!0,e[s-1]=r.subarray(0,o),e[s]=i.subarray(pf.length)}}),t}function HU(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function zU(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let i=e.match(/\r+(.*)$/m)[1];i=i+t.slice(i.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,i)}return e}var WU=8,VU=13;function _U(e){return!e.buffer.includes(WU)&&!e.buffer.includes(VU)?e:_.fromString(zU(HU(FU.decode(e.buffer))))}var gf=q("productService"),qU="vscode://schemas/vscode-product",Fr=q("configurationService"),V8;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(V8||(V8={}));function p0(e,t){const i=Object.create(null);for(const s in e)_8(i,s,e[s],t);return i}function _8(e,t,i,s){const r=t.split("."),n=r.pop();let o=e;for(let a=0;a<r.length;a++){const c=r[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){s(`Ignoring ${t} as ${r.slice(0,a+1).join(".")} is null`);return}break;default:s(`Ignoring ${t} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=i}catch{s(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(o)}`)}else s(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(o)}`)}function GU(e,t){const i=t.split(".");q8(e,i)}function q8(e,t){if(!e)return;const i=t.shift();if(t.length===0){delete e[i];return}if(Object.keys(e).indexOf(i)!==-1){const s=e[i];typeof s=="object"&&!Array.isArray(s)&&(q8(s,t),Object.keys(s).length===0&&delete e[i])}}function mf(e,t,i){function s(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const r=t.split("."),n=s(e,r);return typeof n>"u"?i:n}function JU(e){return e.replace(/[\[\]]/g,"")}function YU(e){let t=!1;const i=new Map,s=new Map;if(ZU(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const f=i.get(h);if(!f){const p={schemas:[u]};return i.set(h,p),s.set(u,p),!0}return f.schemas.push(u),s.set(u,f),t=!0,!1}),i.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,f)=>{if(f!==u){const p=s.get(f);if(p&&p.schemas.length>1)return p.id||(p.id=`_${o.length}`,o.push(p.schemas[0])),{$ref:`#/${n}/${p.id}`}}return f})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function za(e){return typeof e=="object"&&e!==null}function ZU(e,t){if(!e||typeof e!="object")return;const i=(...c)=>{for(const l of c)za(l)&&o.push(l)},s=(...c)=>{for(const l of c)if(za(l))for(const u in l){const h=l[u];za(h)&&o.push(h)}},r=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)za(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)za(l)&&o.push(l);else za(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(i(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),s(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),r(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var vf={JSONContribution:"base.contributions.json"};function G8(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var QU=class extends X{constructor(){super(...arguments),this.a={},this.b={},this.c=this.B(new D),this.onDidChangeSchema=this.c.event,this.f=this.B(new D),this.onDidChangeSchemaAssociations=this.f.event}registerSchema(e,t,i){const s=G8(e);this.a[s]=t,this.c.fire(e),i&&i.add(ie(()=>{delete this.a[s],this.c.fire(e)}))}registerSchemaAssociation(e,t){const i=G8(e);return this.b[i]||(this.b[i]=[]),this.b[i].includes(t)||(this.b[i].push(t),this.f.fire()),ie(()=>{const s=this.b[i];if(s){const r=s.indexOf(t);r!==-1&&(s.splice(r,1),s.length===0&&delete this.b[i],this.f.fire())}})}notifySchemaChanged(e){this.c.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?YU(t):void 0}hasSchemaContent(e){return!!this.a[e]}getSchemaAssociations(){return this.b}},XU=new QU;Xt.add(vf.JSONContribution,XU);var J8;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(J8||(J8={}));var Io={Configuration:"base.contributions.configuration"},Y8;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",e[e.WINDOW=4]="WINDOW",e[e.RESOURCE=5]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"})(Y8||(Y8={}));var wf={properties:{},patternProperties:{}},bf={properties:{},patternProperties:{}},yf={properties:{},patternProperties:{}},xf={properties:{},patternProperties:{}},Ef={properties:{},patternProperties:{}},kf={properties:{},patternProperties:{}},Jl={properties:{},patternProperties:{}},Po="vscode://schemas/settings/resourceLanguage",Sf=Xt.as(vf.JSONContribution),KU=class extends X{constructor(){super(),this.a=[],this.n=new Set,this.r=this.B(new D),this.onDidSchemaChange=this.r.event,this.s=this.B(new D),this.onDidUpdateConfiguration=this.s.event,this.b=new Map,this.c={id:"defaultOverrides",title:d(1787,null),properties:{}},this.f=[this.c],this.m={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.g={},this.h=new Map,this.j={},Sf.registerSchema(Po,this.m),this.N()}registerConfiguration(e,t=!0){return this.registerConfigurations([e],t),e}registerConfigurations(e,t=!0){const i=new Set;this.F(e,t,i),Sf.registerSchema(Po,this.m),this.r.fire(),this.s.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.G(e,t),Sf.registerSchema(Po,this.m),this.r.fire(),this.s.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.G(t,i),this.F(e,!1,i),Sf.registerSchema(Po,this.m),this.r.fire(),this.s.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.u(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}u(e,t){this.a.push(...e);const i=[];for(const{overrides:s,source:r}of e)for(const n in s){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=s[n];if(o.configurationDefaultOverrides.push({value:a,source:r}),rr.test(n)){const c=this.z(n,a,r,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.y(n,c,r),i.push(...Yl(n))}else{const c=this.C(n,a,r,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.g[n];l&&(this.O(n,l),this.J(n,l))}}this.D(i)}deregisterDefaultConfigurations(e){const t=new Set;this.w(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}w(e,t){for(const i of e){const s=this.a.indexOf(i);s!==-1&&this.a.splice(s,1)}for(const{overrides:i,source:s}of e)for(const r in i){const n=this.b.get(r);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>s?a.source?.id===s.id:a.value===i[r]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(r),rr.test(r)){let a;for(const c of n.configurationDefaultOverrides)a=this.z(r,c.value,c.source,a);a&&!vx(a.value)?(n.configurationDefaultOverrideValue=a,this.y(r,a,s)):(this.b.delete(r),delete this.g[r],delete this.c.properties[r])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.C(r,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.g[r];c&&(this.O(r,c),this.J(r,c))}t.add(r)}}this.M()}y(e,t,i){const s={type:"object",default:t.value,description:d(1788,null,JU(e)),$ref:Po,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.g[e]=s,this.c.properties[e]=s}z(e,t,i,s){const r=s?.value||{},n=s?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(St(a)&&(ul(r[o])||St(r[o]))){if(r[o]={...r[o]??{},...a},i)for(const l in a)n.set(`${o}.${l}`,i)}else r[o]=a,i?n.set(o,i):n.delete(o)}return{value:r,source:n}}C(e,t,i,s){const r=this.g[e],n=s?.value??r?.defaultDefaultValue;let o=i;if(St(t)&&(r!==void 0&&r.type==="object"||r===void 0&&(ul(n)||St(n)))){if(o=s?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&o.set(`${e}.${c}`,i);t={...St(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.w(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.u(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.G(e.removedConfigurations,i),e.addedConfigurations&&this.F(e.addedConfigurations,!1,i),this.r.fire(),this.s.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.r.fire()}registerOverrideIdentifiers(e){this.D(e),this.r.fire()}D(e){for(const t of e)this.n.add(t);this.M()}F(e,t,i){e.forEach(s=>{this.H(s,t,s.extensionInfo,s.restrictedProperties,void 0,i),this.f.push(s),this.I(s)})}G(e,t){const i=s=>{if(s.properties)for(const r in s.properties){t.add(r);const n=this.g[r];n?.policy?.name&&this.h.delete(n.policy.name),delete this.g[r],this.L(r,s.properties[r])}s.allOf?.forEach(r=>i(r))};for(const s of e){i(s);const r=this.f.indexOf(s);r!==-1&&this.f.splice(r,1)}}H(e,t=!0,i,s,r=4,n){r=Tt(e.scope)?r:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&tj(c,l)){delete o[c];continue}l.source=i,l.defaultDefaultValue=o[c].default,this.O(c,l),rr.test(c)?l.scope=void 0:(l.scope=Tt(l.scope)?r:l.scope,l.restricted=Tt(l.restricted)?!!s?.includes(c):l.restricted);const u=o[c].hasOwnProperty("included")&&!o[c].included,h=o[c].policy?.name;u?(this.j[c]=o[c],h&&(this.h.set(h,c),n.add(c)),delete o[c]):(n.add(c),h&&this.h.set(h,c),this.g[c]=o[c],!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage))}const a=e.allOf;if(a)for(const c of a)this.H(c,t,i,s,r,n)}getConfigurations(){return this.f}getConfigurationProperties(){return this.g}getPolicyConfigurations(){return this.h}getExcludedConfigurationProperties(){return this.j}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,i]of this.b)i.configurationDefaultOverrideValue&&e.set(t,i.configurationDefaultOverrideValue);return e}I(e){const t=i=>{const s=i.properties;if(s)for(const n in s)this.J(n,s[n]);i.allOf?.forEach(t)};t(e)}J(e,t){switch(wf.properties[e]=t,t.scope){case 1:bf.properties[e]=t;break;case 2:xf.properties[e]=t;break;case 3:yf.properties[e]=t;break;case 7:Ef.properties[e]=t;break;case 4:kf.properties[e]=t;break;case 5:Jl.properties[e]=t;break;case 6:Jl.properties[e]=t,this.m.properties[e]=t;break}}L(e,t){switch(delete wf.properties[e],t.scope){case 1:delete bf.properties[e];break;case 2:delete xf.properties[e];break;case 3:delete yf.properties[e];break;case 7:delete Ef.properties[e];break;case 4:delete kf.properties[e];break;case 5:case 6:delete Jl.properties[e],delete this.m.properties[e];break}}M(){for(const e of this.n.values()){const t=`[${e}]`,i={type:"object",description:d(1789,null),errorMessage:d(1790,null),$ref:Po};this.O(t,i),wf.properties[t]=i,bf.properties[t]=i,yf.properties[t]=i,xf.properties[t]=i,Ef.properties[t]=i,kf.properties[t]=i,Jl.properties[t]=i}}N(){const e={type:"object",description:d(1791,null),errorMessage:d(1792,null),$ref:Po};wf.patternProperties[In]=e,bf.patternProperties[In]=e,yf.patternProperties[In]=e,xf.patternProperties[In]=e,Ef.patternProperties[In]=e,kf.patternProperties[In]=e,Jl.patternProperties[In]=e,this.r.fire()}O(e,t){const i=this.b.get(e)?.configurationDefaultOverrideValue;let s,r;i&&(!t.disallowConfigurationDefault||!i.source)&&(s=i.value,r=i.source),ul(s)&&(s=t.defaultDefaultValue,r=void 0),ul(s)&&(s=ej(t.type)),t.default=s,t.defaultValueSource=r}},Z8="\\[([^\\]]+)\\]",Q8=new RegExp(Z8,"g"),In=`^(${Z8})+$`,rr=new RegExp(In);function Yl(e){const t=[];if(rr.test(e)){let i=Q8.exec(e);for(;i?.length;){const s=i[1].trim();s&&t.push(s),i=Q8.exec(e)}}return va(t)}function ej(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Cf=new KU;Xt.add(Io.Configuration,Cf);function tj(e,t){return e.trim()?rr.test(e)?d(1794,null,e):Cf.getConfigurationProperties()[e]!==void 0?d(1795,null,e):t.policy?.name&&Cf.getPolicyConfigurations().get(t.policy?.name)!==void 0?d(1796,null,e,t.policy?.name,Cf.getPolicyConfigurations().get(t.policy?.name)):null:d(1793,null)}var ij=q("requestService"),sj=class{constructor(e){this.b=e}toJSON(){if(!this.a){const e=Object.create(null);for(const t in this.b)t.toLowerCase()==="authorization"||t.toLowerCase()==="proxy-authorization"?e[t]="*****":e[t]=this.b[t];this.a=e}return this.a}},rj=class extends X{constructor(e){super(),this.b=e,this.a=0}async c(e,t){const i=`#${++this.a}: ${e.url}`;this.b.trace(`${i} - begin`,e.type,new sj(e.headers??{}));try{const s=await t();return this.b.trace(`${i} - end`,e.type,s.res.statusCode,s.res.headers),s}catch(s){throw this.b.error(`${i} - error`,e.type,nx(s)),s}}};function nj(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function oj(e){return e.res.statusCode===204}async function aj(e){if(!nj(e))throw new Error("Server returned "+e.res.statusCode);if(oj(e))return null;const i=(await $L(e.stream)).toString();try{return JSON.parse(i)}catch(s){throw s.message+=`:
`+i,s}}var g0=[],X8=void 0,K8=void 0;function cj(e=!0,t=!0){if(X8===e&&K8===t)return;X8=e,K8=t;const i=Xt.as(Io.Configuration),s=g0;g0=[{id:"http",order:15,title:d(2205,null),type:"object",scope:2,properties:{"http.useLocalProxyConfiguration":{type:"boolean",default:t,markdownDescription:d(2206,null),restricted:!0}}},{id:"http",order:15,title:d(2207,null),type:"object",scope:1,properties:{"http.electronFetch":{type:"boolean",default:!1,description:d(2208,null),restricted:!0}}},{id:"http",order:15,title:d(2209,null),type:"object",scope:e?1:2,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:d(2210,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,markdownDescription:d(2211,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:d(2212,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:d(2213,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:d(2214,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[d(2215,null),d(2216,null),d(2217,null),d(2218,null)],default:"override",markdownDescription:d(2219,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,markdownDescription:d(2220,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,markdownDescription:d(2221,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.fetchAdditionalSupport":{type:"boolean",default:!0,markdownDescription:d(2222,null,"`#http.useLocalProxyConfiguration#`","`#http.proxySupport#`","`#http.systemCertificates#`"),restricted:!0}}}],i.updateConfigurations({add:g0,remove:s})}cj();var Zl;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Zl||(Zl={}));var Ts;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(Ts||(Ts={}));var oX=class xA extends X{static{this.a=100}constructor(t,i=Object.create(null)){super(),this.r=t,this.s=i,this.b=this.B(new pl),this.onDidChangeStorage=this.b.event,this.c=Ts.None,this.f=new Map,this.g=this.B(new Id(xA.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((i,s)=>this.w(s,i)),t.deleted?.forEach(i=>this.w(i,void 0))}finally{this.b.resume()}}w(t,i){if(this.c===Ts.Closed)return;let s=!1;Tt(i)?s=this.f.delete(t):this.f.get(t)!==i&&(this.f.set(t,i),s=!0),s&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===Ts.None&&(this.c=Ts.Initialized,this.s.hint!==Zl.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,i){const s=this.f.get(t);return Tt(s)?i:s}getBoolean(t,i){const s=this.get(t);return Tt(s)?i:s==="true"}getNumber(t,i){const s=this.get(t);return Tt(s)?i:parseInt(s,10)}getObject(t,i){const s=this.get(t);return Tt(s)?i:ZE(s)}async set(t,i,s=!1){if(this.c===Ts.Closed)return;if(Tt(i))return this.delete(t,s);const r=St(i)||Array.isArray(i)?tN(i):String(i);if(this.f.get(t)!==r)return this.f.set(t,r),this.j.set(t,r),this.h.delete(t),this.b.fire({key:t,external:s}),this.D()}async delete(t,i=!1){if(!(this.c===Ts.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:i}),this.D()}async optimize(){if(this.c!==Ts.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=Ts.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===Ts.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===Zl.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===Zl.STORAGE_IN_MEMORY}},m0=q("environmentService"),lj=m0,eC=q("IUriIdentityService"),tC;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Prompts="prompts",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(tC||(tC={}));function uj(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&x.isUri(t.location)&&x.isUri(t.globalStorageHome)&&x.isUri(t.settingsResource)&&x.isUri(t.keybindingsResource)&&x.isUri(t.tasksResource)&&x.isUri(t.snippetsHome)&&x.isUri(t.promptsHome)&&x.isUri(t.extensionsResource))}var hj=q("IUserDataProfilesService");function $f(e,t,i,s,r,n){return{id:e,name:t,location:i,isDefault:!1,icon:r?.icon,globalStorageHome:n&&r?.useDefaultFlags?.globalState?n.globalStorageHome:xt(i,"globalStorage"),settingsResource:n&&r?.useDefaultFlags?.settings?n.settingsResource:xt(i,"settings.json"),keybindingsResource:n&&r?.useDefaultFlags?.keybindings?n.keybindingsResource:xt(i,"keybindings.json"),tasksResource:n&&r?.useDefaultFlags?.tasks?n.tasksResource:xt(i,"tasks.json"),snippetsHome:n&&r?.useDefaultFlags?.snippets?n.snippetsHome:xt(i,"snippets"),promptsHome:n&&r?.useDefaultFlags?.prompts?n.promptsHome:xt(i,"prompts"),extensionsResource:n&&r?.useDefaultFlags?.extensions?n.extensionsResource:xt(i,"extensions.json"),cacheHome:xt(s,e),useDefaultFlags:r?.useDefaultFlags,isTransient:r?.transient,workspaces:r?.workspaces}}var iC=class extends X{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,i,s,r){super(),this.s=t,this.t=i,this.u=s,this.y=r,this.g=this.B(new D),this.onDidChangeProfiles=this.g.event,this.h=this.B(new D),this.onWillCreateProfile=this.h.event,this.j=this.B(new D),this.onWillRemoveProfile=this.j.event,this.m=this.B(new D),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=xt(this.s.userRoamingDataHome,"profiles"),this.f=xt(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),i=[t];try{for(const r of this.N()){if(!r.name||!Ue(r.name)||!r.location){this.y.warn("Skipping the invalid stored profile",r.location||r.name);continue}i.push($f(ts(r.location),r.name,r.location,this.f,{icon:r.icon,useDefaultFlags:r.useDefaultFlags},t))}}catch(r){this.y.error(r)}const s=new Map;if(i.length)try{const r=this.P();if(r.workspaces)for(const[n,o]of Object.entries(r.workspaces)){const a=x.parse(n),c=i.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(r.emptyWindows)for(const[n,o]of Object.entries(r.emptyWindows)){const a=i.find(c=>c.id===o);a&&s.set(n,a)}}catch(r){this.y.error(r)}this.z={profiles:i,emptyWindows:s}}return this.z}D(){const t=$f("__default__profile__",d(2614,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const i="Temp",s=new RegExp(`${pn(i)}\\s(\\d+)`);let r=0;for(const o of this.profiles){const a=s.exec(o.name),c=a?parseInt(a[1]):0;r=c>r?c:r}const n=`${i} ${r+1}`;return this.createProfile(Rr(ut()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,i,s){return this.createProfile(Rr(ut()).toString(16),t,i,s)}async createProfile(t,i,s,r){return await this.F(t,i,s,r)}async F(t,i,s,r){if(!Ue(i)||!i)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(i);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!s?.transient&&u.name===i))throw new Error(`Profile with ${i} name already exists`);const a=r?this.G(r):void 0;x.isUri(a)&&(s={...s,workspaces:[a]});const c=$f(t,i,xt(this.profilesHome,t),this.f,s,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await wn.settled(l),a&&!x.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(i)}})(),this.n.set(i,n)),n}async updateProfile(t,i){const s=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?i.workspaces&&(o=n,o.workspaces=i.workspaces):o=$f(n.id,i.name??n.name,n.location,this.f,{icon:i.icon===null?void 0:i.icon??n.icon,transient:i.transient??n.isTransient,useDefaultFlags:i.useDefaultFlags??n.useDefaultFlags,workspaces:i.workspaces??n.workspaces},this.defaultProfile);else if(i.workspaces){const a=n.workspaces?.filter(c=>!i.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&s.push(o)}if(!s.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],s);const r=this.profiles.find(n=>n.id===t.id);if(!r)throw new Error(`Profile '${t.name}' was not updated`);return r}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const i=this.profiles.find(r=>r.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);const s=[];this.j.fire({profile:i,join(r){s.push(r)}});try{await Promise.allSettled(s)}catch(r){this.y.error(r)}this.I([],[i],[]);try{await this.t.del(i.cacheHome,{recursive:!0})}catch(r){PF(r)!==1&&this.y.error(r)}}async setProfileForWorkspace(t,i){const s=this.profiles.find(n=>n.id===i.id);if(!s)throw new Error(`Profile '${i.name}' does not exist`);const r=this.G(t);if(x.isUri(r)){const n=s.workspaces?[...s.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,r))||(n.push(r),await this.updateProfile(s,{workspaces:n}))}else this.L(r,s,!1),this.M(this.profiles)}unsetWorkspace(t,i=!1){const s=this.G(t);if(x.isUri(s)){const r=this.getProfileForWorkspace(t);r&&this.updateProfile(r,{workspaces:r.workspaces?.filter(n=>!this.u.extUri.isEqual(n,s))})}else this.L(s,void 0,i),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(i=>i.isDirectory&&this.profiles.every(s=>!this.u.extUri.isEqual(s.location,i.resource))).map(i=>this.t.del(i.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(i=>!this.H(i));await Promise.allSettled(t.map(i=>this.removeProfile(i)))}getProfileForWorkspace(t){const i=this.G(t);return x.isUri(i)?this.profiles.find(s=>s.workspaces?.some(r=>this.u.extUri.isEqual(r,i))):this.C.emptyWindows.get(i)??this.r.emptyWindows.get(i)}G(t){return wO(t)?t.uri:bO(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location))||[...this.r.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location)))}I(t,i,s){const r=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of r){if(i.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=s.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,i,s)}J(t,i,s){this.g.fire({added:t,removed:i,updated:s,all:this.profiles})}L(t,i,s){s=i?.isTransient?!0:s,s?i?this.r.emptyWindows.set(t,i):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),i?this.C.emptyWindows.set(t,i):this.C.emptyWindows.delete(t))}M(t){const i=[],s={},r={};for(const n of t)if(!n.isTransient&&(n.isDefault||i.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)s[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())r[n.toString()]=o.id;this.Q({workspaces:s,emptyWindows:r}),this.O(i),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};iC=__decorate([__param(0,m0),__param(1,T6),__param(2,eC),__param(3,De)],iC);var dj="__$__isNewStorageMarker",If="__$__targetStorageMarker",sC=q("storageService"),Wa;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(Wa||(Wa={}));var rC;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(rC||(rC={}));var nC;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(nC||(nC={}));function fj(e){const t=e.get(If);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var cX=class EA extends X{static{this.a=60*1e3}constructor(t={flushInterval:EA.a}){super(),this.b=this.B(new pl),this.f=this.B(new pl),this.onDidChangeTarget=this.f.event,this.g=this.B(new D),this.onWillSaveState=this.g.event,this.m=this.B(new Js),this.C=void 0,this.F=void 0,this.H=void 0,this.j=this.B(new Zs(()=>this.n(),t.flushInterval))}onDidChangeValue(t,i,s){return Ve.filter(this.b.event,r=>r.scope===t&&(i===void 0||r.key===i),s)}n(){this.m.value=PE(()=>{this.r()&&this.flush(),this.j.schedule()})}r(){return!0}t(){Es([this.m,this.j])}initialize(){return this.h||(this.h=(async()=>{It("code/willInitStorage");try{await this.O()}finally{It("code/didInitStorage")}this.j.schedule()})()),this.h}u(t,i){const{key:s,external:r}=i;if(s===If){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break}this.f.fire({scope:t})}else this.b.fire({scope:t,key:s,target:this.J(t)[s],external:r})}w(t){this.g.fire({reason:t})}get(t,i,s){return this.P(i)?.get(t,s)}getBoolean(t,i,s){return this.P(i)?.getBoolean(t,s)}getNumber(t,i,s){return this.P(i)?.getNumber(t,s)}getObject(t,i,s){return this.P(i)?.getObject(t,s)}storeAll(t,i){this.y(()=>{for(const s of t)this.store(s.key,s.value,s.scope,s.target,i)})}store(t,i,s,r,n=!1){if(Tt(i)){this.remove(t,s,n);return}this.y(()=>{this.z(t,s,r),this.P(s)?.set(t,i,n)})}remove(t,i,s=!1){this.y(()=>{this.z(t,i,void 0),this.P(i)?.delete(t,s)})}y(t){this.b.pause(),this.f.pause();try{t()}finally{this.b.resume(),this.f.resume()}}keys(t,i){const s=[],r=this.J(t);for(const n of Object.keys(r))r[n]===i&&s.push(n);return s}z(t,i,s,r=!1){const n=this.J(i);typeof s=="number"?n[t]!==s&&(n[t]=s,this.P(i)?.set(If,JSON.stringify(n),r)):typeof n[t]=="number"&&(delete n[t],this.P(i)?.set(If,JSON.stringify(n),r))}get D(){return this.C||(this.C=this.L(1)),this.C}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.D}}L(t){const i=this.P(t);return i?fj(i):Object.create(null)}isNew(t){return this.getBoolean(dj,t)===!0}async flush(t=Wa.NONE){this.g.fire({reason:t});const i=this.P(-1),s=this.P(0),r=this.P(1);switch(t){case Wa.NONE:await wn.settled([i?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve()]);break;case Wa.SHUTDOWN:await wn.settled([i?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,i=this.P(0)?.items??new Map,s=this.P(1)?.items??new Map;return pj(t,i,s,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,i){return this.w(Wa.NONE),uj(t)?this.R(t,i):this.S(t,i)}M(t,i){return!(t.id===i.id||oC(i)&&oC(t))}N(t,i,s){this.y(()=>{const r=new Set;for(const[n,o]of t)r.add(n),i.get(n)!==o&&this.u(s,{key:n,external:!0});for(const[n]of i.items)r.has(n)||this.u(s,{key:n,external:!0})})}};function oC(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function pj(e,t,i,s,r,n){const o=v=>{try{return JSON.parse(v)}catch{return v}},a=new Map,c=new Map;e.forEach((v,b)=>{a.set(b,v),c.set(b,o(v))});const l=new Map,u=new Map;t.forEach((v,b)=>{l.set(b,v),u.set(b,o(v))});const h=new Map,f=new Map;i.forEach((v,b)=>{h.set(b,v),f.set(b,o(v))}),console.group(s!==r?`Storage: Application (path: ${s})`:`Storage: Application & Profile (path: ${s}, default profile)`);const p=[];if(a.forEach((v,b)=>{p.push({key:b,value:v})}),console.table(p),console.groupEnd(),console.log(c),s!==r){console.group(`Storage: Profile (path: ${r}, profile specific)`);const v=[];l.forEach((b,E)=>{v.push({key:E,value:b})}),console.table(v),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const g=[];h.forEach((v,b)=>{g.push({key:b,value:v})}),console.table(g),console.groupEnd(),console.log(f)}var lX=new $("isMac",Ct,d(1809,null)),uX=new $("isLinux",$t,d(1810,null)),hX=new $("isWindows",Fe,d(1811,null)),gj=new $("isWeb",xa,d(1812,null)),dX=new $("isMacNative",Ct&&!xa,d(1813,null)),fX=new $("isIOS",zT,d(1814,null)),pX=new $("isMobile",WT,d(1815,null)),gX=new $("isDevelopment",!1,!0),mX=new $("productQualityType","",d(1816,null)),mj="inputFocus",vX=new $(mj,!1,d(1817,null)),vj=q("languageService"),wj=q("modelService"),Rs,wX=new $("workbenchState",void 0,{type:"string",description:d(4224,null)}),bX=new $("workspaceFolderCount",0,d(4225,null)),yX=new $("openFolderWorkspaceSupport",!0,!0),xX=new $("enterMultiRootWorkspaceSupport",!0,!0),EX=new $("emptyWorkspaceSupport",!0,!0),kX=new $("dirtyWorkingCopies",!1,d(4226,null)),bj=new $("remoteName","",d(4227,null)),SX=new $("virtualWorkspace","",d(4228,null)),CX=new $("temporaryWorkspace",!1,d(4229,null)),$X=new $("hasWebFileSystemAccess",!1,!0),IX=new $("embedderIdentifier",void 0,d(4230,null)),PX=new $("isFullscreen",!1,d(4231,null)),DX=new $("isAuxiliaryWindowFocusedContext",!1,d(4232,null)),AX=new $("isWindowAlwaysOnTop",!1,d(4233,null)),TX=new $("isAuxiliaryWindow",!1,d(4234,null)),RX=new $("activeEditorIsDirty",!1,d(4235,null)),LX=new $("activeEditorIsNotPreview",!1,d(4236,null)),NX=new $("activeEditorIsFirstInGroup",!1,d(4237,null)),MX=new $("activeEditorIsLastInGroup",!1,d(4238,null)),OX=new $("activeEditorIsPinned",!1,d(4239,null)),FX=new $("activeEditorIsReadonly",!1,d(4240,null)),UX=new $("activeCompareEditorCanSwap",!1,d(4241,null)),jX=new $("activeEditorCanToggleReadonly",!0,d(4242,null)),BX=new $("activeEditorCanRevert",!1,d(4243,null)),HX=new $("activeEditorCanSplitInGroup",!0),zX=new $("activeEditor",null,{type:"string",description:d(4244,null)}),WX=new $("activeEditorAvailableEditorIds","",d(4245,null)),VX=new $("textCompareEditorVisible",!1,d(4246,null)),_X=new $("textCompareEditorActive",!1,d(4247,null)),qX=new $("sideBySideEditorActive",!1,d(4248,null)),GX=new $("groupEditorsCount",0,d(4249,null)),JX=new $("activeEditorGroupEmpty",!1,d(4250,null)),YX=new $("activeEditorGroupIndex",0,d(4251,null)),ZX=new $("activeEditorGroupLast",!1,d(4252,null)),QX=new $("activeEditorGroupLocked",!1,d(4253,null)),yj=new $("multipleEditorGroups",!1,d(4254,null)),XX=yj.toNegated(),KX=new $("multipleEditorsSelectedInGroup",!1,d(4255,null)),eK=new $("twoEditorsSelectedInGroup",!1,d(4256,null)),tK=new $("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,d(4257,null)),xj=new $("editorPartMultipleEditorGroups",!1,d(4258,null)),iK=xj.toNegated(),sK=new $("editorPartMaximizedEditorGroup",!1,d(4259,null)),rK=new $("editorIsOpen",!1,d(4260,null)),nK=new $("inZenMode",!1,d(4261,null)),oK=new $("isCenteredLayout",!1,d(4262,null)),aK=new $("splitEditorsVertically",!1,d(4263,null)),cK=new $("mainEditorAreaVisible",!0,d(4264,null)),lK=new $("editorTabsVisible",!0,d(4265,null)),uK=new $("sideBarVisible",!1,d(4266,null)),hK=new $("sideBarFocus",!1,d(4267,null)),dK=new $("activeViewlet","",d(4268,null)),fK=new $("statusBarFocused",!1,d(4269,null)),pK=new $("titleBarStyle","custom",d(4270,null)),gK=new $("titleBarVisible",!1,d(4271,null)),mK=new $("isCompactTitleBar",!1,d(4272,null)),vK=new $("bannerFocused",!1,d(4273,null)),wK=new $("notificationFocus",!0,d(4274,null)),bK=new $("notificationCenterVisible",!1,d(4275,null)),yK=new $("notificationToastsVisible",!1,d(4276,null)),xK=new $("activeAuxiliary","",d(4277,null)),EK=new $("auxiliaryBarFocus",!1,d(4278,null)),kK=new $("auxiliaryBarVisible",!1,d(4279,null)),SK=new $("activePanel","",d(4280,null)),CK=new $("panelFocus",!1,d(4281,null)),$K=new $("panelPosition","bottom",d(4282,null)),IK=new $("panelAlignment","center",d(4283,null)),PK=new $("panelVisible",!1,d(4284,null)),DK=new $("panelMaximized",!1,d(4285,null)),AK=new $("focusedView","",d(4286,null)),aC=class{static{Rs=this}static{this.Scheme=new $("resourceScheme",void 0,{type:"string",description:d(4287,null)})}static{this.Filename=new $("resourceFilename",void 0,{type:"string",description:d(4288,null)})}static{this.Dirname=new $("resourceDirname",void 0,{type:"string",description:d(4289,null)})}static{this.Path=new $("resourcePath",void 0,{type:"string",description:d(4290,null)})}static{this.LangId=new $("resourceLangId",void 0,{type:"string",description:d(4291,null)})}static{this.Resource=new $("resource",void 0,{type:"URI",description:d(4292,null)})}static{this.Extension=new $("resourceExtname",void 0,{type:"string",description:d(4293,null)})}static{this.HasResource=new $("resourceSet",void 0,{type:"boolean",description:d(4294,null)})}static{this.IsFileSystemResource=new $("isFileSystemResource",void 0,{type:"boolean",description:d(4295,null)})}constructor(t,i,s,r){this.m=t,this.n=i,this.o=s,this.p=r,this.a=new se,this.d=Rs.Scheme.bindTo(this.m),this.f=Rs.Filename.bindTo(this.m),this.g=Rs.Dirname.bindTo(this.m),this.h=Rs.Path.bindTo(this.m),this.i=Rs.LangId.bindTo(this.m),this.c=Rs.Resource.bindTo(this.m),this.j=Rs.Extension.bindTo(this.m),this.k=Rs.HasResource.bindTo(this.m),this.l=Rs.IsFileSystemResource.bindTo(this.m),this.a.add(i.onDidChangeFileSystemProviderRegistrations(()=>{const n=this.get();this.l.set(!!(n&&i.hasProvider(n)))})),this.a.add(r.onModelAdded(n=>{Sa(n.uri,this.get())&&this.q()})),this.a.add(r.onModelLanguageChanged(n=>{Sa(n.model.uri,this.get())&&this.q()}))}dispose(){this.a.dispose()}q(){const t=this.get();if(!t){this.i.set(null);return}const i=this.p.getModel(t)?.getLanguageId()??this.o.guessLanguageIdByFilepathOrFirstLine(t);this.i.set(i)}set(t){t=t??void 0,!Sa(this.b,t)&&(this.b=t,this.m.bufferChangeEvents(()=>{this.c.set(t?t.toString():null),this.d.set(t?t.scheme:null),this.f.set(t?ts(t):null),this.g.set(t?this.r(xl(t)):null),this.h.set(t?this.r(t):null),this.q(),this.j.set(t?vE(t):null),this.k.set(!!t),this.l.set(t?this.n.hasProvider(t):!1)}))}r(t){return t.scheme===G.file?t.fsPath:t.path}reset(){this.b=void 0,this.m.bufferChangeEvents(()=>{this.c.reset(),this.d.reset(),this.f.reset(),this.g.reset(),this.h.reset(),this.i.reset(),this.j.reset(),this.k.reset(),this.l.reset()})}get(){return this.b}};aC=Rs=__decorate([__param(0,Wd),__param(1,T6),__param(2,vj),__param(3,wj)],aC);var cC;(function(e){e.UseFileStorage="chat.useFileStorage",e.AgentEnabled="chat.agent.enabled",e.Edits2Enabled="chat.edits2.enabled",e.ExtensionToolsEnabled="chat.extensionTools.enabled"})(cC||(cC={}));var nr;(function(e){e.Ask="ask",e.Edit="edit",e.Agent="agent"})(nr||(nr={}));var hi;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor"})(hi||(hi={})),function(e){function t(i){switch(i){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor}return e.Panel}e.fromRaw=t}(hi||(hi={}));var Pn;(function(e){e.responseVote=new $("chatSessionResponseVote","",{type:"string",description:d(5644,null)}),e.responseDetectedAgentCommand=new $("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:d(5645,null)}),e.responseSupportsIssueReporting=new $("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:d(5646,null)}),e.responseIsFiltered=new $("chatSessionResponseFiltered",!1,{type:"boolean",description:d(5647,null)}),e.responseHasError=new $("chatSessionResponseError",!1,{type:"boolean",description:d(5648,null)}),e.requestInProgress=new $("chatSessionRequestInProgress",!1,{type:"boolean",description:d(5649,null)}),e.isRequestPaused=new $("chatRequestIsPaused",!1,{type:"boolean",description:d(5650,null)}),e.canRequestBePaused=new $("chatCanRequestBePaused",!1,{type:"boolean",description:d(5651,null)}),e.isResponse=new $("chatResponse",!1,{type:"boolean",description:d(5652,null)}),e.isRequest=new $("chatRequest",!1,{type:"boolean",description:d(5653,null)}),e.itemId=new $("chatItemId","",{type:"string",description:d(5654,null)}),e.lastItemId=new $("chatLastItemId",[],{type:"string",description:d(5655,null)}),e.editApplied=new $("chatEditApplied",!1,{type:"boolean",description:d(5656,null)}),e.inputHasText=new $("chatInputHasText",!1,{type:"boolean",description:d(5657,null)}),e.inputHasFocus=new $("chatInputHasFocus",!1,{type:"boolean",description:d(5658,null)}),e.inChatInput=new $("inChatInput",!1,{type:"boolean",description:d(5659,null)}),e.inChatSession=new $("inChat",!1,{type:"boolean",description:d(5660,null)}),e.hasPromptFile=new $("chatPromptFileAttached",!1,{type:"boolean",description:d(5661,null)}),e.chatMode=new $("chatMode",nr.Ask,{type:"string",description:d(5662,null)}),e.supported=Nt.or(gj.negate(),bj.notEqualsTo(""),Nt.has("config.chat.experimental.serverlessWebEnabled")),e.enabled=new $("chatIsEnabled",!1,{type:"boolean",description:d(5663,null)}),e.extensionParticipantRegistered=new $("chatPanelExtensionParticipantRegistered",!1,{type:"boolean",description:d(5664,null)}),e.panelParticipantRegistered=new $("chatPanelParticipantRegistered",!1,{type:"boolean",description:d(5665,null)}),e.editingParticipantRegistered=new $("chatEditingParticipantRegistered",!1,{type:"boolean",description:d(5666,null)}),e.chatEditingCanUndo=new $("chatEditingCanUndo",!1,{type:"boolean",description:d(5667,null)}),e.chatEditingCanRedo=new $("chatEditingCanRedo",!1,{type:"boolean",description:d(5668,null)}),e.extensionInvalid=new $("chatExtensionInvalid",!1,{type:"boolean",description:d(5669,null)}),e.inputCursorAtTop=new $("chatCursorAtTop",!1),e.inputHasAgent=new $("chatInputHasAgent",!1),e.location=new $("chatLocation",void 0),e.inQuickChat=new $("quickChatHasFocus",!1,{type:"boolean",description:d(5670,null)}),e.hasFileAttachments=new $("chatHasFileAttachments",!1,{type:"boolean",description:d(5671,null)}),e.languageModelsAreUserSelectable=new $("chatModelsAreUserSelectable",!1,{type:"boolean",description:d(5672,null)}),e.Setup={hidden:new $("chatSetupHidden",!1,!0),installed:new $("chatSetupInstalled",!1,!0),disabled:new $("chatSetupDisabled",!1,!0),later:new $("chatSetupLater",!1,!0)},e.Entitlement={signedOut:new $("chatEntitlementSignedOut",!1,!0),canSignUp:new $("chatPlanCanSignUp",!1,!0),free:new $("chatPlanFree",!1,!0),pro:new $("chatPlanPro",!1,!0),proPlus:new $("chatPlanProPlus",!1,!0),business:new $("chatPlanBusiness",!1,!0),enterprise:new $("chatPlanEnterprise",!1,!0)},e.chatQuotaExceeded=new $("chatQuotaExceeded",!1,!0),e.completionsQuotaExceeded=new $("completionsQuotaExceeded",!1,!0),e.Editing={agentModeDisallowed:new $("chatAgentModeDisallowed",void 0,{type:"boolean",description:d(5673,null)}),hasToolConfirmation:new $("chatHasToolConfirmation",!1,{type:"boolean",description:d(5674,null)})},e.Tools={toolsCount:new $("toolsCount",0,{type:"number",description:d(5675,null)})},e.Modes={hasCustomChatModes:new $("chatHasCustomChatModes",!1,{type:"boolean",description:d(5676,null)})},e.panelLocation=new $("chatPanelLocation",void 0,{type:"number",description:d(5677,null)})})(Pn||(Pn={}));var lC;(function(e){e.inEditingMode=Nt.or(Pn.chatMode.isEqualTo(nr.Edit),Pn.chatMode.isEqualTo(nr.Agent))})(lC||(lC={}));var Ql,Ej=q("chatAgentService"),uC=class extends X{static{this.AGENT_LEADER="@"}constructor(t){super(),this.t=t,this.b=new Map,this.f=new D,this.onDidChangeAgents=this.f.event,this.g=new Set,this.r=!1,this.s=new Map,this.y=new Map,this.h=Pn.enabled.bindTo(this.t),this.j=Pn.extensionParticipantRegistered.bindTo(this.t),this.m=Pn.panelParticipantRegistered.bindTo(this.t),this.n=Pn.editingParticipantRegistered.bindTo(this.t),this.B(t.onDidChangeContext(i=>{i.affectsSome(this.g)&&this.w()}))}registerAgent(t,i){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const r=this,n=i.slashCommands;i={...i,get slashCommands(){return n.filter(a=>!a.when||r.t.contextMatchesRules(Nt.deserialize(a.when)))}};const o={data:i};return this.b.set(t,o),this.u(),this.w(),this.f.fire(void 0),ie(()=>{this.b.delete(t),this.u(),this.w(),this.f.fire(void 0)})}u(){this.g.clear();for(const t of this.b.values())if(t.data.when){const i=Nt.deserialize(t.data.when);for(const s of i?.keys()||[])this.g.add(s)}}w(){let t=!1,i=!1,s=!1,r=!1;for(const n of this.getAgents())n.isDefault&&(n.isCore||(i=!0),n.modes.includes(nr.Agent)?r=!0:n.modes.includes(nr.Edit)?t=!0:s=!0);this.n.set(t),this.m.set(s),this.j.set(i),r!==this.r&&(this.r=r,this.f.fire(this.getDefaultAgent(hi.Panel,nr.Agent)))}registerAgentImplementation(t,i){const s=this.b.get(t);if(!s)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(s.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return s.data.isDefault&&this.h.set(!0),s.impl=i,this.f.fire(new Pf(s.data,i)),ie(()=>{s.impl=void 0,this.f.fire(void 0),s.data.isDefault&&this.h.set(Zt.some(this.b.values(),r=>r.data.isDefault))})}registerDynamicAgent(t,i){t.isDynamic=!0;const s={data:t,impl:i};return this.b.set(t.id,s),this.f.fire(new Pf(t,i)),ie(()=>{this.b.delete(t.id),this.f.fire(void 0)})}registerAgentCompletionProvider(t,i){return this.y.set(t,i),{dispose:()=>{this.y.delete(t)}}}async getAgentCompletionItems(t,i,s){return await this.y.get(t)?.(i,s)??[]}updateAgent(t,i){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);s.data.metadata={...s.data.metadata,...i},this.f.fire(new Pf(s.data,s.impl))}getDefaultAgent(t,i=nr.Ask){return this.z(this.getActivatedAgents().filter(s=>i&&!s.modes.includes(i)?!1:!!s.isDefault&&s.locations.includes(t)))}get hasToolsAgent(){return!!this.r}getContributedDefaultAgent(t){return this.z(this.getAgents().filter(i=>!!i.isDefault&&i.locations.includes(t)))}z(t){return Y2(t,i=>!i.isCore)??t.at(-1)}getAgent(t,i=!1){if(!(!this.C(t)&&!i))return this.b.get(t)?.data}C(t){const i=typeof t=="string"?this.b.get(t):t;return!i?.data.when||this.t.contextMatchesRules(Nt.deserialize(i.data.when))}getAgentByFullyQualifiedId(t){const i=Zt.find(this.b.values(),s=>kj(s.data)===t)?.data;if(!(i&&!this.C(i.id)))return i}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.C(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.C(t.data.id)).map(t=>new Pf(t.data,t.impl))}getAgentsByName(t){return this.D(this.getAgents().filter(i=>i.name===t))}D(t){const i=t.filter(s=>!s.isCore);return i.length>0?i:t}agentHasDupeName(t){const i=this.getAgent(t);return i?this.getAgentsByName(i.name).filter(s=>s.extensionId.value!==i.extensionId.value).length>0:!1}async invokeAgent(t,i,s,r,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(i,s,r,n)}setRequestPaused(t,i,s){const r=this.b.get(t);if(!r?.impl)throw new Error(`No activated agent with id "${t}"`);r.impl.setRequestPaused?.(i,s)}async getFollowups(t,i,s,r,n){const o=this.b.get(t);return o?.impl?.provideFollowups?o.impl.provideFollowups(i,s,r,n):[]}async getChatTitle(t,i,s){const r=this.b.get(t);if(r?.impl?.provideChatTitle)return r.impl.provideChatTitle(i,s)}registerChatParticipantDetectionProvider(t,i){return this.s.set(t,i),ie(()=>{this.s.delete(t)})}hasChatParticipantDetectionProviders(){return this.s.size>0}async detectAgentOrCommand(t,i,s,r){const n=Zt.first(this.s.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{if(h.locations.includes(s.location)){u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const f of h.slashCommands)u.push({participant:h.id,command:f.name,disambiguation:f.disambiguation??[]})}return u},[]),a=await n.provideParticipantDetection(t,i,{...s,participants:o},r);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};uC=__decorate([__param(0,Wd)],uC);var Pf=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get isCore(){return this.b.isCore}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get modes(){return this.b.modes}get disambiguation(){return this.b.disambiguation}async invoke(e,t,i,s){return this.d.invoke(e,t,i,s)}setRequestPaused(e,t){this.d.setRequestPaused&&this.d.setRequestPaused(e,t)}async provideFollowups(e,t,i,s){return this.d.provideFollowups?this.d.provideFollowups(e,t,i,s):[]}toJSON(){return this.b}},LK=q("chatAgentNameService"),hC=class{static{Ql=this}static{this.b="chat.participantNameRegistry"}constructor(t,i,s,r){if(this.h=i,this.i=s,this.j=r,this.f=lf(this,Object.create(null)),this.g=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=r.get(Ql.b,-1);try{this.f.set(JSON.parse(n??"{}"),void 0)}catch{r.remove(Ql.b,-1)}this.k()}k(){this.g||this.l().catch(t=>this.i.warn("Failed to fetch chat participant registry",t)).then(()=>ii(5*60*1e3)).then(()=>this.k())}async l(){const t=await this.h.request({type:"GET",url:this.d},Ye.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const i=await aj(t);if(!i||i.version!==1)throw new Error("Unexpected chat participant registry response.");const s=i.restrictedChatParticipants;this.f.set(s,void 0),this.j.store(Ql.b,JSON.stringify(s),-1,1)}getAgentNameRestriction(t){if(t.isCore)return!0;const i=this.m(t.name,t).get(),s=!t.fullName||this.m(t.fullName.replace(/\s/g,""),t).get();return i&&s}m(t,i){return this.f.map(r=>r[t.toLowerCase()]).map(r=>r?r.some(n=>hs(n,n.includes(".")?i.extensionId.value:i.extensionPublisherId)):!0)}dispose(){this.g=!0}};hC=Ql=__decorate([__param(0,gf),__param(1,ij),__param(2,De),__param(3,sC)],hC);function kj(e){return`${e.extensionId.value}.${e.id}`}function dC(e){const t="name"in e?e:{...e,name:e.id};return"extensionPublisherId"in t||(t.extensionPublisherId=t.extensionPublisher??""),"extensionDisplayName"in t||(t.extensionDisplayName=""),"extensionId"in t||(t.extensionId=new qe("")),Et(t)}var Sj=q("chatEditingService"),fC;(function(e){e[e.Modified=0]="Modified",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"})(fC||(fC={}));var pC;(function(e){e[e.Initial=0]="Initial",e[e.StreamingEdits=1]="StreamingEdits",e[e.Idle=2]="Idle",e[e.Disposed=3]="Disposed"})(pC||(pC={}));var MK=new $("chatEditingWidgetFileState",void 0,d(5678,null)),OK=new $("chatEditingAgentSupportsReadonlyReferences",void 0,d(5679,null)),FK=new $("decidedChatEditingResource",[]),UK=new $("chatEditingResource",void 0),jK=new $("inChatEditingSession",void 0),BK=new $("hasUndecidedChatEditingResource",!1),HK=new $("hasAppliedChatEdits",!1),zK=new $("applyingChatEditsFailed",!1),gC;(function(e){e[e.Created=0]="Created",e[e.Modified=1]="Modified"})(gC||(gC={}));var v0=class kA{static{this.Kind="text"}constructor(t,i,s){this.range=t,this.editorRange=i,this.text=s,this.kind=kA.Kind}get promptText(){return this.text}},Df="#",Cj="@",Xl="/",mC=class SA{static{this.Kind="var"}constructor(t,i,s,r,n){this.range=t,this.editorRange=i,this.variableName=s,this.variableArg=r,this.variableId=n,this.kind=SA.Kind}get text(){const t=this.variableArg?`:${this.variableArg}`:"";return`${Df}${this.variableName}${t}`}get promptText(){return this.text}},vC=class CA{static{this.Kind="tool"}constructor(t,i,s,r,n,o){this.range=t,this.editorRange=i,this.toolName=s,this.toolId=r,this.displayName=n,this.icon=o,this.kind=CA.Kind}get text(){return`${Df}${this.toolName}`}get promptText(){return this.text}toVariableEntry(){return{kind:"tool",id:this.toolId,name:this.toolName,range:this.range,value:void 0,icon:Ut.isThemeIcon(this.icon)?this.icon:void 0,fullName:this.displayName}}},wC=class $A{static{this.Kind="toolset"}constructor(t,i,s,r,n,o){this.range=t,this.editorRange=i,this.id=s,this.name=r,this.icon=n,this.tools=o,this.kind=$A.Kind}get text(){return`${Df}${this.name}`}get promptText(){return this.text}toVariableEntry(){return{kind:"toolset",id:this.id,name:this.name,range:this.range,icon:this.icon,value:this.tools}}},bC=class IA{static{this.Kind="agent"}constructor(t,i,s){this.range=t,this.editorRange=i,this.agent=s,this.kind=IA.Kind}get text(){return`${Cj}${this.agent.name}`}get promptText(){return""}},yC=class PA{static{this.Kind="subcommand"}constructor(t,i,s){this.range=t,this.editorRange=i,this.command=s,this.kind=PA.Kind}get text(){return`${Xl}${this.command.name}`}get promptText(){return""}},xC=class DA{static{this.Kind="slash"}constructor(t,i,s){this.range=t,this.editorRange=i,this.slashCommand=s,this.kind=DA.Kind}get text(){return`${Xl}${this.slashCommand.command}`}get promptText(){return`${Xl}${this.slashCommand.command}`}},EC=class AA{static{this.Kind="prompt"}constructor(t,i,s){this.range=t,this.editorRange=i,this.slashPromptCommand=s,this.kind=AA.Kind}get text(){return`${Xl}${this.slashPromptCommand.command}`}get promptText(){return`${Xl}${this.slashPromptCommand.command}`}},kC=class TA{static{this.Kind="dynamic"}constructor(t,i,s,r,n,o,a,c,l,u){this.range=t,this.editorRange=i,this.text=s,this.id=r,this.modelDescription=n,this.data=o,this.fullName=a,this.icon=c,this.isFile=l,this.isDirectory=u,this.kind=TA.Kind}get referenceText(){return this.text.replace(Df,"")}get promptText(){return this.text}toVariableEntry(){return this.id==="vscode.problems"?b0.toEntry(this.data.filter):{kind:this.isDirectory?"directory":this.isFile?"file":"generic",id:this.id,name:this.referenceText,range:this.range,value:this.data,fullName:this.fullName,icon:this.icon}}};function $j(e){return{text:e.text,parts:e.parts.map(t=>{if(t.kind===v0.Kind)return new v0(new ir(t.range.start,t.range.endExclusive),t.editorRange,t.text);if(t.kind===mC.Kind)return new mC(new ir(t.range.start,t.range.endExclusive),t.editorRange,t.variableName,t.variableArg,t.variableId||"");if(t.kind===vC.Kind)return new vC(new ir(t.range.start,t.range.endExclusive),t.editorRange,t.toolName,t.toolId,t.displayName,t.icon);if(t.kind===wC.Kind)return new wC(new ir(t.range.start,t.range.endExclusive),t.editorRange,t.id,t.name,t.icon,t.tools??[]);if(t.kind===bC.Kind){let i=t.agent;return i=dC(i),new bC(new ir(t.range.start,t.range.endExclusive),t.editorRange,i)}else{if(t.kind===yC.Kind)return new yC(new ir(t.range.start,t.range.endExclusive),t.editorRange,t.command);if(t.kind===xC.Kind)return new xC(new ir(t.range.start,t.range.endExclusive),t.editorRange,t.slashCommand);if(t.kind===EC.Kind)return new EC(new ir(t.range.start,t.range.endExclusive),t.editorRange,t.slashPromptCommand);if(t.kind===kC.Kind)return new kC(new ir(t.range.start,t.range.endExclusive),t.editorRange,t.text,t.id,t.modelDescription,Et(t.data),t.fullName,t.icon,t.isFile,t.isDirectory);throw new Error(`Unknown chat request part: ${t.kind}`)}})}}var SC;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(SC||(SC={}));function Ij(e){return!!e&&typeof e=="object"&&"uri"in e&&e.uri instanceof x&&"version"in e&&typeof e.version=="number"&&"ranges"in e&&Array.isArray(e.ranges)&&e.ranges.every(We.isIRange)}function Pj(e){return!!e&&typeof e=="object"&&"documents"in e&&Array.isArray(e.documents)&&e.documents.every(Ij)}var CC;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(CC||(CC={}));var Af;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Af||(Af={}));var $C;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})($C||($C={}));var IC;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(IC||(IC={}));var Dj=q("IChatService"),w0,PC;(function(e){e[e.NotOmitted=0]="NotOmitted",e[e.Partial=1]="Partial",e[e.Full=2]="Full"})(PC||(PC={}));var b0;(function(e){e.icon=le.error;function t(n){return{filterUri:n.resource,owner:n.owner,problemMessage:n.message,filterRange:{startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn}}}e.fromMarker=t;function i(n){return{id:s(n),name:r(n),icon:e.icon,value:n,kind:"diagnostic",...n}}e.toEntry=i;function s(n){return[n.filterUri,n.owner,n.filterSeverity,n.filterRange?.startLineNumber].join(":")}e.id=s;function r(n){let o;if(function(c){c[c.MaxChars=30]="MaxChars",c[c.MaxSpaceLookback=10]="MaxSpaceLookback"}(o||(o={})),n.problemMessage){if(n.problemMessage.length<30)return n.problemMessage;const c=n.problemMessage.lastIndexOf(" ",30);return c===-1||c+10<30?n.problemMessage.substring(0,30)+"\u2026":n.problemMessage.substring(0,c)+"\u2026"}let a=d(5689,null);return n.filterUri&&(a=d(5690,null,ts(n.filterUri))),a}e.label=r})(b0||(b0={}));var DC;(function(e){function t(i){return x.isUri(i.value)?i.value:SF(i.value)?i.value.uri:void 0}e.toUri=t})(DC||(DC={}));function Aj(e){return e.kind==="image"}var Wi={reason:"other"},AC=class{get session(){return this.a}get username(){return this.session.requesterUsername}get avatarIconUri(){return this.session.requesterAvatarIconUri}get attempt(){return this.b}get variableData(){return this.d}set variableData(e){this.d=e}get confirmation(){return this.e}get locationData(){return this.g}get attachedContext(){return this.h}get editedFileEvents(){return this.j}constructor(e){this.a=e.session,this.message=e.message,this.d=e.variableData,this.timestamp=e.timestamp,this.b=e.attempt??0,this.e=e.confirmation,this.g=e.locationData,this.h=e.attachedContext,this.isCompleteAddedRequest=e.isCompleteAddedRequest??!1,this.modelId=e.modelId,this.id=e.restoredId??"request_"+ut(),this.j=e.editedFileEvents}adoptTo(e){this.a=e}},TC=class{get value(){return this.a}constructor(e){this.b="",this.d="",this.a=e,this.e()}toString(){return this.b}getMarkdown(){return this.d}e(){this.b=this.g(this.a),this.d=this.a.map(e=>e.kind==="inlineReference"?this.h(e):e.kind==="markdownContent"||e.kind==="markdownVuln"?e.content.value:"").filter(e=>e.length>0).join("")}g(e){const t=[];let i=[];for(const s of e){let r;switch(s.kind){case"treeData":case"progressMessage":case"codeblockUri":case"toolInvocation":case"toolInvocationSerialized":case"extensions":case"undoStop":case"prepareToolInvocation":continue;case"inlineReference":r={text:this.h(s)};break;case"command":r={text:s.command.title,isBlock:!0};break;case"textEditGroup":case"notebookEditGroup":r={text:d(5691,null),isBlock:!0};break;case"confirmation":r={text:`${s.title}
${s.message}`,isBlock:!0};break;default:r={text:s.content.value};break}r.isBlock?(i.length&&(t.push(i.join("")),i=[]),t.push(r.text)):i.push(r.text)}return i.length&&t.push(i.join("")),t.join(`

`)}h(e){return"uri"in e.inlineReference?this.j(e.inlineReference.uri):"name"in e.inlineReference?"`"+e.inlineReference.name+"`":this.j(e.inlineReference)}j(e){return e.scheme===G.http||e.scheme===G.https?e.toString(!1):ts(e)}},Tj=class extends TC{constructor(e,t){let i=e.value.findIndex(s=>s.kind==="undoStop"&&s.id===t);e.value[i+1]?.kind==="codeblockUri"&&e.value[i-1]?.kind==="markdownContent"&&i--,super(i===-1?e.value.slice():e.value.slice(0,i)),this.undoStop=t}},Rj=class extends TC{get onDidChangeValue(){return this.k.event}constructor(e){super(Qi(e).map(t=>Nr(t)?{content:t,kind:"markdownContent"}:"kind"in t?t:{kind:"treeData",treeData:t})),this.k=new D,this.l=[]}dispose(){this.k.dispose()}clear(){this.a=[],this.e(!0)}updateContent(e,t){if(e.kind==="markdownContent"){const i=this.a.filter(s=>s.kind!=="textEditGroup").at(-1);if(!i||i.kind!=="markdownContent"||!Mj(i.content,e.content))this.a.push(e);else{const s=this.a.indexOf(i);this.a[s]={...i,content:Oj(i.content,e.content)}}this.e(t)}else if(e.kind==="textEdit"||e.kind==="notebookEdit"){const s=e.uri.scheme===G.vscodeNotebookCell&&!this.a.find(c=>c.kind==="notebookEditGroup")?void 0:ff.parse(e.uri)?.notebook,r=s??e.uri;let n=!1;const o=e.kind==="textEdit"&&!s?"textEditGroup":"notebookEditGroup",a=o==="textEditGroup"?e.edits:e.edits.map(c=>CF.isTextEdit(c)?{uri:e.uri,edit:c}:c);for(let c=0;!n&&c<this.a.length;c++){const l=this.a[c];l.kind===o&&!l.done&&Sa(l.uri,r)&&(l.edits.push(a),l.done=e.done,n=!0)}n||this.a.push({kind:o,uri:r,edits:o==="textEditGroup"?[a]:a,done:e.done}),this.e(t)}else if(e.kind==="progressTask"){const i=this.a.push(e)-1;this.e(t);const s=e.onDidAddProgress(()=>{this.e(!1)});e.task?.().then(r=>{s.dispose(),typeof r=="string"&&(this.a[i].content=new Na(r)),this.e(!1)})}else e.kind==="toolInvocation"?(e.confirmationMessages&&e.confirmed.p.then(()=>{this.e(!1)}),e.isCompletePromise.then(()=>{this.e(!1)}),this.a.push(e),this.e(t)):(this.a.push(e),this.e(t))}addCitation(e){this.l.push(e),this.e()}e(e){super.e(),this.k&&(this.b+=this.l.length?`

`+Fj(this.l):"",e||this.k.fire())}},Tf=class extends X{get session(){return this.b}get shouldBeRemovedOnSend(){return this.w}get isComplete(){return this.j}set shouldBeRemovedOnSend(e){this.w=e,this.a.fire(Wi)}get isCanceled(){return this.m}get vote(){return this.n}get voteDownReason(){return this.t}get followups(){return this.C}get entireResponse(){return this.z||this.y}get result(){return this.u}get username(){return this.session.responderUsername}get avatarIcon(){return this.session.responderAvatarIcon}get agent(){return this.g}get slashCommand(){return this.h}get agentOrSlashCommandDetected(){return this.D??!1}get usedContext(){return this.F}get contentReferences(){return Array.from(this.G)}get codeCitations(){return this.H}get progressMessages(){return this.I}get isStale(){return this.J}get isPaused(){return this.L}get response(){const e=this.w?.afterUndoStop;return e?(this.M?.undoStop!==e&&(this.M=new Tj(this.y,e)),this.M):this.z||this.y}constructor(e){super(),this.a=this.B(new D),this.onDidChange=this.a.event,this.G=[],this.H=[],this.I=[],this.J=!1,this.L=lf("isPaused",!1),this.b=e.session,this.g=e.agent,this.h=e.slashCommand,this.requestId=e.requestId,this.j=e.isComplete??!1,this.m=e.isCanceled??!1,this.n=e.vote,this.t=e.voteDownReason,this.u=e.result,this.C=e.followups?[...e.followups]:void 0,this.isCompleteAddedRequest=e.isCompleteAddedRequest??!1,this.w=e.shouldBeRemovedOnSend,this.J=Array.isArray(e.responseContent)&&(e.responseContent.length!==0||Nr(e.responseContent)&&e.responseContent.value.length!==0),this.y=this.B(new Rj(e.responseContent));const t=iU(this,this.onDidChange);this.isPendingConfirmation=t.map((i,s)=>(t.read(s),this.y.value.some(r=>r.kind==="toolInvocation"&&r.isConfirmed===void 0||r.kind==="confirmation"&&r.isUsed===!1))),this.isInProgress=t.map((i,s)=>(t.read(s),!this.isPendingConfirmation.read(s)&&!this.shouldBeRemovedOnSend&&!this.j)),this.B(this.y.onDidChangeValue(()=>this.a.fire(Wi))),this.id=e.restoredId??"response_"+ut()}updateContent(e,t){this.O(()=>this.y.updateContent(e,t))}addUndoStop(e){this.O(()=>{this.a.fire({reason:"undoStop",id:e.id}),this.y.updateContent(e,!0)})}applyReference(e){e.kind==="usedContext"?this.F=e:e.kind==="reference"&&(this.G.push(e),this.a.fire(Wi))}applyCodeCitation(e){this.H.push(e),this.y.addCitation(e),this.a.fire(Wi)}setAgent(e,t){this.g=e,this.h=t,this.D=!e.isDefault||!!t,this.a.fire(Wi)}setResult(e){this.u=e,this.a.fire(Wi)}complete(){this.u?.errorDetails?.responseIsRedacted&&this.y.clear(),this.j=!0,this.a.fire(Wi)}cancel(){this.j=!0,this.m=!0,this.a.fire(Wi)}setFollowups(e){this.C=e,this.a.fire(Wi)}setVote(e){this.n=e,this.a.fire(Wi)}setVoteDownReason(e){this.t=e,this.a.fire(Wi)}setEditApplied(e,t){return!this.response.value.includes(e)||!e.state?!1:(e.state.applied=t,this.a.fire(Wi),!0)}adoptTo(e){this.b=e,this.a.fire(Wi)}setPaused(e,t){this.L.set(e,t),this.a.fire(Wi),this.N?.forEach(i=>i()),this.N=void 0}finalizeUndoState(){this.z=this.response,this.M=void 0,this.w=void 0}O(e){this.L.get()?(this.N??=[],this.N.push(e)):e()}},RC;(function(e){e[e.NotPausable=0]="NotPausable",e[e.Paused=1]="Paused",e[e.Unpaused=2]="Unpaused"})(RC||(RC={}));function Lj(e){const t=e;return typeof t=="object"&&typeof t.requesterUsername=="string"}function Nj(e){const t=e;return Lj(e)&&typeof t.creationDate=="number"&&typeof t.sessionId=="string"&&e.requests.every(i=>!i.usedContext||Pj(i.usedContext))}var LC;(function(e){e[e.Removal=0]="Removal",e[e.Resend=1]="Resend",e[e.Adoption=2]="Adoption"})(LC||(LC={}));var NC=w0=class extends X{static getDefaultTitle(t){const i=t.at(0)?.message??"";return(typeof i=="string"?i:i.text).split(`
`)[0].substring(0,50)}get sessionId(){return this.h}get requestInProgress(){return this.requestInProgressObs.get()}get requestPausibility(){const t=this.lastRequest;return!t?.response?.agent||t.response.isComplete||t.response.isPendingConfirmation.get()?0:t.response.isPaused.get()?1:2}get hasRequests(){return this.g.length>0}get lastRequest(){return this.g.at(-1)}get creationDate(){return this.j}get lastMessageDate(){return this.m}get n(){return this.G.getDefaultAgent(hi.Panel,nr.Ask)}get requesterUsername(){return this.n?.metadata.requester?.name??this.C?.requesterUsername??""}get responderUsername(){return this.n?.fullName??this.C?.responderUsername??""}get requesterAvatarIconUri(){return this.n?.metadata.requester?.icon??this.t}get responderAvatarIcon(){return this.n?.metadata.themeIcon??this.u}get isImported(){return this.w}get customTitle(){return this.y}get title(){return this.y||w0.getDefaultTitle(this.g)}get initialLocation(){return this.D}get editingSessionObs(){return this.z}get editingSession(){return this.z?.promiseResult.get()?.data}constructor(t,i,s,r,n){super(),this.C=t,this.D=i,this.F=s,this.G=r,this.H=n,this.a=this.B(new D),this.onDidDispose=this.a.event,this.b=this.B(new D),this.onDidChange=this.b.event,this.w=!1,this.I=new Ht,this.N=void 0;const o=Nj(t);t&&!o&&this.F.warn(`ChatModel#constructor: Loaded malformed session data: ${JSON.stringify(t)}`),this.w=!!t&&!o||(t?.isImported??!1),this.h=o&&t.sessionId||ut(),this.g=t?this.J(t):[],this.j=o&&t.creationDate||Date.now(),this.m=o&&t.lastMessageDate||this.j,this.y=o?t.customTitle:void 0,this.t=t?.requesterAvatarIconUri&&x.revive(t.requesterAvatarIconUri),this.u=kd(t?.responderAvatarIconUri)?x.revive(t.responderAvatarIconUri):t?.responderAvatarIconUri;const a=a0(this,this.onDidChange,()=>this.g.at(-1)?.response);this.requestInProgressObs=a.map((c,l)=>c?.isInProgress.read(l)??!1)}startEditingSession(t){const i=t?this.H.startOrContinueGlobalEditingSession(this):this.H.createEditingSession(this);this.z=new KF(i),this.z.promise.then(s=>{this.q.isDisposed?s.dispose():this.B(s)})}notifyEditingAction(t){const i=t.outcome==="accepted"?Va.Keep:t.outcome==="rejected"?Va.Undo:t.outcome==="userModified"?Va.UserModification:null;i!==null&&(!this.I.has(t.uri)||this.I.get(t.uri)?.eventKind===Va.Keep)&&this.I.set(t.uri,{eventKind:i,uri:t.uri})}J(t){const i=t.requests;if(!Array.isArray(i))return this.F.error(`Ignoring malformed session data: ${JSON.stringify(t)}`),[];try{return i.map(s=>{const r=typeof s.message=="string"?this.M(s.message):$j(s.message),n=this.L(s.variableData),o=new AC({session:this,message:r,variableData:n,timestamp:s.timestamp??-1,restoredId:s.requestId,confirmation:s.confirmation,editedFileEvents:s.editedFileEvents});if(o.shouldBeRemovedOnSend=s.isHidden?{requestId:s.requestId}:s.shouldBeRemovedOnSend,s.response||s.result||s.responseErrorDetails){const a=s.agent&&"metadata"in s.agent?dC(s.agent):void 0,c="responseErrorDetails"in s?{errorDetails:s.responseErrorDetails}:s.result;o.response=new Tf({responseContent:s.response??[new Na(s.response)],session:this,agent:a,slashCommand:s.slashCommand,requestId:o.id,isComplete:!0,isCanceled:s.isCanceled,vote:s.vote,voteDownReason:s.voteDownReason,result:c,followups:s.followups,restoredId:s.responseId}),o.response.shouldBeRemovedOnSend=s.isHidden?{requestId:s.requestId}:s.shouldBeRemovedOnSend,s.usedContext&&o.response.applyReference(Et(s.usedContext)),s.contentReferences?.forEach(l=>o.response.applyReference(Et(l))),s.codeCitations?.forEach(l=>o.response.applyCodeCitation(Et(l)))}return o})}catch(s){return this.F.error("Failed to parse chat data",s),[]}}L(t){const i=t&&Array.isArray(t.variables)?t:{variables:[]};return i.variables=i.variables.map(s=>s&&"values"in s&&Array.isArray(s.values)?{kind:"generic",id:s.id??"",name:s.name,value:s.values[0]?.value,range:s.range,modelDescription:s.modelDescription,references:s.references}:s),i}M(t){const i=[new v0(new ir(0,t.length),{startColumn:1,startLineNumber:1,endColumn:1,endLineNumber:1},t)];return{text:t,parts:i}}toggleLastRequestPaused(t){if(this.requestPausibility!==0&&this.lastRequest?.response?.agent){const i=t??!this.lastRequest.response.isPaused.get();this.lastRequest.response.setPaused(i),this.G.setRequestPaused(this.lastRequest.response.agent.id,this.lastRequest.id,i),this.b.fire({kind:"changedRequest",request:this.lastRequest})}}getRequests(){return this.g}get checkpoint(){return this.N}setDisabledRequests(t){this.g.forEach(i=>{const s=t.find(r=>r.requestId===i.id);i.shouldBeRemovedOnSend=s,i.response&&(i.response.shouldBeRemovedOnSend=s)}),this.b.fire({kind:"setHidden",hiddenRequestIds:t})}addRequest(t,i,s,r,n,o,a,c,l,u){const h=[...this.I.values()];this.I.clear();const f=new AC({session:this,message:t,variableData:i,timestamp:Date.now(),attempt:s,confirmation:o,locationData:a,attachedContext:c,isCompleteAddedRequest:l,modelId:u,editedFileEvents:h.length?h:void 0});return f.response=new Tf({responseContent:[],session:this,agent:r,slashCommand:n,requestId:f.id,isCompleteAddedRequest:l}),this.g.push(f),this.m=Date.now(),this.b.fire({kind:"addRequest",request:f}),f}setCustomTitle(t){this.y=t}updateRequest(t,i){t.variableData=i,this.b.fire({kind:"changedRequest",request:t})}adoptRequest(t){const i=t.session,s=i.g.findIndex(r=>r.id===t.id);s!==-1&&(i.g.splice(s,1),t.adoptTo(this),t.response?.adoptTo(this),this.g.push(t),i.b.fire({kind:"removeRequest",requestId:t.id,responseId:t.response?.id,reason:2}),this.b.fire({kind:"addRequest",request:t}))}acceptResponseProgress(t,i,s){if(t.response||(t.response=new Tf({responseContent:[],session:this,requestId:t.id})),t.response.isComplete)throw new Error("acceptResponseProgress: Adding progress to a completed response");i.kind==="usedContext"||i.kind==="reference"?t.response.applyReference(i):i.kind==="codeCitation"?t.response.applyCodeCitation(i):i.kind==="move"?this.b.fire({kind:"move",target:i.uri,range:i.range}):i.kind==="codeblockUri"&&i.isEdit?(t.response.addUndoStop({id:ut(),kind:"undoStop"}),t.response.updateContent(i,s)):i.kind==="progressTaskResult"?this.F.error(`Couldn't handle progress: ${JSON.stringify(i)}`):t.response.updateContent(i,s)}removeRequest(t,i=0){const s=this.g.findIndex(n=>n.id===t),r=this.g[s];s!==-1&&(this.b.fire({kind:"removeRequest",requestId:r.id,responseId:r.response?.id,reason:i}),this.g.splice(s,1),r.response?.dispose())}cancelRequest(t){t.response&&t.response.cancel()}setResponse(t,i){t.response||(t.response=new Tf({responseContent:[],session:this,requestId:t.id})),t.response.setResult(i)}completeResponse(t){if(!t.response)throw new Error("Call setResponse before completeResponse");t.response.complete(),this.b.fire({kind:"completedRequest",request:t})}setFollowups(t,i){t.response&&t.response.setFollowups(i)}setResponseModel(t,i){t.response=i,this.b.fire({kind:"addResponse",response:i})}toExport(){return{requesterUsername:this.requesterUsername,requesterAvatarIconUri:this.requesterAvatarIconUri,responderUsername:this.responderUsername,responderAvatarIconUri:this.responderAvatarIcon,initialLocation:this.initialLocation,requests:this.g.map(t=>{const i={...t.message,parts:t.message.parts.map(n=>n&&"toJSON"in n?n.toJSON():n)},s=t.response?.agent,r=s&&"toJSON"in s?s.toJSON():s?{...s}:void 0;return{requestId:t.id,message:i,variableData:t.variableData,response:t.response?t.response.entireResponse.value.map(n=>n.kind==="treeData"?n.treeData:n.kind==="markdownContent"?n.content:n):void 0,responseId:t.response?.id,shouldBeRemovedOnSend:t.shouldBeRemovedOnSend,result:t.response?.result,followups:t.response?.followups,isCanceled:t.response?.isCanceled,vote:t.response?.vote,voteDownReason:t.response?.voteDownReason,agent:r,slashCommand:t.response?.slashCommand,usedContext:t.response?.usedContext,contentReferences:t.response?.contentReferences,codeCitations:t.response?.codeCitations,timestamp:t.timestamp,confirmation:t.confirmation,editedFileEvents:t.editedFileEvents}})}}toJSON(){return{version:3,...this.toExport(),sessionId:this.sessionId,creationDate:this.j,isImported:this.w,lastMessageDate:this.m,customTitle:this.y}}dispose(){this.g.forEach(t=>t.response?.dispose()),this.a.fire(),super.dispose()}};NC=w0=__decorate([__param(2,De),__param(3,Ej),__param(4,Sj)],NC);function Mj(e,t){if(e.baseUri&&t.baseUri){if(!(e.baseUri.scheme===t.baseUri.scheme&&e.baseUri.authority===t.baseUri.authority&&e.baseUri.path===t.baseUri.path&&e.baseUri.query===t.baseUri.query&&e.baseUri.fragment===t.baseUri.fragment))return!1}else if(e.baseUri||t.baseUri)return!1;return wi(e.isTrusted,t.isTrusted)&&e.supportHtml===t.supportHtml&&e.supportThemeIcons===t.supportThemeIcons}function Oj(e,t){const i=typeof t=="string"?t:t.value;return{value:e.value+i,isTrusted:e.isTrusted,supportThemeIcons:e.supportThemeIcons,supportHtml:e.supportHtml,baseUri:e.baseUri}}function Fj(e){if(e.length===0)return"";const t=e.reduce((s,r)=>s.add(r.license),new Set);return t.size===1?d(5692,null,t.size):d(5693,null,t.size)}var Va;(function(e){e[e.Keep=1]="Keep",e[e.Undo=2]="Undo",e[e.UserModification=3]="UserModification"})(Va||(Va={}));var MC;(function(e){e.scheme="vscode-chat-response-resource";function t(s,r,n,o,a){return x.from({scheme:e.scheme,authority:s,path:`/tool/${r}/${n}/${o}`+(a?`/${a}`:"")})}e.createUri=t;function i(s){if(s.scheme!==e.scheme)return;const r=s.path.split("/");if(r.length<5)return;const[,n,o,a,c]=r;if(n==="tool")return{sessionId:s.authority,requestId:o,toolCallId:a,index:Number(c)}}e.parseUri=i})(MC||(MC={}));var OC;(function(e){e.Delimiter="\0"})(OC||(OC={}));var FC;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(FC||(FC={}));var Be=class bs{static fromExtHostTestItem(t,i,s=t.parent){if(t._isRoot)return new bs([i]);const r=[t.id];for(let n=s;n&&n.id!==i;n=n.parent)r.push(n.id);return r.push(i),new bs(r.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const i=t.indexOf("\0");return i===-1?t:t.slice(0,i)}static fromString(t){return new bs(t.split("\0"))}static join(t,i){return new bs([...t.path,i])}static split(t){return t.split("\0")}static joinToString(t,i){return t.toString()+"\0"+i}static parentId(t){const i=t.lastIndexOf("\0");return i===-1?void 0:t.slice(0,i)}static localId(t){const i=t.lastIndexOf("\0");return i===-1?t:t.slice(i+1)}static isChild(t,i){return i[t.length]==="\0"&&i.startsWith(t)}static compare(t,i){return t===i?0:bs.isChild(t,i)?2:bs.isChild(i,t)?3:1}static getLengthOfCommonPrefix(t,i){if(t===0)return 0;let s=0;for(;s<t-1;){for(let r=1;r<t;r++){const n=i(r-1),o=i(r);if(n.path[s]!==o.path[s])return s}s++}return s}constructor(t,i=t.length){if(this.path=t,this.d=i,t.length===0||i<1)throw new Error("cannot create test with empty path")}get rootId(){return new bs(this.path,1)}get parentId(){return this.d>1?new bs(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new bs(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new bs(this.path,t)}compare(t){if(typeof t=="string")return bs.compare(this.toString(),t);for(let i=0;i<t.d&&i<this.d;i++)if(t.path[i]!==this.path[i])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},UC;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(UC||(UC={}));var jC;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(jC||(jC={}));var BC;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(BC||(BC={}));var HC;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(HC||(HC={}));var VK={2:d(12524,null),4:d(12525,null),8:d(12526,null)},Uj=e=>"runId"in e,_a;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({range:We.lift(i.range),uri:t.asCanonicalUri(x.revive(i.uri))})})(_a||(_a={}));var zC;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(zC||(zC={}));var Rf;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,i)=>({label:i.label,uri:i.uri?t.asCanonicalUri(x.revive(i.uri)):void 0,position:i.position?rs.lift(i.position):void 0})})(Rf||(Rf={}));var Lf;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&_a.serialize(t.location),stackTrace:t.stackTrace?.map(Rf.serialize)}),e.deserialize=(t,i)=>({message:i.message,type:0,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&_a.deserialize(t,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(s=>Rf.deserialize(t,s))})})(Lf||(Lf={}));var Nf;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&_a.serialize(t.location)}),e.deserialize=(t,i)=>({message:i.message,type:1,offset:i.offset,length:i.length,location:i.location&&_a.deserialize(t,i.location)})})(Nf||(Nf={}));var Mf;(function(e){e.serialize=t=>t.type===0?Lf.serialize(t):Nf.serialize(t),e.deserialize=(t,i)=>i.type===0?Lf.deserialize(t,i):Nf.deserialize(t,i),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(Mf||(Mf={}));var Kl;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(Mf.serialize)}),e.deserialize=(t,i)=>({state:i.state,duration:i.duration,messages:i.messages.map(s=>Mf.deserialize(t,s))})})(Kl||(Kl={}));var WC="\0",Of=(e,t)=>e+WC+t,VC=e=>{const t=e.indexOf(WC);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},Ff;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?t.asCanonicalUri(x.revive(i.uri)):void 0,range:i.range?We.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})})(Ff||(Ff={}));var _C;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(_C||(_C={}));var Dn;(function(e){e.serialize=t=>({expand:t.expand,item:Ff.serialize(t.item)}),e.deserialize=(t,i)=>({controllerId:Be.root(i.item.extId),expand:i.expand,item:Ff.deserialize(t,i.item)})})(Dn||(Dn={}));var eu;(function(e){e.serialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.uri!==void 0&&(i.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(i.range=t.item.range?.toJSON()),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}},e.deserialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.range!==void 0&&(i.range=t.item.range?We.lift(t.item.range):null),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}}})(eu||(eu={}));var y0=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},qC;(function(e){e.serializeWithoutMessages=t=>({...Dn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Kl.serializeWithoutMessages)}),e.serialize=t=>({...Dn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Kl.serialize)}),e.deserialize=(t,i)=>({...Dn.deserialize(t,i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(s=>Kl.deserialize(t,s)),retired:!0})})(qC||(qC={}));var x0;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,i)=>{t.covered+=i.covered,t.total+=i.total}})(x0||(x0={}));var GC;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:t.asCanonicalUri(x.revive(i.uri))}),e.empty=(t,i)=>({id:t,uri:i,statement:x0.empty()})})(GC||(GC={}));function E0(e){return{...e,location:e.location?.toJSON()}}function k0(e){return e.location=e.location?rs.isIPosition(e.location)?rs.lift(e.location):We.lift(e.location):void 0,e}var JC;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(JC||(JC={}));var YC;(function(e){e.serialize=t=>t.type===0?jf.serialize(t):Bf.serialize(t),e.deserialize=t=>t.type===0?jf.deserialize(t):Bf.deserialize(t)})(YC||(YC={}));var Uf;(function(e){e.serialize=E0,e.deserialize=k0})(Uf||(Uf={}));var jf;(function(e){e.serialize=E0,e.deserialize=k0})(jf||(jf={}));var Bf;(function(e){e.serialize=t=>({...E0(t),branches:t.branches?.map(Uf.serialize)}),e.deserialize=t=>({...k0(t),branches:t.branches?.map(Uf.deserialize)})})(Bf||(Bf={}));var ZC;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(ZC||(ZC={}));var Hf;(function(e){e.deserialize=(t,i)=>i.op===0?{op:i.op,item:Dn.deserialize(t,i.item)}:i.op===1?{op:i.op,item:eu.deserialize(i.item)}:i.op===2?{op:i.op,uri:t.asCanonicalUri(x.revive(i.uri)),docv:i.docv}:i,e.serialize=t=>t.op===0?{op:t.op,item:Dn.serialize(t.item)}:t.op===1?{op:t.op,item:eu.serialize(t.item)}:t})(Hf||(Hf={}));var jj=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const i of e)switch(i.op){case 0:this.p(Dn.deserialize(this.l,i.item),t);break;case 1:this.q(eu.deserialize(i.item),t);break;case 3:this.v(i.itemId,t);break;case 5:this.w(i.itemId);break;case 4:this.updatePendingRoots(i.amount);break;case 6:this.f.set(i.tag.id,i.tag);break;case 7:this.f.delete(i.id);break}t.complete?.()}p(e,t){const i=Be.parentId(e.item.extId)?.toString();let s;if(!i)s=this.y(e),this.h.add(s),this.g.set(e.item.extId,s);else if(this.g.has(i)){const r=this.g.get(i);r.children.add(e.item.extId),s=this.y(e,r),this.g.set(e.item.extId,s)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(s),e.expand===2&&this.j++,s}q(e,t){const i=this.g.get(e.extId);if(i)return e.expand!==void 0&&(i.expand===2&&this.j--,e.expand===2&&this.j++),y0(i,e),t.update?.(i),i}v(e,t){const i=this.g.get(e);if(!i)return;const s=Be.parentId(i.item.extId)?.toString();s?this.g.get(s).children.delete(i.item.extId):this.h.delete(i);const r=[[e]];for(;r.length;)for(const n of r.pop()){const o=this.g.get(n);o&&(r.push(o.children),this.g.delete(n),t.remove?.(o,o!==i),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},Bj=q("editorGroupsService"),QC;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(QC||(QC={}));var XC;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(XC||(XC={}));var KC;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(KC||(KC={}));var e7;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(e7||(e7={}));var t7;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(t7||(t7={}));var i7;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(i7||(i7={}));var s7;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(s7||(s7={}));var _K=q("editorService"),Hj=-1,zj=-2,S0="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",qK=new RegExp(S0),r7;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(r7||(r7={}));var n7;(function(e){e.NoneOrRelevance="NoneOrRelevance",e.LastUpdatedDate="LastUpdatedDate",e.Title="Title",e.PublisherName="PublisherName",e.InstallCount="InstallCount",e.PublishedDate="PublishedDate",e.AverageRating="AverageRating",e.WeightedRating="WeightedRating"})(n7||(n7={}));var o7;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(o7||(o7={}));var a7;(function(e){e.Category="Category",e.ExtensionId="ExtensionId",e.ExtensionName="ExtensionName",e.ExcludeWithFlags="ExcludeWithFlags",e.Featured="Featured",e.SearchText="SearchText",e.Tag="Tag",e.Target="Target"})(a7||(a7={}));var c7;(function(e){e.Install="install",e.Uninstall="uninstall"})(c7||(c7={}));var l7;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(l7||(l7={}));var GK=q("extensionGalleryService"),u7;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(u7||(u7={}));var h7;(function(e){e.NotFound="NotFound",e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadRemoved="ReadRemoved",e.UnsetRemoved="UnsetRemoved",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(h7||(h7={}));var d7;(function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(d7||(d7={}));var JK=q("extensionManagementService"),YK=q("IGlobalExtensionEnablementService"),ZK=q("IExtensionTipsService"),QK=q("IAllowedExtensionsService"),XK=fd(1933,"Extensions"),KK=fd(1934,"Preferences"),Wj="extensions.allowed";Xt.as(Io.Configuration).registerConfiguration({id:"extensions",order:30,title:d(1916,null),type:"object",properties:{[Wj]:{type:"object",markdownDescription:d(1917,null),default:"*",defaultSnippets:[{body:{},description:d(1918,null)},{body:{"*":!0},description:d(1919,null)}],scope:1,policy:{name:"AllowedExtensions",minimumVersion:"1.96",description:d(1920,null)},additionalProperties:!1,patternProperties:{"([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$":{anyOf:[{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1921,null),enumDescriptions:[d(1922,null),d(1923,null),d(1924,null)]},{type:"array",items:{type:"string"},description:d(1925,null)}]},"([a-z0-9A-Z][a-z0-9-A-Z]*)$":{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1926,null),enumDescriptions:[d(1927,null),d(1928,null),d(1929,null)]},"\\*":{type:"boolean",enum:[!0,!1],description:d(1930,null),enumDescriptions:[d(1931,null),d(1932,null)]}}}}});var eee=q("telemetryService"),tee=q("customEndpointTelemetryService"),f7;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(f7||(f7={}));var p7;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(p7||(p7={}));var C0=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},Vj=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},iee=new Vj,_j="telemetry",qj={id:_j,name:d(2246,null)},Gj=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function Jj(e){if(!e)return"none";const t=gv(e);return Gj.has(t)?t:"other"}function Yj(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let i=e;const s=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;s.push([c.index,a.lastIndex])}const r=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const a=n.exec(e);if(!a)break;const c=s.some(([l,u])=>a.index<u&&l<n.lastIndex);!r.test(a[0])&&!c&&(i+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(i+=e.substr(o)),i}function Zj(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"JWT",regex:/eyJ[0eXAiOiJKV1Qi|hbGci|a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/}];for(const i of t)if(i.regex.test(e))return`<REDACTED: ${i.label}>`;return e}function g7(e,t){return Pa(e,i=>{if(i instanceof C0||Object.hasOwnProperty.call(i,"isTrustedTelemetryValue"))return i.value;if(typeof i=="string"){let s=i.replaceAll("%20"," ");s=Yj(s,t);for(const r of t)s=s.replace(r,"");return s=Zj(s),s}})}function Qj(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id?!0:B1(e.id,t.id)===0}var see=new qe("pprice.better-merge"),Xj=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const s=this.readActivationEvents(i);s.length>0&&(t[qe.toKey(i.identifier)]=s)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)t[i]==="onUri"&&(t[i]=`onUri:${qe.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const s=this.a.get(i);if(!s)continue;const r=e.contributes[i],n=Array.isArray(r)?r:[r];try{s(n,t)}catch(o){lt(o)}}return t}},Kj=new Xj,eB=Object.freeze({identifier:new qe("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:x.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),tB=q("extensionService"),m7=class{constructor(e){this.dependency=e}},v7;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(v7||(v7={}));function tt(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function L(e,t){if(!tt(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var w7;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(w7||(w7={}));var b7;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(b7||(b7={}));var tu=(e,t)=>e===t,iB={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:tu,label:tu,description:tu,error:tu,sortText:tu,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.includes(i)))},sB=Object.entries(iB),rB=(e,t)=>{let i;for(const[s,r]of sB)r(e[s],t[s])||(i?i[s]=t[s]:i={[s]:t[s]});return i},nB=class extends X{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new Zs(()=>this.flushDiff(),200)),this.g=this.B(new D),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){y0(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){y0(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((i.expandLevels===void 0||t>i.expandLevels)&&(i.expandLevels=t),i.expand===1){const s=this.M(i);return s.isOpen()?this.L(i,t-1):s.wait().then(()=>this.L(i,t-1))}else if(i.expand===3)return i.resolveBarrier?.isOpen()===!1?i.resolveBarrier.wait().then(()=>this.L(i,t-1)):this.L(i,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Be.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const i of t.ops)this.w(e,i);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:I1(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const i=Be.fromExtHostTestItem(e,this.root.id,t?.actual),s=this.s.getApiFor(e);s.parent&&s.parent!==t?.actual&&this.s.getChildren(s.parent).delete(e.id);let r=this.tree.get(i.toString());if(!r){r={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(r.fullId.toString(),r),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:r.expand,item:this.s.toITestItem(e)}}),this.I(e,r,t);return}if(r.actual===e){this.H(e,r,t);return}if(r.actual.uri?.toString()!==e.uri?.toString())return this.O(i.toString()),this.z(e,t);const n=this.s.getChildren(r.actual),o=r.actual,a=rB(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,r.actual=e,r.resolveBarrier=void 0,r.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,i.toString()),delete a.tags),this.w(r,{op:4,update:a})),this.I(e,r,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Be.joinToString(i,u.id));const c=r.expandLevels;c!==void 0&&queueMicrotask(()=>{r.expand===1&&(r.expandLevels=void 0,this.expand(i.toString(),c))}),this.y(r.actual.uri)}C(e,t,i){const s=new Set(t.map(r=>r.id));for(const r of e)s.delete(r.id)||this.D(r);this.pushDiff({op:1,item:{extId:i,item:{tags:e.map(r=>Of(this.s.controllerId,r.id))}}}),s.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Of(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:Of(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,i){this.G(e,i);const s=this.s.getApiFor(e);s.parent=i?.actual,s.listener=r=>this.w(t,r),this.J(t)}I(e,t,i){this.H(e,t,i);for(const[s,r]of this.s.getChildren(e))this.z(r,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const i=[];for(const[s,r]of this.s.getChildren(e.actual)){const n=this.expand(Be.joinToString(e.fullId,r.id),t);vn(n)&&i.push(n)}if(i.length)return Promise.all(i).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const r=new ds;return r.open(),r}e.expand=2,this.N(e);const t=e.resolveBarrier=new ds,i=r=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,r)};let s;try{s=this.h(e.actual===this.root?void 0:e.actual)}catch(r){i(r)}return vn(s)?s.catch(i).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const i=[t];for(;i.length;){const s=i.pop();if(s){this.s.getApiFor(s.actual).listener=void 0;for(const r of s.actual.tags)this.F(r.id);this.tree.delete(s.fullId.toString());for(const[r,n]of this.s.getChildren(s.actual))i.push(this.tree.get(Be.joinToString(s.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},oB=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},zf=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},aB=class extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}},cB=(e,t,i)=>{let s=new Map;return{get size(){return s.size},forEach(r,n){for(const o of s.values())r.call(n,o,this)},[Symbol.iterator](){return s.entries()},replace(r){const n=new Map,o=new Set(s.keys()),a={op:5,ops:[]};for(const c of r){if(!(c instanceof i))throw new zf(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new aB(c.id,l,e.controllerId);if(n.has(c.id))throw new oB(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),s=n},add(r){if(!(r instanceof i))throw new zf(r.id);s.set(r.id,r),e.listener?.({op:0,item:r})},delete(r){s.delete(r)&&e.listener?.({op:3,id:r})},get(r){return s.get(r)},toJSON(){return Array.from(s.values())}}},y7=new WeakMap,lB=(e,t)=>{const i={controllerId:t};return y7.set(e,i),i},Wf=e=>{const t=y7.get(e);if(!t)throw new zf(e?.id||"<unknown>");return t},uB=q("remoteAuthorityResolverService"),x7;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(x7||(x7={}));var E7=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},hB=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Pi;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Pi||(Pi={}));var $0=class da extends xs{static isNotAvailable(t){return t instanceof da&&t._code===Pi.NotAvailable}static isTemporarilyNotAvailable(t){return t instanceof da&&t._code===Pi.TemporarilyNotAvailable}static isNoResolverFound(t){return t instanceof da&&t._code===Pi.NoResolverFound}static isInvalidAuthority(t){return t instanceof da&&t._code===Pi.InvalidAuthority}static isHandled(t){return t instanceof da&&t.isHandled}constructor(t,i=Pi.Unknown,s){super(t),this._message=t,this._code=i,this._detail=s,this.isHandled=i===Pi.NotAvailable&&s===!0,Object.setPrototypeOf(this,da.prototype)}};function k7(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var I0,Do,Ur,P0,Ao,An,To,D0,A0,Vf,iu,T0,or,ar,R0,Di,L0;function de(e){return Object.assign(e,{apply:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const s=i.length===1?[]:i[1];return Reflect.construct(e,s,i[0].constructor)}},call:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const[s,...r]=i;return Reflect.construct(e,r,s.constructor)}}})}var N0;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(N0||(N0={}));var S7;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(S7||(S7={}));var Le=I0=class{static from(...t){let i=t;return new I0(function(){if(i){for(const s of i)s&&typeof s.dispose=="function"&&s.dispose();i=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Le=I0=__decorate([de],Le);var Ne=Do=class{static Min(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let s=1;s<t.length;s++){const r=t[s];r.isBefore(i)&&(i=r)}return i}static Max(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let s=1;s<t.length;s++){const r=t[s];r.isAfter(i)&&(i=r)}return i}static isPosition(t){if(!t)return!1;if(t instanceof Do)return!0;const{line:i,character:s}=t;return typeof i=="number"&&typeof s=="number"}static of(t){if(t instanceof Do)return t;if(this.isPosition(t))return new Do(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,i){if(t<0)throw Ie("line must be non-negative");if(i<0)throw Ie("character must be non-negative");this.c=t,this.e=i}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,i=0){if(t===null||i===null)throw Ie();let s;return typeof t>"u"?s=0:typeof t=="number"?s=t:(s=typeof t.lineDelta=="number"?t.lineDelta:0,i=typeof t.characterDelta=="number"?t.characterDelta:0),s===0&&i===0?this:new Do(this.line+s,this.character+i)}with(t,i=this.character){if(t===null||i===null)throw Ie();let s;return typeof t>"u"?s=this.line:typeof t=="number"?s=t:(s=typeof t.line=="number"?t.line:this.line,i=typeof t.character=="number"?t.character:this.character),s===this.line&&i===this.character?this:new Do(s,i)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Ne=Do=__decorate([de],Ne);var $e=Ur=class{static isRange(t){return t instanceof Ur?!0:t?Ne.isPosition(t.start)&&Ne.isPosition(t.end):!1}static of(t){if(t instanceof Ur)return t;if(this.isRange(t))return new Ur(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,i,s,r){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof r=="number"?(n=new Ne(t,i),o=new Ne(s,r)):Ne.isPosition(t)&&Ne.isPosition(i)&&(n=Ne.of(t),o=Ne.of(i)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Ur.isRange(t)?this.contains(t.start)&&this.contains(t.end):Ne.isPosition(t)?!(Ne.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const i=Ne.Max(t.start,this.c),s=Ne.Min(t.end,this.e);if(!i.isAfter(s))return new Ur(i,s)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const i=Ne.Min(t.start,this.c),s=Ne.Max(t.end,this.end);return new Ur(i,s)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,i=this.end){if(t===null||i===null)throw Ie();let s;return t?Ne.isPosition(t)?s=t:(s=t.start||this.start,i=t.end||this.end):s=this.start,s.isEqual(this.c)&&i.isEqual(this.end)?this:new Ur(s,i)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return C7(this)}};$e=Ur=__decorate([de],$e);var jr=P0=class extends $e{static isSelection(t){return t instanceof P0?!0:t?$e.isRange(t)&&Ne.isPosition(t.anchor)&&Ne.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,i,s,r){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof r=="number"?(n=new Ne(t,i),o=new Ne(s,r)):Ne.isPosition(t)&&Ne.isPosition(i)&&(n=Ne.of(t),o=Ne.of(i)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return dB(this)}};jr=P0=__decorate([de],jr);function C7(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function dB(e){let t=C7(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var $7=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw Ie("connectionToken")},fB=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,i){if(typeof e!="string"||e.length===0)throw Ie("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw Ie("port");typeof i<"u"&&$7(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}},_f=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&$7(t)}},qa=class a1 extends Error{static NotAvailable(t,i){return new a1(t,Pi.NotAvailable,i)}static TemporarilyNotAvailable(t){return new a1(t,Pi.TemporarilyNotAvailable)}constructor(t,i=Pi.Unknown,s){super(t),this._message=t,this._code=i,this._detail=s,Object.setPrototypeOf(this,a1.prototype)}},Ls;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Ls||(Ls={}));var Ga;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Ga||(Ga={}));var Tn=Ao=class{static isTextEdit(t){return t instanceof Ao?!0:t?$e.isRange(t)&&typeof t.newText=="string":!1}static replace(t,i){return new Ao(t,i)}static insert(t,i){return Ao.replace(new $e(t,t),i)}static delete(t){return Ao.replace(t,"")}static setEndOfLine(t){const i=new Ao(new $e(new Ne(0,0),new Ne(0,0)),"");return i.newEol=t,i}get range(){return this.c}set range(t){if(t&&!$e.isRange(t))throw Ie("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw Ie("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw Ie("newEol");this.f=t}constructor(t,i){this.c=t,this.e=i}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};Tn=Ao=__decorate([de],Tn);var qf=An=class{static isNotebookCellEdit(t){return t instanceof An?!0:t?Ms.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,i){return new An(t,i)}static insertCells(t,i){return new An(new Ms(t,t),i)}static deleteCells(t){return new An(t,[])}static updateCellMetadata(t,i){const s=new An(new Ms(t,t),[]);return s.newCellMetadata=i,s}static updateNotebookMetadata(t){const i=new An(new Ms(0,0),[]);return i.newNotebookMetadata=t,i}constructor(t,i){this.range=t,this.newCells=i}};qf=An=__decorate([de],qf);var M0=class c1{static isSnippetTextEdit(t){return t instanceof c1?!0:t?$e.isRange(t.range)&&Lo.isSnippetString(t.snippet):!1}static replace(t,i){return new c1(t,i)}static insert(t,i){return c1.replace(new $e(t,t),i)}constructor(t,i){this.range=t,this.snippet=i}},I7;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(I7||(I7={}));var Ro=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,i,s,r){this.c.push({_type:1,from:t,to:i,options:s,metadata:r})}createFile(t,i,s){this.c.push({_type:1,from:void 0,to:t,options:i,metadata:s})}deleteFile(t,i,s){this.c.push({_type:1,from:t,to:void 0,options:i,metadata:s})}e(t,i,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:5,metadata:i}})}f(t,i,s,r){const n=i.start,o=i.end;(n!==o||s.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:s,metadata:r})}g(t,i,s,r){this.c.push({_type:3,metadata:r,uri:t,edit:{editType:3,index:i,metadata:s}})}replace(t,i,s,r){this.c.push({_type:2,uri:t,edit:new Tn(i,s),metadata:r})}insert(t,i,s,r){this.replace(t,new $e(i,i),s,r)}delete(t,i,s){this.replace(t,i,"",s)}has(t){return this.c.some(i=>i._type===2&&i.uri.toString()===t.toString())}set(t,i){if(i)for(const s of i){if(!s)continue;let r,n;Array.isArray(s)?(r=s[0],n=s[1]):r=s,qf.isNotebookCellEdit(r)?r.newCellMetadata?this.g(t,r.range.start,r.newCellMetadata,n):r.newNotebookMetadata?this.e(t,r.newNotebookMetadata,n):this.f(t,r.range,r.newCells,n):M0.isSnippetTextEdit(r)?this.c.push({_type:6,uri:t,range:r.range,edit:r.snippet,metadata:n,keepWhitespace:r.keepWhitespace}):this.c.push({_type:2,uri:t,edit:r,metadata:n})}else{for(let s=0;s<this.c.length;s++){const r=this.c[s];switch(r._type){case 2:case 6:case 3:case 5:r.uri.toString()===t.toString()&&(this.c[s]=void 0);break}}sT(this.c)}}get(t){const i=[];for(const s of this.c)s._type===2&&s.uri.toString()===t.toString()&&i.push(s.edit);return i}entries(){const t=new Ht;for(const i of this.c)if(i._type===2){let s=t.get(i.uri);s||(s=[i.uri,[]],t.set(i.uri,s)),s[1].push(i.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};Ro=__decorate([de],Ro);var Lo=To=class{static isSnippetString(t){return t instanceof To?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=To.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,i=this.e++){if(typeof t=="function"){const s=new To;s.e=this.e,t(s),this.e=s.e,t=s.value}else t=To.c(t);return this.value+="${",this.value+=i,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,i=this.e++){const s=t.map(r=>r.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=i,this.value+="|",this.value+=s,this.value+="|}",this}appendVariable(t,i){if(typeof i=="function"){const s=new To;s.e=this.e,i(s),this.e=s.e,i=s.value}else typeof i=="string"&&(i=i.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,i&&(this.value+=":",this.value+=i),this.value+="}",this}};Lo=To=__decorate([de],Lo);var No;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(No||(No={}));var ci;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(ci||(ci={}));var ns=D0=class{static isLocation(t){return t instanceof D0?!0:t?$e.isRange(t.range)&&x.isUri(t.uri):!1}constructor(t,i){if(this.uri=t,i)if($e.isRange(i))this.range=$e.of(i);else if(Ne.isPosition(i))this.range=new $e(i,i);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};ns=D0=__decorate([de],ns);var su=class{static is(t){return t?typeof t.message=="string"&&t.location&&$e.isRange(t.location.range)&&x.isUri(t.location.uri):!1}constructor(t,i){this.location=t,this.message=i}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.location.range.isEqual(i.location.range)&&t.location.uri.toString()===i.location.uri.toString()}};su=__decorate([de],su);var Gf=class{constructor(t,i,s=ci.Error){if(!$e.isRange(t))throw new TypeError("range must be set");if(!i)throw new TypeError("message must be set");this.range=t,this.message=i,this.severity=s}toJSON(){return{severity:ci[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.severity===i.severity&&t.code===i.code&&t.severity===i.severity&&t.source===i.source&&t.range.isEqual(i.range)&&Oi(t.tags,i.tags)&&Oi(t.relatedInformation,i.relatedInformation,su.isEqual)}};Gf=__decorate([de],Gf);var Jf=class{constructor(t,i){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=i}};Jf=__decorate([de],Jf);var Yf=class extends Jf{constructor(t,i,s,r){super(t,i),this.canIncreaseVerbosity=s,this.canDecreaseVerbosity=r}};Yf=__decorate([de],Yf);var O0;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(O0||(O0={}));var ru;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(ru||(ru={}));var Zf=class{constructor(t,i=ru.Text){this.range=t,this.kind=i}toJSON(){return{range:this.range,kind:ru[this.kind]}}};Zf=__decorate([de],Zf);var Qf=class{constructor(t,i){this.uri=t,this.highlights=i}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};Qf=__decorate([de],Qf);var rt;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(rt||(rt={}));var nu;(function(e){e[e.Deprecated=1]="Deprecated"})(nu||(nu={}));var ou=A0=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,i,s,r,n){this.name=t,this.kind=i,this.containerName=n,typeof s=="string"&&(this.containerName=s),r instanceof ns?this.location=r:s instanceof $e&&(this.location=new ns(r,s)),A0.validate(this)}toJSON(){return{name:this.name,kind:rt[this.kind],location:this.location,containerName:this.containerName}}};ou=A0=__decorate([de],ou);var au=Vf=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(Vf.validate)}constructor(t,i,s,r,n){this.name=t,this.detail=i,this.kind=s,this.range=r,this.selectionRange=n,this.children=[],Vf.validate(this)}};au=Vf=__decorate([de],au);var cu;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(cu||(cu={}));var lu=class{constructor(t,i){this.title=t,this.kind=i}};lu=__decorate([de],lu);var pt=class{static{iu=this}static{this.c="."}constructor(t){this.value=t}append(t){return new iu(this.value?this.value+iu.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+iu.c)}};pt=iu=__decorate([de],pt),pt.Empty=new pt(""),pt.QuickFix=pt.Empty.append("quickfix"),pt.Refactor=pt.Empty.append("refactor"),pt.RefactorExtract=pt.Refactor.append("extract"),pt.RefactorInline=pt.Refactor.append("inline"),pt.RefactorMove=pt.Refactor.append("move"),pt.RefactorRewrite=pt.Refactor.append("rewrite"),pt.Source=pt.Empty.append("source"),pt.SourceOrganizeImports=pt.Source.append("organizeImports"),pt.SourceFixAll=pt.Source.append("fixAll"),pt.Notebook=pt.Empty.append("notebook");var uu=class{constructor(t,i){if(this.range=t,this.parent=i,i&&!i.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};uu=__decorate([de],uu);var F0=class{constructor(e,t,i,s,r,n){this.kind=e,this.name=t,this.detail=i,this.uri=s,this.range=r,this.selectionRange=n}},P7=class{constructor(e,t){this.fromRanges=t,this.from=e}},D7=class{constructor(e,t){this.fromRanges=t,this.to=e}},Ja;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(Ja||(Ja={}));var Xf=class{constructor(t,i){this.range=t,this.command=i}get isResolved(){return!!this.command}};Xf=__decorate([de],Xf);var Vi=T0=class{#e;static isMarkdownString(t){return t instanceof T0?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,i=!1){this.#e=new Na(t,{supportThemeIcons:i})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,i){return this.#e.appendCodeblock(i??"",t),this}};Vi=T0=__decorate([de],Vi);var U0=class{constructor(t,i){this.label=t,this.documentation=i}};U0=__decorate([de],U0);var j0=class{constructor(t,i){this.label=t,this.documentation=i,this.parameters=[]}};j0=__decorate([de],j0);var B0=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};B0=__decorate([de],B0);var H0;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(H0||(H0={}));var z0;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(z0||(z0={}));var Kf=class{constructor(t){this.value=t}};Kf=__decorate([de],Kf);var ep=class{constructor(t,i,s){this.position=t,this.label=i,this.kind=s}};ep=__decorate([de],ep);var Ya;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Ya||(Ya={}));var me;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(me||(me={}));var hu;(function(e){e[e.Deprecated=1]="Deprecated"})(hu||(hu={}));var tp=class{constructor(t,i){this.label=t,this.kind=i}toJSON(){return{label:this.label,kind:this.kind&&me[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};tp=__decorate([de],tp);var Za=class{constructor(t=[],i=!1){this.items=t,this.isIncomplete=i}};Za=__decorate([de],Za);var W0=class{constructor(t,i,s){this.insertText=t,this.range=i,this.command=s}};W0=__decorate([de],W0);var V0=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};V0=__decorate([de],V0);var Mo;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(Mo||(Mo={}));var Qa;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(Qa||(Qa={}));var du;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(du||(du={}));var Rn;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Rn||(Rn={}));function pB(e,t){return`${qe.toKey(e)}.${t}`}var Ns;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(Ns||(Ns={}));var Xa;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Xa||(Xa={}));var ip;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(ip||(ip={}));var Ka;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Ka||(Ka={}));var ec;(function(e){e[e.Addition=1]="Addition",e[e.Deletion=2]="Deletion",e[e.Modification=3]="Modification"})(ec||(ec={}));var fu;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(fu||(fu={}));var Oo;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(Oo||(Oo={})),function(e){function t(i){switch(i){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":case"code.jump":case"code.navigation":return e.Command}}e.fromValue=t}(Ka||(Ka={}));var tc;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(tc||(tc={})),function(e){function t(i){switch(i){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(tc||(tc={}));var sp=class{constructor(t,i){if(i&&!x.isUri(i))throw Ie("target");if(!$e.isRange(t)||t.isEmpty)throw Ie("range");this.range=t,this.target=i}};sp=__decorate([de],sp);var ic=class{constructor(t,i,s,r){this.red=t,this.green=i,this.blue=s,this.alpha=r}};ic=__decorate([de],ic);var rp=class{constructor(t,i){if(i&&!(i instanceof ic))throw Ie("color");if(!$e.isRange(t)||t.isEmpty)throw Ie("range");this.range=t,this.color=i}};rp=__decorate([de],rp);var np=class{constructor(t){if(!t||typeof t!="string")throw Ie("label");this.label=t}};np=__decorate([de],np);var A7;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(A7||(A7={}));var _0;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(_0||(_0={}));var q0;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(q0||(q0={}));var pu;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(pu||(pu={}));var G0;(function(e){e[e.Sh=1]="Sh",e[e.Bash=2]="Bash",e[e.Fish=3]="Fish",e[e.Csh=4]="Csh",e[e.Ksh=5]="Ksh",e[e.Zsh=6]="Zsh",e[e.CommandPrompt=7]="CommandPrompt",e[e.GitBash=8]="GitBash",e[e.PowerShell=9]="PowerShell",e[e.Python=10]="Python",e[e.Julia=11]="Julia",e[e.NuShell=12]="NuShell",e[e.Node=13]="Node"})(G0||(G0={}));var gB=class{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,typeof e!="number"||e<0)throw Ie("startIndex");if(typeof t!="number"||t<1)throw Ie("length");if(i!==void 0&&typeof i!="string")throw Ie("tooltip")}},mB=class{constructor(e){this.uri=e}},vB=class{constructor(e){this.terminalCommand=e}},J0;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(J0||(J0={}));var wB=class{constructor(e){if(this.options=e,typeof e!="object")throw Ie("options")}},Y0;(function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.Method=2]="Method",e[e.Alias=3]="Alias",e[e.Argument=4]="Argument",e[e.Option=5]="Option",e[e.OptionValue=6]="OptionValue",e[e.Flag=7]="Flag"})(Y0||(Y0={}));var bB=class{constructor(e,t,i,s,r,n,o,a,c){this.label=e,this.icon=t,this.detail=i,this.documentation=s,this.isFile=r,this.isDirectory=n,this.isKeyword=o,this.replacementIndex=a??0,this.replacementLength=c??0}},yB=class{constructor(e,t){this.items=e??[],this.resourceRequestConfig=t}},Z0;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Z0||(Z0={}));var Q0;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(Q0||(Q0={}));var X0;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(X0||(X0={}));var gu=class{static{or=this}static{this.Clean=new or("clean","Clean")}static{this.Build=new or("build","Build")}static{this.Rebuild=new or("rebuild","Rebuild")}static{this.Test=new or("test","Test")}static from(t){switch(t){case"clean":return or.Clean;case"build":return or.Build;case"rebuild":return or.Rebuild;case"test":return or.Test;default:return}}constructor(t,i){if(this.label=i,typeof t!="string"||typeof i!="string")throw Ie("name");this.c=t}get id(){return this.c}};gu=or=__decorate([de],gu);function T7(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}var sc=class{constructor(t,i,s){if(typeof t!="string")throw Ie("process");this.e=[],this.c=t,i!==void 0&&(Array.isArray(i)?(this.e=i,this.f=s):this.f=i)}get process(){return this.c}set process(t){if(typeof t!="string")throw Ie("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const i of this.e)t.push(i);return T7(t)}};sc=__decorate([de],sc);var Fo=class{constructor(t,i,s){if(this.f=[],Array.isArray(i)){if(!t)throw Ie("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw Ie("command");this.e=t,i&&(this.f=i),this.g=s}else{if(typeof t!="string")throw Ie("commandLine");this.c=t,this.g=i}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw Ie("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw Ie("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const i of this.f)t.push(typeof i=="string"?i:i.value);return T7(t)}};Fo=__decorate([de],Fo);var K0;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(K0||(K0={}));var Ln;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(Ln||(Ln={}));var ew=class{constructor(e){this.c=e}computeId(){return"customExecution"+ut()}set callback(e){this.c=e}get callback(){return this.c}},op=class{static{ar=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,i,s,r,n,o){this.k=!1,this.l=this.definition=t;let a;typeof i=="string"?(this.o=this.name=i,this.w=this.source=s,this.execution=r,a=n,this.k=!0):i===Ln.Global||i===Ln.Workspace?(this.target=i,this.o=this.name=s,this.w=this.source=r,this.execution=n,a=o):(this.target=i,this.o=this.name=s,this.w=this.source=r,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof sc?this.l={type:ar.e,id:this.q.computeId()}:this.q instanceof Fo?this.l={type:ar.f,id:this.q.computeId()}:this.q instanceof ew?this.l={type:ar.c,id:this.q.computeId()}:this.l={type:ar.g,id:ut()}}get definition(){return this.l}set definition(t){if(t==null)throw Ie("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw Ie("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const i=this.l.type;(ar.g===i||ar.e===i||ar.f===i||ar.c===i)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw Ie("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};op=ar=__decorate([de],op);var Nn;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(Nn||(Nn={}));var tw;(function(e){function t(i){const s=i;return us(s.value)?s.tooltip&&!Ue(s.tooltip)?(console.log("INVALID view badge, invalid tooltip",s.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",s.value),!1)}e.isViewBadge=t})(tw||(tw={}));var ap=R0=class{static isTreeItem(t,i){const s=t;if(s.checkboxState!==void 0){const r=us(s.checkboxState)?s.checkboxState:St(s.checkboxState)&&us(s.checkboxState.state)?s.checkboxState.state:void 0,n=!us(s.checkboxState)&&St(s.checkboxState)?s.checkboxState.tooltip:void 0;if(r===void 0||r!==cr.Checked&&r!==cr.Unchecked||n!==void 0&&!Ue(n))return console.log("INVALID tree item, invalid checkboxState",s.checkboxState),!1}if(t instanceof R0)return!0;if(s.label!==void 0&&!Ue(s.label)&&!s.label?.label)return console.log("INVALID tree item, invalid label",s.label),!1;if(s.id!==void 0&&!Ue(s.id))return console.log("INVALID tree item, invalid id",s.id),!1;if(s.iconPath!==void 0&&!Ue(s.iconPath)&&!x.isUri(s.iconPath)&&(!s.iconPath||!Ue(s.iconPath.id))){const r=s.iconPath;if(!r||!Ue(r.light)&&!x.isUri(r.light)&&!Ue(r.dark)&&!x.isUri(r.dark))return console.log("INVALID tree item, invalid iconPath",s.iconPath),!1}return s.description!==void 0&&!Ue(s.description)&&typeof s.description!="boolean"?(console.log("INVALID tree item, invalid description",s.description),!1):s.resourceUri!==void 0&&!x.isUri(s.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",s.resourceUri),!1):s.tooltip!==void 0&&!Ue(s.tooltip)&&!(s.tooltip instanceof Vi)?(console.log("INVALID tree item, invalid tooltip",s.tooltip),!1):s.command!==void 0&&!s.command.command?(console.log("INVALID tree item, invalid command",s.command),!1):s.collapsibleState!==void 0&&s.collapsibleState<Uo.None&&s.collapsibleState>Uo.Expanded?(console.log("INVALID tree item, invalid collapsibleState",s.collapsibleState),!1):s.contextValue!==void 0&&!Ue(s.contextValue)?(console.log("INVALID tree item, invalid contextValue",s.contextValue),!1):s.accessibilityInformation!==void 0&&!s.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",s.accessibilityInformation),!1):!0}constructor(t,i=Uo.None){this.collapsibleState=i,x.isUri(t)?this.resourceUri=t:this.label=t}};ap=R0=__decorate([de],ap);var Uo;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Uo||(Uo={}));var cr;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(cr||(cr={}));var cp=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};cp=__decorate([de],cp);var lp=class extends cp{},xB=class extends lp{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},EB=class{constructor(e,t,i,s){this.name=e,this.uri=t,this._itemId=i,this.c=s}data(){return this.c()}},rc=class{#e=new Map;constructor(t){for(const[i,s]of t??[]){const r=this.#e.get(this.#t(i));r?r.push(s):this.#e.set(this.#t(i),[s])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,i){this.#e.set(this.#t(t),[i])}forEach(t,i){for(const[s,r]of this.#e)for(const n of r)t.call(i,n,s,this)}*[Symbol.iterator](){for(const[t,i]of this.#e)for(const s of i)yield[t,s]}#t(t){return t.toLowerCase()}};rc=__decorate([de],rc);var iw=class{constructor(t,i,s){this.insertText=t,this.title=i,this.kind=s}};iw=__decorate([de],iw);var sw;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(sw||(sw={}));var Mn=class l1{static{this.c="."}constructor(t){this.value=t}append(...t){return new l1((this.value?[this.value,...t]:t).join(l1.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+l1.c)}};Mn.Empty=new Mn(""),Mn.Text=new Mn("text"),Mn.TextUpdateImports=Mn.Text.append("updateImports");var kB=class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}},di=class{constructor(t,i){this.id=t,this.color=i}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};di=__decorate([de],di),di.File=new di("file"),di.Folder=new di("folder");var mu=class{constructor(t){this.id=t}};mu=__decorate([de],mu);var nc;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(nc||(nc={}));var oc=class{get base(){return this.c}set base(t){this.c=t,this.e=x.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,i){if(typeof t!="string"&&(!t||!x.isUri(t)&&!x.isUri(t.uri)))throw Ie("base");if(typeof i!="string")throw Ie("pattern");typeof t=="string"?this.baseUri=x.file(t):x.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=i}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};oc=__decorate([de],oc);var R7=new WeakMap;function SB(e,t){R7.set(e,t)}var ac=class{constructor(t,i,s,r,n){this.enabled=typeof t=="boolean"?t:!0,typeof i=="string"&&(this.condition=i),typeof s=="string"&&(this.hitCondition=s),typeof r=="string"&&(this.logMessage=r),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=R7.get(this)??ut()),this.c}};ac=__decorate([de],ac);var jo=class extends ac{constructor(t,i,s,r,n,o){if(super(i,s,r,n,o),t===null)throw Ie("location");this.location=t}};jo=__decorate([de],jo);var Bo=class extends ac{constructor(t,i,s,r,n,o){super(i,s,r,n,o),this.functionName=t}};Bo=__decorate([de],Bo);var up=class extends ac{constructor(t,i,s,r,n,o,a,c){if(super(r,n,o,a,c),!i)throw Ie("dataId");this.label=t,this.dataId=i,this.canPersist=s}};up=__decorate([de],up);var cc=class{constructor(t,i,s){this.command=t,this.args=i||[],this.options=s}};cc=__decorate([de],cc);var lc=class{constructor(t,i){this.port=t,this.host=i}};lc=__decorate([de],lc);var vu=class{constructor(t){this.path=t}};vu=__decorate([de],vu);var wu=class{constructor(t){this.implementation=t}};wu=__decorate([de],wu);var L7=class{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}},N7=class{constructor(e,t){this.session=e,this.threadId=t}},hp=class{constructor(t,i){this.range=t,this.expression=i}};hp=__decorate([de],hp);var bu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(bu||(bu={}));var dp=class{constructor(t,i){this.range=t,this.text=i}};dp=__decorate([de],dp);var fp=class{constructor(t,i,s=!0){this.range=t,this.variableName=i,this.caseSensitiveLookup=s}};fp=__decorate([de],fp);var pp=class{constructor(t,i){this.range=t,this.expression=i}};pp=__decorate([de],pp);var rw=class{constructor(t,i){this.frameId=t,this.stoppedLocation=i}};rw=__decorate([de],rw);var nw;(function(e){e[e.AIGenerated=1]="AIGenerated"})(nw||(nw={}));var yu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(yu||(yu={}));var CB=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},uc;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(uc||(uc={}));var zt=Di=class extends Error{static FileExists(t){return new Di(t,pe.FileExists,Di.FileExists)}static FileNotFound(t){return new Di(t,pe.FileNotFound,Di.FileNotFound)}static FileNotADirectory(t){return new Di(t,pe.FileNotADirectory,Di.FileNotADirectory)}static FileIsADirectory(t){return new Di(t,pe.FileIsADirectory,Di.FileIsADirectory)}static NoPermissions(t){return new Di(t,pe.NoPermissions,Di.NoPermissions)}static Unavailable(t){return new Di(t,pe.Unavailable,Di.Unavailable)}constructor(t,i=pe.Unknown,s){super(x.isUri(t)?t.toString(!0):t),this.code=s?.name??"Unknown",N6(this,i),Object.setPrototypeOf(this,Di.prototype),typeof Error.captureStackTrace=="function"&&typeof s=="function"&&Error.captureStackTrace(this,s)}};zt=Di=__decorate([de],zt);var ow=class{constructor(t,i,s){this.start=t,this.end=i,this.kind=s}};ow=__decorate([de],ow);var Br;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Br||(Br={}));var xu;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(xu||(xu={}));var aw;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(aw||(aw={}));var cw;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(cw||(cw={}));var Eu;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Eu||(Eu={}));var ku;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(ku||(ku={}));var Su;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(Su||(Su={}));var lw=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function $B(e){return typeof e>"u"||fT(e)}var IB=class RA{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let i=0,s=t.tokenTypes.length;i<s;i++)this.k.set(t.tokenTypes[i],i);for(let i=0,s=t.tokenModifiers.length;i<s;i++)this.l.set(t.tokenModifiers[i],i)}}push(t,i,s,r,n){if(typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof r=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,i,s,r,n);if($e.isRange(t)&&typeof i=="string"&&$B(s))return this.o(t,i,s);throw Ie()}o(t,i,s){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(i))throw new Error("`tokenType` is not in the provided legend");const r=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(i);let c=0;if(s)for(const l of s){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(r,n,o,a,c)}q(t,i,s,r,n){if(this.f&&(t<this.c||t===this.c&&i<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let f=this.g[5*h],p=this.g[5*h+1];f===0?(f=l,p+=u):f+=l,this.g[5*h]=f,this.g[5*h+1]=p,l=f,u=p}}let o=t,a=i;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=s,this.g[this.j++]=r,this.g[this.j++]=n,this.c=t,this.e=i}static r(t){const i=[],s=t.length/5|0;for(let a=0;a<s;a++)i[a]=a;i.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],f=t[5*c+1];return h-f}return l-u});const r=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<s;a++){const c=5*i[a],l=t[c+0],u=t[c+1],h=t[c+2],f=t[c+3],p=t[c+4],g=l-n,v=g===0?u-o:u,b=5*a;r[b+0]=g,r[b+1]=v,r[b+2]=h,r[b+3]=f,r[b+4]=p,n=l,o=u}return r}build(t){return this.f?new hc(new Uint32Array(this.g),t):new hc(RA.r(this.g),t)}},hc=class{constructor(e,t){this.resultId=t,this.data=e}},M7=class{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}},gp=class{constructor(e,t){this.resultId=t,this.edits=e}},mp;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(mp||(mp={}));var PB=class{constructor(e){this.name=e}},uw;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(uw||(uw={}));var Cu=class{static{this.Back={iconPath:new di("arrow-left")}}constructor(){}};Cu=__decorate([de],Cu);var $u;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})($u||($u={}));var dc;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(dc||(dc={}));var Ho;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(Ho||(Ho={}));var hw=class{static validate(e){if(typeof e.badge=="string"){let t=Qx(e.badge,0);if(t<e.badge.length&&(t+=Qx(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!di.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}},vp=class{constructor(t){this.kind=t}};vp=__decorate([de],vp);var On;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(On||(On={}));var Ms=class O5{static isNotebookRange(t){return t instanceof O5?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,i){if(t<0)throw Ie("start must be positive");if(i<0)throw Ie("end must be positive");t<=i?(this.c=t,this.e=i):(this.c=i,this.e=t)}with(t){let i=this.c,s=this.e;return t.start!==void 0&&(i=t.start),t.end!==void 0&&(s=t.end),i===this.c&&s===this.e?this:new O5(i,s)}},wp=class F5{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(i=>F5.isNotebookCellData(i))}static isNotebookCellData(t){return!0}constructor(t,i,s,r,n,o,a){this.kind=t,this.value=i,this.languageId=s,this.mime=r,this.outputs=n??[],this.metadata=o,this.executionSummary=a,F5.validate(this)}},O7=class{constructor(e){this.cells=e}},F7=class nn{static isNotebookCellOutputItem(t){return t instanceof nn?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const i={name:t.name,message:t.message,stack:t.stack};return nn.json(i,"application/vnd.code.notebook.error")}static stdout(t){return nn.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return nn.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,i="application/octet-stream"){return new nn(t,i)}static#e=new TextEncoder;static text(t,i=tr.text){const s=nn.#e.encode(String(t));return new nn(s,i)}static json(t,i="text/x-json"){const s=JSON.stringify(t,void 0,"	");return nn.text(s,i)}constructor(t,i){this.data=t,this.mime=i;const s=a6(i,!0);if(!s)throw new Error(`INVALID mime type: ${i}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=s}},bp=class U5{static isNotebookCellOutput(t){return t instanceof U5?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,i=!1){const s=new Set,r=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=a6(o.mime);if(!s.has(a)||W8(a)){s.add(a);continue}r.add(n),i&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return r.size===0?t:t.filter((n,o)=>!r.has(o))}constructor(t,i,s){this.items=U5.ensureUniqueMimeTypes(t,!0),typeof i=="string"?(this.id=i,this.metadata=s):(this.id=ut(),this.metadata=i??s)}},DB=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},zo;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(zo||(zo={}));var dw;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(dw||(dw={}));var yp;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(yp||(yp={}));var xp;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(xp||(xp={}));var AB=class{constructor(e,t){this.text=e,this.alignment=t}},fw;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(fw||(fw={}));var Ep;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Ep||(Ep={}));var U7=class{constructor(e,t=[]){this.uri=e,this.provides=Qi(t)}},TB=class{constructor(e){this.label=e}},Iu;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(Iu||(Iu={}));var pw=class{constructor(t,i){this.label=t,this.timestamp=i}};pw=__decorate([de],pw);var fc;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(fc||(fc={}));var kp;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(kp||(kp={}));var Fn;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Fn||(Fn={}));var RB=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},LB=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},gw;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(gw||(gw={}));var pc;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(pc||(pc={}));var j7=class{constructor(e,t,i){this.controllerId=e,this.profileId=t,this.kind=i}},Sp=class{constructor(t=void 0,i=void 0,s=void 0,r=!1,n=!0){this.include=t,this.exclude=i,this.profile=s,this.continuous=r,this.preserveFocus=n}};Sp=__decorate([de],Sp);var Cp=L0=class{static diff(t,i,s){const r=new L0(t);return r.expectedOutput=i,r.actualOutput=s,r}constructor(t){this.message=t}};Cp=L0=__decorate([de],Cp);var Pu=class{constructor(t){this.id=t}};Pu=__decorate([de],Pu);var NB=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},$p=class{constructor(e,t){this.covered=e,this.total=t,Ip(this)}};function Ip(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var Pp=class LA{static fromDetails(t,i){const s=new $p(0,0),r=new $p(0,0),n=new $p(0,0);for(const a of i)if("branches"in a){s.total+=1,s.covered+=a.executed?1:0;for(const c of a.branches)r.total+=1,r.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new LA(t,s,r.total>0?r:void 0,n.total>0?n:void 0);return o.detailedCoverage=i,o}constructor(t,i,s,r,n=[]){this.uri=t,this.statementCoverage=i,this.branchCoverage=s,this.declarationCoverage=r,this.includesTests=n}},B7=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}},H7=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}},z7=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}},mw;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(mw||(mw={}));var vw;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(vw||(vw={}));var ww;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(ww||(ww={}));var bw=class{constructor(e,t,i,s,r,n){this.kind=e,this.name=t,this.detail=i,this.uri=s,this.range=r,this.selectionRange=n}},yw=class{constructor(e){this.uri=e}},Dp=class{constructor(e,t){this.original=e,this.modified=t}},W7=class{constructor(e,t,i,s){this.base=e,this.input1=t,this.input2=i,this.result=s}},xw=class{constructor(e,t){this.uri=e,this.viewType=t}},V7=class{constructor(e){this.viewType=e}},Ew=class{constructor(e,t){this.uri=e,this.notebookType=t}},kw=class{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}},_7=class{constructor(){}},q7=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},G7=class{constructor(){}},J7=class{constructor(e){this.textDiffs=e}},Sw;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Sw||(Sw={}));var Cw;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(Cw||(Cw={}));var $w;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})($w||($w={}));var MB=class{constructor(e,t,i){this.id=e,this.label=t,this.values=i}},Wo;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Saved=3]="Saved"})(Wo||(Wo={}));var Iw;(function(e){e[e.Keep=1]="Keep",e[e.Undo=2]="Undo",e[e.UserModification=3]="UserModification"})(Iw||(Iw={}));var Pw;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(Pw||(Pw={}));var Du;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(Du||(Du={}));var Ap=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Vi(e):e}},Au=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Vi(e):e,this.vulnerabilities=t}},Tp=class{constructor(e,t,i,s){this.title=e,this.message=t,this.data=i,this.buttons=s}},Rp=class{constructor(e,t){this.value=e,this.baseUri=t}},Tu=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},Dw=class{constructor(e){this.value=e}},Lp=class{constructor(e,t){this.value=e,this.task=t}},Ru=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Vi(e):e}},Np=class{constructor(e){this.value=e}},Vo=class{constructor(e,t,i){this.value=e,this.iconPath=t,this.options=i}},Mp=class{constructor(e,t){this.value=e,this.isEdit=t}},Op=class{constructor(e,t,i){this.value=e,this.license=t,this.snippet=i}},Fp=class{constructor(e,t){this.uri=e,this.range=t}},Aw=class{constructor(e){this.extensions=e}},Lu=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},Up=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},Nu=class{constructor(e){this.toolName=e}},Tw=class{constructor(e,t,i,s,r,n){this.prompt=e,this.command=t,this.references=i,this.participant=s,this.toolReferences=r,this.editedFileEvents=n}},Y7=class{constructor(e,t,i,s){this.response=e,this.result=t,this.participant=i,this.command=s}},Os;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"})(Os||(Os={}));var Rw;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(Rw||(Rw={}));var Z7=class{constructor(e,t,i){this.document=e,this.selection=t,this.wholeRange=i}},Q7=class{constructor(e){this.cell=e}},X7=class{constructor(e,t,i){this.mimeType=e,this.data=t,this.reference=i}},K7=class{constructor(e){this.diagnostics=e}},_i;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(_i||(_i={}));var jp=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},Lw=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},OB=class{constructor(e,t,i,s){this.command=e,this.language=t,this.confirmationMessages=i,this.presentation=s}},Nw;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(Nw||(Nw={}));var e9=class j5{static User(t,i){return new j5(_i.User,t,i)}static Assistant(t,i){return new j5(_i.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new Pt(t)]:this.c=t}get content(){return this.c}constructor(t,i,s){this.c=[],this.role=t,this.content=i,this.name=s}},t9=class B5{static User(t,i){return new B5(_i.User,t,i)}static Assistant(t,i){return new B5(_i.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new Pt(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(i=>typeof i=="string"?new Pt(i):i))}get content2(){return this.content.map(t=>t instanceof Pt?t.value:t)}constructor(t,i,s){this.c=[],this.role=t,this.content=i,this.name=s}},_o=class{constructor(e,t,i){this.callId=e,this.name=t,this.input=i}},Pt=class{constructor(e){this.value=e}toJSON(){return{$mid:21,value:this.value}}},Hr=class u1{constructor(t,i){this.mimeType=i,this.data=t}static image(t,i){return new u1(t,i)}static json(t,i="text/x-json"){const s=JSON.stringify(t,void 0,"	");return new u1(_.fromString(s).buffer,i)}static text(t,i=tr.text){return new u1(_.fromString(t).buffer,i)}toJSON(){return{$mid:23,mimeType:this.mimeType,data:this.data}}},zr;(function(e){e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e.WEBP="image/webp",e.BMP="image/bmp"})(zr||(zr={}));var lr=class{constructor(e){this.value=e}toJSON(){return{$mid:22,value:this.value}}},Wr=class wr extends Error{static#e="LanguageModelError";static NotFound(t){return new wr(t,wr.NotFound.name)}static NoPermissions(t){return new wr(t,wr.NoPermissions.name)}static Blocked(t){return new wr(t,wr.Blocked.name)}static tryDeserialize(t){if(t.name===wr.#e)return new wr(t.message,t.code,t.cause)}constructor(t,i,s){super(t,{cause:s}),this.name=wr.#e,this.code=i??""}},Bp=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},i9=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},FB=class extends Bp{},Mw;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(Mw||(Mw={}));var Ow;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(Ow||(Ow={}));var Fw;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(Fw||(Fw={}));var Uw;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(Uw||(Uw={}));var jw;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(jw||(jw={}));var Bw;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(Bw||(Bw={}));var UB=class{constructor(e,t){this.text=e,this.range=t}},Mu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Mu||(Mu={}));var jB=class{constructor(e,t,i,s={},r){this.label=e,this.command=t,this.args=i,this.env=s,this.version=r}},BB=class{constructor(e,t,i={},s){this.label=e,this.uri=t,this.headers=i,this.version=s}},vte=q("IAiSettingsSearchService"),Un;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(Un||(Un={}));var HB={IconContribution:"base.contributions.icons"},s9;(function(e){function t(i,s){let r=i.defaults;for(;Ut.isThemeIcon(r);){const n=gc.getIcon(r.id);if(!n)return;r=n.defaults}return r}e.getDefinition=t})(s9||(s9={}));var r9;(function(e){function t(s){return{weight:s.weight,style:s.style,src:s.src.map(r=>({format:r.format,location:r.location.toString()}))}}e.toJSONObject=t;function i(s){const r=n=>Ue(n)?n:void 0;if(s&&Array.isArray(s.src)&&s.src.every(n=>Ue(n.format)&&Ue(n.location)))return{weight:r(s.weight),style:r(s.style),src:s.src.map(n=>({format:n.format,location:x.parse(n.location)}))}}e.fromJSONObject=i})(r9||(r9={}));var zB=/^([\w_-]+)$/,WB=d(2535,null),VB=class extends X{constructor(){super(),this.a=this.B(new D),this.onDidChange=this.a.event,this.f={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2536,null),pattern:zB.source,patternErrorMessage:WB},fontCharacter:{type:"string",description:d(2537,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.g={type:"string",pattern:`^${Ut.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.h={}}registerIcon(e,t,i,s){const r=this.b[e];if(r){if(i&&!r.description){r.description=i,this.f.properties[e].markdownDescription=`${i} $(${e})`;const a=this.g.enum.indexOf(e);a!==-1&&(this.g.enumDescriptions[a]=i),this.a.fire()}return r}const n={id:e,description:i,defaults:t,deprecationMessage:s};this.b[e]=n;const o={$ref:"#/definitions/icons"};return s&&(o.deprecationMessage=s),i&&(o.markdownDescription=`${i}: $(${e})`),this.f.properties[e]=o,this.g.enum.push(e),this.g.enumDescriptions.push(i||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.f.properties[e];const t=this.g.enum.indexOf(e);t!==-1&&(this.g.enum.splice(t,1),this.g.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.f}getIconReferenceSchema(){return this.g}registerIconFont(e,t){const i=this.h[e];return i||(this.h[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.h[e]}getIconFont(e){return this.h[e]}toString(){const e=(r,n)=>r.id.localeCompare(n.id),t=r=>{for(;Ut.isThemeIcon(r.defaults);)r=this.b[r.defaults.id];return`codicon codicon-${r?r.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.b).map(r=>this.b[r]);for(const r of s.filter(n=>!!n.description).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|${Ut.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const r of s.filter(n=>!Ut.isThemeIcon(n.defaults)).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|`);return i.join(`
`)}},gc=new VB;Xt.add(HB.IconContribution,gc);function Ou(e,t,i,s){return gc.registerIcon(e,t,i,s)}function _B(){const e=RO();for(const t in e){const i="\\"+e[t].toString(16);gc.registerIcon(t,{fontCharacter:i})}}_B();var n9="vscode://schemas/icons",o9=Xt.as(vf.JSONContribution);o9.registerSchema(n9,gc.getIconSchema());var a9=new Zs(()=>o9.notifySchemaChanged(n9),200);gc.onDidChange(()=>{a9.isScheduled()||a9.schedule()});var wte=Ou("widget-close",le.close,d(2538,null)),bte=Ou("goto-previous-location",le.arrowUp,d(2539,null)),yte=Ou("goto-next-location",le.arrowDown,d(2540,null)),xte=Ut.modify(le.sync,"spin"),Ete=Ut.modify(le.loading,"spin"),Fu;(function(e){e.LATEST_PROTOCOL_VERSION="2025-03-26",e.JSONRPC_VERSION="2.0",e.PARSE_ERROR=-32700,e.INVALID_REQUEST=-32600,e.METHOD_NOT_FOUND=-32601,e.INVALID_PARAMS=-32602,e.INTERNAL_ERROR=-32603})(Fu||(Fu={}));function qB(e,t){return qe.toKey(e)+"/"+t}var c9;(function(e){e[e.WorkspaceFolder=0]="WorkspaceFolder",e[e.Workspace=100]="Workspace",e[e.User=200]="User",e[e.Extension=300]="Extension",e[e.Filesystem=400]="Filesystem",e[e.RemoteBoost=-50]="RemoteBoost"})(c9||(c9={}));var l9;(function(e){function t(i,s){return i.id===s.id&&i.remoteAuthority===s.remoteAuthority&&i.label===s.label&&i.isTrustedByDefault===s.isTrustedByDefault}e.equals=t})(l9||(l9={}));var u9;(function(e){function t(r){return r}e.toSerialized=t;function i(r){return{id:r.id,label:r.label,cacheNonce:r.cacheNonce,launch:Uu.fromSerialized(r.launch),variableReplacement:r.variableReplacement?Hw.fromSerialized(r.variableReplacement):void 0}}e.fromSerialized=i;function s(r,n){return r.id===n.id&&r.label===n.label&&Oi(r.roots,n.roots,(o,a)=>o.toString()===a.toString())&&wi(r.launch,n.launch)&&wi(r.presentation,n.presentation)&&wi(r.variableReplacement,n.variableReplacement)&&wi(r.devMode,n.devMode)}e.equals=s})(u9||(u9={}));var Hw;(function(e){function t(s){return s}e.toSerialized=t;function i(s){return{section:s.section,folder:s.folder?{...s.folder,uri:x.revive(s.folder.uri)}:void 0,target:s.target}}e.fromSerialized=i})(Hw||(Hw={}));var h9;(function(e){e[e.HasUnknown=0]="HasUnknown",e[e.LoadingUnknown=1]="LoadingUnknown",e[e.AllKnown=2]="AllKnown"})(h9||(h9={}));var kte=q("IMcpService"),d9;(function(e){e[e.Unknown=0]="Unknown",e[e.Cached=1]="Cached",e[e.Outdated=2]="Outdated",e[e.RefreshingFromUnknown=3]="RefreshingFromUnknown",e[e.RefreshingFromCached=4]="RefreshingFromCached",e[e.Live=5]="Live"})(d9||(d9={}));var f9;(function(e){e[e.Stdio=1]="Stdio",e[e.HTTP=2]="HTTP"})(f9||(f9={}));var Uu;(function(e){function t(s){return s}e.toSerialized=t;function i(s){switch(s.type){case 2:return{type:s.type,uri:x.revive(s.uri),headers:s.headers};case 1:return{type:s.type,cwd:s.cwd,command:s.command,args:s.args,env:s.env,envFile:s.envFile}}}e.fromSerialized=i})(Uu||(Uu={}));var p9;(function(e){let t;(function(i){i[i.Stopped=0]="Stopped",i[i.Starting=1]="Starting",i[i.Running=2]="Running",i[i.Error=3]="Error"})(t=e.Kind||(e.Kind={})),e.toString=i=>{switch(i.state){case 0:return d(8861,null);case 1:return d(8862,null);case 2:return d(8863,null);case 3:return d(8864,null,i.message);default:I1(i)}},e.toKindString=i=>{switch(i){case 0:return"stopped";case 1:return"starting";case 2:return"running";case 3:return"error";default:I1(i)}},e.canBeStarted=i=>i===3||i===0,e.isRunning=i=>!e.canBeStarted(i.state)})(p9||(p9={}));var GB=q("IMcpWorkbenchService"),g9=class extends X{constructor(t,i){super(),this.f=t,this.B(i.onChange(this.update,this))}set mcpServer(t){this.f.forEach(i=>i.mcpServer=t)}update(t){for(const i of this.f)t&&i.mcpServer?t.name===i.mcpServer.name&&(i.mcpServer=t):i.update()}};g9=__decorate([__param(1,GB)],g9);var Cte=new $("mcpServersGalleryEnabled",!1),$te=new $("hasInstalledMcpServers",!1),Ite=Ou("mcp-server",le.mcp,d(8865,null)),m9;(function(e){e.scheme="mcp-resource";function t(s,r){return typeof r=="string"&&(r=x.parse(r)),r.with({scheme:e.scheme,authority:NE(_.fromString(s.id)),path:["",r.scheme,r.authority].join("/")+r.path})}e.fromServer=t;function i(s){if(typeof s=="string"&&(s=x.parse(s)),s.scheme!==e.scheme)throw new Error(`Invalid MCP resource URI: ${s.toString()}`);const r=s.path.split("/");if(r.length<3)throw new Error(`Invalid MCP resource URI: ${s.toString()}`);const[,n,o,...a]=r;return{definitionId:TL(s.authority).toString(),resourceURI:s.with({scheme:n,authority:o,path:"/"+a.join("/")})}}e.toServer=i})(m9||(m9={}));var v9;(function(e){e[e.Logging=1]="Logging",e[e.Completions=2]="Completions",e[e.Prompts=4]="Prompts",e[e.PromptsListChanged=8]="PromptsListChanged",e[e.Resources=16]="Resources",e[e.ResourcesSubscribe=32]="ResourcesSubscribe",e[e.ResourcesListChanged=64]="ResourcesListChanged",e[e.Tools=128]="Tools",e[e.ToolsListChanged=256]="ToolsListChanged"})(v9||(v9={}));var Pte=q("IMcpServerSampling"),w9;(function(e){e.Prefix="mcp_",e[e.MaxPrefixLen=18]="MaxPrefixLen",e[e.MaxLength=64]="MaxLength"})(w9||(w9={}));var Fs;(function(e){function t(s){const{selectionStartLineNumber:r,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=s,c=new Ne(r-1,n-1),l=new Ne(o-1,a-1);return new jr(c,l)}e.to=t;function i(s){const{anchor:r,active:n}=s;return{selectionStartLineNumber:r.line+1,selectionStartColumn:r.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=i})(Fs||(Fs={}));var O;(function(e){function t(s){if(!s)return;const{start:r,end:n}=s;return{startLineNumber:r.line+1,startColumn:r.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function i(s){if(!s)return;const{startLineNumber:r,startColumn:n,endLineNumber:o,endColumn:a}=s;return new $e(r-1,n-1,o-1,a-1)}e.to=i})(O||(O={}));var ur;(function(e){function t(s){return{uri:s.uri,range:O.from(s.range)}}e.from=t;function i(s){return new ns(x.revive(s.uri),O.to(s.range))}e.to=i})(ur||(ur={}));var zw;(function(e){function t(i){switch(i){case 1:return Fn.Comment;case 0:return Fn.Other;case 3:return Fn.RegEx;case 2:return Fn.String}}e.to=t})(zw||(zw={}));var Je;(function(e){function t(s){return new Ne(s.lineNumber-1,s.column-1)}e.to=t;function i(s){return{lineNumber:s.line+1,column:s.character+1}}e.from=i})(Je||(Je={}));var mc;(function(e){function t(r,n,o){return yt(Qi(r).map(a=>i(a,n,o)))}e.from=t;function i(r,n,o){if(typeof r=="string")return{$serialized:!0,language:r,isBuiltin:o?.isBuiltin};if(r)return{$serialized:!0,language:r.language,scheme:s(r.scheme,n),pattern:Gi.from(r.pattern)??void 0,exclusive:r.exclusive,notebookType:r.notebookType,isBuiltin:o?.isBuiltin}}function s(r,n){return n&&typeof r=="string"?n.transformOutgoingScheme(r):r}})(mc||(mc={}));var Hp;(function(e){function t(s){switch(s){case No.Unnecessary:return 1;case No.Deprecated:return 2}}e.from=t;function i(s){switch(s){case 1:return No.Unnecessary;case 2:return No.Deprecated;default:return}}e.to=i})(Hp||(Hp={}));var vc;(function(e){function t(s){let r;return s.code&&(Ue(s.code)||us(s.code)?r=String(s.code):r={value:String(s.code.value),target:s.code.target}),{...O.from(s.range),message:s.message,source:s.source,code:r,severity:ju.from(s.severity),relatedInformation:s.relatedInformation&&s.relatedInformation.map(zp.from),tags:Array.isArray(s.tags)?yt(s.tags.map(Hp.from)):void 0}}e.from=t;function i(s){const r=new Gf(O.to(s),s.message,ju.to(s.severity));return r.source=s.source,r.code=Ue(s.code)?s.code:s.code?.value,r.relatedInformation=s.relatedInformation&&s.relatedInformation.map(zp.to),r.tags=s.tags&&yt(s.tags.map(Hp.to)),r}e.to=i})(vc||(vc={}));var zp;(function(e){function t(s){return{...O.from(s.location.range),message:s.message,resource:s.location.uri}}e.from=t;function i(s){return new su(new ns(s.resource,O.to(s)),s.message)}e.to=i})(zp||(zp={}));var ju;(function(e){function t(s){switch(s){case ci.Error:return Ii.Error;case ci.Warning:return Ii.Warning;case ci.Information:return Ii.Info;case ci.Hint:return Ii.Hint}return Ii.Error}e.from=t;function i(s){switch(s){case Ii.Info:return ci.Information;case Ii.Warning:return ci.Warning;case Ii.Error:return ci.Error;case Ii.Hint:return ci.Hint;default:return ci.Error}}e.to=i})(ju||(ju={}));var Wt;(function(e){function t(s){return typeof s=="number"&&s>=du.One?s-1:s===du.Beside?zj:Hj}e.from=t;function i(s){if(typeof s=="number"&&s>=0)return s+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=i})(Wt||(Wt={}));function JB(e){return typeof e.range<"u"}function b9(e){return e.length===0?!0:!!JB(e[0])}var xe;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function i(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function s(a){let c;if(i(a)){const{language:h,value:f}=a;c={value:"```"+h+`
`+f+"\n```\n"}}else Vi.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let f=x.parse(h,!0);f=f.with({query:r(f.query,l)}),l[h]=f}catch{}return""};return ct.walkTokens(ct.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(jO(h.href))}),c}e.from=s;function r(a,c){if(!a)return a;let l;try{l=ZE(a)}catch{}if(!l)return a;let u=!1;return l=Pa(l,h=>{if(x.isUri(h)){const f=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[f]=h,u=!0,f}else return}),u?JSON.stringify(l):a}function n(a){const c=new Vi(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?x.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(xe||(xe={}));function YB(e){return b9(e)?e.map(t=>({range:O.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?xe.fromMany(t.hoverMessage):t.hoverMessage?xe.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:O.from(t)}))}function Wp(e){return typeof e>"u"?e:typeof e=="string"?x.file(e):e}var wc;(function(e){function t(i){return typeof i>"u"?i:{contentText:i.contentText,contentIconPath:i.contentIconPath?Wp(i.contentIconPath):void 0,border:i.border,borderColor:i.borderColor,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,color:i.color,backgroundColor:i.backgroundColor,margin:i.margin,width:i.width,height:i.height}}e.from=t})(wc||(wc={}));var Vp;(function(e){function t(i){return typeof i>"u"?i:{backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Wp(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?wc.from(i.before):void 0,after:i.after?wc.from(i.after):void 0}}e.from=t})(Vp||(Vp={}));var Ww;(function(e){function t(i){if(typeof i>"u")return i;switch(i){case Oo.OpenOpen:return 0;case Oo.ClosedClosed:return 1;case Oo.OpenClosed:return 2;case Oo.ClosedOpen:return 3}}e.from=t})(Ww||(Ww={}));var Vw;(function(e){function t(i){return{isWholeLine:i.isWholeLine,rangeBehavior:i.rangeBehavior?Ww.from(i.rangeBehavior):void 0,overviewRulerLane:i.overviewRulerLane,light:i.light?Vp.from(i.light):void 0,dark:i.dark?Vp.from(i.dark):void 0,backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Wp(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?wc.from(i.before):void 0,after:i.after?wc.from(i.after):void 0}}e.from=t})(Vw||(Vw={}));var Vt;(function(e){function t(s){return{text:s.newText,eol:s.newEol&&Ec.from(s.newEol),range:O.from(s.range)}}e.from=t;function i(s){const r=new Tn(O.to(s.range),s.text);return r.newEol=typeof s.eol>"u"?void 0:Ec.to(s.eol),r}e.to=i})(Vt||(Vt={}));var qi;(function(e){function t(s,r){const n={edits:[]};if(s instanceof Ro){const o=new dx;for(const a of s._allEntries())a._type===1&&x.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of s._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:kl(_.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:Vt.from(a.edit),versionId:o.has(a.uri)?void 0:r?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:O.from(a.range),text:a.edit.value,insertAsSnippet:!0,keepWhitespace:a.keepWhitespace},versionId:o.has(a.uri)?void 0:r?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:r?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:r?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(Sc.from)}})}return n}e.from=t;function i(s){const r=new Ro,n=new Ht;for(const o of s.edits)if(o.textEdit){const a=o,c=x.revive(a.resource),l=O.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let f;h?f=M0.replace(l,new Lo(u)):f=Tn.replace(l,u);const p=n.get(c);p?p.push(f):n.set(c,[f])}else r.renameFile(x.revive(o.oldResource),x.revive(o.newResource),o.options);for(const[o,a]of n)r.set(o,a);return r}e.to=i})(qi||(qi={}));var gs;(function(e){const t=Object.create(null);t[rt.File]=0,t[rt.Module]=1,t[rt.Namespace]=2,t[rt.Package]=3,t[rt.Class]=4,t[rt.Method]=5,t[rt.Property]=6,t[rt.Field]=7,t[rt.Constructor]=8,t[rt.Enum]=9,t[rt.Interface]=10,t[rt.Function]=11,t[rt.Variable]=12,t[rt.Constant]=13,t[rt.String]=14,t[rt.Number]=15,t[rt.Boolean]=16,t[rt.Array]=17,t[rt.Object]=18,t[rt.Key]=19,t[rt.Null]=20,t[rt.EnumMember]=21,t[rt.Struct]=22,t[rt.Event]=23,t[rt.Operator]=24,t[rt.TypeParameter]=25;function i(r){return typeof t[r]=="number"?t[r]:6}e.from=i;function s(r){for(const n in t)if(t[n]===r)return Number(n);return rt.Property}e.to=s})(gs||(gs={}));var Vr;(function(e){function t(s){switch(s){case nu.Deprecated:return 1}}e.from=t;function i(s){switch(s){case 1:return nu.Deprecated}}e.to=i})(Vr||(Vr={}));var qo;(function(e){function t(s){return{name:s.name,kind:gs.from(s.kind),tags:s.tags&&s.tags.map(Vr.from),containerName:s.containerName,location:Ai.from(s.location)}}e.from=t;function i(s){const r=new ou(s.name,gs.to(s.kind),s.containerName,Ai.to(s.location));return r.tags=s.tags&&s.tags.map(Vr.to),r}e.to=i})(qo||(qo={}));var _w;(function(e){function t(s){const r={name:s.name||"!!MISSING: name!!",detail:s.detail,range:O.from(s.range),selectionRange:O.from(s.selectionRange),kind:gs.from(s.kind),tags:s.tags?.map(Vr.from)??[]};return s.children&&(r.children=s.children.map(t)),r}e.from=t;function i(s){const r=new au(s.name,s.detail,gs.to(s.kind),O.to(s.range),O.to(s.selectionRange));return cl(s.tags)&&(r.tags=s.tags.map(Vr.to)),s.children&&(r.children=s.children.map(i)),r}e.to=i})(_w||(_w={}));var Go;(function(e){function t(s){const r=new F0(gs.to(s.kind),s.name,s.detail||"",x.revive(s.uri),O.to(s.range),O.to(s.selectionRange));return r._sessionId=s._sessionId,r._itemId=s._itemId,r}e.to=t;function i(s,r,n){if(r=r??s._sessionId,n=n??s._itemId,r===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:r,_itemId:n,name:s.name,detail:s.detail,kind:gs.from(s.kind),uri:s.uri,range:O.from(s.range),selectionRange:O.from(s.selectionRange),tags:s.tags?.map(Vr.from)}}e.from=i})(Go||(Go={}));var qw;(function(e){function t(i){return new P7(Go.to(i.from),i.fromRanges.map(s=>O.to(s)))}e.to=t})(qw||(qw={}));var Gw;(function(e){function t(i){return new D7(Go.to(i.to),i.fromRanges.map(s=>O.to(s)))}e.to=t})(Gw||(Gw={}));var Ai;(function(e){function t(s){return{range:s.range&&O.from(s.range),uri:s.uri}}e.from=t;function i(s){return new ns(x.revive(s.uri),O.to(s.range))}e.to=i})(Ai||(Ai={}));var Bu;(function(e){function t(s){const r=s,n=s;return{originSelectionRange:r.originSelectionRange?O.from(r.originSelectionRange):void 0,uri:r.targetUri?r.targetUri:n.uri,range:O.from(r.targetRange?r.targetRange:n.range),targetSelectionRange:r.targetSelectionRange?O.from(r.targetSelectionRange):void 0}}e.from=t;function i(s){return{targetUri:x.revive(s.uri),targetRange:O.to(s.range),targetSelectionRange:s.targetSelectionRange?O.to(s.targetSelectionRange):void 0,originSelectionRange:s.originSelectionRange?O.to(s.originSelectionRange):void 0}}e.to=i})(Bu||(Bu={}));var Hu;(function(e){function t(s){return{range:O.from(s.range),contents:xe.fromMany(s.contents),canIncreaseVerbosity:s.canIncreaseVerbosity,canDecreaseVerbosity:s.canDecreaseVerbosity}}e.from=t;function i(s){const r=s.contents.map(xe.to),n=O.to(s.range),o=s.canIncreaseVerbosity,a=s.canDecreaseVerbosity;return new Yf(r,n,o,a)}e.to=i})(Hu||(Hu={}));var Jw;(function(e){function t(s){return{range:O.from(s.range),expression:s.expression}}e.from=t;function i(s){return new hp(O.to(s.range),s.expression)}e.to=i})(Jw||(Jw={}));var _p;(function(e){function t(s){if(s instanceof dp)return{type:"text",range:O.from(s.range),text:s.text};if(s instanceof fp)return{type:"variable",range:O.from(s.range),variableName:s.variableName,caseSensitiveLookup:s.caseSensitiveLookup};if(s instanceof pp)return{type:"expression",range:O.from(s.range),expression:s.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function i(s){switch(s.type){case"text":return{range:O.to(s.range),text:s.text};case"variable":return{range:O.to(s.range),variableName:s.variableName,caseSensitiveLookup:s.caseSensitiveLookup};case"expression":return{range:O.to(s.range),expression:s.expression}}}e.to=i})(_p||(_p={}));var qp;(function(e){function t(s){return{frameId:s.frameId,stoppedLocation:O.from(s.stoppedLocation)}}e.from=t;function i(s){return new rw(s.frameId,O.to(s.stoppedLocation))}e.to=i})(qp||(qp={}));var bc;(function(e){function t(s){return{range:O.from(s.range),kind:s.kind}}e.from=t;function i(s){return new Zf(O.to(s.range),s.kind)}e.to=i})(bc||(bc={}));var Yw;(function(e){function t(s){return{uri:s.uri,highlights:s.highlights.map(bc.from)}}e.from=t;function i(s){return new Qf(x.revive(s.uri),s.highlights.map(bc.to))}e.to=i})(Yw||(Yw={}));var Zw;(function(e){function t(i){switch(i){case 1:return Ya.TriggerCharacter;case 2:return Ya.TriggerForIncompleteCompletions;case 0:default:return Ya.Invoke}}e.to=t})(Zw||(Zw={}));var Qw;(function(e){function t(i){return{triggerKind:Zw.to(i.triggerKind),triggerCharacter:i.triggerCharacter}}e.to=t})(Qw||(Qw={}));var Gp;(function(e){function t(s){switch(s){case hu.Deprecated:return 1}}e.from=t;function i(s){switch(s){case 1:return hu.Deprecated}}e.to=i})(Gp||(Gp={}));var Jp;(function(e){const t=new Map([[me.Method,0],[me.Function,1],[me.Constructor,2],[me.Field,3],[me.Variable,4],[me.Class,5],[me.Interface,7],[me.Struct,6],[me.Module,8],[me.Property,9],[me.Unit,12],[me.Value,13],[me.Constant,14],[me.Enum,15],[me.EnumMember,16],[me.Keyword,17],[me.Snippet,28],[me.Text,18],[me.Color,19],[me.File,20],[me.Reference,21],[me.Folder,23],[me.Event,10],[me.Operator,11],[me.TypeParameter,24],[me.Issue,26],[me.User,25]]);function i(n){return t.get(n)??9}e.from=i;const s=new Map([[0,me.Method],[1,me.Function],[2,me.Constructor],[3,me.Field],[4,me.Variable],[5,me.Class],[7,me.Interface],[6,me.Struct],[8,me.Module],[9,me.Property],[12,me.Unit],[13,me.Value],[14,me.Constant],[15,me.Enum],[16,me.EnumMember],[17,me.Keyword],[28,me.Snippet],[18,me.Text],[19,me.Color],[20,me.File],[21,me.Reference],[23,me.Folder],[10,me.Event],[11,me.Operator],[24,me.TypeParameter],[25,me.User],[26,me.Issue]]);function r(n){return s.get(n)??me.Property}e.to=r})(Jp||(Jp={}));var Xw;(function(e){function t(i,s){const r=new tp(i.label);return r.insertText=i.insertText,r.kind=Jp.to(i.kind),r.tags=i.tags?.map(Gp.to),r.detail=i.detail,r.documentation=Nr(i.documentation)?xe.to(i.documentation):i.documentation,r.sortText=i.sortText,r.filterText=i.filterText,r.preselect=i.preselect,r.commitCharacters=i.commitCharacters,We.isIRange(i.range)?r.range=O.to(i.range):typeof i.range=="object"&&(r.range={inserting:O.to(i.range.insert),replacing:O.to(i.range.replace)}),r.keepWhitespace=typeof i.insertTextRules>"u"?!1:!!(i.insertTextRules&1),typeof i.insertTextRules<"u"&&i.insertTextRules&4?r.insertText=new Lo(i.insertText):(r.insertText=i.insertText,r.textEdit=r.range instanceof $e?new Tn(r.range,r.insertText):void 0),i.additionalTextEdits&&i.additionalTextEdits.length>0&&(r.additionalTextEdits=i.additionalTextEdits.map(n=>Vt.to(n))),r.command=s&&i.command?s.fromInternal(i.command):void 0,r}e.to=t})(Xw||(Xw={}));var Yp;(function(e){function t(s){if(typeof s.label!="string"&&!Array.isArray(s.label))throw new TypeError("Invalid label");return{label:s.label,documentation:xe.fromStrict(s.documentation)}}e.from=t;function i(s){return{label:s.label,documentation:Nr(s.documentation)?xe.to(s.documentation):s.documentation}}e.to=i})(Yp||(Yp={}));var Zp;(function(e){function t(s){return{label:s.label,documentation:xe.fromStrict(s.documentation),parameters:Array.isArray(s.parameters)?s.parameters.map(Yp.from):[],activeParameter:s.activeParameter}}e.from=t;function i(s){return{label:s.label,documentation:Nr(s.documentation)?xe.to(s.documentation):s.documentation,parameters:Array.isArray(s.parameters)?s.parameters.map(Yp.to):[],activeParameter:s.activeParameter}}e.to=i})(Zp||(Zp={}));var zu;(function(e){function t(s){return{activeSignature:s.activeSignature,activeParameter:s.activeParameter,signatures:Array.isArray(s.signatures)?s.signatures.map(Zp.from):[]}}e.from=t;function i(s){return{activeSignature:s.activeSignature,activeParameter:s.activeParameter,signatures:Array.isArray(s.signatures)?s.signatures.map(Zp.to):[]}}e.to=i})(zu||(zu={}));var Kw;(function(e){function t(i,s){const r=new ep(Je.to(s.position),typeof s.label=="string"?s.label:s.label.map(eb.to.bind(void 0,i)),s.kind&&Qp.to(s.kind));return r.textEdits=s.textEdits&&s.textEdits.map(Vt.to),r.tooltip=Nr(s.tooltip)?xe.to(s.tooltip):s.tooltip,r.paddingLeft=s.paddingLeft,r.paddingRight=s.paddingRight,r}e.to=t})(Kw||(Kw={}));var eb;(function(e){function t(i,s){const r=new Kf(s.label);return r.tooltip=Nr(s.tooltip)?xe.to(s.tooltip):s.tooltip,Qv.is(s.command)&&(r.command=i.fromInternal(s.command)),s.location&&(r.location=Ai.to(s.location)),r}e.to=t})(eb||(eb={}));var Qp;(function(e){function t(s){return s}e.from=t;function i(s){return s}e.to=i})(Qp||(Qp={}));var Jo;(function(e){function t(s){return{range:O.from(s.range),url:s.target,tooltip:s.tooltip}}e.from=t;function i(s){let r;if(s.url)try{r=typeof s.url=="string"?x.parse(s.url,!0):x.revive(s.url)}catch{}const n=new sp(O.to(s.range),r);return n.tooltip=s.tooltip,n}e.to=i})(Jo||(Jo={}));var Xp;(function(e){function t(s){const r=new np(s.label);return s.textEdit&&(r.textEdit=Vt.to(s.textEdit)),s.additionalTextEdits&&(r.additionalTextEdits=s.additionalTextEdits.map(n=>Vt.to(n))),r}e.to=t;function i(s){return{label:s.label,textEdit:s.textEdit?Vt.from(s.textEdit):void 0,additionalTextEdits:s.additionalTextEdits?s.additionalTextEdits.map(r=>Vt.from(r)):void 0}}e.from=i})(Xp||(Xp={}));var yc;(function(e){function t(s){return new ic(s[0],s[1],s[2],s[3])}e.to=t;function i(s){return[s.red,s.green,s.blue,s.alpha]}e.from=i})(yc||(yc={}));var tb;(function(e){function t(s){return{range:O.from(s.range)}}e.from=t;function i(s){return new uu(O.to(s.range))}e.to=i})(tb||(tb={}));var Kp;(function(e){function t(i){switch(i){case 2:return Xa.AfterDelay;case 1:return Xa.Manual;case 3:case 4:return Xa.FocusOut}}e.to=t})(Kp||(Kp={}));var xc;(function(e){function t(s){switch(s){case Ns.Off:return 0;case Ns.Relative:return 2;case Ns.Interval:return 3;case Ns.On:default:return 1}}e.from=t;function i(s){switch(s){case 0:return Ns.Off;case 2:return Ns.Relative;case 3:return Ns.Interval;case 1:default:return Ns.On}}e.to=i})(xc||(xc={}));var Ec;(function(e){function t(s){if(s===Ls.CRLF)return 1;if(s===Ls.LF)return 0}e.from=t;function i(s){if(s===1)return Ls.CRLF;if(s===0)return Ls.LF}e.to=i})(Ec||(Ec={}));var eg;(function(e){function t(i){if(typeof i=="object")return i.viewId;switch(i){case Nn.SourceControl:return 3;case Nn.Window:return 10;case Nn.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(eg||(eg={}));var tg;(function(e){function t(s){const r={start:s.start+1,end:s.end+1};return s.kind&&(r.kind=ig.from(s.kind)),r}e.from=t;function i(s){const r={start:s.start-1,end:s.end-1};return s.kind&&(r.kind=ig.to(s.kind)),r}e.to=i})(tg||(tg={}));var ig;(function(e){function t(s){if(s)switch(s){case Br.Comment:return Ma.Comment;case Br.Imports:return Ma.Imports;case Br.Region:return Ma.Region}}e.from=t;function i(s){if(s)switch(s.value){case Ma.Comment.value:return Br.Comment;case Ma.Imports.value:return Br.Imports;case Ma.Region.value:return Br.Region}}e.to=i})(ig||(ig={}));var Wu;(function(e){function t(i){if(i)return{pinned:typeof i.preview=="boolean"?!i.preview:void 0,inactive:i.background,preserveFocus:i.preserveFocus,selection:typeof i.selection=="object"?O.from(i.selection):void 0,override:typeof i.override=="boolean"?LF.id:void 0}}e.from=t})(Wu||(Wu={}));var Gi;(function(e){function t(n){return n instanceof oc?n.toJSON():typeof n=="string"?n:i(n)||s(n)?new oc(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function i(n){const o=n;return o?x.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function s(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function r(n){return typeof n=="string"?n:new oc(x.revive(n.baseUri),n.pattern)}e.to=r})(Gi||(Gi={}));var ib;(function(e){function t(i){if(i){if(Array.isArray(i))return i.map(t);if(typeof i=="string")return i;{const s=i;return{language:s.language,scheme:s.scheme,pattern:Gi.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType}}}else return}e.from=t})(ib||(ib={}));var hr;(function(e){function t(s){return{start:s.start,end:s.end}}e.from=t;function i(s){return new Ms(s.start,s.end)}e.to=i})(hr||(hr={}));var kc;(function(e){function t(s){return{timing:typeof s.runStartTime=="number"&&typeof s.runEndTime=="number"?{startTime:s.runStartTime,endTime:s.runEndTime}:void 0,executionOrder:s.executionOrder,success:s.lastRunSuccess}}e.to=t;function i(s){return{lastRunSuccess:s.success,runStartTime:s.timing?.startTime,runEndTime:s.timing?.endTime,executionOrder:s.executionOrder}}e.from=i})(kc||(kc={}));var Vu;(function(e){function t(s){switch(s){case zo.Markup:return Ha.Markup;case zo.Code:default:return Ha.Code}}e.from=t;function i(s){switch(s){case Ha.Markup:return zo.Markup;case Ha.Code:default:return zo.Code}}e.to=i})(Vu||(Vu={}));var jn;(function(e){function t(s){const r={metadata:s.metadata??Object.create(null),cells:[]};for(const n of s.cells)wp.validate(n),r.cells.push(Sc.from(n));return r}e.from=t;function i(s){const r=new O7(s.cells.map(Sc.to));return vx(s.metadata)||(r.metadata=s.metadata),r}e.to=i})(jn||(jn={}));var Sc;(function(e){function t(s){return{cellKind:Vu.from(s.kind),language:s.languageId,mime:s.mime,source:s.value,metadata:s.metadata,internalMetadata:kc.from(s.executionSummary??{}),outputs:s.outputs?s.outputs.map(Bn.from):[]}}e.from=t;function i(s){return new wp(Vu.to(s.cellKind),s.source,s.language,s.mime,s.outputs?s.outputs.map(Bn.to):void 0,s.metadata,s.internalMetadata?kc.to(s.internalMetadata):void 0)}e.to=i})(Sc||(Sc={}));var Cc;(function(e){function t(s){return{mime:s.mime,valueBytes:_.wrap(s.data)}}e.from=t;function i(s){return new F7(s.valueBytes.buffer,s.mime)}e.to=i})(Cc||(Cc={}));var Bn;(function(e){function t(s){return{outputId:s.id,items:s.items.map(Cc.from),metadata:s.metadata}}e.from=t;function i(s){const r=s.items.map(Cc.to);return new bp(r,s.outputId,s.metadata)}e.to=i})(Bn||(Bn={}));var sg;(function(e){function t(r){return s(r)?{include:Gi.from(r.include)??void 0,exclude:Gi.from(r.exclude)??void 0}:Gi.from(r)??void 0}e.from=t;function i(r){return s(r)?{include:Gi.to(r.include),exclude:Gi.to(r.exclude)}:Gi.to(r)}e.to=i;function s(r){const n=r;return n?!Tt(n.include)&&!Tt(n.exclude):!1}})(sg||(sg={}));var sb;(function(e){function t(i,s,r){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{alignment:i.alignment===yp.Left?1:2,command:s.toInternal(n,r),text:i.text,tooltip:i.tooltip,accessibilityInformation:i.accessibilityInformation,priority:i.priority}}e.from=t})(sb||(sb={}));var rb;(function(e){function t(i,s,r){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{command:s.toInternal(n,r),label:i.label,description:i.description,detail:i.detail,documentation:i.documentation}}e.from=t})(rb||(rb={}));var nb;(function(e){function t(i){return{transientOutputs:i?.transientOutputs??!1,transientCellMetadata:i?.transientCellMetadata??{},transientDocumentMetadata:i?.transientDocumentMetadata??{},cellContentMetadata:i?.cellContentMetadata??{}}}e.from=t})(nb||(nb={}));var rg;(function(e){function t(s){return{uri:s.uri,provides:s.provides}}e.from=t;function i(s){return new U7(x.revive(s.uri),s.provides)}e.to=i})(rg||(rg={}));var $c;(function(e){function t(s){return{message:xe.fromStrict(s.message)||"",type:0,expected:s.expectedOutput,actual:s.actualOutput,contextValue:s.contextValue,location:s.location&&{range:O.from(s.location.range),uri:s.location.uri},stackTrace:s.stackTrace?.map(r=>({label:r.label,position:r.position&&Je.from(r.position),uri:r.uri&&x.revive(r.uri).toJSON()}))}}e.from=t;function i(s){const r=new Cp(typeof s.message=="string"?s.message:xe.to(s.message));return r.actualOutput=s.actual,r.expectedOutput=s.expected,r.contextValue=s.contextValue,r.location=s.location?Ai.to(s.location):void 0,r}e.to=i})($c||($c={}));var Us;(function(e){e.namespace=Of,e.denamespace=VC})(Us||(Us={}));var ob;(function(e){function t(i){return{controllerId:i.controllerId,profileId:i.profileId,group:Ic.from(i.kind)}}e.from=t})(ob||(ob={}));var Ic;(function(e){const t={[pc.Coverage]:8,[pc.Debug]:4,[pc.Run]:2};function i(s){return t.hasOwnProperty(s)?t[s]:2}e.from=i})(Ic||(Ic={}));var Hn;(function(e){function t(s){const r=Wf(s).controllerId;return{extId:Be.fromExtHostTestItem(s,r).toString(),label:s.label,uri:x.revive(s.uri),busy:s.busy,tags:s.tags.map(n=>Us.namespace(r,n.id)),range:We.lift(O.from(s.range)),description:s.description||null,sortText:s.sortText||null,error:s.error&&xe.fromStrict(s.error)||null}}e.from=t;function i(s){return{parent:void 0,error:void 0,id:Be.fromString(s.extId).localId,label:s.label,uri:x.revive(s.uri),tags:(s.tags||[]).map(r=>{const{tagId:n}=Us.denamespace(r);return new Pu(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:O.to(s.range||void 0),canResolveChildren:!1,busy:s.busy,description:s.description||void 0,sortText:s.sortText||void 0}}e.toPlain=i})(Hn||(Hn={})),function(e){function t(s){return{id:s.id}}e.from=t;function i(s){return new Pu(s.id)}e.to=i}(Us||(Us={}));var ab;(function(e){const t=(s,r)=>{const n=s.value;if(!n)return;const o={...Hn.toPlain(n.item),parent:r,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map($c.to)})),children:[]};if(s.children)for(const a of s.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function i(s){const r=new yF;for(const a of s.items)r.insert(Be.fromString(a.item.extId).path,a);const n=[r.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:s.completedAt,results:o.map(a=>t(a)).filter(Xi)}}e.to=i})(ab||(ab={}));var _u;(function(e){function t(a){return{covered:a.covered,total:a.total}}function i(a){return"line"in a?Je.from(a):O.from(a)}function s(a){if(a)return"endLineNumber"in a?O.to(a):Je.to(a)}function r(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:s(l.location),label:l.label});return new B7(a.count,s(a.location),a.branches?.map(l=>new H7(l.count,s(l.location),l.label)))}else return new z7(a.name,a.count,s(a.location))}e.to=r;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:i(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&i(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:i(a.location)}}e.fromDetails=n;function o(a,c,l){return Ip(l.statementCoverage),Ip(l.branchCoverage),Ip(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof Pp&&l.includesTests.length?l.includesTests.map(u=>Be.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(_u||(_u={}));var cb;(function(e){function t(i){switch(i){case 1:return cu.Invoke;case 2:return cu.Automatic}}e.to=t})(cb||(cb={}));var Yo;(function(e){function t(s){const r=new bw(gs.to(s.kind),s.name,s.detail||"",x.revive(s.uri),O.to(s.range),O.to(s.selectionRange));return r._sessionId=s._sessionId,r._itemId=s._itemId,r}e.to=t;function i(s,r,n){if(r=r??s._sessionId,n=n??s._itemId,r===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:r,_itemId:n,kind:gs.from(s.kind),name:s.name,detail:s.detail??"",uri:s.uri,range:O.from(s.range),selectionRange:O.from(s.selectionRange),tags:s.tags?.map(Vr.from)}}e.from=i})(Yo||(Yo={}));var ng;(function(e){function t(i){if(i)return{value:i.value,tooltip:i.tooltip}}e.from=t})(ng||(ng={}));var Zo;(function(e){function t(n,o,a){const c=o.fileData;return c?new xB(new EB(c.name,x.revive(c.uri),c.id,cd(()=>a(c.id)))):n===tr.uriList&&o.uriListData?new lp(r(o.uriListData)):new lp(o.asString)}e.to=t;async function i(n,o,a=ut()){const c=await o.asString();if(n===tr.uriList)return{id:a,asString:c,fileData:void 0,uriListData:s(c)};const l=o.asFile();return{id:a,asString:c,fileData:l?{name:l.name,uri:l.uri,id:l._itemId??l.id}:void 0}}e.from=i;function s(n){return Lv.split(n).map(o=>{if(o.startsWith("#"))return o;try{return x.parse(o)}catch{}return o})}function r(n){return Lv.create(n.map(o=>typeof o=="string"?o:x.revive(o)))}})(Zo||(Zo={}));var Pc;(function(e){function t(r,n){const o=r.items.map(([a,c])=>[a,Zo.to(a,c,n)]);return new rc(o)}e.toDataTransfer=t;async function i(r){return{items:await Promise.all(Array.from(r,async([o,a])=>[o,await Zo.from(o,a)]))}}e.from=i;async function s(r){return{items:await Promise.all(Array.from(r,async([o,a])=>[o,await Zo.from(o,a,a.id)]))}}e.fromList=s})(Pc||(Pc={}));var og;(function(e){function t(s,r){return{kind:"reply",agentId:s.participant??r?.agentId??"",subCommand:s.command??r?.command,message:s.prompt,title:s.label}}e.from=t;function i(s){return{prompt:s.message,label:s.title,participant:s.agentId,command:s.subCommand}}e.to=i})(og||(og={}));var Dc;(function(e){function t(s){switch(s){case 0:return _i.System;case 1:return _i.User;case 2:return _i.Assistant}}e.to=t;function i(s){switch(s){case _i.System:return 0;case _i.User:return 1;case _i.Assistant:return 2}return 1}e.from=i})(Dc||(Dc={}));var y9;(function(e){function t(s){const r=s.content.map(a=>{if(a.type==="text")return new Pt(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new Pt(l.value):new lr(l.value));return new jp(a.toolCallId,c,a.isError)}else{if(a.type==="image_url")return;if(a.type==="tool_use")return new _o(a.toolCallId,a.name,a.parameters)}}).filter(a=>a!==void 0),n=Dc.to(s.role);return new e9(n,r,s.name)}e.to=t;function i(s){const r=Dc.from(s.role),n=s.name;let o=s.content;typeof o=="string"&&(o=[new Pt(o)]);const a=o.map(c=>{if(c instanceof jp)return{type:"tool_result",toolCallId:c.callId,value:yt(c.content.map(l=>l instanceof Pt?{type:"text",value:l.value}:l instanceof lr?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof _o)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof Pt)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:r,name:n,content:a}}e.from=i})(y9||(y9={}));var qu;(function(e){function t(s){const r=s.content.map(a=>{if(a.type==="text")return new Pt(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new Pt(l.value):l.type==="data"?new Hr(l.value.data.buffer,l.value.mimeType):new lr(l.value));return new Lw(a.toolCallId,c,a.isError)}else return a.type==="image_url"?new Hr(a.value.data.buffer,a.value.mimeType):a.type==="data"?new Hr(a.data.buffer,a.mimeType):new _o(a.toolCallId,a.name,a.parameters)}),n=Dc.to(s.role);return new t9(n,r,s.name)}e.to=t;function i(s){const r=Dc.from(s.role),n=s.name;let o=s.content;typeof o=="string"&&(o=[new Pt(o)]);const a=o.map(c=>{if(c instanceof Lw||c instanceof jp)return{type:"tool_result",toolCallId:c.callId,value:yt(c.content.map(l=>l instanceof Pt?{type:"text",value:l.value}:l instanceof lr?{type:"prompt_tsx",value:l.value}:l instanceof Hr?{type:"data",value:{mimeType:l.mimeType,data:_.wrap(l.data)}}:void 0)),isError:c.isError};if(c instanceof Hr)return ZB(c)?{type:"image_url",value:{mimeType:c.mimeType,data:_.wrap(c.data)}}:{type:"data",mimeType:c.mimeType,data:_.wrap(c.data)};if(c instanceof _o)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof Pt)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type llm 2");return{type:"text",value:c}});return{role:r,name:n,content:a}}e.from=i})(qu||(qu={}));function ZB(e){switch(e.mimeType){case zr.PNG:case zr.JPEG:case zr.GIF:case zr.WEBP:case zr.BMP:return!0;default:return!1}}var Gu;(function(e){function t(s){return{kind:"markdownContent",content:xe.from(s.value)}}e.from=t;function i(s){return new Ap(xe.to(s.content))}e.to=i})(Gu||(Gu={}));var ag;(function(e){function t(s){return{kind:"codeblockUri",uri:s.value,isEdit:s.isEdit}}e.from=t;function i(s){return new Mp(x.revive(s.uri),s.isEdit)}e.to=i})(ag||(ag={}));var cg;(function(e){function t(s){return{kind:"markdownVuln",content:xe.from(s.value),vulnerabilities:s.vulnerabilities}}e.from=t;function i(s){return new Au(xe.to(s.content),s.vulnerabilities)}e.to=i})(cg||(cg={}));var lg;(function(e){function t(i){return{kind:"confirmation",title:i.title,message:i.message,data:i.data,buttons:i.buttons}}e.from=t})(lg||(lg={}));var Ju;(function(e){function t(s){const{value:r,baseUri:n}=s;function o(a,c){return a.map(l=>{const u=x.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:ts(n),uri:n,children:o(r,n)}}}e.from=t;function i(s){const r=Et(s.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=r.uri,a=r.children?n(r.children):[];return new Rp(a,o)}e.to=i})(Ju||(Ju={}));var Ac;(function(e){function t(s){const r=o=>x.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:s.title,inlineReference:r(s.value)?s.value:n(s.value)?qo.from(s.value):ur.from(s.value)}}e.from=t;function i(s){const r=Et(s);return new Tu(x.isUri(r.inlineReference)?r.inlineReference:"location"in r.inlineReference?qo.to(r.inlineReference):ur.to(r.inlineReference),s.name)}e.to=i})(Ac||(Ac={}));var Yu;(function(e){function t(s){return{kind:"progressMessage",content:xe.from(s.value)}}e.from=t;function i(s){return new Dw(s.content.value)}e.to=i})(Yu||(Yu={}));var Zu;(function(e){function t(s){return{kind:"warning",content:xe.from(s.value)}}e.from=t;function i(s){return new Ru(s.content.value)}e.to=i})(Zu||(Zu={}));var lb;(function(e){function t(i){return{kind:"extensions",extensions:i.extensions}}e.from=t})(lb||(lb={}));var ub;(function(e){function t(s){return{kind:"move",uri:s.uri,range:O.from(s.range)}}e.from=t;function i(s){return new Fp(x.revive(s.uri),O.to(s.range))}e.to=i})(ub||(ub={}));var Qu;(function(e){function t(s){return{kind:"prepareToolInvocation",toolName:s.toolName}}e.from=t;function i(s){return new Nu(s.toolName)}e.to=i})(Qu||(Qu={}));var ug;(function(e){function t(i){return{kind:"progressTask",content:xe.from(i.value)}}e.from=t})(ug||(ug={}));var hb;(function(e){function t(i){return{kind:"progressTaskResult",content:typeof i=="string"?xe.from(i):void 0}}e.from=t})(hb||(hb={}));var Xu;(function(e){function t(s,r,n){return{kind:"command",command:r.toInternal(s.value,n)??{command:s.value.command,title:s.value.title}}}e.from=t;function i(s,r){return new Np(r.fromInternal(s.command)??{command:s.command.id,title:s.command.title})}e.to=i})(Xu||(Xu={}));var hg;(function(e){function t(s){return{kind:"textEdit",uri:s.uri,edits:s.edits.map(r=>Vt.from(r)),done:s.isDone}}e.from=t;function i(s){const r=new Lu(x.revive(s.uri),s.edits.map(n=>Vt.to(n)));return r.isDone=s.done,r}e.to=i})(hg||(hg={}));var dg;(function(e){function t(i){return i.newCellMetadata?{editType:3,index:i.range.start,metadata:i.newCellMetadata}:i.newNotebookMetadata?{editType:5,metadata:i.newNotebookMetadata}:{editType:1,index:i.range.start,count:i.range.end-i.range.start,cells:i.newCells.map(Sc.from)}}e.from=t})(dg||(dg={}));var fg;(function(e){function t(i){return{kind:"notebookEdit",uri:i.uri,edits:i.edits.map(dg.from),done:i.isDone}}e.from=t})(fg||(fg={}));var Qo;(function(e){function t(s){const r=Ut.isThemeIcon(s.iconPath)?s.iconPath:x.isUri(s.iconPath)?{light:x.revive(s.iconPath)}:s.iconPath&&"light"in s.iconPath&&"dark"in s.iconPath&&x.isUri(s.iconPath.light)&&x.isUri(s.iconPath.dark)?{light:x.revive(s.iconPath.light),dark:x.revive(s.iconPath.dark)}:void 0;return typeof s.value=="object"&&"variableName"in s.value?{kind:"reference",reference:{variableName:s.value.variableName,value:x.isUri(s.value.value)||!s.value.value?s.value.value:ur.from(s.value.value)},iconPath:r,options:s.options}:{kind:"reference",reference:x.isUri(s.value)||typeof s.value=="string"?s.value:ur.from(s.value),iconPath:r,options:s.options}}e.from=t;function i(s){const r=Et(s),n=o=>x.isUri(o)?o:ur.to(o);return new Vo(typeof r.reference=="string"?r.reference:"variableName"in r.reference?{variableName:r.reference.variableName,value:r.reference.value&&n(r.reference.value)}:n(r.reference))}e.to=i})(Qo||(Qo={}));var pg;(function(e){function t(i){return{kind:"codeCitation",value:i.value,license:i.license,snippet:i.snippet}}e.from=t})(pg||(pg={}));var gg;(function(e){function t(r,n,o){return r instanceof Ap?Gu.from(r):r instanceof Tu?Ac.from(r):r instanceof Vo?Qo.from(r):r instanceof Dw?Yu.from(r):r instanceof Rp?Ju.from(r):r instanceof Np?Xu.from(r,n,o):r instanceof Lu?hg.from(r):r instanceof Up?fg.from(r):r instanceof Au?cg.from(r):r instanceof Mp?ag.from(r):r instanceof Ru?Zu.from(r):r instanceof Tp?lg.from(r):r instanceof Op?pg.from(r):r instanceof Fp?ub.from(r):r instanceof Aw?lb.from(r):r instanceof Nu?Qu.from(r):{kind:"markdownContent",content:xe.from("")}}e.from=t;function i(r,n){switch(r.kind){case"reference":return Qo.to(r);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return s(r,n)}}e.to=i;function s(r,n){switch(r.kind){case"markdownContent":return Gu.to(r);case"inlineReference":return Ac.to(r);case"progressMessage":return;case"treeData":return Ju.to(r);case"command":return Xu.to(r,n)}}e.toContent=s})(gg||(gg={}));var mg;(function(e){function t(i,s,r,n,o,a,c){const l=[],u=[];for(const f of i.variables.variables)f.kind==="tool"?l.push(f):f.kind==="toolset"?l.push(...f.value):u.push(f);const h={id:i.requestId,prompt:i.message,command:i.command,attempt:i.attempt??0,enableCommandDetection:i.enableCommandDetection??!0,isParticipantDetected:i.isParticipantDetected??!1,references:u.map(f=>wg.to(f,n,c)).filter(Xi),toolReferences:l.map(Ku.to),location:vg.to(i.location),acceptedConfirmationData:i.acceptedConfirmationData,rejectedConfirmationData:i.rejectedConfirmationData,location2:s,toolInvocationToken:Object.freeze({sessionId:i.sessionId}),tools:o,model:r,editedFileEvents:i.editedFileEvents,modeInstructions:i.modeInstructions};return tt(a,"chatParticipantPrivate")||(delete h.id,delete h.attempt,delete h.enableCommandDetection,delete h.isParticipantDetected,delete h.location,delete h.location2,delete h.editedFileEvents),tt(a,"chatParticipantAdditions")||(delete h.acceptedConfirmationData,delete h.rejectedConfirmationData,delete h.tools),h}e.to=t})(mg||(mg={}));var db;(function(e){function t(i){return{prompt:i.prompt,files:i.files.map(s=>x.revive(s))}}e.to=t})(db||(db={}));var vg;(function(e){function t(s){switch(s){case hi.Notebook:return Os.Notebook;case hi.Terminal:return Os.Terminal;case hi.Panel:return Os.Panel;case hi.Editor:return Os.Editor}}e.to=t;function i(s){switch(s){case Os.Notebook:return hi.Notebook;case Os.Terminal:return hi.Terminal;case Os.Panel:return hi.Panel;case Os.Editor:return hi.Editor}}e.from=i})(vg||(vg={}));var wg;(function(e){function t(i,s,r){let n=i.value;if(!n){let o;try{o=JSON.stringify(i)}catch{o=`kind=${i.kind}, id=${i.id}, name=${i.name}`}r.error(`[ChatPromptReference] Ignoring invalid reference in variable: ${o}`);return}if(kd(n))n=x.revive(n);else if(n&&typeof n=="object"&&"uri"in n&&"range"in n&&kd(n.uri))n=ur.to(Et(n));else if(Aj(i)){const o=i.references?.[0]?.reference;n=new X7(i.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(i.value))),o&&x.isUri(o)?o:void 0)}else if(i.kind==="diagnostic"){const o=i.filterSeverity&&ju.to(i.filterSeverity),a=i.filterUri&&x.revive(i.filterUri).toString();n=new K7(s.map(([c,l])=>i.filterUri&&c.toString()!==a?[c,[]]:[c,l.filter(u=>!(o&&u.severity>o||i.filterRange&&!We.areIntersectingOrTouching(i.filterRange,O.from(u.range))))]).filter(([,c])=>c.length>0))}return{id:i.id,name:i.name,range:i.range&&[i.range.start,i.range.endExclusive],value:n,modelDescription:i.modelDescription}}e.to=t})(wg||(wg={}));var Ku;(function(e){function t(i){if(i.value)throw new Error("Invalid tool reference");return{name:i.id,range:i.range&&[i.range.start,i.range.endExclusive]}}e.to=t})(Ku||(Ku={}));var fb;(function(e){function t(i,s,r){return{id:i.id,label:i.label,fullName:i.fullName,icon:i.icon?.id,value:i.values[0].value,insertText:i.insertText,detail:i.detail,documentation:i.documentation,command:s.toInternal(i.command,r)}}e.from=t})(fb||(fb={}));var Tc;(function(e){function t(r){return{errorDetails:r.errorDetails,metadata:s(r.metadata),nextQuestion:r.nextQuestion}}e.to=t;function i(r){return{errorDetails:r.errorDetails,metadata:r.metadata,nextQuestion:r.nextQuestion}}e.from=i;function s(r){return Pa(r,n=>{if(n.$mid===20)return new Bp(Pa(n.content,s));if(n.$mid===21)return new Pt(n.value);if(n.$mid===22)return new lr(n.value)})}})(Tc||(Tc={}));var pb;(function(e){function t(i,s,r){if(s.action.kind==="vote")return;const n=Tc.to(i);if(s.action.kind==="command"){const o=s.action.commandButton.command;return{action:{kind:"command",commandButton:{command:r.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return s.action.kind==="followUp"?{action:{kind:"followUp",followup:og.to(s.action.followup)},result:n}:s.action.kind==="inlineChat"?{action:{kind:"editor",accepted:s.action.action==="accepted"},result:n}:s.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:new Map([["accepted",Wo.Accepted],["rejected",Wo.Rejected],["saved",Wo.Saved]]).get(s.action.outcome)??Wo.Rejected,uri:x.revive(s.action.uri),hasRemainingEdits:s.action.hasRemainingEdits},result:n}:{action:s.action,result:n}}e.to=t})(pb||(pb={}));var bg;(function(e){function t(i,s,r){return"terminalCommand"in i?{terminalCommand:i.terminalCommand,shouldExecute:i.shouldExecute}:"uri"in i?{uri:i.uri}:s.toInternal(i,r)}e.from=t})(bg||(bg={}));var yg;(function(e){function t(i){return{...i,documentation:xe.fromStrict(i.documentation)}}e.from=t})(yg||(yg={}));var gb;(function(e){function t(i){return Array.isArray(i)?{items:i.map(s=>yg.from(s))}:{items:i.items.map(s=>yg.from(s)),resourceRequestConfig:i.resourceRequestConfig?mb.from(i.resourceRequestConfig):void 0}}e.from=t})(gb||(gb={}));var mb;(function(e){function t(i){return{...i,pathSeparator:Fe?"\\":"/",cwd:i.cwd?x.revive(i.cwd):void 0}}e.from=t})(mb||(mb={}));var vb;(function(e){function t(i){return{kind:wb.to(i.kind),acceptedLength:i.acceptedLength}}e.to=t})(vb||(vb={}));var wb;(function(e){function t(i){switch(i){case 0:return Mo.Word;case 1:return Mo.Line;case 2:return Mo.Suggest;default:return Mo.Unknown}}e.to=t})(wb||(wb={}));var bb;(function(e){function t(i,s){if(i.kind===ef.Ignored){const r=i.supersededBy?s(i.supersededBy):void 0;return{kind:Qa.Ignored,supersededBy:r,userTypingDisagreed:i.userTypingDisagreed}}else if(i.kind===ef.Accepted)return{kind:Qa.Accepted};return{kind:Qa.Rejected}}e.to=t})(bb||(bb={}));var yb;(function(e){function t(i,s){return{id:s,label:i.label,description:i.description,canEdit:i.canEdit,collapsibleState:i.collapsibleState||0,contextValue:i.contextValue}}e.from=t})(yb||(yb={}));var x9;(function(e){function t(i){return{name:i.id,description:i.modelDescription,inputSchema:i.inputSchema,tags:i.tags??[]}}e.to=t})(x9||(x9={}));var E9;(function(e){function t(s){return new Bp(s.content.map(r=>r.kind==="text"?new Pt(r.value):new lr(r.value)))}e.to=t;function i(s,r){return s.toolResultMessage&&L(r,"chatParticipantPrivate"),{content:s.content.map(n=>{if(n instanceof Pt)return{kind:"text",value:n.value};if(n instanceof lr)return{kind:"promptTsx",value:n.value};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:xe.fromStrict(s.toolResultMessage),toolResultDetails:s.toolResultDetails?.map(n=>x.isUri(n)?n:ur.from(n))}}e.from=i})(E9||(E9={}));var xg;(function(e){function t(s){return new i9(s.content.map(r=>{if(r.kind==="text")return new Pt(r.value);if(r.kind==="data"){const n=Object.values(zr).includes(r.value.mimeType)?r.value.mimeType:void 0;if(!n)throw new Error("Invalid MIME type");return new Hr(r.value.data.buffer,n)}else return new lr(r.value)}))}e.to=t;function i(s,r){s.toolResultMessage&&L(r,"chatParticipantPrivate");let n=!1;const o={content:s.content.map(a=>{if(a instanceof Pt)return{kind:"text",value:a.value};if(a instanceof lr)return{kind:"promptTsx",value:a.value};if(a instanceof Hr)return n=!0,{kind:"data",value:{mimeType:a.mimeType,data:_.wrap(a.data)}};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:xe.fromStrict(s.toolResultMessage),toolResultDetails:s.toolResultDetails?.map(a=>x.isUri(a)?a:ur.from(a))};return n?new bi(o):o}e.from=i})(xg||(xg={}));var xb;(function(e){function t(i){return i}e.fromThemeIcon=t})(xb||(xb={}));var Eb;(function(e){function t(s){return{query:s.query,kind:i(s.kind),settings:s.settings}}e.fromSettingsSearchResult=t;function i(s){switch(s){case Un.EMBEDDED:return Un.EMBEDDED;case Un.LLM_RANKED:return Un.LLM_RANKED;case Un.CANCELED:return Un.CANCELED;default:throw new Error("Unknown AiSettingsSearchResultKind")}}})(Eb||(Eb={}));var eh;(function(e){function t(s){return!!s.uri}function i(s){return Uu.toSerialized(t(s)?{type:2,uri:s.uri,headers:Object.entries(s.headers)}:{type:1,cwd:s.cwd?.fsPath,args:s.args,command:s.command,env:s.env,envFile:void 0})}e.from=i})(eh||(eh={}));var k9=class H5{constructor(t,i){this.line=t,this.character=i}isBefore(t){return!1}isBeforeOrEqual(t){return!1}isAfter(t){return!1}isAfterOrEqual(t){return!1}isEqual(t){return!1}compareTo(t){return 0}translate(t,i){return new H5(0,0)}with(t){return new H5(0,0)}},S9=class z5{constructor(t,i,s,r){this.isEmpty=!1,this.isSingleLine=!1,this.start=new k9(t,i),this.end=new k9(s,r)}contains(t){return!1}isEqual(t){return!1}intersection(t){}union(t){return new z5(0,0,0,0)}with(t){return new z5(0,0,0,0)}},_r=class{constructor(e,t,i){this.uri=e,this.ranges=t,this.previewText=i}},Eg=class{constructor(e,t,i){this.uri=e,this.text=t,this.lineNumber=i}},kb=class{constructor(e){this.keyword=e}},qr;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(qr||(qr={}));var kg;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(kg||(kg={}));var Sg=2e4,C9="\u27EA ",$9=" characters skipped \u27EB",QB=(C9.length+$9.length+5)*2,Dte=q("searchService"),I9;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(I9||(I9={}));var P9;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(P9||(P9={}));function Sb(e){return!!e.rangeLocations&&!!e.previewText}var D9;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(D9||(D9={}));var A9=class{constructor(e,t,i,s){this.rangeLocations=[],this.webviewIndex=s;const r=Array.isArray(t)?t:[t];if(i&&i.matchLines===1&&XB(r)){e=$R(e,i.matchLines);let n="",o=0,a=0;const c=Math.floor(i.charsPerLine/5);for(const l of r){const u=Math.max(l.startColumn-c,0),h=l.startColumn+i.charsPerLine;if(u>a+c+QB){const f=C9+(u-a)+$9;n+=f+e.slice(u,h),o+=u-(a+f.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new KB(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=ld(t,a=>({preview:new Cb(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function XB(e){const t=e[0].startLineNumber;for(const i of e)if(i.startLineNumber!==t||i.endLineNumber!==t)return!1;return!0}var Cb=class{constructor(e,t,i,s){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=s}},KB=class extends Cb{constructor(e,t,i){super(e,t,e,i)}},T9;(function(e){e.List="list",e.Tree="tree"})(T9||(T9={}));var R9;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(R9||(R9={}));var L9;(function(e){e.Auto="auto",e.Manual="manual",e.RunOnEmpty="runOnEmpty"})(L9||(L9={}));function eH(e,t=!0){const i=e&&e.files&&e.files.exclude,s=t&&e&&e.search&&e.search.exclude;if(!i&&!s)return;if(!i||!s)return i||s||void 0;let r=Object.create(null);return r=Pr(r,Qe(i)),r=Pr(r,Qe(s),!0),r}function N9(e,t){return e.excludePattern&&Ba(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&Ba(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(i=>{const s=i.folder.fsPath;if(lo(t,s)){const r=Ea(s,t);return!i.includePattern||!!Ba(i.includePattern,r)}else return!1}):!1:!0}var zn;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(zn||(zn={}));var Xo=class extends Error{constructor(e,t){super(e),this.code=t}};function M9(e){const t={message:e.message,code:e.code};return new Error(JSON.stringify(t))}function tH(e){return!!e.path}function $b(e,t,i=!0){const s=e.searchPath?e.searchPath:e.relativePath;return i?SR(s,t):Ba(t,s)}function Rc(e,t){const i={...e||{},...t||{}};return Object.keys(i).filter(s=>{const r=i[s];return typeof r=="boolean"&&r})}var O9=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(s=>({...e.excludePattern||{},...s.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(s=>Ds(s));let i=e.includePattern;t.includePattern&&(i?i={...i,...t.includePattern}:i=t.includePattern),i&&(this.c=Ds(i))}d(e,t,i){let s=null;for(const r of this.b){const n=r(e,t,i);if(typeof n=="string"){s=n;break}}return s}matchesExcludesSync(e,t,i){return!!(this.b&&this.d(e,t,i))}includedInQuerySync(e,t,i){return!(this.b&&this.d(e,t,i)||this.c&&!this.c(e,t,i))}includedInQuery(e,t,i){const s=()=>this.c?!!this.c(e,t,i):!0;return Promise.all(this.b.map(r=>{const n=r(e,t,i);return vn(n)?n.then(o=>o?!1:s()):s()})).then(r=>r.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>iH(t)||e,!1)}};function iH(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function sH(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(s=>s?F9(s):{})),t.then(s=>!!s[i]))}function Ib(e){if(!e)return;let t;return i=>{if(!t){const s=e();t=s?F9(s):{}}return!!t[i]}}function F9(e){const t={};for(const i of e)t[i]=!0;return t}function U9(e){return e.flatMap(t=>t.patterns.map(i=>t.baseUri?{baseUri:t.baseUri,pattern:i}:i))}var Pb={matchLines:100,charsPerLine:1e4},rH=!1,nH=class{constructor(e,t,i){this.id=e,this.dependencies=t,this.callback=i}},Ko;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(Ko||(Ko={}));var oH=class NA{static{this.INSTANCE=new NA}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=Ko.Uninitialized}g(){if(this.d===Ko.Uninitialized){if(globalThis.define){this.d=Ko.InitializedExternal;return}}else return;this.d=Ko.InitializedInternal,globalThis.define=(t,i,s)=>{typeof t!="string"&&(s=i,i=t,t=null),(typeof i!="object"||!Array.isArray(i))&&(s=i,i=null),this.c.push(new nH(t,i,s))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${G.vscodeFileResource}://${gE}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===Ko.InitializedExternal)return new Promise(o=>{const a=ut();globalThis.define(a,[t],function(c){o(c)})});const i=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!i){console.warn(`Did not receive a define call from script ${t}`);return}const s={},r=[],n=[];if(Array.isArray(i.dependencies))for(const o of i.dependencies)o==="exports"?r.push(s):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof i.callback=="function"?i.callback(...r)??s:i.callback}h(t){return new Promise((i,s)=>{const r=document.createElement("script");r.setAttribute("async","async"),r.setAttribute("type","text/javascript");const n=()=>{r.removeEventListener("load",o),r.removeEventListener("error",a)},o=c=>{n(),i(this.c.pop())},a=c=>{n(),s(c)};r.addEventListener("load",o),r.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),r.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(r)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),await import(t),this.c.pop()}async j(t){try{const i=(await import("fs")).default,s=(await import("vm")).default,r=(await import("module")).default,n=x.parse(t).fsPath,o=i.readFileSync(n).toString(),a=r.wrap(o.replace(/^#!.*/,""));return new s.Script(a).runInThisContext().apply(),this.c.pop()}catch(i){throw i}}},Db=new Map;async function Ab(e,t,i){i===void 0&&(i=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const s=t?`${e}/${t}`:e;if(Db.has(s))return Db.get(s);let r;if(/^\w[\w\d+.-]*:\/\//.test(s))r=s;else{const c=`${rH&&i&&!xa?ZR:YR}/${s}`;r=G1.asBrowserUri(c).toString(!0)}const n=oH.INSTANCE.load(r);return Db.set(s,n),n}var Cg="utf8",Tb="utf8bom",$g="utf16be",Ig="utf16le",Pg=[254,255],Rb=[255,254],th=[239,187,191],aH=512,cH=512,lH=512*8,uH=512*128,j9;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(j9||(j9={}));var hH=class extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}},dH=class MA{static async create(t){let i;if(t!==Cg)i=(await Ab("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getDecoder(B9(t));else{const s=new TextDecoder;i={write(r){return s.decode(r,{stream:!0})},end(){return s.decode()}}}return new MA(i)}constructor(t){this.a=t}write(t){return this.a.write(t)}end(){return this.a.end()}};function fH(e,t){const i=t.minBytesRequiredForDetection??t.guessEncoding?lH:cH;return new Promise((s,r)=>{const n=Dd(h=>h.join("")),o=[];let a=0,c;const l=new Ke,u=async()=>{try{const h=await kH({buffer:_.concat(o),bytesRead:a},t.guessEncoding,t.candidateGuessEncodings);if(h.seemsBinary&&t.acceptTextOnly)throw new hH("Stream is binary but only text is accepted for decoding",1);h.encoding=await t.overwriteEncoding(h.encoding),c=await dH.create(h.encoding);const f=c.write(_.concat(o).buffer);n.write(f),o.length=0,a=0,s({stream:n,detected:h})}catch(h){l.cancel(),n.destroy(),r(h)}};X1(e,{onData:async h=>{c?n.write(c.write(h.buffer)):(o.push(h),a+=h.byteLength,a>=i&&(e.pause(),await u(),setTimeout(()=>e.resume())))},onError:h=>n.error(h),onEnd:async()=>{c||await u(),n.end(c?.end())}},l.token)})}async function pH(e,t,i){const r=(await Ab("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getEncoder(B9(t),i);let n=!1,o=!1;return{read(){if(o)return null;const a=e.read();if(typeof a!="string"){if(o=!0,!n&&i?.addBOM)switch(t){case Cg:case Tb:return _.wrap(Uint8Array.from(th));case $g:return _.wrap(Uint8Array.from(Pg));case Ig:return _.wrap(Uint8Array.from(Rb))}const c=r.end();return c&&c.length>0?(n=!0,_.wrap(c)):null}return n=!0,_.wrap(r.write(a))}}}function B9(e){return e===Tb||e===null?Cg:e}function gH(e,t){if(!e||t<Pg.length)return null;const i=e.readUInt8(0),s=e.readUInt8(1);if(i===Pg[0]&&s===Pg[1])return $g;if(i===Rb[0]&&s===Rb[1])return Ig;if(t<th.length)return null;const r=e.readUInt8(2);return i===th[0]&&s===th[1]&&r===th[2]?Tb:null}var mH=["ascii","utf-16","utf-32"];async function vH(e,t){const i=await Ab("jschardet","dist/jschardet.min.js"),s=e.slice(0,uH),r=xH(s.buffer);t&&(t=yt(t.map(a=>yH(a))),t.length===0&&(t=void 0));let n;try{n=i.detect(r,t?{detectEncodings:t}:void 0)}catch{return null}if(!n||!n.encoding)return null;const o=n.encoding.toLowerCase();return 0<=mH.indexOf(o)?null:bH(n.encoding)}var wH={ibm866:"cp866",big5:"cp950"};function H9(e){return e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function bH(e){const t=H9(e);return wH[t]||t}function yH(e){const t=H9(e),i=SH[t];return i?i.guessableName:void 0}function xH(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}function EH(e){switch(e){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:{const t=e.match(/windows(\d+)/);return t?"windows-"+t[1]:e}}}function kH({buffer:e,bytesRead:t},i,s){let r=gH(e,t),n=!1;if(r!==$g&&r!==Ig&&e){let o=!0,a=!0,c=!1;for(let l=0;l<t&&l<aH;l++){const u=l%2===1,h=e.readUInt8(l)===0;if(h&&(c=!0),o&&(u&&!h||!u&&h)&&(o=!1),a&&(u&&h||!u&&!h)&&(a=!1),h&&!o&&!a)break}c&&(o?r=Ig:a?r=$g:n=!0)}return i&&!n&&!r&&e?vH(e.slice(0,t),s).then(o=>({seemsBinary:!1,encoding:o})):{seemsBinary:n,encoding:r}}var Lb={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},cp1125:{labelLong:"Cyrillic (CP 1125)",labelShort:"CP 1125",order:21,guessableName:"IBM1125"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:22,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:23,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:24},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:25},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:26,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:27,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:28,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:29,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:30},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:31},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:32},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:33},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:34},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:35},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:36},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:37,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:38},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:39,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:40,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:41,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:42},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:43},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:44},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:45},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:46,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:47},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:48}},SH=(()=>{const e={};for(const t in Lb)Lb[t].guessableName&&(e[t]=Lb[t]);return e})(),Ate=q("textFileService"),z9;(function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY"})(z9||(z9={}));var W9;(function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ORPHAN=4]="ORPHAN",e[e.ERROR=5]="ERROR"})(W9||(W9={}));var V9;(function(e){e[e.EDITOR=1]="EDITOR",e[e.REFERENCE=2]="REFERENCE",e[e.OTHER=3]="OTHER"})(V9||(V9={}));var _9;(function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"})(_9||(_9={}));function CH(e){let t=!1;return{read(){return t?null:(t=!0,e)}}}function ih(e,t,i){return new yl(s=>Nb(s,i)).isEqual(e,t)}function $H(e,t,i){return ih(e.uri,t.uri,i)?0:co(e.uri.toString(),t.uri.toString())}function IH(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:ih(e.uri,t.uri,i)?co(e.name,t.name):co(e.uri.toString(),t.uri.toString())}function q9(e,t,i,s){const r=e.slice(0).sort((o,a)=>i(o,a,s)),n=t.slice(0).sort((o,a)=>i(o,a,s));return eT(r,n,(o,a)=>i(o,a,s))}function Nb(e,t){const i=t.getCapabilities(e.scheme);return!(i&&i&1024)}var Mb=class W5 extends yO{static toExtHostWorkspace(t,i,s,r){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],f=i;i?a.forEach((b,E)=>{const k=x.revive(b.uri),I=W5.o(s||i,k,r);I?(I.name=b.name,I.index=b.index,h.push(I)):h.push({uri:k,name:b.name,index:E})}):h.push(...a.map(({uri:b,name:E,index:k})=>({uri:x.revive(b),name:E,index:k}))),h.sort((b,E)=>b.index<E.index?-1:1);const p=new W5(n,o,h,!!l,c?x.revive(c):null,!!u,b=>Nb(b,r)),{added:g,removed:v}=q9(f?f.workspaceFolders:[],p.workspaceFolders,$H,r);return{workspace:p,added:g,removed:v}}static o(t,i,s){for(let r=0;r<t.folders.length;r++){const n=t.workspaceFolders[r];if(ih(n.uri,i,s))return n}}constructor(t,i,s,r,n,o,a){super(t,s.map(c=>new Tv(c)),r,n,a),this.t=i,this.u=o,this.q=[],this.s=En.forUris(a,()=>!0),s.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,i){return i&&this.s.get(t)&&(t=xl(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},Ob=class{constructor(t,i,s,r,n){this.c=new D,this.onDidChangeWorkspace=this.c.event,this.g=new D,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new fl,this.D=new Map,this.h=r,this.s=s,this.t=n,this.j=new gO,this.k=new ds,this.o=t.getProxy(Z.MainThreadWorkspace),this.q=t.getProxy(Z.MainThreadMessageService);const o=i.workspace;this.l=o?new Mb(o.id,o.name,[],!!o.transient,o.configuration?x.revive(o.configuration):null,!!o.isUntitled,a=>Nb(a,s)):void 0}$initializeWorkspace(t,i){this.v=i,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?x.from({scheme:G.untitled,path:ts(xl(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,i,s,...r){const n=[];if(Array.isArray(r)&&r.forEach(u=>{x.isUri(u.uri)&&!n.some(h=>ih(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||Y1(u.uri)})}),this.n||[i,s].some(u=>typeof u!="number"||u<0)||s===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(i+s>o.length)return!1;const a=o.slice(0);a.splice(i,s,...n.map(u=>({uri:u.uri,name:u.name||Y1(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((f,p)=>p!==u&&ih(h.uri,f.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=q9(o,a,IH,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,i,s,n).then(void 0,h=>{this.n=void 0;const f={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(vO.Error,d(2913,null,u,h.toString()),f,[])})}return this.y(a),!0}getWorkspaceFolder(t,i){if(this.x)return this.x.getWorkspaceFolder(t,i)}async getWorkspaceFolder2(t,i){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,i)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,i){let s,r="";if(typeof t=="string"?(s=x.file(t),r=t):typeof t<"u"&&(s=t,r=t.fsPath),!s)return r;const n=this.getWorkspaceFolder(s,!0);if(!n)return r;typeof i>"u"&&this.x&&(i=this.x.folders.length>1);let o=wE(n.uri,s);return i&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=Mb.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:i,added:s,removed:r}=Mb.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=i||void 0,this.n=void 0,this.c.fire(Object.freeze({added:s,removed:r}))}findFiles(t,i,s,r,n=Ye.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${r.value}, entryPoint: findFiles`);let o="",a=!0;return i===null?a=!1:i!==void 0&&(typeof i=="string"?o=i:o=i.pattern),this.z({type:"include",value:t},{exclude:[o],maxResults:s,useExcludeSettings:a?qr.FilesExclude:qr.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,i={},s,r=Ye.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${s.value}, entryPoint: findFiles2New`),this.z({type:"filePatterns",value:t},i,r)}async z(t,i,s){if(s.isCancellationRequested)return Promise.resolve([]);const r=t.type==="include"?[t.value]:t.value??[];if(!Array.isArray(r))throw console.error("Invalid file pattern provided",r),new Error(`Invalid file pattern provided ${JSON.stringify(r)}`);const n=r.map(o=>{const a=G9(i.exclude),c={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===qr.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==qr.SearchAndFilesExclude,maxResults:i.maxResults,excludePattern:a.length>0?a:void 0,_reason:"startFileSearch",shouldGlobSearch:t.type==="include"?void 0:!0},l=Dg(Gi.from(o)),u=l?.folder;return t.type==="include"?c.includePattern=l?.pattern:c.filePattern=l?.pattern,{folder:u,options:c}});return this.A(n,s)}async A(t,i){return(await Promise.all(t?.map(r=>this.o.$startFileSearch(r.folder??null,r.options,i).then(n=>Array.isArray(n)?n.map(o=>x.revive(o)):[]))??[])).flat()}findTextInFiles2(t,i,s,r=Ye.None){this.h.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${s.value}, entryPoint: findTextInFiles2`);const n=f=>{if(!i)return{folder:void 0,options:{}};const p=f?Dg(Gi.from(f)):void 0,g=i.exclude?G9(i.exclude):void 0;return{options:{ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===qr.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==qr.SearchAndFilesExclude,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:i.previewOptions?{matchLines:i.previewOptions?.numMatchLines??100,charsPerLine:i.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:i.surroundingContext,includePattern:p?.pattern,excludePattern:g},folder:p?.folder}},a=(i?.include?.map(f=>n(f))??[n(void 0)]).filter(f=>!!f),c=new se,l=c.add(new D),u=this.findTextInFilesBase(t,a,(f,p)=>l.fire({result:f,uri:p}),r);return{results:new El(async f=>{c.add(l.event(p=>{const g=p.result,v=p.uri;Sb(g)?f.emitOne(new _r(v,g.rangeLocations.map(b=>({previewRange:new $e(b.preview.startLineNumber,b.preview.startColumn,b.preview.endLineNumber,b.preview.endColumn),sourceRange:new $e(b.source.startLineNumber,b.source.startColumn,b.source.endLineNumber,b.source.endColumn)})),g.previewText)):f.emitOne(new Eg(v,g.text,g.lineNumber))})),await u}),complete:u.then(f=>(c.dispose(),{limitHit:f?.limitHit??!1}))}}async findTextInFilesBase(t,i,s,r=Ye.None){const n=this.j.getNext();let o=!1;if(r.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=x.revive(a.resource);a.results.forEach(l=>{const u=Et(l);s(u,c)})},r.isCancellationRequested)return{};try{const a=await Promise.all(i?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,r)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,i,s,r,n=Ye.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${r.value}, entryPoint: findTextInFiles`);const o=typeof i.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:i.previewOptions,a=Dg(Gi.from(i.include)),c=typeof i.exclude=="string"?i.exclude:i.exclude?i.exclude.pattern:void 0,l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useGlobalIgnoreFiles=="boolean"?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof i.useParentIgnoreFiles=="boolean"?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof i.useDefaultExcludes=="boolean"?!i.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof i.useSearchExclude=="boolean"?!i.useSearchExclude:!0,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:o,surroundingContext:i.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,f)=>{Sb(h)?s({uri:f,preview:{text:h.previewText,matches:ld(h.rangeLocations,p=>new $e(p.preview.startLineNumber,p.preview.startColumn,p.preview.endLineNumber,p.preview.endColumn))},ranges:ld(h.rangeLocations,p=>new $e(p.source.startLineNumber,p.source.startColumn,p.source.endLineNumber,p.source.endColumn))}):s({uri:f,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,i){this.u[i]?.(t)}async save(t){const i=await this.o.$save(t,{saveAs:!1});return x.revive(i)}async saveAs(t){const i=await this.o.$save(t,{saveAs:!0});return x.revive(i)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,i){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,i);const s=this.t.transformOutgoingScheme(t),r=this.B++;return this.o.$registerEditSessionIdentityProvider(r,s),ie(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(r)})}async $getEditSessionIdentifier(t,i){this.h.info("Getting edit session identifier for workspaceFolder",t);const s=await this.resolveWorkspaceFolder(x.revive(t));if(!s){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",s);const r=this.w.get(s.uri.scheme);if(this.h.info(`Provider for scheme ${s.uri.scheme} is defined: `,!!r),!r)return;const n=await r.provideEditSessionIdentity(s,i);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,i,s,r){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(x.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(i,s,r);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(i,s,r)=>{const n=function(a){i.call(s,a)};return n.extension=t,this.C.event(n,void 0,r)}}async $onWillCreateEditSessionIdentity(t,i,s){const r=await this.resolveWorkspaceFolder(x.revive(t));if(r===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:r},i,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>s&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),i.isCancellationRequested}registerCanonicalUriProvider(t,i){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,i);const s=this.t.transformOutgoingScheme(t),r=this.B++;return this.o.$registerCanonicalUriProvider(r,s),ie(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(r)})}async provideCanonicalUri(t,i,s){const r=this.D.get(t.scheme);if(!r)return;const n=await r.provideCanonicalUri?.(x.revive(t),i,s);if(n)return n}async $provideCanonicalUri(t,i,s){return this.provideCanonicalUri(x.revive(t),{targetScheme:i},s)}async decode(t,i){const[s,r]=this.F(i),n=await this.o.$resolveDecoding(s,r),o=(await fH(IL(_.wrap(t)),{...n,acceptTextOnly:!0,overwriteEncoding:a=>a===null||a===n.preferredEncoding?Promise.resolve(n.preferredEncoding):this.o.$validateDetectedEncoding(s,a,r)})).stream;return TE(o,a=>a.join(""))}async encode(t,i){const[s,r]=this.F(i),{encoding:n,addBOM:o}=await this.o.$resolveEncoding(s,r);if(n===Cg&&!o)return _.fromString(t).buffer;const a=await pH(CH(t),n,{addBOM:o});return CL(a).buffer}F(t){const i=kd(t?.uri)?t.uri:void 0,s=typeof t?.encoding=="string"?t.encoding:void 0;return[i,s?{encoding:s}:void 0]}};Ob=__decorate([__param(0,Ae),__param(1,kt),__param(2,Ra),__param(3,De),__param(4,Ml)],Ob);var js=q("IExtHostWorkspace");function Dg(e){let t,i;if(e)return typeof e=="string"?t=e:(t=e.pattern,i=x.revive(e.baseUri)),{pattern:t,folder:i}}function G9(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const i=Dg(t);return i?{pattern:i.pattern,uri:i.folder}:void 0}})??[]).filter(t=>!!t)}var J9;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(J9||(J9={}));var Y9;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(Y9||(Y9={}));var Z9;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(Z9||(Z9={}));var Fb;(function(e){e.DEFAULT={allowTrailingComma:!0}})(Fb||(Fb={}));function PH(e,t=!1){let i=0;const s=e.length;let r="",n=0,o=16,a=0;function c(v){let b=0,E=0;for(;b<v;){const k=e.charCodeAt(i);if(k>=48&&k<=57)E=E*16+k-48;else if(k>=65&&k<=70)E=E*16+k-65+10;else if(k>=97&&k<=102)E=E*16+k-97+10;else break;i++,b++}return b<v&&(E=-1),E}function l(v){i=v,r="",n=0,o=16,a=0}function u(){const v=i;if(e.charCodeAt(i)===48)i++;else for(i++;i<e.length&&Lc(e.charCodeAt(i));)i++;if(i<e.length&&e.charCodeAt(i)===46)if(i++,i<e.length&&Lc(e.charCodeAt(i)))for(i++;i<e.length&&Lc(e.charCodeAt(i));)i++;else return a=3,e.substring(v,i);let b=i;if(i<e.length&&(e.charCodeAt(i)===69||e.charCodeAt(i)===101))if(i++,(i<e.length&&e.charCodeAt(i)===43||e.charCodeAt(i)===45)&&i++,i<e.length&&Lc(e.charCodeAt(i))){for(i++;i<e.length&&Lc(e.charCodeAt(i));)i++;b=i}else a=3;return e.substring(v,b)}function h(){let v="",b=i;for(;;){if(i>=s){v+=e.substring(b,i),a=2;break}const E=e.charCodeAt(i);if(E===34){v+=e.substring(b,i),i++;break}if(E===92){if(v+=e.substring(b,i),i++,i>=s){a=2;break}switch(e.charCodeAt(i++)){case 34:v+='"';break;case 92:v+="\\";break;case 47:v+="/";break;case 98:v+="\b";break;case 102:v+="\f";break;case 110:v+=`
`;break;case 114:v+="\r";break;case 116:v+="	";break;case 117:{const I=c(4);I>=0?v+=String.fromCharCode(I):a=4;break}default:a=5}b=i;continue}if(E>=0&&E<=31)if(Ag(E)){v+=e.substring(b,i),a=2;break}else a=6;i++}return v}function f(){if(r="",a=0,n=i,i>=s)return n=s,o=17;let v=e.charCodeAt(i);if(Ub(v)){do i++,r+=String.fromCharCode(v),v=e.charCodeAt(i);while(Ub(v));return o=15}if(Ag(v))return i++,r+=String.fromCharCode(v),v===13&&e.charCodeAt(i)===10&&(i++,r+=`
`),o=14;switch(v){case 123:return i++,o=1;case 125:return i++,o=2;case 91:return i++,o=3;case 93:return i++,o=4;case 58:return i++,o=6;case 44:return i++,o=5;case 34:return i++,r=h(),o=10;case 47:{const b=i-1;if(e.charCodeAt(i+1)===47){for(i+=2;i<s&&!Ag(e.charCodeAt(i));)i++;return r=e.substring(b,i),o=12}if(e.charCodeAt(i+1)===42){i+=2;const E=s-1;let k=!1;for(;i<E;){if(e.charCodeAt(i)===42&&e.charCodeAt(i+1)===47){i+=2,k=!0;break}i++}return k||(i++,a=1),r=e.substring(b,i),o=13}return r+=String.fromCharCode(v),i++,o=16}case 45:if(r+=String.fromCharCode(v),i++,i===s||!Lc(e.charCodeAt(i)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return r+=u(),o=11;default:for(;i<s&&p(v);)i++,v=e.charCodeAt(i);if(n!==i){switch(r=e.substring(n,i),r){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return r+=String.fromCharCode(v),i++,o=16}}function p(v){if(Ub(v)||Ag(v))return!1;switch(v){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function g(){let v;do v=f();while(v>=12&&v<=15);return v}return{setPosition:l,getPosition:()=>i,scan:t?g:f,getToken:()=>o,getTokenValue:()=>r,getTokenOffset:()=>n,getTokenLength:()=>i-n,getTokenError:()=>a}}function Ub(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Ag(e){return e===10||e===13||e===8232||e===8233}function Lc(e){return e>=48&&e<=57}var Q9;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(Q9||(Q9={}));function DH(e,t,i=Fb.DEFAULT){const s=PH(e,!1);function r(U){return U?()=>U(s.getTokenOffset(),s.getTokenLength()):()=>!0}function n(U){return U?Y=>U(Y,s.getTokenOffset(),s.getTokenLength()):()=>!0}const o=r(t.onObjectBegin),a=n(t.onObjectProperty),c=r(t.onObjectEnd),l=r(t.onArrayBegin),u=r(t.onArrayEnd),h=n(t.onLiteralValue),f=n(t.onSeparator),p=r(t.onComment),g=n(t.onError),v=i&&i.disallowComments,b=i&&i.allowTrailingComma;function E(){for(;;){const U=s.scan();switch(s.getTokenError()){case 4:k(14);break;case 5:k(15);break;case 3:k(13);break;case 1:v||k(11);break;case 2:k(12);break;case 6:k(16);break}switch(U){case 12:case 13:v?k(10):p();break;case 16:k(1);break;case 15:case 14:break;default:return U}}}function k(U,Y=[],he=[]){if(g(U),Y.length+he.length>0){let re=s.getToken();for(;re!==17;){if(Y.indexOf(re)!==-1){E();break}else if(he.indexOf(re)!==-1)break;re=E()}}}function I(U){const Y=s.getTokenValue();return U?h(Y):a(Y),E(),!0}function B(){switch(s.getToken()){case 11:{let U=0;try{U=JSON.parse(s.getTokenValue()),typeof U!="number"&&(k(2),U=0)}catch{k(2)}h(U);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return E(),!0}function j(){return s.getToken()!==10?(k(3,[],[2,5]),!1):(I(!1),s.getToken()===6?(f(":"),E(),H()||k(4,[],[2,5])):k(5,[],[2,5]),!0)}function te(){o(),E();let U=!1;for(;s.getToken()!==2&&s.getToken()!==17;){if(s.getToken()===5){if(U||k(4,[],[]),f(","),E(),s.getToken()===2&&b)break}else U&&k(6,[],[]);j()||k(4,[],[2,5]),U=!0}return c(),s.getToken()!==2?k(7,[2],[]):E(),!0}function F(){l(),E();let U=!1;for(;s.getToken()!==4&&s.getToken()!==17;){if(s.getToken()===5){if(U||k(4,[],[]),f(","),E(),s.getToken()===4&&b)break}else U&&k(6,[],[]);H()||k(4,[],[4,5]),U=!0}return u(),s.getToken()!==4?k(8,[4],[]):E(),!0}function H(){switch(s.getToken()){case 3:return F();case 1:return te();case 10:return I(!0);default:return B()}}return E(),s.getToken()===17?i.allowEmptyContent?!0:(k(4,[],[]),!1):H()?(s.getToken()!==17&&k(9,[],[]),!0):(k(4,[],[]),!1)}function sh(e){return Object.isFrozen(e)?e:pk(e)}var Nc=class fa{static createEmptyModel(t){return new fa({},[],[],void 0,t)}constructor(t,i,s,r,n){this.b=t,this.c=i,this.d=s,this.raw=r,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw){const t=(Array.isArray(this.raw)?this.raw:[this.raw]).map(i=>{if(i instanceof fa)return i;const s=new AH("",this.f);return s.parseRaw(i),s.configurationModel});this.g=t.reduce((i,s)=>s===i?s:i.merge(s),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?mf(this.contents,t):this.contents}inspect(t,i){const s=this;return{get value(){return sh(s.rawConfiguration.getValue(t))},get override(){return i?sh(s.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return sh(i?s.rawConfiguration.override(i).getValue(t):s.rawConfiguration.getValue(t))},get overrides(){const r=[];for(const{contents:n,identifiers:o,keys:a}of s.rawConfiguration.overrides){const c=new fa(n,a,[],void 0,s.f).getValue(t);c!==void 0&&r.push({identifiers:o,value:c})}return r.length?sh(r):void 0}}}getOverrideValue(t,i){const s=this.j(i);return s?t?mf(s,t):s:void 0}getKeysForOverrideIdentifier(t){const i=[];for(const s of this.overrides)s.identifiers.includes(t)&&i.push(...s.keys);return va(i)}getAllOverrideIdentifiers(){const t=[];for(const i of this.overrides)t.push(...i.identifiers);return va(t)}override(t){let i=this.a.get(t);return i||(i=this.h(t),this.a.set(t,i)),i}merge(...t){const i=Qe(this.contents),s=Qe(this.overrides),r=[...this.keys],n=this.raw?Array.isArray(this.raw)?[...this.raw]:[this.raw]:[this];for(const o of t)if(n.push(...o.raw?Array.isArray(o.raw)?o.raw:[o.raw]:[o]),!o.isEmpty()){this.i(i,o.contents);for(const a of o.overrides){const[c]=s.filter(l=>Oi(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=va(c.keys)):s.push(Qe(a))}for(const a of o.keys)r.indexOf(a)===-1&&r.push(a)}return new fa(i,r,s,!n.length||n.every(o=>o instanceof fa)?void 0:n,this.f)}h(t){const i=this.j(t);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const s={};for(const r of va([...Object.keys(this.contents),...Object.keys(i)])){let n=this.contents[r];const o=i[r];o&&(typeof n=="object"&&typeof o=="object"?(n=Qe(n),this.i(n,o)):n=o),s[r]=n}return new fa(s,this.keys,this.overrides,void 0,this.f)}i(t,i){for(const s of Object.keys(i)){if(s in t&&St(t[s])&&St(i[s])){this.i(t[s],i[s]);continue}t[s]=Qe(i[s])}}j(t){let i=null,s=null;const r=n=>{n&&(s?this.i(s,n):s=Qe(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?i=n.contents:n.identifiers.includes(t)&&r(n.contents);return r(i),s}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,i){this.k(t,i,!0)}setValue(t,i){this.k(t,i,!1)}removeValue(t){const i=this.keys.indexOf(t);i!==-1&&(this.keys.splice(i,1),GU(this.contents,t),rr.test(t)&&this.overrides.splice(this.overrides.findIndex(s=>Oi(s.identifiers,Yl(t))),1))}k(t,i,s){if(_8(this.contents,t,i,r=>this.f.error(r)),s=s||this.keys.indexOf(t)===-1,s&&this.keys.push(t),rr.test(t)){const r=Yl(t),n={identifiers:r,keys:Object.keys(this.contents[t]),contents:p0(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Oi(a.identifiers,r));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},AH=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||Nc.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!Tt(e)){const i=this.h(e);this.parseRaw(i,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:i,keys:s,overrides:r,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new Nc(i,s,r,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},i=null,s=[];const r=[],n=[];function o(c){Array.isArray(s)?s.push(c):i!==null&&(s[i]=c)}const a={onObjectBegin:()=>{const c={};o(c),r.push(s),s=c,i=null},onObjectProperty:c=>{i=c},onObjectEnd:()=>{s=r.pop()},onArrayBegin:()=>{const c=[];o(c),r.push(s),s=c,i=null},onArrayEnd:()=>{s=r.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{DH(e,a),t=s[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const i=Xt.as(Io.Configuration).getConfigurationProperties(),s=this.j(e,i,!0,t);e=s.raw;const r=p0(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.m(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:r,keys:n,overrides:o,restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}j(e,t,i,s){let r=!1;if(!s?.scopes&&!s?.skipRestricted&&!s?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:r};const n={},o=[];for(const a in e)if(rr.test(a)&&i){const c=this.j(e[a],t,!1,s);n[a]=c.raw,r=r||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a];c?.restricted&&o.push(a),this.l(a,c,s)?n[a]=e[a]:r=!0}return{raw:n,restricted:o,hasExcludedProperties:r}}l(e,t,i){if(i.exclude?.includes(e))return!1;if(i.include?.includes(e))return!0;if(i.skipRestricted&&t?.restricted||i.skipUnregistered&&!t)return!1;const s=t?typeof t.scope<"u"?t.scope:4:void 0;return s===void 0||i.scopes===void 0?!0:i.scopes.includes(s)}m(e,t){const i=[];for(const s of Object.keys(e))if(rr.test(s)){const r={};for(const n in e[s])r[n]=e[s][n];i.push({identifiers:Yl(s),keys:Object.keys(r),contents:p0(r,t)})}return i}},TH=class{constructor(e,t,i,s,r,n,o,a,c,l,u,h,f){this.a=e,this.b=t,this.c=i,this.overrideIdentifiers=s,this.d=r,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=f}get value(){return sh(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},jb=class OA{constructor(t,i,s,r,n,o,a,c,l,u){this.j=t,this.l=i,this.m=s,this.n=r,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Ht,this.v=null}getValue(t,i,s){return this.w(t,i,s).getValue(t)}updateValue(t,i,s={}){let r;s.resource?(r=this.t.get(s.resource),r||(r=Nc.createEmptyModel(this.u),this.t.set(s.resource,r))):r=this.s,i===void 0?r.removeValue(t):r.setValue(t,i),s.resource||(this.h=null)}inspect(t,i,s){const r=this.w(t,i,s),n=this.A(i.resource,s),o=i.resource?this.t.get(i.resource)||this.s:this.s,a=new Set;for(const c of r.overrides)for(const l of c.identifiers)r.getOverrideValue(t,l)!==void 0&&a.add(l);return new TH(t,i,r.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,s?this.q:void 0,n||void 0,o)}keys(t){const i=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:i?i.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,i){this.r.set(t,i),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,i){const s=[];if(!i){const{added:r,updated:n,removed:o}=Wn(this.j,t);i=[...r,...n,...o]}for(const r of i)for(const n of Yl(r)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!wi(this.j.override(n).getValue(l),t.override(n).getValue(l)))];s.push([n,c])}return this.updateDefaultConfiguration(t),{keys:i,overrides:s}}compareAndUpdatePolicyConfiguration(t){const{added:i,updated:s,removed:r}=Wn(this.l,t),n=[...i,...s,...r];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:i,updated:s,removed:r,overrides:n}=Wn(this.applicationConfiguration,t),o=[...i,...s,...r];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:i,updated:s,removed:r,overrides:n}=Wn(this.localUserConfiguration,t),o=[...i,...s,...r];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:i,updated:s,removed:r,overrides:n}=Wn(this.remoteUserConfiguration,t),o=[...i,...s,...r];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:i,updated:s,removed:r,overrides:n}=Wn(this.workspaceConfiguration,t),o=[...i,...s,...r];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,i){const s=this.folderConfigurations.get(t),{added:r,updated:n,removed:o,overrides:a}=Wn(s,i),c=[...r,...n,...o];return(c.length||!s)&&this.updateFolderConfiguration(t,i),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const i=this.folderConfigurations.get(t);if(!i)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:s,updated:r,removed:n,overrides:o}=Wn(i,void 0);return{keys:[...s,...r,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){if(!this.v)if(this.p.isEmpty())this.v=this.n;else{const t=this.n.merge(this.p);this.v=new Nc(t.contents,t.keys,t.overrides,void 0,this.u)}return this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,i,s){let r=this.x(i,s);if(i.overrideIdentifier&&(r=r.override(i.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0){r=r.merge();for(const n of this.l.keys)r.setValue(n,this.l.getValue(n))}return r}x({resource:t},i){let s=this.y();if(i&&t){const r=i.getFolder(t);r&&(s=this.z(r.uri)||s);const n=this.t.get(t);n&&(s=s.merge(n))}return s}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let i=this.i.get(t);if(!i){const s=this.y(),r=this.r.get(t);r?(i=s.merge(r),this.i.set(t,i)):i=s}return i}A(t,i){if(i&&t){const s=i.getFolder(t);if(s)return this.r.get(s.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,i)=>{const{contents:s,overrides:r,keys:n}=this.r.get(i);return t.push([i,{contents:s,overrides:r,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(i=>t.add(i)),this.userConfiguration.keys.forEach(i=>t.add(i)),this.q.keys.forEach(i=>t.add(i)),this.r.forEach(i=>i.keys.forEach(s=>t.add(s))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.userConfiguration.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.q.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.r.forEach(i=>i.getAllOverrideIdentifiers().forEach(s=>t.add(s))),[...t.values()]}D(t){const i=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(s=>i.add(s)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(s=>i.add(s)),this.q.getKeysForOverrideIdentifier(t).forEach(s=>i.add(s)),this.r.forEach(s=>s.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r))),[...i.values()]}static parse(t,i){const s=this.E(t.defaults,i),r=this.E(t.policy,i),n=this.E(t.application,i),o=this.E(t.userLocal,i),a=this.E(t.userRemote,i),c=this.E(t.workspace,i),l=t.folders.reduce((u,h)=>(u.set(x.revive(h[0]),this.E(h[1],i)),u),new Ht);return new OA(s,r,n,o,a,c,l,Nc.createEmptyModel(i),new Ht,i)}static E(t,i){return new Nc(t.contents,t.keys,t.overrides,t.raw,i)}},RH=class{constructor(e,t,i,s,r){this.change=e,this.f=t,this.g=i,this.h=s,this.i=r,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=jb.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const i=this.a+e,s=this.d.indexOf(i);if(s<0)return!1;const r=s+i.length;if(r>=this.d.length)return!1;const n=this.d.charCodeAt(r);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!wi(o,a)}return!0}};function Wn(e,t){const{added:i,removed:s,updated:r}=X9(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=X9({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:i,removed:s,updated:r,overrides:n}}function X9(e,t){const i=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],s=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],r=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=mf(t.contents,n),a=mf(e.contents,n);wi(o,a)||r.push(n)}}return{added:i,removed:s,updated:r}}function Tg(e,t){if(t){const i=t.split(".");let s=e;for(let r=0;s&&r<i.length;r++)s=s[i[r]];return s}}function LH(e){return e instanceof x}function NH(e){return e&&e.uri instanceof x&&e.languageId&&typeof e.languageId=="string"}function MH(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function OH(e){return e&&e.uri instanceof x&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function K9(e){if(LH(e))return{resource:e};if(NH(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(MH(e))return{overrideIdentifier:e.languageId};if(OH(e))return{resource:e.uri};if(e===null)return{resource:null}}var Bb=class{constructor(t,i,s){this.a=t.getProxy(Z.MainThreadConfiguration),this.c=i,this.b=s,this.d=new ds,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new FH(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,i){this.getConfigProvider().then(s=>s.$acceptConfigurationChanged(t,i))}};Bb=__decorate([__param(0,Ae),__param(1,js),__param(2,De)],Bb);var FH=class{constructor(e,t,i,s){this.a=new D,this.b=e,this.f=s,this.c=t,this.e=jb.parse(i,s),this.d=this.k(i.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const i={data:this.e.toData(),workspace:this.c.workspace};this.e=jb.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,i))}getConfiguration(e,t,i){const s=K9(t)||{},r=this.g(this.e.getValue(e,s,this.c.workspace));e&&this.h(e,s,i?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case nc.Global:return 2;case nc.Workspace:return 5;case nc.WorkspaceFolder:return 6}}const o={has(a){return typeof Tg(r,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,s,i?.identifier);let l=Tg(r,a);if(typeof l>"u")l=c;else{let u;const h=(f,p)=>{if(St(f)){let g;const v=()=>{u=u||Qe(r),g=g||Tg(u,p)};return new Proxy(f,{get:(b,E)=>{if(typeof E=="string"&&E.toLowerCase()==="tojson")return v(),()=>g;if(u)return g=g||Tg(u,p),g[E];const k=b[E];return typeof E=="string"?h(k,`${p}.${E}`):k},set:(b,E,k)=>(v(),g&&(g[E]=k),!0),deleteProperty:(b,E)=>(v(),g&&delete g[E],!0),defineProperty:(b,E,k)=>(v(),g&&Object.defineProperty(g,E,k),!0)})}return Array.isArray(f)?Qe(f):f};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,s,u):this.b.$removeConfigurationOption(h,a,s,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,s,this.c.workspace);if(c)return{key:a,defaultValue:Qe(c.policy?.value??c.default?.value),globalLocalValue:Qe(c.userLocal?.value),globalRemoteValue:Qe(c.userRemote?.value),globalValue:Qe(c.user?.value??c.application?.value),workspaceValue:Qe(c.workspace?.value),workspaceFolderValue:Qe(c.workspaceFolder?.value),defaultLanguageValue:Qe(c.default?.override),globalLocalLanguageValue:Qe(c.userLocal?.override),globalRemoteLanguageValue:Qe(c.userRemote?.override),globalLanguageValue:Qe(c.user?.override??c.application?.override),workspaceLanguageValue:Qe(c.workspace?.override),workspaceFolderLanguageValue:Qe(c.workspaceFolder?.override),languageIds:Qe(c.overrideIdentifiers)}}};return typeof r=="object"&&Pr(o,r,!1),Object.freeze(o)}g(e){const t=i=>St(i)?new Proxy(i,{get:(s,r)=>t(s[r]),set:(s,r,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(r)}' of object`)},deleteProperty:(s,r)=>{throw new Error(`TypeError: Cannot delete read only property '${String(r)}' of object`)},defineProperty:(s,r)=>{throw new Error(`TypeError: Cannot define property '${String(r)}' for a readonly object`)},setPrototypeOf:s=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):i;return t(e)}h(e,t,i){const s=rr.test(e)?5:this.d.get(e),r=i?`[${i.value}] `:"";if(s===5){typeof t?.resource>"u"&&this.f.warn(`${r}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(s===4){t?.resource&&this.f.warn(`${r}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const i=new RH(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(s,r)=>i.affectsConfiguration(s,K9(r))})}k(e){return e.reduce((t,i)=>(t.set(i[0],i[1]),t),new Map)}},ms=q("IExtHostConfiguration"),UH=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},rh=class FA extends X{static isHostExtension(t,i,s){if(i.getExtensionDescription(t))return!1;const r=s.getExtensionDescription(t);return r?!!((r.main||r.browser)&&r.api==="none"):!1}constructor(t,i){super(),this.n=t,this.c=this.B(new D),this.onDidChange=this.c.event,this.f=0,this.g=i,this.r()}r(){this.g.sort(BH),this.h=new Tr,this.j=[],this.m=new Map;for(const t of this.g){if(this.h.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.h.set(t.identifier,t),this.j.push(t);const i=this.n.readActivationEvents(t);for(const s of i)this.m.has(s)||this.m.set(s,[]),this.m.get(s).push(t)}}set(t){return this.g=t,this.r(),this.f++,this.c.fire(void 0),{versionId:this.f}}deltaExtensions(t,i){this.g=t$(this.g,i),this.g=this.g.concat(t);const s=FA.s(this.g);return this.g=t$(this.g,s.map(r=>r.identifier)),this.r(),this.f++,this.c.fire(void 0),new UH(this.f,s)}static s(t){const i=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=i.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},s=new Tr;for(const a of t)if(s.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)i.addArc(qe.toKey(a.identifier),qe.toKey(c));const r=new Set;i.getNodes().filter(a=>i.getArcs(a).length===0).forEach(a=>r.add(a));const n=i.getNodes().filter(a=>!r.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];i.hasOnlyGoodArcs(c,r)&&(n.splice(a,1),a--,r.add(c),o=!0)}}while(o);return n.map(a=>s.get(a))}containsActivationEvent(t){return this.m.has(t)}containsExtension(t){return this.h.has(t)}getExtensionDescriptionsForActivationEvent(t){const i=this.m.get(t);return i?i.slice(0):[]}getAllExtensionDescriptions(){return this.j.slice(0)}getSnapshot(){return new jH(this.f,this.getAllExtensionDescriptions())}getExtensionDescription(t){const i=this.h.get(t);return i||void 0}getExtensionDescriptionByUUID(t){for(const i of this.j)if(i.uuid===t)return i}getExtensionDescriptionByIdOrUUID(t,i){return this.getExtensionDescription(t)??(i?this.getExtensionDescriptionByUUID(i):void 0)}},jH=class{constructor(e,t){this.versionId=e,this.extensions=t}},e$;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(e$||(e$={}));function BH(e,t){const i=e.isBuiltin?0:e.isUnderDevelopment?2:1,s=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(i!==s)return i-s;const r=je.basename(e.extensionLocation.path),n=je.basename(t.extensionLocation.path);return r<n?-1:r>n?1:0}function t$(e,t){const i=new vo(t);return e.filter(s=>!i.has(s.identifier))}var Rg=class UA{static{this.NONE=new UA(!1,-1,-1,-1)}constructor(t,i,s,r){this.startup=t,this.codeLoadingTime=i,this.activateCallTime=s,this.activateResolvedTime=r}},Hb=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new Rg(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},Lg=class{constructor(e,t,i,s,r,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=s,this.exports=r,this.disposable=n}},HH=class extends Lg{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,X.None)}},zH=class extends Lg{constructor(){super(!1,null,Rg.NONE,{activate:void 0,deactivate:void 0},void 0,X.None)}},Ng=class extends Lg{constructor(e){super(!0,e,Rg.NONE,{activate:void 0,deactivate:void 0},void 0,X.None)}},zb=class{constructor(t,i,s,r){this.g=r,this.a=t,this.b=i,this.c=s,this.d=new Tr,this.f=Object.create(null)}dispose(){for(const[t,i]of this.d)i.dispose()}async waitForActivatingExtensions(){const t=[];for(const[i,s]of this.d)t.push(s.wait());await Promise.all(t)}isActivated(t){const i=this.d.get(t);return!!(i&&i.value)}getActivatedExtension(t){const i=this.d.get(t);if(!i||!i.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return i.value}async activateByEvent(t,i){if(this.f[t])return;const s=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(s.map(r=>({id:r.identifier,reason:{startup:i,extensionId:r.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,i){const s=this.a.getExtensionDescription(t);if(!s)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:s.identifier,reason:i}])}async h(t){const i=t.filter(s=>!this.isActivated(s.id)).map(s=>this.j(s));await Promise.all(i.map(s=>s.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const i=this.a.getExtensionDescription(t.id);if(!i){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new Ng(n));return this.c.onExtensionActivationError(t.id,n,new m7(t.id.value)),o}const s=[],r=typeof i.extensionDependencies>"u"?[]:i.extensionDependencies;for(const n of r){if(this.m(n))continue;const o=this.d.get(n);if(o){s.push(o);continue}if(this.l(n)){s.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;s.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=i.displayName||i.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,i.displayName,[],new Ng(l));return this.c.onExtensionActivationError(i.identifier,l,new m7(n)),u}return this.k(t,i.displayName,s,null)}k(t,i,s,r){const n=new Wb(t.id,i,t.reason,s,r,this.c,this.g);return this.d.set(t.id,n),n}l(t){return rh.isHostExtension(t,this.a,this.b)}m(t){const i=this.b.getExtensionDescription(t);return i?!i.main&&!i.browser:!1}};zb=__decorate([__param(3,De)],zb);var Wb=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,i,s,r,n,o,a){this.c=t,this.d=i,this.f=s,this.g=r,this.h=n,this.j=o,this.k=a,this.a=new ds,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const i=this.g[t];if(i.value&&!i.value.activationFailed){this.g.splice(t,1),t--;continue}if(i.value&&i.value.activationFailed){const s=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${i.friendlyName}' failed to activate`);s.detail=i.value.activationFailedError,this.h=new Ng(s),this.j.onExtensionActivationError(this.c,s,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const i=new Error;if(t&&t.name&&(i.name=t.name),t&&t.message?i.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:i.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(i.stack=t.stack),this.h=new Ng(i),this.b&&Ei(t))return;this.j.onExtensionActivationError(this.c,i,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};Wb=__decorate([__param(6,De)],Wb);var i$=class{constructor(e,t){this.c=t,this.b=new D,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(Z.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const s=await this.a.$initializeExtensionStorage(e,t);let r;return s&&(r=this.d(e,t,s)),r||i}setValue(e,t,i){return this.a.$setValue(e,t,i)}$acceptValue(e,t,i){const s=this.d(e,t,i);s&&this.b.fire({shared:e,key:t,value:s})}d(e,t,i){try{return JSON.parse(i)}catch(s){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${s}`)}}},Vb=q("IExtHostStorage"),s$=class{constructor(e,t,i){this.h=new Map,this.a=e,this.b=t,this.c=i,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(s=>(this.f=s,this)),this.g=this.c.onDidChangeStorage(s=>{s.shared===this.b&&s.key===this.a&&(this.f=s.value)}),this.i=new Zs(()=>{const s=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const r of s.values())r.complete()}catch(r){for(const n of s.values())n.error(r)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let i=this.f[e];return typeof i>"u"&&(i=t),i}update(e,t){t!==null&&typeof t=="object"?this.f[e]=JSON.parse(JSON.stringify(t)):this.f[e]=t;const i=this.h.get(e);if(i!==void 0)return i.p;const s=new is;return this.h.set(e,s),this.i.isScheduled()||this.i.schedule(),s.p}dispose(){this.g.dispose()}},WH=class extends s${setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},dr,_b=dr=class{constructor(t,i){this.b=new Map,this.c=new SE,this.a=t.getProxy(Z.MainThreadFileSystem);const s=this;this.value=Object.freeze({async stat(r){try{let n;const o=s.b.get(r.scheme);return o?(await s.a.$ensureActivation(r.scheme),n=await o.impl.stat(r)):n=await s.a.$stat(r),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===kn.Readonly?1:void 0}}catch(n){dr.e(n)}},async readDirectory(r){try{const n=s.b.get(r.scheme);return n?(await s.a.$ensureActivation(r.scheme),(await n.impl.readDirectory(r)).slice()):await s.a.$readdir(r)}catch(n){return dr.e(n)}},async createDirectory(r){try{const n=s.b.get(r.scheme);return n&&!n.isReadonly?(await s.a.$ensureActivation(r.scheme),await s.d(n.impl,n.extUri,r)):await s.a.$mkdir(r)}catch(n){return dr.e(n)}},async readFile(r){try{const n=s.b.get(r.scheme);return n?(await s.a.$ensureActivation(r.scheme),(await n.impl.readFile(r)).slice()):(await s.a.$readFile(r)).buffer}catch(n){return dr.e(n)}},async writeFile(r,n){try{const o=s.b.get(r.scheme);return o&&!o.isReadonly?(await s.a.$ensureActivation(r.scheme),await s.d(o.impl,o.extUri,o.extUri.dirname(r)),await s.c.queueFor(r,()=>Promise.resolve(o.impl.writeFile(r,n,{create:!0,overwrite:!0})))):await s.a.$writeFile(r,_.wrap(n))}catch(o){return dr.e(o)}},async delete(r,n){try{const o=s.b.get(r.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await s.a.$ensureActivation(r.scheme),await o.impl.delete(r,{recursive:!1,...n})):await s.a.$delete(r,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return dr.e(o)}},async rename(r,n,o){try{return await s.a.$rename(r,n,{overwrite:!1,...o})}catch(a){return dr.e(a)}},async copy(r,n,o){try{return await s.a.$copy(r,n,{overwrite:!1,...o})}catch(a){return dr.e(a)}},isWritableFileSystem(r){const n=i.getCapabilities(r);if(typeof n=="number")return!(n&2048)}})}async d(t,i,s){const r=[];for(;!i.isEqual(s,i.dirname(s));)try{if(((await t.stat(s)).type&zi.Directory)===0)throw zt.FileExists(`Unable to create folder '${s.scheme===G.file?s.fsPath:s.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(nf(n)!==pe.FileNotFound)throw n;r.push(i.basename(s)),s=i.dirname(s)}for(let n=r.length-1;n>=0;n--){s=i.joinPath(s,r[n]);try{await t.createDirectory(s)}catch(o){if(nf(o)!==pe.FileExists)throw o}}}static e(t){if(t instanceof zt)throw t;if(t instanceof rf)switch(t.code){case pe.FileExists:throw zt.FileExists(t.message);case pe.FileNotFound:throw zt.FileNotFound(t.message);case pe.FileNotADirectory:throw zt.FileNotADirectory(t.message);case pe.FileIsADirectory:throw zt.FileIsADirectory(t.message);case pe.NoPermissions:throw zt.NoPermissions(t.message);case pe.Unavailable:throw zt.Unavailable(t.message);default:throw new zt(t.message,t.name)}if(!(t instanceof Error))throw new zt(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw zt.Unavailable(t.message);switch(t.name){case pe.FileExists:throw zt.FileExists(t.message);case pe.FileNotFound:throw zt.FileNotFound(t.message);case pe.FileNotADirectory:throw zt.FileNotADirectory(t.message);case pe.FileIsADirectory:throw zt.FileIsADirectory(t.message);case pe.NoPermissions:throw zt.NoPermissions(t.message);case pe.Unavailable:throw zt.Unavailable(t.message);default:throw new zt(t.message,t.name)}}addFileSystemProvider(t,i,s){return this.b.set(t,{impl:i,extUri:s?.isCaseSensitive?Ge:XR,isReadonly:!!s?.isReadonly}),ie(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??Ge}};_b=dr=__decorate([__param(0,Ae),__param(1,Ra)],_b);var nh=q("IExtHostConsumerFileSystem"),qb=q("IExtensionStoragePaths"),Gb=class{constructor(t,i,s){this.d=i,this.f=s,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(r=>this.c=r)}async g(t){return x.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,i=await this.g(t);try{return await this.f.value.stat(i),this.d.trace("[ExtHostStorage] storage dir already exists",i),i}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",i),await this.f.value.createDirectory(i),await this.f.value.writeFile(x.joinPath(i,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:x.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),i}catch(s){this.d.error("[ExtHostStorage]",s);return}}workspaceValue(t){if(this.c)return x.joinPath(this.c,t.identifier.value)}globalValue(t){return x.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};Gb=__decorate([__param(0,kt),__param(1,De),__param(2,nh)],Gb);var VH=q("tunnelService"),Fte=q("sharedTunnelsService"),vs;(function(e){e.Http="http",e.Https="https"})(vs||(vs={}));var fr;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(fr||(fr={}));function _H(e){return!!e.forwardPort}var Vn;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Vn||(Vn={}));function qH(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var oh=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function ea(e){return oh.indexOf(e)>=0}var Mg=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function Gr(e){return Mg.indexOf(e)>=0}function GH(e,t,i,s){if(i===1)return!1;if(i===2&&Gr(t)){const r=/(\d+)\.(\d+)\.(\d+)/g.exec(s);if(r?.length===4&&parseInt(r[1])>=18)return!1}return e<1024}var JH=class{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this.b=i,this.a=new D,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},Jb=class extends X{constructor(t,i){super(),this.r=t,this.s=i,this.a=new D,this.onTunnelOpened=this.a.event,this.b=new D,this.onTunnelClosed=this.b.event,this.c=new D,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],i=Array.from(this.f.values());for(const s of i){const r=Array.from(s.values());for(const n of r){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:i}of t.values())await i.then(s=>typeof s!="string"?s?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,i,s,r,n){this.z(t,i,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:i,localAddress:s,privacy:r,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,i){(Gr(t)||ea(t))&&(t=oh[0]);const s=this.D(t,i);if(s)return++s.refcount,s.value}openTunnel(t,i,s,r,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${i}:${s} on local port ${n}.`);const l=this.g??t;if(!l)return;if(i||(i="localhost"),r||(r=this.t),this.g&&this.n.has(s)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,i,s,r,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(i,s),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(i,s);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const f=this.w(h);return(h.tunnelRemoteHost!==i||h.tunnelRemotePort!==s)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(f),f}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const i=this.f.get(t.tunnelRemoteHost);if(i){const s=i.get(t.tunnelRemotePort);s&&(s.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,s))}}}}async y(t,i,s){if(s.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${i}.`);const r=s.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(i),r}}async closeTunnel(t,i){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${i} `);const s=this.f.get(t);if(s&&s.has(i)){const r=s.get(i);r.refcount=0,await this.y(t,i,r)}}z(t,i,s){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(i,{refcount:1,value:s})}async C(t,i){const s=this.f.get(t);if(s){const r=s.get(i),n=r?await r.value:void 0;(!n||typeof n=="string")&&s.delete(i),s.size===0&&this.f.delete(t)}}D(t,i){const s=[t];ea(t)?(s.push(...oh),s.push(...Mg)):Gr(t)&&s.push(...Mg);const r=s.map(n=>this.f.get(n));for(const n of r){const o=n?.get(i);if(o)return o}}canTunnel(t){return!!qH(t)}G(t,i,s,r,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${i}:${s} on local port ${r}.`);const c=s;this.n.add(c);const l=r===void 0?s:r,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:i,port:s},localAddressPort:r,privacy:o,public:o?o!==fr.Private:void 0,protocol:a},f=t.forwardPort(h,u);return f?(this.z(i,s,f),f.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),f}};Jb=__decorate([__param(0,De),__param(1,Fr)],Jb);var YH=class extends JH{},Yb;(function(e){function t(s){return{remoteAddress:s.remoteAddress,localAddress:s.localAddress,public:!!s.public,privacy:s.privacy??(s.public?fr.Public:fr.Private),protocol:s.protocol}}e.fromApiTunnel=t;function i(s){return{remoteAddress:{host:s.tunnelRemoteHost,port:s.tunnelRemotePort},localAddress:s.localAddress,public:s.privacy!==fr.ConstantPrivate&&s.privacy!==fr.ConstantPrivate,privacy:s.privacy,protocol:s.protocol}}e.fromServiceTunnel=i})(Yb||(Yb={}));var Og=q("IExtHostTunnelService"),Fg=class extends X{constructor(t,i,s){super(),this.s=s,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new D,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(Z.MainThreadTunnelService)}async openTunnel(t,i){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${i.remoteAddress.host}:${i.remoteAddress.port}.`);const s=await this.a.$openTunnel(i,t.displayName);if(s){const r=new YH(s.remoteAddress,s.localAddress,()=>this.a.$closeTunnel(s.remoteAddress));return this.B(r),r}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,i){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const s=this.u();return this.r.set(s,{selector:t,provider:i}),this.a.$registerPortsAttributesProvider(t,s),new Le(()=>{this.r.delete(s),this.a.$unregisterPortsAttributesProvider(s)})}async $providePortAttributes(t,i,s,r,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(i.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:s,commandLine:r},n)}catch{h=await l.provider.providePortAttributes(u,s,r,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,i){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(r,n)=>await t.provideTunnel(r,n,Ye.None)??void 0;const s=i.tunnelFeatures?{elevation:!!i.tunnelFeatures?.elevation,privacyOptions:i.tunnelFeatures?.privacyOptions,protocol:i.tunnelFeatures.protocol===void 0?!0:i.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(s,!0),Promise.resolve(ie(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,i){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const s=t.tunnelFactory??(i?this.w(i):void 0);if(s){this.b=s;let r=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&r.length===0&&(r=[{id:"private",label:d(2911,null),themeIcon:"lock"},{id:"public",label:d(2912,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:r,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return ie(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,i){if(this.g.has(t.host)){const s=this.g.get(t.host);s.has(t.port)&&(i&&s.get(t.port).disposeListener.dispose(),await s.get(t.port).tunnel.dispose(),s.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,i){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const s=this.b(t,i);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),s!==void 0){const r=await s;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),r===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(r.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(r.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:r,disposeListener:n}),Yb.fromApiTunnel(r)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(s){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),s instanceof Error)return s.message}}async $applyCandidateFilter(t){const i=await Promise.all(t.map(r=>this.f(r.host,r.port,r.detail??""))),s=t.filter((r,n)=>i[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(r=>r.port).join(", ")} to ${s.map(r=>r.port).join(", ")}`),s}};Fg=__decorate([__param(0,Ae),__param(1,kt),__param(2,De)],Fg);function ZH(e){return[...e.entries()]}function QH(e){return e?[...e.entries()]:[]}var XH=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,i=5){const s=t(r=>{const n=typeof r=="string"?r:r.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),i);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),s.dispose()}},this.a.set(e,o)});return s}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},ta=(e,t,i,s)=>{let r=t;return{enumerable:!0,configurable:!1,get(){return r},set(n){if(!i(r,n)){const o=r;r=n,e.listener?.(s(n,o))}}}},Mc=(e,t)=>e===t,_n={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:Mc,description:Mc,sortText:Mc,busy:Mc,error:Mc,canResolveChildren:Mc,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.find(s=>i.id===s.id)))},Oc=e=>t=>({op:4,update:e(t)}),KH=(e,t)=>({range:(()=>{let i;const s=Oc(r=>({range:We.lift(O.from(r))}));return{enumerable:!0,configurable:!1,get(){return i},set(r){e.listener?.({op:6}),_n.range(i,r)||(i=r,e.listener?.(s(r)))}}})(),label:ta(e,t,_n.label,Oc(i=>({label:i}))),description:ta(e,void 0,_n.description,Oc(i=>({description:i}))),sortText:ta(e,void 0,_n.sortText,Oc(i=>({sortText:i}))),canResolveChildren:ta(e,!1,_n.canResolveChildren,i=>({op:2,state:i})),busy:ta(e,!1,_n.busy,Oc(i=>({busy:i}))),error:ta(e,void 0,_n.error,Oc(i=>({error:xe.fromStrict(i)||null}))),tags:ta(e,[],_n.tags,(i,s)=>({op:1,new:i.map(Us.from),old:s.map(Us.from)}))}),ez=e=>{const t=Be.fromString(e.extId),i=new ah(t.controllerId,t.localId,e.label,x.revive(e.uri)||void 0);return i.range=O.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map(s=>Us.to({id:VC(s).tagId})),i},r$=e=>{let t;for(const i of e.tests){const s=ez(i.item);Wf(s).parent=t,t=s}return t},ah=class jA{constructor(t,i,s,r){if(i.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(i)} symbol`);const n=lB(this,t);Object.defineProperties(this,{id:{value:i,enumerable:!0,writable:!1},uri:{value:r,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof Zb?void 0:n.parent}},children:{value:cB(n,Wf,jA),enumerable:!0,writable:!1},...KH(n,s)})}},Zb=class extends ah{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},tz=class extends nB{constructor(e,t,i){super({controllerId:e,getDocumentVersion:s=>s&&i.getDocument(s)?.version,getApiFor:Wf,getChildren:s=>s.children,root:new Zb(e,t),toITestItem:Hn.from})}},ch;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(ch||(ch={}));var n$;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(n$||(n$={}));var o$;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(o$||(o$={}));function a$(e){const t=_.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function iz(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var c$;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(c$||(c$={}));var Qb=class extends X{constructor(t,i,s){super(),this.n=i,this.a=this.B(new D),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new D),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.h=!1,this.m=new Map,this.h=this.n.environment.isExtensionTelemetryLoggingOnly;const r=i.remote.isRemote?"remoteExtHostTelemetry":t?"workerExtHostTelemetry":"extHostTelemetry";this.j=this.B(s.createLogger(r,{name:d(2908,null,this.h?" (Not Sent)":""),hidden:!0,group:qj}))}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,i,s){const r=this.getTelemetryDetails(),n=new l$(i,s,t,this.j,this.h,this.getBuiltInCommonProperties(t),{isUsageEnabled:r.isUsageEnabled,isErrorsEnabled:r.isErrorsEnabled}),o=this.m.get(t.identifier.value)??[];return this.m.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,i,s){this.f=t,this.c=s??{usage:!0,error:!0}}getBuiltInCommonProperties(t){const i=Object.create(null);switch(i["common.extname"]=`${t.publisher}.${t.name}`,i["common.extversion"]=t.version,i["common.vscodemachineid"]=this.n.telemetryInfo.machineId,i["common.vscodesessionid"]=this.n.telemetryInfo.sessionId,i["common.vscodecommithash"]=this.n.commit,i["common.sqmid"]=this.n.telemetryInfo.sqmId,i["common.devDeviceId"]=this.n.telemetryInfo.devDeviceId,i["common.vscodeversion"]=this.n.version,i["common.isnewappinstall"]=u$(this.n.telemetryInfo.firstSessionDate),i["common.product"]=this.n.environment.appHost,this.n.uiKind){case ch.Web:i["common.uikind"]="web";break;case ch.Desktop:i["common.uikind"]="desktop";break;default:i["common.uikind"]="unknown"}return i["common.remotename"]=gv(Jj(this.n.remote.authority)),i}$onDidChangeTelemetryLevel(t){this.g=this.getTelemetryConfiguration(),this.f=t;const i=this.getTelemetryDetails();this.m.forEach((s,r)=>{const n=s.filter(o=>!o.isDisposed);n.length===0?this.m.delete(r):this.m.set(r,n)}),this.m.forEach(s=>{for(const r of s)r.updateTelemetryEnablements(i.isUsageEnabled,i.isErrorsEnabled)}),this.g!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails())}onExtensionError(t,i){const r=this.m.get(t.value)?.filter(o=>!o.isDisposed);if(!r)return this.m.delete(t.value),!1;let n=!1;for(const o of r)o.ignoreUnhandledExtHostErrors||(o.logError(i),n=!0);return n}};Qb=__decorate([__param(1,kt),__param(2,xn)],Qb);var l$=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,s,r,n,o){this.g=i,this.h=s,this.i=r,this.j=n,this.a=new D,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=g7(t,[]),this.c&&(t=Pr(t,this.c)),this.b||(t=Pr(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},s=g7(i,[]),r=new Error(s.message,{cause:s.cause});r.stack=s.stack,r.name=s.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(r,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function u$(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var Ug=q("IExtHostTelemetry"),Xb=class{#e;#t;#i;constructor(t,i,s){this.b=new Map,this.c=new Map,this.#e=t.getProxy(Z.MainThreadCommands),this.d=i,this.#i=s,this.#t=t.getProxy(Z.MainThreadTelemetry),this.converter=new sz(this,r=>{const n=this.c.get(r);return n?.result===ve.Void?n:void 0},i),this.f=[{processArgument(r){return Et(r)}},{processArgument(r){return Pa(r,function(n){if(We.isIRange(n))return O.to(n);if(rs.isIPosition(n))return Je.to(n);if(We.isIRange(n.range)&&x.isUri(n.uri))return Ai.to(n);if(n instanceof _)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const i=this.registerCommand(!1,t.id,async(...s)=>{const r=t.args.map((o,a)=>{if(!o.validate(s[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof s[a]=="object"?JSON.stringify(s[a],null,"	"):s[a]} `);return o.convert(s[a])}),n=await this.executeCommand(t.internalId,...r);return t.result.convert(n,s,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Le(()=>{i.dispose(),this.c.delete(t.id)})}registerCommand(t,i,s,r,n,o){if(this.d.trace("ExtHostCommands#registerCommand",i),!i.trim().length)throw new Error("invalid id");if(this.b.has(i))throw new Error(`command '${i}' already exists`);return this.b.set(i,{callback:s,thisArg:r,metadata:n,extension:o}),t&&this.#e.$registerCommand(i),new Le(()=>{this.b.delete(i)&&t&&this.#e.$unregisterCommand(i)})}executeCommand(t,...i){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,i,!0)}async g(t,i,s){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,i,!1);{let r=!1;const n=Pa(i,function(o){if(o instanceof Ne)return Je.from(o);if(o instanceof $e)return O.from(o);if(o instanceof ns)return Ai.from(o);if(Ms.isNotebookRange(o))return hr.from(o);if(o instanceof ArrayBuffer)return r=!0,_.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return r=!0,_.wrap(o);if(o instanceof _)return r=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,r?new bi(n):n,s);return Et(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,i,!1);throw o}}}async h(t,i,s){const r=this.b.get(t);if(!r)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=r;if(a?.args)for(let l=0;l<a.args.length;l++)try{bx(i[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=Fi.create();try{return await n.apply(o,i)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...i);u&&(t=u.command)}if(Ei(l)||this.d.error(l,t,r.extension?.identifier),!s)throw l;if(r.extension?.identifier){const u=this.#i.onExtensionError(r.extension.identifier,l);this.d.trace("forwarded error to extension?",u,r.extension?.identifier)}throw new class extends Error{constructor(){super(Ks(l)),this.id=t,this.source=r.extension?.displayName??r.extension?.name}}}finally{this.j(r,t,c.elapsed())}}j(t,i,s){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new C0(i),duration:s})}$executeContributedCommand(t,...i){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const s=this.b.get(t);return s?(i=i.map(r=>this.f.reduce((n,o)=>o.processArgument(n,s.extension),r)),this.h(t,i,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(i=>(t&&(i=i.filter(s=>s[0]!=="_")),i))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[i,s]of this.b){const{metadata:r}=s;r&&(t[i]=r)}return Promise.resolve(t)}};Xb=__decorate([__param(0,Ae),__param(1,De),__param(2,Ug)],Xb);var Bs=q("IExtHostCommands"),sz=class{constructor(e,t,i){this.d=e,this.f=t,this.g=i,this.delegatingCommandId=`__vsc${ut()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const s=this.f(e.command);if(s)i.id=s.internalId,i.arguments=s.args.map((r,n)=>r.convert(e.arguments&&e.arguments[n]));else if(cl(e.arguments)){const r=`${e.command} /${++this.c}`;this.b.set(r,e),t.add(ie(()=>{this.b.delete(r),this.g.trace("CommandsConverter#DISPOSE",r)})),i.$ident=r,i.id=this.delegatingCommandId,i.arguments=[r],this.g.trace("CommandsConverter#CREATE",e.command,r)}return i}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},z=class Yi{static{this.Uri=new Yi("uri","Uri of a text document",t=>x.isUri(t),t=>t)}static{this.Position=new Yi("position","A position in a text document",t=>Ne.isPosition(t),Je.from)}static{this.Range=new Yi("range","A range in a text document",t=>$e.isRange(t),O.from)}static{this.Selection=new Yi("selection","A selection in a text document",t=>jr.isSelection(t),Fs.from)}static{this.Number=new Yi("number","",t=>typeof t=="number",t=>t)}static{this.String=new Yi("string","",t=>typeof t=="string",t=>t)}static Arr(t){return new Yi(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,i=>Array.isArray(i)&&i.every(s=>t.validate(s)),i=>i.map(s=>t.convert(s)))}static{this.CallHierarchyItem=new Yi("item","A call hierarchy item",t=>t instanceof F0,Go.from)}static{this.TypeHierarchyItem=new Yi("item","A type hierarchy item",t=>t instanceof bw,Yo.from)}static{this.TestItem=new Yi("testItem","A VS Code TestItem",t=>t instanceof ah,Hn.from)}static{this.TestProfile=new Yi("testProfile","A VS Code test profile",t=>t instanceof j7,ob.from)}constructor(t,i,s,r){this.name=t,this.description=i,this.validate=s,this.convert=r}optional(){return new Yi(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,i){return new Yi(t??this.name,i??this.description,this.validate,this.convert)}},ve=class BA{static{this.Void=new BA("no result",t=>t)}constructor(t,i){this.description=t,this.convert=i}},be=class{constructor(e,t,i,s,r){this.id=e,this.internalId=t,this.description=i,this.args=s,this.result=r}},Jr=q("IExtHostTerminalService"),Kb=class extends X{constructor(e,t,i,s){super(),this.u=e,this._id=t,this.w=i,this.y=s,this.a=!1,this.m={isInteractedWith:!1,shell:void 0},this.isOpen=!1,this.s=this.B(new D),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const r=this;this.value={get name(){return r.y||""},get processId(){return r.b},get creationOptions(){return r.w},get exitStatus(){return r.j},get state(){return r.m},get selection(){return r.n},get shellIntegration(){return r.shellIntegration},sendText(n,o=!0){r.C(),r.u.$sendText(r._id,n,o)},show(n){r.C(),r.u.$show(r._id,n)},hide(){r.C(),r.u.$hide(r._id)},dispose(){r.a||(r.a=!0,r.u.$dispose(r._id))},get dimensions(){if(!(r.f===void 0||r.h===void 0))return{columns:r.f,rows:r.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:d$(e.iconPath)??void 0,color:La.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,i,s,r){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:s,color:La.isThemeColor(r)?r.id:void 0,location:t?.location||this.z(e,i),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:Wt.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={...this.m,isInteractedWith:!0},!0)}setShellType(e){return this.m.shell!==e?(this.m={...this.m,shell:e},!0):!1}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},ey=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new D,this.onProcessData=this.a.event,this.b=new D,this.d=new D,this.onDidChangeProperty=this.d.event,this.f=new D,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},rz=1,jg=class extends X{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,i,s){super(),this.R=i,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new Js),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new Map,this.I=new D,this.onDidCloseTerminal=this.I.event,this.J=new D,this.onDidOpenTerminal=this.J.event,this.L=new D,this.onDidChangeActiveTerminal=this.L.event,this.M=new D,this.onDidChangeTerminalDimensions=this.M.event,this.N=new D,this.onDidChangeTerminalState=this.N.event,this.O=new D,this.onDidChangeShell=this.O.event,this.P=new D({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.P.event,this.Q=new D({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.Q.event,this.a=s.getProxy(Z.MainThreadTerminalService),this.y=new XH(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.R.registerArgumentProcessor({processArgument:r=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(r?.$mid){case 15:return n(r);default:{if(Array.isArray(r))for(let o=0;o<r.length&&r[o].$mid===15;o++)r[o]=n(r[o]);return r}}}}),this.B({dispose:()=>{for(const[r,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,i){const s=new Kb(this.a,ut(),t,t.name),r=new ey(t.pty);return s.createExtensionTerminal(t.location,i,this.S(t,i).resolvedExtHostIdentifier,d$(t.iconPath),oz(t.color)).then(n=>{const o=this.U(n,r);this.h[n]=o}),this.f.push(s),s.value}S(t,i){if(i=i||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const s=t.location.parentTerminal;if(s){const r=this.f.find(n=>n.value===s);r&&(i.resolvedExtHostIdentifier=r._id)}}else t.location&&typeof t.location!="object"?i.location=t.location:i.location&&typeof i.location=="object"&&"splitActiveTerminal"in i.location&&(i.location={splitActiveTerminal:!0});return i}attachPtyToTerminal(t,i){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const r=new ey(i),n=this.U(t,r);this.h[t]=n}async $acceptActiveTerminalChanged(t){const i=this.b;if(t===null){this.b=void 0,i!==this.b&&this.L.fire(this.b);return}const s=this.getTerminalById(t);s&&(this.b=s,i!==this.b&&this.L.fire(this.b.value))}async $acceptTerminalProcessData(t,i){const s=this.getTerminalById(t);s&&this.P.fire({terminal:s.value,data:i})}async $acceptTerminalDimensions(t,i,s){const r=this.getTerminalById(t);r&&r.setDimensions(i,s)&&this.M.fire({terminal:r.value,dimensions:r.value.dimensions})}async $acceptDidExecuteCommand(t,i){const s=this.getTerminalById(t);s&&this.Q.fire({terminal:s.value,...i})}async $acceptTerminalMaximumDimensions(t,i,s){this.g.get(t)?.resize(i,s)}async $acceptTerminalTitleChange(t,i){const s=this.getTerminalById(t);s&&(s.name=i)}async $acceptTerminalClosed(t,i,s){const r=this.Y(this.f,t);if(r!==null){const n=this.f.splice(r,1)[0];n.setExitStatus(i,s),this.I.fire(n.value)}}$acceptTerminalOpened(t,i,s,r){if(i){const a=this.Y(this.f,i);if(a!==null){this.f[a]._id=t,this.J.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:r.name,shellPath:r.executable,shellArgs:r.args,cwd:typeof r.cwd=="string"?r.cwd:x.revive(r.cwd),env:r.env,hideFromUser:r.hideFromUser},o=new Kb(this.a,t,n,s);this.f.push(o),this.J.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,i){this.getTerminalById(t)?._setProcessId(i)}async $startExtensionTerminal(t,i){const s=this.getTerminalById(t);if(!s)return{message:d(2909,null,t)};s.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===s.value&&(o.dispose(),n())})});const r=this.g.get(t);r?r.startSendingEvents(i):this.j[t]={initialDimensions:i}}U(t,i){const s=new se;s.add(i.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),s.add(i.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,i.onProcessData),s.add(i.onProcessExit(n=>this.W(t,n))),this.g.set(t,i);const r=this.j[t];return r&&i instanceof ey&&(i.startSendingEvents(r.initialDimensions),delete this.j[t]),s}$acceptProcessAckDataEvent(t,i){this.g.get(t)?.acknowledgeDataEvent(i)}$acceptProcessInput(t,i){this.g.get(t)?.input(i)}$acceptTerminalInteraction(t){const i=this.getTerminalById(t);i?.setInteractedWith()&&this.N.fire(i.value)}$acceptTerminalSelection(t,i){this.getTerminalById(t)?.setSelection(i)}$acceptProcessResize(t,i,s){try{this.g.get(t)?.resize(i,s)}catch(r){if(r.code!=="EPIPE"&&r.code!=="ERR_IPC_CHANNEL_CLOSED")throw r}}$acceptProcessShutdown(t,i){this.g.get(t)?.shutdown(i)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(i=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:i}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(i=>this.a.$sendProcessProperty(t,{type:"cwd",value:i}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerProfileProvider(t,i,s){if(this.D.has(i))throw new Error(`Terminal profile provider "${i}" already registered`);return this.D.set(i,s),this.a.$registerProfileProvider(i,t.identifier.value),new Le(()=>{this.D.delete(i),this.a.$unregisterProfileProvider(i)})}registerTerminalCompletionProvider(t,i,...s){if(this.C.has(i.id))throw new Error(`Terminal completion provider "${i.id}" already registered`);return this.C.set(i.id,i),this.a.$registerCompletionProvider(i.id,t.identifier.value,...s),new Le(()=>{this.C.delete(i.id),this.a.$unregisterCompletionProvider(i.id)})}async $provideTerminalCompletions(t,i){const s=new Ke().token;if(s.isCancellationRequested||!this.activeTerminal)return;const r=this.C.get(t);if(!r)return;const n=await r.provideTerminalCompletions(this.activeTerminal,i,s);if(n!=null)return gb.from(n)}$acceptTerminalShellType(t,i){const s=this.getTerminalById(t);s?.setShellType(i)&&this.N.fire(s.value)}registerTerminalQuickFixProvider(t,i,s){if(this.F.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.F.set(t,s),this.a.$registerQuickFixProvider(t,i),new Le(()=>{this.F.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,i){const s=new Ke().token;if(s.isCancellationRequested)return;const r=this.F.get(t);if(!r)return;const n=await r.provideTerminalQuickFixes(i,s);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new se;if(this.w.value=o,!Array.isArray(n))return n?bg.from(n,this.R.converter,o):void 0;const a=[];for(const c of n){const l=bg.from(c,this.R.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,i){const s=new Ke().token;let r=await this.D.get(t)?.provideTerminalProfile(s);if(!s.isCancellationRequested){if(r&&!("options"in r)&&(r={options:r}),!r||!("options"in r))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in r.options){this.createExtensionTerminal(r.options,i);return}this.createTerminalFromOptions(r.options,i)}}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Le(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}async $provideLinks(t,i){const s=this.getTerminalById(t);if(!s)return[];this.G.delete(t),this.H.get(t)?.dispose(!0);const n=new Ke;this.H.set(t,n);const o=[],a={terminal:s.value,line:i},c=[];for(const h of this.z)c.push(wn.withAsyncBody(async f=>{n.token.onCancellationRequested(()=>f({provider:h,links:[]}));const p=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||f({provider:h,links:p})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(f=>{const p={id:rz++,startIndex:f.startIndex,length:f.length,label:f.tooltip};return u.set(p.id,{provider:h.provider,link:f}),p}));return this.G.set(t,u),o}$activateLink(t,i){const s=this.G.get(t)?.get(i);s&&s.provider.handleTerminalLink(s.link)}W(t,i){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const s=this.h[t];s&&(s.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,i)}getTerminalById(t){return this.X(this.f,t)}getTerminalIdByApiObject(t){const i=this.f.findIndex(s=>s.value===t);return i>=0?i:null}X(t,i){const s=this.Y(t,i);return s!==null?t[s]:null}Y(t,i){const s=t.findIndex(r=>r._id===i);return s>=0?s:null}getEnvironmentVariableCollection(t){let i=this.n.get(t.identifier.value);return i||(i=this.B(new h$),this.$(t.identifier.value,i)),i.getScopedEnvironmentVariableCollection(void 0)}Z(t,i){const s=ZH(i.map),r=QH(i.descriptionMap);this.a.$setEnvironmentVariableCollection(t,i.persistent,s.length===0?void 0:s,r)}$initEnvironmentVariableCollections(t){t.forEach(i=>{const s=i[0],r=this.B(new h$(i[1]));this.$(s,r)})}$acceptDefaultProfile(t,i){const s=this.s;this.s=t,this.u=i,s?.path!==t.path&&this.O.fire(t.path)}$(t,i){this.n.set(t,i),this.B(i.onDidChangeCollection(()=>{this.Z(t,i)}))}};jg=__decorate([__param(1,Bs),__param(2,Ae)],jg);var h$=class extends X{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new D,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let i=this.a.get(t);return i||(i=new nz(this,e),this.a.set(t,i),this.B(i.onDidChangeCollection(()=>this.f.fire()))),i}replace(e,t,i,s){this.g(e,{value:t,type:Ga.Replace,options:i??{applyAtProcessCreation:!0},scope:s})}append(e,t,i,s){this.g(e,{value:t,type:Ga.Append,options:i??{applyAtProcessCreation:!0},scope:s})}prepend(e,t,i,s){this.g(e,{value:t,type:Ga.Prepend,options:i??{applyAtProcessCreation:!0},scope:s})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.h(e,t.scope),s=this.map.get(i),r=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!s||s.value!==t.value||s.type!==t.type||s.options?.applyAtProcessCreation!==r.applyAtProcessCreation||s.options?.applyAtShellIntegration!==r.applyAtShellIntegration||s.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:r};this.map.set(n,o),this.f.fire()}}get(e,t){const i=this.h(e,t),s=this.map.get(i);return s?f$(s):void 0}h(e,t){const i=this.j(t);return i.length?`${e}:::${i}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,s]of this.map)this.j(s.scope)===this.j(e)&&t.set(s.variable,f$(s));return t}delete(e,t){const i=this.h(e,t);this.map.delete(i),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const i=this.j(t),s=this.descriptionMap.get(i);if(!s||s.description!==e){let r;typeof e=="string"?r=e:r=e?.value.split(`

`)[0];const n={description:r,scope:t};this.descriptionMap.set(i,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},nz=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new D}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.b.replace(e,t,i,this.d)}append(e,t,i){this.b.append(e,t,i,this.d)}prepend(e,t,i){this.b.prepend(e,t,i,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((i,s)=>e.call(t,s,i,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},ty=class extends jg{constructor(t,i){super(!1,t,i)}createTerminal(t,i,s){throw new S1}createTerminalFromOptions(t,i){throw new S1}};ty=__decorate([__param(0,Bs),__param(1,Ae)],ty);function d$(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function oz(e){return La.isThemeColor(e)?e:void 0}function f$(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var az=q("progressService"),p$;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(p$||(p$={}));var _te=Object.freeze({total(){},worked(){},done(){}}),Bg=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},g$=class extends X{constructor(t,i){super(),this.a=new is,i.withProgress(t,s=>(this.b=s,this.c&&s.report(this.c),this.a.p)),this.B(ie(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};g$=__decorate([__param(1,az)],g$);var Gte=q("editorProgressService"),m$="__",Jte=q("IAuthenticationService"),Yte=q("IAuthenticationExtensionsService"),v$="/.well-known",Zte=`${v$}/oauth-protected-resource`,cz=`${v$}/oauth-authorization-server`;function lz(e){return typeof e!="object"||e===null?!1:e.resource!==void 0}function uz(e){return typeof e!="object"||e===null?!1:e.issuer!==void 0}function hz(e){return typeof e!="object"||e===null?!1:e.client_id!==void 0}function iy(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.access_token!==void 0&&t.token_type!==void 0}function dz(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.device_code!==void 0&&t.user_code!==void 0&&t.verification_uri!==void 0&&t.expires_in!==void 0}function fz(e){return{issuer:e.toString(),authorization_endpoint:new URL("/authorize",e).toString(),token_endpoint:new URL("/token",e).toString(),registration_endpoint:new URL("/register",e).toString(),response_types_supported:["code","id_token","id_token token"]}}function pz(e){const t=new URL(e.issuer);return{...e,authorization_endpoint:e.authorization_endpoint??new URL("/authorize",t).toString(),token_endpoint:e.token_endpoint??new URL("/token",t).toString(),registration_endpoint:e.registration_endpoint??new URL("/register",t).toString()}}var sy=33418;async function gz(e,t){const i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_name:t,client_uri:"https://code.visualstudio.com",grant_types:["authorization_code","refresh_token","urn:ietf:params:oauth:grant-type:device_code"],response_types:["code"],redirect_uris:["https://insiders.vscode.dev/redirect","https://vscode.dev/redirect","http://localhost/","http://127.0.0.1/",`http://localhost:${sy}/`,`http://127.0.0.1:${sy}/`],token_endpoint_auth_method:"none"})});if(!i.ok)throw new Error(`Registration failed: ${i.statusText}`);const s=await i.json();if(hz(s))return s;throw new Error(`Invalid authorization dynamic client registration response: ${JSON.stringify(s)}`)}function mz(e){const t=e.split(" "),i=t[0],s={};return t.length>1&&t.slice(1).join(" ").split(",").forEach(n=>{const[o,a]=n.split("=").map(c=>c.trim().replace(/"/g,""));s[o]=a}),{scheme:i,params:s}}function w$(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT token format: token must have three parts separated by dots");const[i,s,r]=t;try{if(typeof JSON.parse(Ca(i).toString())!="object")throw new Error("Invalid JWT token format: header is not a JSON object");const o=JSON.parse(Ca(s).toString());if(typeof o!="object")throw new Error("Invalid JWT token format: payload is not a JSON object");return o}catch(n){throw n instanceof Error?new Error(`Failed to parse JWT token: ${n.message}`):new Error("Failed to parse JWT token")}}var ry,ny=class{static{ry=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.f;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t,i){this.c=new D,this.onDidChangeWindowState=this.c.event,this.f=ry.a,t.handle&&(this.d=Ca(t.handle).buffer),this.b=i.getProxy(Z.MainThreadWindow),this.b.$getInitialState().then(({isFocused:s,isActive:r})=>{this.onDidChangeWindowProperty("focused",s),this.onDidChangeWindowProperty("active",r)})}get nativeHandle(){return this.d}$onDidChangeActiveNativeWindowHandle(t){this.d=t?Ca(t).buffer:void 0}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,i){i!==this.f[t]&&(this.f={...this.f,[t]:i},this.c.fire(this.f))}openUri(t,i){let s;if(typeof t=="string"){s=t;try{t=x.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return wd(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===G.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,s,i)}async asExternalUri(t,i){if(wd(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const s=await this.b.$asExternalUri(t,i);return x.from(s)}};ny=ry=__decorate([__param(0,kt),__param(1,Ae)],ny);var Hg=q("IExtHostWindow"),oy,ay=class{static{oy=this}static{this.a=0}constructor(t){this.c=new vo,this.d=new Map,this.b=t.getProxy(Z.MainThreadUrls)}registerUriHandler(t,i){const s=t.identifier;if(this.c.has(s))throw new Error(`Protocol handler already registered for extension ${s}`);const r=oy.a++;return this.c.add(s),this.d.set(r,i),this.b.$registerUriHandler(r,s,t.displayName||t.name),ie(()=>{this.c.delete(s),this.d.delete(r),this.b.$unregisterUriHandler(r)})}$handleExternalUri(t,i){const s=this.d.get(t);if(!s)return Promise.resolve(void 0);try{s.handleUri(x.revive(i))}catch(r){lt(r)}return Promise.resolve(void 0)}async createAppUri(t){return x.revive(await this.b.$createAppUri(t))}};ay=oy=__decorate([__param(0,Ae)],ay);var zg=q("IExtHostUrlsService"),Wg=q("IExtHostProgress"),cy=class{constructor(t){this.b=0,this.c=new Map,this.a=t.getProxy(Z.MainThreadProgress)}async withProgress(t,i,s){const r=this.b++,{title:n,location:o,cancellable:a}=i,c={label:t.displayName||t.name,id:t.identifier.value};return this.a.$startProgress(r,{location:eg.from(o),title:n,source:c,cancellable:a},t.isUnderDevelopment?void 0:t.identifier.value).catch(od),this.d(r,s,!!a)}async withProgressFromSource(t,i,s){const r=this.b++,{title:n,location:o,cancellable:a}=i;return this.a.$startProgress(r,{location:eg.from(o),title:n,source:t,cancellable:a},void 0).catch(od),this.d(r,s,!!a)}d(t,i,s){let r;s&&(r=new Ke,this.c.set(t,r));const n=a=>{this.a.$progressEnd(a),this.c.delete(a),r?.dispose()};let o;try{o=i(new b$(this.a,t),s&&r?r.token:Ye.None)}catch(a){throw n(t),a}return o.then(a=>n(t),a=>n(t)),o}$acceptProgressCanceled(t){const i=this.c.get(t);i&&(i.cancel(),this.c.delete(t))}};cy=__decorate([__param(0,Ae)],cy);function vz(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var b$=class extends Bg{constructor(e,t){super(i=>this.throttledReport(i)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([eN(100,(e,t)=>vz(e,t),()=>Object.create(null))],b$.prototype,"throttledReport",null);var ly=q("IExtHostAuthentication"),uy=class{constructor(t,i,s,r,n,o){this.k=i,this.l=s,this.m=r,this.n=n,this.o=o,this.c=Vg,this.f=new Map,this.g=new D,this.h=new wz,this.j=new D,this.d=t.getProxy(Z.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const i=t.toLowerCase();return Ve.chain(this.g.event,s=>s.filter(r=>!r.extensionIdFilter||r.extensionIdFilter.includes(i)).map(r=>({provider:r.provider})))}async getSession(t,i,s,r={}){const n=qe.toKey(t.identifier),o=[...s].sort().join(" "),c=Object.keys(r).sort().map(l=>`${l}:${!!r[l]}`).join(", ");return await this.h.getOrCreate(`${n} ${i} ${o} ${c}`,async()=>{await this.d.$ensureProvider(i);const l=t.displayName||t.name;return this.d.$getSession(i,s,n,l,r)})}async getAccounts(t){return await this.d.$ensureProvider(t),await this.d.$getAccounts(t)}async removeSession(t,i){const s=this.f.get(t);return s?s.provider.removeSession(i):this.d.$removeSession(t,i)}registerAuthenticationProvider(t,i,s,r){if(this.f.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.f.set(t,{label:i,provider:s,options:r??{supportsMultipleAccounts:!1}});const n=s.onDidChangeSessions(o=>this.d.$sendDidChangeSessions(t,o));return this.d.$registerAuthenticationProvider(t,i,r?.supportsMultipleAccounts??!1,r?.supportedAuthorizationServers),new Le(()=>{n.dispose(),this.f.delete(t),this.d.$unregisterAuthenticationProvider(t)})}async $createSession(t,i,s){const r=this.f.get(t);if(r)return s.authorizationServer=x.revive(s.authorizationServer),await r.provider.createSession(i,s);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,i){const s=this.f.get(t);if(s)return await s.provider.removeSession(i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,i,s){const r=this.f.get(t);if(r)return s.authorizationServer=x.revive(s.authorizationServer),await r.provider.getSessions(i,s);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,i,s){return t.startsWith(m$)||this.g.fire({provider:{id:t,label:i},extensionIdFilter:s}),Promise.resolve()}$onDidUnregisterAuthenticationProvider(t){const i=this.f.get(t);return i?.disposable&&(i.disposable.dispose(),this.f.delete(t)),Promise.resolve()}async $registerDynamicAuthProvider(t,i,s,r,n){if(!r){if(!i.registration_endpoint)throw new Error("Server does not support dynamic registration");try{r=(await gz(i.registration_endpoint,this.k.environment.appName)).client_id}catch(c){throw new Error(`Dynamic registration failed: ${c.message}`)}}const o=new this.c(this.l,this.m,this.k,this.n,this.o,this.d,x.revive(t),i,s,r,this.j,n||[]),a=o.onDidChangeSessions(c=>this.d.$sendDidChangeSessions(o.id,c));return this.f.set(o.id,{label:o.label,provider:o,disposable:Le.from(o,a),options:{supportsMultipleAccounts:!1}}),await this.d.$registerDynamicAuthenticationProvider(o.id,o.label,o.authorizationServer,o.clientId),o.id}async $onDidChangeDynamicAuthProviderTokens(t,i,s){this.j.fire({authProviderId:t,clientId:i,tokens:s})}};uy=__decorate([__param(0,Ae),__param(1,kt),__param(2,Hg),__param(3,zg),__param(4,Wg),__param(5,xn)],uy);var wz=class{constructor(){this.c=new Map}getOrCreate(e,t){const i=this.c.get(e);if(i)return i;const s=t().finally(()=>this.c.delete(e));return this.c.set(e,s),s}},Vg=class{constructor(t,i,s,r,n,o,a,c,l,u,h,f){this.j=t,this.k=i,this.l=s,this.m=r,this.n=o,this.authorizationServer=a,this.o=c,this.q=l,this.clientId=u,this.c=new D,this.onDidChangeSessions=this.c.event;const p=a.toString(!0);this.id=l?.resource?p+" "+l?.resource:p,this.label=l?.resource_name??this.authorizationServer.authority,this.g=n.createLogger(p,{name:this.label}),this.h=new se,this.h.add(this.c);const g=Ve.chain(h.event,v=>v.filter(b=>b.authProviderId===this.id&&b.clientId===u).map(b=>b.tokens));this.d=this.h.add(new bz({onDidChange:g,set:v=>o.$setSessionsForDynamicAuthProvider(p,this.clientId,v)},f,this.g)),this.h.add(this.d.onDidChangeSessions(v=>this.c.fire(v))),this.f=[{label:d(2890,null),handler:(v,b,E)=>this.r(v,b,E)}]}async getSessions(t,i){if(this.g.info(`Getting sessions for scopes: ${t?.join(" ")??"all"}`),!t)return this.d.sessions;const s=[...t].sort(),r=t.join(" ");let n=this.d.sessions.filter(o=>Oi([...o.scopes].sort(),s));if(this.g.info(`Found ${n.length} sessions for scopes: ${r}`),n.length){const o=[],a=[],c=new Map(this.d.tokens.map(l=>[l.access_token,l]));for(const l of n){const u=c.get(l.accessToken);if(u&&u.expires_in){const h=Date.now(),f=u.expires_in*1e3;if(h>u.created_at+f-5*60*1e3){if(this.g.info(`Token for session ${l.id} is about to expire, refreshing...`),a.push(u),!u.refresh_token){this.g.warn(`No refresh token available for scopes ${l.scopes.join(" ")}. Throwing away token.`);continue}try{const p=await this.x(u.refresh_token);p.scope!==r&&(this.g.warn(`Token scopes '${p.scope}' do not match requested scopes '${r}'. Overwriting token with what was requested...`),p.scope=r),this.g.info(`Successfully created a new token for scopes ${l.scopes.join(" ")}.`),o.push(p)}catch(p){this.g.error(`Failed to refresh token: ${p}`)}}}}return(o.length||a.length)&&(this.d.update({added:o,removed:a}),n=this.d.sessions.filter(l=>Oi([...l.scopes].sort(),s))),this.g.info(`Found ${n.length} sessions for scopes: ${r}`),n}return[]}async createSession(t,i){this.g.info(`Creating session for scopes: ${t.join(" ")}`);let s;for(let n=0;n<this.f.length;n++){const{handler:o}=this.f[n];try{if(s=await this.m.withProgressFromSource({label:this.label,id:this.id},{location:Nn.Notification,title:d(2891,null,this.label),cancellable:!0},(a,c)=>o(t,a,c)),s)break}catch(a){const c=this.f[n+1]?.label;if(!c)break;const l=Ei(a)?d(2892,null,this.label,c):d(2893,null,this.label,c);if(!await this.n.$showContinueNotification(l))throw new mt;this.g.error(`Failed to create token via flow '${c}': ${a}`)}}if(!s)throw new Error("Failed to create authentication token");s.scope!==t.join(" ")&&(this.g.warn(`Token scopes '${s.scope}' do not match requested scopes '${t.join(" ")}'. Overwriting token with what was requested...`),s.scope=t.join(" ")),this.d.update({added:[{...s,created_at:Date.now()}],removed:[]});const r=this.d.sessions.find(n=>n.accessToken===s.access_token);return this.g.info(`Created session for scopes: ${s.scope}`),r}async removeSession(t){this.g.info(`Removing session with id: ${t}`);const i=this.d.sessions.find(r=>r.id===t);if(!i){this.g.error(`Session with id ${t} not found`);return}const s=this.d.tokens.find(r=>r.access_token===i.accessToken);if(!s){this.g.error(`Failed to retrieve token for removed session: ${i.id}`);return}this.d.update({added:[],removed:[s]}),this.g.info(`Removed token for session: ${i.id} with scopes: ${i.scopes.join(" ")}`)}dispose(){this.h.dispose()}async r(t,i,s){const r=this.s(64),n=await this.u(r),o=this.s(32),a=x.parse(`${this.l.environment.appUriScheme}://dynamicauthprovider/${this.authorizationServer.authority}/authorize?nonce=${o}`);let c;try{c=await this.k.createAppUri(a)}catch(b){throw new Error(`Failed to create external URI: ${b}`)}const l=new URL(this.o.authorization_endpoint);l.searchParams.append("client_id",this.clientId),l.searchParams.append("response_type","code"),l.searchParams.append("state",c.toString()),l.searchParams.append("code_challenge",n),l.searchParams.append("code_challenge_method","S256");const u=t.join(" ");u&&l.searchParams.append("scope",u),this.q?.resource&&l.searchParams.append("resource",this.q.resource);const h="https://vscode.dev/redirect";l.searchParams.append("redirect_uri",h);const f=this.v(a);if(this.g.info(`Opening authorization URL for scopes: ${u}`),this.g.trace(`Authorization URL: ${l.toString()}`),!await this.j.openUri(l.toString(),{}))throw new mt;i.report({message:d(2894,null)});let g;try{g=(await $d(f,s)).code}catch(b){throw Ei(b)?(this.g.info("Authorization code request was cancelled by the user."),b):(this.g.error(`Failed to receive authorization code: ${b}`),new Error(`Failed to receive authorization code: ${b}`))}return this.g.info(`Authorization code received for scopes: ${u}`),await this.w(g,r,h)}s(t){const i=new Uint8Array(t);return crypto.getRandomValues(i),Array.from(i).map(s=>s.toString(16).padStart(2,"0")).join("").substring(0,t)}async u(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s);return kl(_.wrap(new Uint8Array(r)),!1,!1).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async v(t){const i=await this.n.$waitForUriHandler(t),s=/[?&]code=([^&]+)/.exec(i.query||"");if(!s||s.length<2)throw new Error("Authentication failed: No authorization code received");return{code:s[1]}}async w(t,i,s){if(!this.o.token_endpoint)throw new Error("Token endpoint not available in server metadata");const r=new URLSearchParams;r.append("client_id",this.clientId),r.append("grant_type","authorization_code"),r.append("code",t),r.append("redirect_uri",s),r.append("code_verifier",i);const n=await fetch(this.o.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:r.toString()});if(!n.ok){const a=await n.text();throw new Error(`Token exchange failed: ${n.status} ${n.statusText} - ${a}`)}const o=await n.json();if(iy(o))return o;throw new Error(`Invalid authorization token response: ${JSON.stringify(o)}`)}async x(t){if(!this.o.token_endpoint)throw new Error("Token endpoint not available in server metadata");const i=new URLSearchParams;i.append("client_id",this.clientId),i.append("grant_type","refresh_token"),i.append("refresh_token",t);const s=await fetch(this.o.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:i.toString()});if(!s.ok){const n=await s.text();throw new Error(`Token exchange failed: ${s.status} ${s.statusText} - ${n}`)}const r=await s.json();if(iy(r))return{...r,created_at:Date.now()};throw new Error(`Invalid authorization token response: ${JSON.stringify(r)}`)}};Vg=__decorate([__param(0,Hg),__param(1,zg),__param(2,kt),__param(3,Wg),__param(4,xn)],Vg);var bz=class{constructor(e,t,i){this.h=e,this.j=i,this.f=new D,this.onDidChangeSessions=this.f.event,this.g=new se,this.c=lf("tokens",t),this.d=d8({equalsFn:(s,r)=>Oi(s,r,(n,o)=>n.accessToken===o.accessToken)},s=>this.c.read(s).map(r=>this.l(r))),this.g.add(this.k()),this.g.add(this.h.onDidChange(s=>this.c.set(s,void 0)))}get tokens(){return this.c.get()}get sessions(){return this.d.get()}dispose(){this.g.dispose()}update({added:e,removed:t}){this.j.trace(`Updating tokens: added ${e.length}, removed ${t.length}`);const i=[...this.c.get()];for(const s of t){const r=i.findIndex(n=>n.access_token===s.access_token);r!==-1&&i.splice(r,1)}for(const s of e){const r=i.findIndex(n=>n.access_token===s.access_token);r===-1?i.push(s):i[r]=s}(e.length||t.length)&&(this.c.set(i,void 0),this.h.set(i)),this.j.trace(`Tokens updated: ${i.length} tokens stored.`)}k(){let e=[];return u8(t=>{this.j.trace("Checking for session changes...");const i=this.d.read(t);if(e===i){this.j.trace("No session changes detected.");return}if(!i||i.length===0){this.j.trace("All sessions removed."),e.length>0&&(this.f.fire({added:[],removed:e,changed:[]}),e=[]);return}const s=[],r=[];for(const n of i)e.some(a=>a.accessToken===n.accessToken)||s.push(n);for(const n of e)i.some(a=>a.accessToken===n.accessToken)||r.push(n);(s.length>0||r.length>0)&&(this.j.trace(`Sessions changed: added ${s.length}, removed ${r.length}`),this.f.fire({added:s,removed:r,changed:[]})),e=i})}l(e){let t;if(e.id_token)try{t=w$(e.id_token)}catch{}if(!t)try{t=w$(e.access_token)}catch{}const i=e.scope?e.scope.split(" "):t?.scope?t.scope.split(" "):[];return{id:wv(e.access_token,0).toString(),accessToken:e.access_token,account:{id:t?.sub||"unknown",label:t?.preferred_username||t?.name||t?.email||"MCP"},scopes:i,idToken:e.id_token}}},yz={label:d(5716,null),order:Number.MAX_SAFE_INTEGER},_g,hy=q("IExtHostLanguageModels"),y$=class{constructor(e,t){this.option=e,this.stream=new Q1,this.stream=t??new Q1}},xz=class{constructor(){this.a=new Map,this.b=new Q1,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return El.map(e.b.asyncIterable,t=>{if(t instanceof Pt)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;const t=new Map;for(const i of Zt.wrap(e)){let s;i.part.type==="text"?s=new Pt(i.part.value):i.part.type==="data"?s=new Pt(""):s=new _o(i.part.toolCallId,i.part.name,i.part.parameters);const r=t.get(i.index);r?r.push(s):t.set(i.index,[s])}for(const[i,s]of t){let r=this.a.get(i);r||(this.a.size===0?r=new y$(i,this.b):r=new y$(i),this.a.set(i,r)),r.stream.emitMany(s)}}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},dy=class{static{_g=this}static{this.a=1}constructor(t,i,s){this.k=i,this.l=s,this.c=new D,this.d=new D,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new Tr,this.i=new Map,this.j=new Map,this.s=new Set,this.b=t.getProxy(Z.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,i,s,r){const n=_g.a++;this.f.set(n,{extension:t.identifier,provider:s,languageModelId:i});let o;r.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof r.auth=="object"?r.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${qe.toKey(t.identifier)}/${i}`,{extension:t.identifier,id:i,vendor:r.vendor??qe.toKey(t.identifier),name:r.name??"",family:r.family??"",cost:r.cost,description:r.description,version:r.version,maxInputTokens:r.maxInputTokens,maxOutputTokens:r.maxOutputTokens,auth:o,targetExtensions:r.extensions,isDefault:r.isDefault,isUserSelectable:r.isUserSelectable,modelPickerCategory:r.category??yz,capabilities:r.capabilities});const a=s.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(i,new qe(c),l,u)});return ie(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,i,s,r,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=[],l=()=>{c.length>0&&(this.b.$reportResponsePart(i,c),c.length=0)},u=new Zs(l,30),h=g=>{c.push(g)>30?(l(),u.cancel()):u.schedule()},f=new Bg(async g=>{if(o.isCancellationRequested){this.k.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let v;if(g.part instanceof _o?v={type:"tool_use",name:g.part.name,parameters:g.part.input,toolCallId:g.part.callId}:g.part instanceof Pt?v={type:"text",value:g.part.value}:g.part instanceof Hr&&(v={type:"data",value:{mimeType:g.part.mimeType,data:_.wrap(g.part.data)}}),!v){this.k.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(g)}`);return}h({index:g.index,part:v})});let p;try{p=a.provider.provideLanguageModelResponse(r.value.map(qu.to),n,qe.toKey(s),f,o)}catch(g){throw g}Promise.resolve(p).then(()=>{l(),this.b.$reportResponseDone(i,void 0)},g=>{l(),this.b.$reportResponseDone(i,ma(g))})}$provideTokenLength(t,i,s){const r=this.f.get(t);return r?Promise.resolve(r.provider.provideTokenCount(i,s)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:i,metadata:s}of t.added)this.g.set(i,{metadata:s,apiObjects:new Tr});if(t.removed)for(const i of t.removed){this.g.delete(i);for(const[s,r]of this.i)r.languageModelId===i&&(r.res.reject(new mt),this.i.delete(s))}t.added?.forEach(i=>this.q(i.metadata)),this.d.fire(void 0)}async getDefaultLanguageModel(t){const i=Zt.find(this.g.entries(),([,s])=>!!s.metadata.isDefault)?.[0];if(i)return this.getLanguageModelByIdentifier(t,i)}async getLanguageModelByIdentifier(t,i){const s=this.g.get(i);if(!s)return;this.p(t.identifier,s.metadata)&&await this.q(s.metadata);let r=s.apiObjects.get(t.identifier);if(!r){const n=this;r={id:s.metadata.id,vendor:s.metadata.vendor,family:s.metadata.family,version:s.metadata.version,name:s.metadata.name,capabilities:{supportsImageToText:s.metadata.capabilities?.vision??!1,supportsToolCalling:s.metadata.capabilities?.toolCalling??!1},maxInputTokens:s.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(i))throw Wr.NotFound(i);return n.r(i,o,a??Ye.None)},sendRequest(o,a,c){if(!n.g.has(i))throw Wr.NotFound(i);return n.m(t,i,o,a??{},c??Ye.None)}},Object.freeze(r),s.apiObjects.set(t.identifier,r)}return r}async selectLanguageModels(t,i){const s=await this.b.$selectChatModels({...i,extension:t.identifier}),r=[];for(const n of s){const o=await this.getLanguageModelByIdentifier(t,n);o&&r.push(o)}return r}async m(t,i,s,r,n){const o=this.n(t,s),a=t.identifier,c=this.g.get(i)?.metadata;if(!c||!this.g.has(i))throw Wr.NotFound(`Language model '${i}' is unknown.`);if(this.p(a,c)&&(!await this.o(t,{identifier:c.extension,displayName:c.auth.providerLabel},r.justification,!1)||!this.h.get(a)?.has(c.extension)))throw Wr.NoPermissions(`Language model '${i}' cannot be used by '${a.value}'.`);const l=Math.random()*1e6|0,u=new xz;this.i.set(l,{languageModelId:i,res:u});try{await this.b.$tryStartChatRequest(a,i,l,new bi(o),r,n)}catch(h){throw this.i.delete(l),Wr.tryDeserialize(h)??h}return u.apiObject}n(t,i){const s=[];for(const r of i)r.role===_i.System&&L(t,"languageModelSystem"),s.push(qu.from(r));return s}async $acceptResponsePart(t,i){const s=this.i.get(t);s&&s.res.handleFragment(i)}async $acceptResponseDone(t,i){const s=this.i.get(t);s&&(this.i.delete(t),i?s.res.reject(Wr.tryDeserialize(i)??rx(i)):s.res.resolve())}async o(t,i,s,r){const n=m$+i.identifier.value;if(await this.l.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0;if(r)return!1;try{const a=s?d(2900,null,i.displayName,s):void 0;return await this.l.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0}catch{return!1}}p(t,i){return!!i.auth&&!qe.equals(i.extension,t)}async q(t){if(t.auth)for(const i of this.s)try{await this.o(i,{identifier:t.extension,displayName:""},void 0,!0)}catch(s){this.k.error("Fake Auth request failed"),this.k.error(s)}}async r(t,i,s){if(!this.g.get(t))throw Wr.NotFound(`Language model '${t}' is unknown.`);const n=Zt.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(i,s):this.b.$countTokens(t,typeof i=="string"?i:qu.from(i),s)}$updateModelAccesslist(t){const i=new Array;for(const{from:s,to:r,enabled:n}of t){const o=this.h.get(s)??new vo;if(o.has(r)!==n){n?o.add(r):o.delete(r),this.h.set(s,o);const c={from:s,to:r};i.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.s.add(t);const i=this,s=Ve.signal(Ve.filter(this.c.event,n=>qe.equals(n.from,t.identifier))),r=Ve.signal(this.d.event);return{get onDidChange(){return Ve.any(s,r)},canSendRequest(n){let o;e:for(const[c,l]of i.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!i.p(t.identifier,o))return!0;const a=i.h.get(t.identifier);if(a)return a.has(o.extension)}}}fileIsIgnored(t,i,s=Ye.None){return L(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(i,s)}async $isFileIgnored(t,i,s){const r=this.j.get(t);if(!r)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await r.provideFileIgnored(x.revive(i),s)??!1}registerIgnoredFileProvider(t,i){L(t,"chatParticipantPrivate");const s=_g.a++;return this.b.$registerFileIgnoreProvider(s),this.j.set(s,i),ie(()=>{this.b.$unregisterFileIgnoreProvider(s),this.j.delete(s)})}};dy=_g=__decorate([__param(0,Ae),__param(1,De),__param(2,ly)],dy);function lh(e,t=Fe){return V1(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function qg(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var x$;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(x$||(x$={}));var Ez=60,kz=Ez*60,fy=kz*24,sie=fy*7,rie=fy*30,nie=fy*365;function Sz(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var Gg={DateTimeFormat(e,t){return new Qt(()=>{try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}})},Collator(e,t){return new Qt(()=>{try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}})},Segmenter(e,t){return new Qt(()=>{try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}})},Locale(e,t){return new Qt(()=>{try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(dn,t)}})},NumberFormat(e,t){return new Qt(()=>{try{return new Intl.NumberFormat(e,t)}catch{return new Intl.NumberFormat(void 0,t)}})}},E$;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(E$||(E$={}));function k$(e){return e<0?0:e>255?255:e|0}function Fc(e){return e<0?0:e>4294967295?4294967295:e|0}var S$=class HA{constructor(t){const i=k$(t);this.c=i,this.a=HA.d(i),this.b=new Map}static d(t){const i=new Uint8Array(256);return i.fill(t),i}set(t,i){const s=k$(i);t>=0&&t<256?this.a[t]=s:this.b.set(t,s)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},C$;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(C$||(C$={}));var $$;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})($$||($$={}));var Cz=class extends S${constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=Gg.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let i=0,s=e.length;i<s;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const s of this.h(e)){if(s.index>t)break;i=s}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this.h(e))if(!(i.index<t))return i;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.value.segment(e)),this.g):[]}j(e){const t=[];for(const i of e)this.k(i)&&t.push(i);return t}k(e){return!!e.isWordLike}},I$=new ll(10);function $z(e,t){const i=`${e}/${t.join(",")}`;let s=I$.get(i);return s||(s=new Cz(e,t),I$.set(i,s)),s}var py;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(py||(py={}));var P$;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(P$||(P$={}));var D$;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(D$||(D$={}));var A$;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(A$||(A$={}));var T$;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(T$||(T$={}));var R$;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(R$||(R$={}));var L$;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(L$||(L$={}));var N$;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(N$||(N$={}));var gy=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},M$;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(M$||(M$={}));var O$;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(O$||(O$={}));var F$;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(F$||(F$={}));var Iz=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}},Pz=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}},U$=class{constructor(e,t,i,s){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=j$(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=_x(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new Iz(t,this.wordSeparators?$z(this.wordSeparators,[]):null,i?this.searchString:null)}};function j$(e){if(!e||e.length===0)return!1;for(let t=0,i=e.length;t<i;t++){const s=e.charCodeAt(t);if(s===10)return!0;if(s===92){if(t++,t>=i)break;const r=e.charCodeAt(t);if(r===110||r===114||r===87)return!0}}return!1}function B$(e,t,i){if(!i)return new gy(e,null);const s=[];for(let r=0,n=t.length;r<n;r++)s[r]=t[r];return new gy(e,s)}function Dz(e,t,i,s,r){if(s===0)return!0;const n=t.charCodeAt(s-1);if(e.get(n)!==0||n===13||n===10)return!0;if(r>0){const o=t.charCodeAt(s);if(e.get(o)!==0)return!0}return!1}function Az(e,t,i,s,r){if(s+r===i)return!0;const n=t.charCodeAt(s+r);if(e.get(n)!==0||n===13||n===10)return!0;if(r>0){const o=t.charCodeAt(s+r-1);if(e.get(o)!==0)return!0}return!1}function H$(e,t,i,s,r){return Dz(e,t,i,s,r)&&Az(e,t,i,s,r)}var Tz=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let i;do{if(this.b+this.c===t||(i=this.a.exec(e),!i))return null;const s=i.index,r=i[0].length;if(s===this.b&&r===this.c){if(r===0){Zx(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=s,this.c=r,!this._wordSeparators||H$(this._wordSeparators,e,t,s,r))return i}while(i);return null}};function z$(e){return e.scheme!==G.file&&e.scheme!==G.vscodeRemote}function Rz(e){if(e.folders.length)return e.folders.every(t=>z$(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&z$(e.configuration))return e.configuration}function Lz(e){return Rz(e)?.scheme}var W$=m0,V$=q("remoteAgentService"),oie=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let s=0;s<this.maxSampleCount;s++){const r=await e.getRoundTripTime();if(r===void 0)return;t=Math.min(t,r/2),await ii(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let i;return this.initial.length<this.maxInitialCount?this.initial.push(t):i=this.initial.reduce((s,r)=>s+r,0)/this.initial.length,this.lastMeasurement={initial:i,current:t,average:this.average.reduce((s,r)=>s+r,0)/this.average.length,high:typeof i>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>i*this.highLatencyMultiple},this.lastMeasurement}},my,Nz=q("pathService"),_$=my=class{constructor(t,i,s,r){this.d=t,this.e=i,this.f=s,this.g=r,this.a=(async()=>(await this.e.getEnvironment())?.os||ro)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,i,s){return typeof i=="string"||typeof i>"u"?this.a.then(r=>this.h(t,r,i)):this.h(t,i,s)}h(t,i,s){return t.scheme===G.file||t.scheme===G.vscodeRemote?RR(s??ts(t),i===1):!0}get defaultUriScheme(){return my.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,i){if(t.remoteAuthority)return G.vscodeRemote;const s=Lz(i.getWorkspace());if(s)return s;const r=i.getWorkspace().folders[0];if(r)return r.uri.scheme;const n=i.getWorkspace().configuration;return n?n.scheme:G.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?Ft:je)}async fileURI(t){let i="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const r=t.indexOf("/",2);r===-1?(i=t.substring(2),t="/"):(i=t.substring(2,r),t=t.substring(r)||"/")}return x.from({scheme:G.file,authority:i,path:t,query:"",fragment:""})}};_$=my=__decorate([__param(1,V$),__param(2,W$),__param(3,_d)],_$);function Mz(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var q$=class{constructor(t,i,s,r,n,o){this.a=t,this.b=i,this.c=s,this.d=r,this.f=n,this.g=o}aiText(t,i,s={}){return{...this.j(i?.map(Rv),s),type:3,contentPattern:t}}text(t,i,s={}){t=this.h(t,s);const r=this.a.getValue(),n=i&&i.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(i?.map(Rv),s),type:2,contentPattern:t,previewOptions:s.previewOptions,maxFileSize:s.maxFileSize,usePCRE2:r.search.usePCRE2||n||!1,surroundingContext:s.surroundingContext,userDisabledExcludesAndIgnoreFiles:s.disregardExcludeSettings&&s.disregardIgnoreFiles}}h(t,i){const s=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const r={...t,wordSeparators:s.editor.wordSeparators};return this.l(t,i)&&(r.isCaseSensitive=!0),this.m(t)&&(r.isMultiline=!0),i.notebookSearchConfig?.includeMarkupInput&&(r.notebookInfo||(r.notebookInfo={}),r.notebookInfo.isInNotebookMarkdownInput=i.notebookSearchConfig.includeMarkupInput),i.notebookSearchConfig?.includeMarkupPreview&&(r.notebookInfo||(r.notebookInfo={}),r.notebookInfo.isInNotebookMarkdownPreview=i.notebookSearchConfig.includeMarkupPreview),i.notebookSearchConfig?.includeCodeInput&&(r.notebookInfo||(r.notebookInfo={}),r.notebookInfo.isInNotebookCellInput=i.notebookSearchConfig.includeCodeInput),i.notebookSearchConfig?.includeOutput&&(r.notebookInfo||(r.notebookInfo={}),r.notebookInfo.isInNotebookCellOutput=i.notebookSearchConfig.includeOutput),r}file(t,i={}){return{...this.j(t,i),type:1,filePattern:i.filePattern?i.filePattern.trim():i.filePattern,exists:i.exists,sortByScore:i.sortByScore,cacheKey:i.cacheKey,shouldGlobMatchFilePattern:i.shouldGlobSearch}}i(t,i){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(s=>s.length>0).map(Jg),!t.length)return{}}else t=Jg(t);return i?this.parseSearchPaths(t):{pattern:vy(...Array.isArray(t)?t:[t])}}j(t=[],i={}){let s=Array.isArray(i.excludePattern)?i.excludePattern.map(u=>u.pattern).flat():i.excludePattern;s=s?.length===1?s[0]:s;const r=this.i(i.includePattern,i.expandPatterns),n=this.i(s,i.expandPatterns),o=t.length>1,a=(r.searchPaths&&r.searchPaths.length?r.searchPaths.map(u=>this.t(u,i,n)):t.map(u=>this.u(u,i,n,o))).filter(u=>!!u),c={_reason:i._reason,folderQueries:a,usingSearchPaths:!!(r.searchPaths&&r.searchPaths.length),extraFileResources:i.extraFileResources,excludePattern:n.pattern,includePattern:r.pattern,onlyOpenEditors:i.onlyOpenEditors,maxResults:i.maxResults,onlyFileScheme:i.onlyFileScheme};if(i.onlyOpenEditors){const u=yt(this.c.groups.flatMap(p=>p.editors.map(g=>g.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(p=>N9(c,p.fsPath)),f=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(f)),{...c,...f}}const l=i.extraFileResources&&i.extraFileResources.filter(u=>N9(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const i=[],s=new Ht,r={};let n=!1;return t.forEach(o=>{if(o.scheme===G.walkThrough)return;if(KR(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=s.get(c);l||(n=!0,l={folder:c,includePattern:{}},i.push(l),s.set(c,l));const u=Ea(c.fsPath,o.fsPath);wa(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,r[o.fsPath]=!0)}),{folderQueries:i,includePattern:r,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,i){if(i.isSmartCase){if(t.isRegExp){if(eE(t.pattern,!0))return!0}else if(eE(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&j$(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const i=h=>es(h)||/^\.\.?([\/\\]|$)/.test(h),r=(Array.isArray(t)?t:Fz(t)).map(h=>{const f=this.f.resolvedUserHome;return f?qg(h,f.scheme===G.file?f.fsPath:f.path):h}),n=y1(r,h=>i(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>gn(h,"/")).map(h=>gn(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),Uz(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=vy(...l);return u&&(a.pattern=u),a}n(t,i){return i.disregardExcludeSettings?void 0:eH(t,!i.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const i=t.flatMap(r=>{let{pathPortion:n,globPortion:o}=Oz(r);return o&&(o=wy(o)),this.q(n).flatMap(c=>this.r(c,o))}),s=new Map;return i.forEach(r=>{const n=r.searchPath.toString(),o=s.get(n);o?r.pattern&&(o.pattern=o.pattern||{},o.pattern[r.pattern]=!0):s.set(n,{searchPath:r.searchPath,pattern:r.pattern?vy(r.pattern):void 0})}),Array.from(s.values())}q(t){if(es(t)){const i=this.b.getWorkspace().folders;return i[0]&&i[0].uri.scheme!==G.file?[{searchPath:i[0].uri.with({path:t})}]:[{searchPath:x.file($r(t))}]}if(this.b.getWorkbenchState()===2){const i=this.b.getWorkspace().folders[0].uri;if(t=Jg(t),t.startsWith("../")||t===".."){const r=je.resolve(i.path,t);return[{searchPath:i.with({path:r})}]}const s=wy(t);return[{searchPath:i,pattern:s}]}else{if(t==="./"||t===".\\")return[];{const i=t.replace(/^\.[\/\\]/,""),r=this.b.getWorkspace().folders.map(n=>{const o=i.match(new RegExp(`^${pn(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(Xi);if(r.length)return r.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&wy(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=d(14358,null,o);throw new Error(a)}}}}r(t,i){const s=t.pattern&&i?`${t.pattern}/${i}`:t.pattern||i,r=[{searchPath:t.searchPath,pattern:s}];return s&&!s.endsWith("**")&&r.push({searchPath:t.searchPath,pattern:s+"/**"}),r}t(t,i,s){const r=this.u(Rv(t.searchPath),i,s,!1);return r?{...r,includePattern:t.pattern}:null}u(t,i,s,r){let n;const o=x.isUri(t)?t:t.uri;let a=i.excludePattern?.map(p=>{const g=i.excludePattern&&Mz(p)?p.uri:void 0;return!g||!(x.isUri(t)&&this.g.extUri.isEqual(t,g))?g:void 0});if(a?.length||(a=[void 0]),s.searchPaths){const p=s.searchPaths.filter(g=>Sa(g.searchPath,o))[0];if(p&&!p.pattern)return null;p&&(n=p.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,i)||{},...n||{}},h=x.isUri(t)?ts(t):t.name,f=a.map(p=>Object.keys(u).length>0?{folder:p,pattern:u}:void 0).filter(p=>p);return{folder:o,folderName:r?h:void 0,excludePattern:f,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof i.disregardIgnoreFiles=="boolean"?i.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof i.disregardGlobalIgnoreFiles=="boolean"?i.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof i.disregardParentIgnoreFiles=="boolean"?i.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof i.ignoreSymlinks=="boolean"?i.ignoreSymlinks:!c.search.followSymlinks}}};q$=__decorate([__param(0,Fr),__param(1,_d),__param(2,Bj),__param(3,De),__param(4,Nz),__param(5,eC)],q$);function Oz(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const i=t.index,s=e.substr(0,i).match(/[/|\\][^/\\]*$/);if(s){let r=e.substr(0,s.index);return r.match(/[/\\]/)||(r+="/"),{pathPortion:r,globPortion:e.substr((s.index||0)+1)}}}return{pathPortion:e}}function vy(...e){return e.length?e.reduce((t,i)=>(t[i]=!0,t),Object.create(null)):void 0}function Fz(e){return Gl(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function Uz(e){return[`**/${e}/**`,`**/${e}`].map(i=>i.replace(/\*\*\/\*\*/g,"**"))}function Jg(e){return e.replace(/\\/g,"/")}function wy(e){return Jg(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var jz=7e3;function Bz(e,t){const i=t.activationEvents;if(!i)return Promise.resolve(void 0);const s=[],r=[];for(const u of i)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?r.push(h):s.push(h)}if(s.length===0&&r.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=EE(),a=u=>o({activationEvent:u}),c=Promise.all(s.map(u=>Hz(e,u,a))).then(()=>{}),l=zz(e,t.identifier,r,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function Hz(e,t,i){for(const s of e.folders)if(await e.exists(xt(x.revive(s),t))){i(`workspaceContains:${t}`);return}}async function zz(e,t,i,s){if(i.length===0)return Promise.resolve(void 0);const r=new Ke,n=e.checkExists(e.folders,i,r.token),o=setTimeout(async()=>{r.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${i.join(",")}`)},jz);let a=!1;try{a=await n}catch(c){Ei(c)||lt(c)}r.dispose(),clearTimeout(o),a&&s(`workspaceContains:${i.join(",")}`)}var G$=class{constructor(e){this.b=new D,this.onDidChangePassword=this.b.event,this.a=e.getProxy(Z.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,i){return this.a.$setPassword(e,t,i)}delete(e,t){return this.a.$deletePassword(e,t)}},by=q("IExtHostSecretState"),Wz=class{#e;constructor(e,t){this.disposables=new se,this.a=qe.toKey(e.identifier),this.#e=t,this.onDidChange=Ve.map(Ve.filter(this.#e.onDidChangePassword,i=>i.extensionId===this.a),i=>({key:i.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},yy=class{constructor(t,i,s){this.f=s,this.d=new Map,this.a=i.getProxy(Z.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===dn}getMessage(t,i){const{message:s,args:r,comment:n}=i;if(this.c)return Vx(s,r??{});let o=s;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),Vx(a??s,r??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let i;const s=await this.g(t);if(!s){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const r=await this.a.$fetchBundleContents(s),n=JSON.parse(r);i=t.isBuiltin?n.contents?.bundle:n}catch(r){this.f.error(`Failed to load translations for ${t.identifier.value} from ${s}: ${r.message}`);return}i&&this.d.set(t.identifier.value,{contents:i,uri:s})}async g(t){if(t.isBuiltin){const i=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return x.revive(i)}return t.l10n?x.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};yy=__decorate([__param(0,kt),__param(1,Ae),__param(2,De)],yy);var xy=q("IExtHostLocalizationService"),Ey=q("IExtHostManagedSockets"),ky=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(Z.MainThreadManagedSockets)}setFactory(t,i){for(const s of this.d.values())s.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new Vz(t,i),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const i=++this.b,s=await this.c.makeConnection(),r=new se;return this.d.set(i,new _z(i,s,r)),r.add(ie(()=>this.d.delete(i))),r.add(s.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(i),r.dispose()})),r.add(s.onDidClose(n=>{this.a.$onDidManagedSocketClose(i,n?.stack??n?.message),r.dispose()})),r.add(s.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(i,_.wrap(n)))),i}$remoteSocketWrite(t,i){this.d.get(t)?.actual.send(i.buffer)}$remoteSocketEnd(t){const i=this.d.get(t);i&&(i.actual.end(),i.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};ky=__decorate([__param(0,Ae)],ky);var Vz=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},_z=class extends X{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this.B(i)}},Sy,J$=q("IHostUtils"),Cy=Sy=class extends X{constructor(t,i,s,r,n,o,a,c,l,u,h,f,p){super(),this.Y=f,this.Z=p,this.a=this.B(new D),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=i,this.g=s,this.f=a,this.j=r,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(Z.MainThreadWorkspace),this.z=this.g.getProxy(Z.MainThreadTelemetry),this.C=this.g.getProxy(Z.MainThreadExtensionService),this.D=new ds,this.F=new ds,this.G=new ds,this.H=new ds,this.I=new Gz(this.f.extensions.activationEvents),this.L=new rh(this.I,this.f.extensions.allExtensions);const g=new vo(this.f.extensions.myExtensions);this.J=new rh(this.I,Q$(this.L,g)),so&&(this.s.info(`Creating extension host with the following global extensions: ${Uc(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${Uc(this.J)}`)),this.M=new i$(this.g,this.s),this.N=new G$(this.g),this.O=c,this.h=this.q.add(t.createChild(new Dv([Vb,this.M],[by,this.N]))),this.P=this.B(new zb(this.J,this.L,{onExtensionActivationError:(v,b,E)=>{this.C.$onExtensionActivationError(v,ma(b),E)},actualActivateExtension:async(v,b)=>{if(rh.isHostExtension(v,this.J,this.L))return await this.C.$activateExtension(v,b),new zH;const E=this.J.getExtensionDescription(v);return this.fb(E,b)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.wb(),this.D.open(),await this.j.waitForInitializeCall(),It("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){lt(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,i=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),x1(r=>{this.s.error(r)}),this.g.dispose();const s=this.$();Promise.race([ii(5e3),s]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${i}`):this.s.info(`Extension host exiting with code ${i}`),this.s.flush(),this.s.dispose(),this.c.exit(i)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const i=await this.C.$getExtension(t);return i&&{...i,identifier:new qe(i.identifier.value),extensionLocation:x.revive(i.extensionLocation)}}ab(t,i){return this.P.activateByEvent(t,i)}bb(t,i){return this.P.activateById(t,i)}activateByIdWithErrors(t,i){return this.bb(t,i).then(()=>{const s=this.P.getActivatedExtension(t);if(s.activationFailed)return Promise.reject(s.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===G.file&&this.c.fsRealpath){const i=t.fsPath;this.R.has(i)||this.R.set(i,this.c.fsRealpath(i));const s=await this.R.get(i);return x.file(s)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new qz(t))),this.Q}async db(t){const i=En.forUris(s=>J1.ignorePathCasing(s));return await Promise.all(t.map(async s=>{if(this.xb(s)){const r=await this.cb(s.extensionLocation);i.set(r,s)}})),i}eb(t){let i=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return i;const s=this.P.getActivatedExtension(t);if(!s)return i;try{typeof s.module.deactivate=="function"&&(i=Promise.resolve(s.module.deactivate()).then(void 0,r=>(this.s.error(r),Promise.resolve(void 0))))}catch(r){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(r)}try{s.disposable.dispose()}catch(r){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(r)}return i}async fb(t,i){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,i).then(s=>{const r=s.activationTimes;return this.C.$onDidActivateExtension(t.identifier,r.codeLoadingTime,r.activateCallTime,r.activateResolvedTime,i),this.gb(t,i,"success",r),s},s=>{throw this.gb(t,i,"failure"),s})}gb(t,i,s,r){const n=Z$(t,i);this.z.$publicLog2("extensionActivationTimes",{...n,...r||{},outcome:s})}hb(t,i){const s=Z$(t,i);this.z.$publicLog2("activatePlugin",s);const r=this.xb(t);if(!r)return Promise.resolve(new HH(Rg.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${i.startup}, activationEvent: '${i.activationEvent}'${t.identifier.value!==i.extensionId.value?`, root cause: ${i.extensionId.value}`:""}`),this.s.flush();const n=this.vb(t),o=new se,a=new Hb(i.startup);return Promise.all([n?this.zb(t,xt(t.extensionLocation,r),a):this.yb(t,xt(t.extensionLocation,r),a),this.ib(t,o)]).then(c=>(It(`code/extHost/willActivateExtension/${t.identifier.value}`),Sy.jb(this.s,t.identifier,c[0],c[1],o,a))).then(c=>(It(`code/extHost/didActivateExtension/${t.identifier.value}`),c))}ib(t,i){const s=this.Z.createLanguageModelAccessInformation(t),r=i.add(new WH(t,this.M)),n=i.add(new s$(t.identifier.value,!1,this.M)),o=i.add(new Wz(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?fc.Test:fc.Development:fc.Production,c=this.f.remote.isRemote?Ho.Workspace:Ho.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([r.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const f=tt(t,"ipc")?this.f.messagePorts?.get(qe.toKey(t.identifier)):void 0;return Object.freeze({globalState:r,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return s},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(p){return Pe(t.extensionLocation.fsPath,p)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return Pe(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return x.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new uh(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return L(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!f)return;const p=Ve.buffer(Ve.fromDOMEventEmitter(f,"message",g=>g.data));f.start(),h={onDidReceiveMessage:p,postMessage:f.postMessage.bind(f)}}return h}})})}static jb(t,i,s,r,n,o){return s=s||{activate:void 0,deactivate:void 0},this.kb(t,i,s,r,o).then(a=>new Lg(!1,null,o.build(),s,a,ie(()=>{n.dispose(),Es(r.subscriptions)})))}static kb(t,i,s,r,n){if(typeof s.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${i.value}`);const o=typeof global=="object"?global:self,a=s.activate.apply(o,[r]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(s)}lb(t,i){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:i}).then(void 0,s=>{this.s.error(s)})}mb(t,i=0){const r=Date.now();Mx(()=>{for(let n=i;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-r>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(NL()),this.m.getConfigProvider().then(t=>{const i=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),s=this.J.getAllExtensionDescriptions();if(i)this.mb(s);else for(const r of s)if(r.activationEvents)for(const n of r.activationEvents)n==="onStartupFinished"&&this.lb(r,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const i=this.j.workspace?this.j.workspace.folders:[],s=this.pb(i),r=this.rb(),n=Promise.all([r,t,s]).then(()=>{});return Promise.race([n,ii(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(i=>this.qb(t,i))).then(()=>{})}async qb(t,i){if(this.isActivated(i.identifier))return;const s=!this.f.remote.isRemote&&!!this.f.remote.authority,r={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:s||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await Bz(r,i);if(n)return this.bb(i.identifier,{startup:!0,extensionId:i.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:i}=this.f.environment;if(!t||!i)throw new Error(d(2896,null));const s=(await this.getExtensionPathIndex()).findSubstr(i),n=await(this.vb(s,i.path)?this.zb(null,i,new Hb(!1)):this.yb(null,i,new Hb(!1)));if(!n||typeof n.run!="function")throw new Error(d(2897,null,i.toString()));return new Promise((o,a)=>{const c=(h,f)=>{h?(so&&this.s.error("Test runner called back with error",h),a(h)):(so&&(f?this.s.info(`Test runner called back with ${f} failures.`):this.s.info("Test runner called back with successful outcome.")),o(typeof f=="number"&&f>0?1:0))},l=Ss(i),u=n.run(l,c);u&&u.then&&u.then(()=>{so&&this.s.info("Test runner finished successfully."),o(0)}).catch(h=>{so&&this.s.error("Test runner finished with error",h),a(h instanceof Error&&h.stack?h.stack:String(h))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),ii(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,i){return this.S[t]=i,ie(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:i}=await this.ub(t);return i?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const i=t.indexOf("+");if(i===-1)throw new qa("Not an authority that can be resolved!",Pi.InvalidAuthority);const s=t.substr(0,i);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${s}`,!1),{authorityPrefix:s,resolver:this.S[s]}}async $resolveAuthority(t,i){const s=Fi.create(!1),r=()=>`[resolveAuthority(${k7(t)},${i})][${s.elapsed()}ms] `,n=k=>this.s.info(`${r()}${k}`),o=k=>this.s.warn(`${r()}${k}`),a=(k,I=void 0)=>this.s.error(`${r()}${k}`,I),c=k=>{if(k instanceof qa)return{type:"error",error:{code:k._code,message:k._message,detail:k._detail}};throw k},l=async k=>{n(`activating resolver for ${k}...`);const{resolver:I,authorityPrefix:B}=await this.ub(k);if(!I)throw a(`no resolver for ${B}`),new qa(`No remote extension installed to resolve ${B}.`,Pi.NoResolverFound);return{resolver:I,authorityPrefix:B,remoteAuthority:k}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async k=>{if(!(k instanceof qa)||k._code!==Pi.InvalidAuthority)throw k;return o(`resolving nested authorities failed: ${k.message}`),[await l(t)]})}catch(k){return c(k)}const f=new CE;f.cancelAndSet(()=>n("waiting..."),1e3);let p,g;for(const[k,{authorityPrefix:I,resolver:B,remoteAuthority:j}]of h.entries())try{if(k===h.length-1)n("invoking final resolve()..."),It(`code/extHost/willResolveAuthority/${I}`),p=await B.resolve(j,{resolveAttempt:i,execServer:g}),It(`code/extHost/didResolveAuthorityOK/${I}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(B,_f.isManagedResolvedAuthority(p)?p:void 0));else{if(n(`invoking resolveExecServer() for ${j}`),It(`code/extHost/willResolveExecServer/${I}`),g=await B.resolveExecServer?.(j,{resolveAttempt:i,execServer:g}),!g)throw new qa(`Exec server was not available for ${j}`,Pi.NoResolverFound);It(`code/extHost/didResolveExecServerOK/${I}`)}}catch(te){return It(`code/extHost/didResolveAuthorityError/${I}`),a("returned an error",te),f.dispose(),c(te)}f.dispose();const v={environmentTunnels:p.environmentTunnels,features:p.tunnelFeatures?{elevation:p.tunnelFeatures.elevation,privacyOptions:p.tunnelFeatures.privacyOptions,protocol:p.tunnelFeatures.protocol===void 0?!0:p.tunnelFeatures.protocol}:void 0},b={extensionHostEnv:p.extensionHostEnv,isTrusted:p.isTrusted,authenticationSession:p.authenticationSessionForInitializingExtensions?{id:p.authenticationSessionForInitializingExtensions.id,providerId:p.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${_f.isManagedResolvedAuthority(p)?"managed authority":`${p.host}:${p.port}`}`);let E;if(_f.isManagedResolvedAuthority(p)){const k=i;this.Y.setFactory(k,p.makeConnection),E={authority:t,connectTo:new E7(k),connectionToken:p.connectionToken}}else E={authority:t,connectTo:new hB(p.host,p.port),connectionToken:p.connectionToken};return{type:"ok",value:{authority:E,options:b,tunnelInformation:v}}}async $getCanonicalURI(t,i){this.s.info(`$getCanonicalURI invoked for authority (${k7(t)})`);const{resolver:s}=await this.ub(t);if(!s)return null;const r=x.revive(i);if(typeof s.getCanonicalURI>"u")return r;const n=await ai(()=>s.getCanonicalURI(r));return n||r}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=x.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:s}=Y$(this.I,this.L,this.J,t),r=await this.db(s);return(await this.getExtensionPathIndex()).setSearchTree(r),this.L.set(i.getAllExtensionDescriptions()),this.J.set(s),so&&(this.s.info(`$startExtensionHost: global extensions: ${Uc(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${Uc(this.J)}`)),this.tb()}$activateByEvent(t,i){return i===1?this.D.wait().then(s=>this.ab(t,!1)):this.G.wait().then(s=>this.ab(t,!1))}async $activate(t,i){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,i),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=x.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:s}=Y$(this.I,this.L,this.J,t),r=await this.db(s);return(await this.getExtensionPathIndex()).setSearchTree(r),this.L.set(i.getAllExtensionDescriptions()),this.J.set(s),so&&(this.s.info(`$deltaExtensions: global extensions: ${Uc(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${Uc(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const i=_.alloc(t),s=Math.random()%256;for(let r=0;r<t;r++)i.writeUInt8(s,r);return i}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}vb(t,i){return i??=t?this.xb(t):i,i?.endsWith(".mjs")||t?.type==="module"&&!i?.endsWith(".cjs")}};Cy=Sy=__decorate([__param(0,Dl),__param(1,J$),__param(2,Ae),__param(3,js),__param(4,ms),__param(5,De),__param(6,kt),__param(7,qb),__param(8,Og),__param(9,Jr),__param(10,xy),__param(11,Ey),__param(12,hy)],Cy);function Y$(e,t,i,s){e.addActivationEvents(s.addActivationEvents);const r=new rh(e,t.getAllExtensionDescriptions());r.deltaExtensions(s.toAdd,s.toRemove);const n=new vo(i.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of s.myToRemove)n.delete(a);for(const a of s.myToAdd)n.add(a);const o=Q$(r,n);return{globalRegistry:r,myExtensions:o}}function Z$(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function Uc(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Yr=q("IExtHostExtensionService"),uh=class{#e;#t;#i;constructor(e,t,i,s,r){this.#e=e,this.#t=t,this.#i=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=$r(Ss(i.extensionLocation)),this.packageJSON=i,this.extensionKind=s,this.isFromDifferentExtensionHost=r}get isActive(){return this.#e.isActivated(this.#i)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#i)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#i,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function Q$(e,t){return e.getAllExtensionDescriptions().filter(i=>t.has(i.identifier))}var qz=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},Gz=class{constructor(e){this.a=new Tr,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},jc=q("IExtHostApiDeprecationService"),$y=class{constructor(t,i){this.c=i,this.a=new Set,this.b=t.getProxy(Z.MainThreadTelemetry)}report(t,i,s){const r=this.d(t,i);this.a.has(r)||(this.a.add(r),i.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${s}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:i.identifier.value,apiId:t}))}d(t,i){return`${t}-${i.identifier.value}`}};$y=__decorate([__param(0,Ae),__param(1,De)],$y);var fie=Object.freeze(new class{report(e,t,i){}}),X$=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(De),s=e.get(Ae).getProxy(Z.MainThreadErrors);x1(r=>{t.error(r);const n=ma(r);s.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(De),i=e.get(Ae),s=e.get(Yr),r=e.get(Ug),n=e.get(jc),o=i.getProxy(Z.MainThreadExtensionService),a=i.getProxy(Z.MainThreadErrors),c=await s.getExtensionRegistry(),l=await s.getExtensionPathIndex(),u=new WeakMap;function h(g,v){if(u.has(g))return u.get(g).stack;let b="",E,k;for(const B of v)b+=`
	at ${B.toString()}`,k=B.getFileName(),!E&&k&&(E=l.findSubstr(x.file(k)));const I=`${g.name||"Error"}: ${g.message||""}${b}`;return u.set(g,{extensionIdentifier:E?.identifier,stack:I}),I}const f=Symbol("prepareStackTrace wrapped");let p=h;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return p},set(g){if(g===h||!g||g[f]){p=g||h;return}p=function(v,b){return h(v,b),g.call(Error,v,b)},Object.assign(p,{[f]:!0})}}),x1(g=>{E1.is(g)||t.error(g);const v=ma(g);let b;if(g instanceof rS?b=g.extension:b=u.get(g)?.extensionIdentifier,!!b)if(E1.is(g)){const E=c.getExtensionDescription(b);E&&n.report(g.name,E,`${g.message}
 FROM: ${g.stack}`)}else{o.$onExtensionRuntimeError(b,v);const E=r.onExtensionError(b,g);t.trace("forwarded error to extension?",E,b)}}),ol.addListener(g=>{a.$onUnexpectedError(g)})}},Jz=class zA{constructor(t,i,s,r,n){this.a=s,this.b=new NM(t,null,r),i=zA.e(i,this.b);const o=new Dv(...oO());o.set(kt,{_serviceBrand:void 0,...i,messagePorts:n}),o.set(Ae,new uO(this.b)),o.set(Ml,new hO(r)),o.set(J$,s);const a=new lO(o,!0);a.invokeFunction(X$.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(De)),It("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",i),this.c=a.invokeFunction(c=>c.get(Yr)),this.c.initialize(),a.invokeFunction(X$.installFullHandler)}async asBrowserUri(t){const i=this.b.getProxy(Z.MainThreadExtensionService);return x.revive(await i.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,i){t.extensions.allExtensions.forEach(r=>{r.extensionLocation=x.revive(i.transformIncomingURIs(r.extensionLocation))}),t.environment.appRoot=x.revive(i.transformIncomingURIs(t.environment.appRoot));const s=t.environment.extensionDevelopmentLocationURI;return s&&(t.environment.extensionDevelopmentLocationURI=s.map(r=>x.revive(i.transformIncomingURIs(r)))),t.environment.extensionTestsLocationURI=x.revive(i.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=x.revive(i.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=x.revive(i.transformIncomingURIs(t.environment.workspaceStorageHome)),t.nlsBaseUrl=x.revive(i.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=x.revive(i.transformIncomingURIs(t.logsLocation)),t.workspace=i.transformIncomingURIs(t.workspace),t}};function Yz(e){return{transformIncoming:t=>t.scheme==="vscode-remote"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="file"?{scheme:"vscode-local",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoing:t=>t.scheme==="file"?{scheme:"vscode-remote",authority:e,path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="vscode-local"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoingScheme:t=>t==="file"?"vscode-remote":t==="vscode-local"?"file":t}}function Zz(e){return new IM(Yz(e))}var K$;(function(e){e[e.IPC=1]="IPC",e[e.Socket=2]="Socket",e[e.MessagePort=3]="MessagePort"})(K$||(K$={}));var Yg=class WA{static{this.ENV_KEY="VSCODE_EXTHOST_IPC_HOOK"}constructor(t){this.pipeName=t,this.type=1}serialize(t){t[WA.ENV_KEY]=this.pipeName}},Iy=class VA{constructor(){this.type=2}static{this.ENV_KEY="VSCODE_EXTHOST_WILL_SEND_SOCKET"}serialize(t){t[VA.ENV_KEY]="1"}},Py=class _A{constructor(){this.type=3}static{this.ENV_KEY="VSCODE_WILL_SEND_MESSAGE_PORT"}serialize(t){t[_A.ENV_KEY]="1"}};function Qz(e){delete e[Yg.ENV_KEY],delete e[Iy.ENV_KEY],delete e[Py.ENV_KEY]}function Xz(e){if(e[Yg.ENV_KEY])return Dy(e,new Yg(e[Yg.ENV_KEY]));if(e[Iy.ENV_KEY])return Dy(e,new Iy);if(e[Py.ENV_KEY])return Dy(e,new Py);throw new Error("No connection information defined in environment!")}function Dy(e,t){return Qz(e),t}var pie=new $("inOutput",!1),gie=new $("activeLogOutput",!1),mie=new $("activeLogOutput.isLog",!1),vie=new $("activeLogOutput.levelSettable",!1),wie=new $("activeLogOutput.level",""),bie=new $("activeLogOutput.levelIsDefault",!1),yie=new $("outputView.scrollLock",!1),xie=new $("activeOutputChannel",""),Eie=new $("output.filter.trace",!0),kie=new $("output.filter.debug",!0),Sie=new $("output.filter.info",!0),Cie=new $("output.filter.warning",!0),$ie=new $("output.filter.error",!0),Iie=new $("outputFilterFocus",!1),Pie=new $("output.filter.categories",""),Die=q("outputService"),hh;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(hh||(hh={}));var Kz={OutputChannels:"workbench.contributions.outputChannels"};function eW(e){return Array.isArray(e.source)}var tW=class extends X{constructor(){super(...arguments),this.a=new Map,this.b=this.B(new D),this.onDidRegisterChannel=this.b.event,this.c=this.B(new D),this.onDidRemoveChannel=this.c.event,this.f=this.B(new D),this.onDidUpdateChannelSources=this.f.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}updateChannelSources(e,t){const i=this.a.get(e);i&&eW(i)&&(i.source=t,this.f.fire(i))}removeChannel(e){const t=this.a.get(e);t&&(this.a.delete(e),this.c.fire(t))}};Xt.add(Kz.OutputChannels,new tW);var eI=class extends Pv{constructor(e,t,i,s,r){super(),this.id=e,this.name=t,this.r=i,this.s=s,this.extension=r,this.n=0,this.visible=!1,this.setLevel(i.getLevel()),this.B(i.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(ie(()=>this.s.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.n;this.r.flush(),this.s.$update(this.id,hh.Clear,e)}replace(e){const t=this.n;this.info(e),this.s.$update(this.id,hh.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}m(e,t){this.n+=_.fromString(t).byteLength,tO(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,hh.Append))}},iW=class extends eI{appendLine(e){this.append(e)}},Ay=class{constructor(t,i,s,r,n,o){this.i=i,this.j=s,this.k=r,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(Z.MainThreadOutputService),this.b=this.k.extUri.joinPath(i.logsLocation,`output_logging_${Sz(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[i,s]of this.g)s.visible=i===this.h}createOutputChannel(t,i,s){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const r=typeof i=="object"&&i.log,n=Ue(i)?i:void 0;if(Ue(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>qe.equals(s.identifier,u))?.[1];a&&(o=nO(a));const c=new se,l=r?this.o(t,o,s,c):this.n(t,n,s,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(ie(()=>this.g.delete(u.id)))}),r?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,i,s,r){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=r.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,i,s.identifier.value);return r.add(ie(()=>this.l.deregisterLogger(o))),new eI(c,t,a,this.a,s)}async o(t,i,s,r){const n=await this.p(s),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${s.identifier.value}.${o}`,l=r.add(this.l.createLogger(a,{id:c,name:t,logLevel:i,extensionId:s.identifier.value}));return r.add(ie(()=>this.l.deregisterLogger(a))),new iW(c,t,l,this.a,s)}p(t){let i=this.d.get(t.identifier.value);if(!i){const s=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,i=(async()=>{try{await this.j.value.createDirectory(s)}catch(r){if(nf(r)!==pe.FileExists)throw r}return s})())}return i}q(t,i,s){const r=()=>{if(s.isDisposed)throw new Error("Channel has been closed")};return i.then(n=>s.add(n)),{get name(){return t},append(n){r(),i.then(o=>o.append(n))},appendLine(n){r(),i.then(o=>o.appendLine(n))},clear(){r(),i.then(n=>n.clear())},replace(n){r(),i.then(o=>o.replace(n))},show(n,o){r(),i.then(a=>a.show(n,o))},hide(){r(),i.then(n=>n.hide())},dispose(){s.dispose()}}}r(t,i,s,r){const n=()=>{if(r.isDisposed)throw new Error("Channel has been closed")},o=r.add(new D);function a(c){i=c,o.fire(c)}return s.then(c=>{c.logLevel!==i&&a(c.logLevel),r.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,s,r),get logLevel(){return i},onDidChangeLogLevel:o.event,trace(c,...l){n(),s.then(u=>u.trace(c,...l))},debug(c,...l){n(),s.then(u=>u.debug(c,...l))},info(c,...l){n(),s.then(u=>u.info(c,...l))},warn(c,...l){n(),s.then(u=>u.warn(c,...l))},error(c,...l){n(),s.then(u=>u.error(c,...l))}}}};Ay=__decorate([__param(0,Ae),__param(1,kt),__param(2,nh),__param(3,Ra),__param(4,xn),__param(5,De)],Ay);var tI=q("IExtHostOutputService"),dh,Ty=class{static{dh=this}static{this.c=0}static{this.d=250}constructor(t,i){this.h=i,this.f=new Map,this.g=t.getProxy(Z.MainThreadDecorations)}registerFileDecorationProvider(t,i){const s=dh.c++;this.f.set(s,{provider:t,extensionDescription:i}),this.g.$registerDecorationProvider(s,i.identifier.value);const r=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(s,null);return}const o=Qi(n);if(o.length<=dh.d){this.g.$onDidChange(s,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",i.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:aR(u.path,"/")})),c=K2(a,(u,h)=>u.rank-h.rank||co(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const f of u){const p=mi(f.uri.path);if(h!==p&&(h=p,l.push(f.uri)>=dh.d))break e}}this.g.$onDidChange(s,l)});return new Le(()=>{r?.dispose(),this.g.$unregisterDecorationProvider(s),this.f.delete(s)})}async $provideDecorations(t,i,s){if(!this.f.has(t))return Object.create(null);const r=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(i.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(x.revive(c),s));if(!u)return;try{hw.validate(u),u.badge&&typeof u.badge!="string"&&L(o,"codiconDecoration"),r[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),r}};Ty=dh=__decorate([__param(0,Ae),__param(1,De)],Ty);var iI=q("IExtHostDecorations"),sW=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=Fc(e);const i=this.a,s=this.b,r=t.length;return r===0?!1:(this.a=new Uint32Array(i.length+r),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e),e+r),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(s.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=Fc(e),t=Fc(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=Fc(e),t=Fc(t);const i=this.a,s=this.b;if(e>=i.length)return!1;const r=i.length-e;return t>=r&&(t=r),t===0?!1:(this.a=new Uint32Array(i.length-t),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(s.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=Fc(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let i=t;i<=e;i++)this.b[i]=this.b[i-1]+this.a[i];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.a.length-1,s=0,r=0,n=0;for(;t<=i;)if(s=t+(i-t)/2|0,r=this.b[s],n=r-this.a[s],e<n)i=s-1;else if(e>=r)t=s+1;else break;return new rW(s,e-n)}},rW=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},nW=class{constructor(e,t,i,s){this.a=e,this.b=t,this.c=i,this.d=s,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const i of t)this.k(i.range),this.l(new rs(i.range.startLineNumber,i.range.startColumn),i.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,i=new Uint32Array(t);for(let s=0;s<t;s++)i[s]=this.b[s].length+e;this.f=new sW(i)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const i=Gx(t);if(i.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]+this.b[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]);const s=new Uint32Array(i.length-1);for(let r=1;r<i.length;r++)this.b.splice(e.lineNumber+r-1,0,i[r]),s[r-1]=i[r].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,s)}},Ry=new Map;function oW(e,t){t?Ry.set(e,t):Ry.delete(e)}function aW(e){return Ry.get(e)}var cW=class extends nW{constructor(e,t,i,s,r,n,o,a){super(t,i,s,r),this.o=e,this.p=n,this.q=o,this.r=a,this.n=!1}dispose(){gi(!this.n),this.n=!0,this.q=!1}equalLines(e){return Oi(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===G.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},get encoding(){return e.r},save(){return e.s()},getText(t){return t?e.t(t):e.getText()},get eol(){return e.c===`
`?Ls.LF:Ls.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.u(t)},offsetAt(t){return e.v(t)},positionAt(t){return e.w(t)},validateRange(t){return e.x(t)},validatePosition(t){return e.y(t)},getWordRangeAtPosition(t,i){return e.z(t,i)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){gi(!this.n),this.p=e}_acceptIsDirty(e){gi(!this.n),this.q=e}_acceptEncoding(e){gi(!this.n),this.r=e}s(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}t(e){const t=this.x(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const i=this.c,s=t.start.line,r=t.end.line,n=[];n.push(this.b[s].substring(t.start.character));for(let o=s+1;o<r;o++)n.push(this.b[o]);return n.push(this.b[r].substring(0,t.end.character)),n.join(i)}u(e){let t;if(e instanceof Ne?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new lW(t,this.b[t],t===this.b.length-1)}v(e){return e=this.y(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}w(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),i=this.b[t.index].length;return new Ne(t.index,Math.min(t.remainder,i))}x(e){if(!(e instanceof $e))throw new Error("Invalid argument");const t=this.y(e.start),i=this.y(e.end);return t===e.start&&i===e.end?e:new $e(t.line,t.character,i.line,i.character)}y(e){if(!(e instanceof Ne))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:i}=e,s=!1;if(t<0)t=0,i=0,s=!0;else if(t>=this.b.length)t=this.b.length-1,i=this.b[t].length,s=!0;else{const r=this.b[t].length;i<0?(i=0,s=!0):i>r&&(i=r,s=!0)}return s?new Ne(t,i):e}z(e,t){const i=this.y(e);if(!t)t=aW(this.p);else if(qx(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const s=Ek(i.character+1,yk(t),this.b[i.line],0);if(s)return new $e(i.line,s.startColumn-1,i.line,s.endColumn-1)}},lW=class{constructor(e,t,i){this.a=e,this.b=t,this.c=i}get lineNumber(){return this.a}get text(){return this.b}get range(){return new $e(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new $e(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Zg=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},Rie=new Zg("id#"),uW=class qA{static{this.c=new Zg("TextEditorDecorationType")}constructor(t,i,s){const r=qA.c.nextId();t.$registerTextEditorDecorationType(i.identifier,r,Vw.from(s)),this.value=Object.freeze({key:r,dispose(){t.$removeTextEditorDecorationType(r)}})}},hW=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let i=null;if(e instanceof Ne)i=new $e(e,e);else if(e instanceof $e)i=e;else throw new Error("Unrecognized location");this.l(i,t,!1)}insert(e,t){this.k(),this.l(new $e(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof $e)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,i){const s=this.c.validateRange(e);this.g.push({range:s,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this.k(),e!==Ls.LF&&e!==Ls.CRLF)throw Ie("endOfLine");this.h=e}},dW=class{constructor(e,t,i,s){this.c=e,this.d=t,this._accept(i),this.e=s;const r=this;this.value={get tabSize(){return r.f},set tabSize(n){r.n(n)},get indentSize(){return r.g},set indentSize(n){r.p(n)},get insertSpaces(){return r.j},set insertSpaces(n){r.s(n)},get cursorStyle(){return r.k},set cursorStyle(n){r.t(n)},get lineNumbers(){return r.l},set lineNumbers(n){r.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=xc.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:xc.from(e)})))}assign(e){const t={};let i=!1;if(typeof e.tabSize<"u"){const s=this.m(e.tabSize);s==="auto"?(i=!0,t.tabSize=s):typeof s=="number"&&this.f!==s&&(this.f=s,i=!0,t.tabSize=s)}if(typeof e.indentSize<"u"){const s=this.o(e.indentSize);s==="tabSize"?(i=!0,t.indentSize=s):typeof s=="number"&&this.h!==s&&(this.g=s,this.h=s,i=!0,t.indentSize=s)}if(typeof e.insertSpaces<"u"){const s=this.q(e.insertSpaces);s==="auto"?(i=!0,t.insertSpaces=s):this.j!==s&&(this.j=s,i=!0,t.insertSpaces=s)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,i=!0,t.lineNumbers=xc.from(e.lineNumbers)),i&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(i=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(i)})}},fW=class{constructor(e,t,i,s,r,n,o,a){this.id=e,this.k=t,this.l=i,this.g=!1,this.h=new Set,this.c=r,this.d=new dW(this.k,this.id,n,i),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return s.value},set document(l){throw new to("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof jr))throw Ie("selection");c.c=[l],c.m()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof jr)))throw Ie("selections");c.c=l,c.m()},get visibleRanges(){return c.e},set visibleRanges(l){throw new to("visibleRanges")},get diffInformation(){return c.j},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new to("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new hW(s.value,u);return l(h),c.n(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let f;if(!u||Array.isArray(u)&&u.length===0)f=c.c.map(p=>O.from(p));else if(u instanceof Ne){const{lineNumber:p,column:g}=Je.from(u);f=[{startLineNumber:p,startColumn:g,endLineNumber:p,endColumn:g}]}else if(u instanceof $e)f=[O.from(u)];else{f=[];for(const p of u)if(p instanceof $e)f.push(O.from(p));else{const{lineNumber:g,column:v}=Je.from(p);f.push({startLineNumber:g,startColumn:v,endLineNumber:g,endColumn:v})}}return h.keepWhitespace===void 0&&(h.keepWhitespace=!1),t.$tryInsertSnippet(e,s.value.version,l.value,f,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.o(()=>{if(b9(u))return t.$trySetDecorations(e,l.key,YB(u));{const f=new Array(4*u.length);for(let p=0,g=u.length;p<g;p++){const v=u[p];f[4*p]=v.start.line+1,f[4*p+1]=v.start.character+1,f[4*p+2]=v.end.line+1,f[4*p+3]=v.end.character+1}return t.$trySetDecorationsFast(e,l.key,f)}}))},revealRange(l,u){c.o(()=>t.$tryRevealRange(e,O.from(l),u||ip.Default))},show(l){t.$tryShowEditor(e,Wt.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){gi(!this.g),this.g=!0}_acceptOptions(e){gi(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){gi(!this.g),this.e=e}_acceptViewColumn(e){gi(!this.g),this.f=e}_acceptSelections(e){gi(!this.g),this.c=e}_acceptDiffInformation(e){gi(!this.g),this.j=e}async m(){const e=this.c.map(Fs.from);return await this.o(()=>this.k.$trySetSelections(this.id,e)),this.value}n(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map(r=>r.range);i.sort((r,n)=>r.end.line===n.end.line?r.end.character===n.end.character?r.start.line===n.start.line?r.start.character-n.start.character:r.start.line-n.start.line:r.end.character-n.end.character:r.end.line-n.end.line);for(let r=0,n=i.length-1;r<n;r++){const o=i[r].end;if(i[r+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const s=t.edits.map(r=>({range:O.from(r.range),text:r.text,forceMoveMarkers:r.forceMoveMarkers}));return this.k.$tryApplyEdits(this.id,t.documentVersionId,s,{setEndOfLine:typeof t.setEndOfLine=="number"?Ec.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}o(e){return this.g?(this.l.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.l.warn(t),null))}},pW=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},Ly=class{constructor(t,i){this.h=t,this.i=i,this.a=null,this.b=new Map,this.c=new Ht,this.d=new D,this.e=new D,this.f=new D,this.g=new D,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const i=[],s=[],r=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=x.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),i.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=x.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==G.vscodeNotebookCell&&o.scheme!==G.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new pW(new cW(this.h.getProxy(Z.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty,n.encoding)),this.c.set(o,a),s.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&r.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=x.revive(n.documentUri);gi(this.c.has(o),`document '${o}' does not exist`),gi(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new fW(n.id,this.h.getProxy(Z.MainThreadTextEditors),this.i,new Qt(()=>a.document),n.selections.map(Fs.to),n.options,n.visibleRanges.map(l=>O.to(l)),typeof n.editorPosition=="number"?Wt.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(gi(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),Es(i),Es(r),t.removedDocuments&&this.e.fire(i),t.addedDocuments&&this.d.fire(s),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return Zt.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const i=this.b.get(this.a);return t?i:i?.value}allEditors(){return[...this.b.values()]}};Ly=__decorate([__param(0,Ae),__param(1,De)],Ly);var ia=q("IExtHostDocumentsAndEditors"),gW={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiSettingsSearch:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiSettingsSearch.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authIssuers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authIssuers.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:9},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatReferenceDiagnostic:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts"},chatStatusItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatStatusItem.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribLanguageModelToolSets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLanguageModelToolSets.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:4},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelCapabilities:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts"},languageModelDataPart:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelDataPart.d.ts",version:3},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},taskProblemMatcherStatus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskProblemMatcherStatus.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},toolProgress:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.toolProgress.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Qg=Object.freeze(gW),Ny=Xt.as(vf.JSONContribution),mW=class h1{static a(t){const i=new vo;for(let s=0,r=t.length;s<r;s++)i.add(t[s].description.identifier);return i}static compute(t,i){if(!t||!t.length)return new h1(i,[]);if(!i||!i.length)return new h1([],t);const s=this.a(t),r=this.a(i),n=i.filter(a=>!s.has(a.description.identifier)),o=t.filter(a=>!r.has(a.description.identifier));return new h1(n,o)}constructor(t,i){this.added=t,this.removed=i}},vW=class{constructor(e,t,i){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=i,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=mW.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){lt(e)}}},wW={type:"string",enum:["ui","workspace"],enumDescriptions:[d(14053,null),d(14054,null)]},sI="vscode://schemas/vscode-extensions",My={properties:{engines:{type:"object",description:d(14055,null),properties:{vscode:{type:"string",description:d(14056,null),default:"^1.22.0"}}},publisher:{description:d(14057,null),type:"string"},displayName:{description:d(14058,null),type:"string"},categories:{description:d(14059,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:tS},{type:"string",const:"Languages",deprecationMessage:d(14060,null)}]}},galleryBanner:{type:"object",description:d(14061,null),properties:{color:{description:d(14062,null),type:"string"},theme:{description:d(14063,null),type:"string",enum:["dark","light"]}}},contributes:{description:d(14064,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(14065,null)},enableProposedApi:{type:"boolean",deprecationMessage:d(14066,null)},enabledApiProposals:{markdownDescription:d(14067,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Qg).map(e=>e),markdownEnumDescriptions:Object.values(Qg).map(e=>e.proposal)}},api:{markdownDescription:d(14068,null),type:"string",enum:["none"],enumDescriptions:[d(14069,null)]},activationEvents:{description:d(14070,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(14071,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(14072,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(14073,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(14074,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(14075,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(14076,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(14077,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(14078,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(14079,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(14080,null),body:"onStartupFinished"},{label:"onTaskType",description:d(14081,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(14082,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(14083,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(14084,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(14085,null)},{label:"onUri",body:"onUri",description:d(14086,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(14087,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(14088,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(14089,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(14090,null)},{label:"onRenderer",description:d(14091,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(14092,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(14093,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(14094,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(14095,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(14096,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d(14097,null)},{label:"onTerminalCompletionsRequested",body:"onTerminalCompletionsRequested",description:d(14098,null)},{label:"onMcpCollection",description:d(14099,null),body:"onMcpCollection:${2:collectionId}"},{label:"*",description:d(14100,null),body:"*"}]}},badges:{type:"array",description:d(14101,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(14102,null)},href:{type:"string",description:d(14103,null)},description:{type:"string",description:d(14104,null)}}}},markdown:{type:"string",description:d(14105,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(14106,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(14107,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:S0}},extensionPack:{description:d(14108,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:S0}},extensionKind:{description:d(14109,null),type:"array",items:wW,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(14110,null)},{body:["workspace"],description:d(14111,null)},{body:["ui","workspace"],description:d(14112,null)},{body:["workspace","ui"],description:d(14113,null)},{body:[],description:d(14114,null)}]},capabilities:{description:d(14115,null),type:"object",properties:{virtualWorkspaces:{description:d(14116,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(14117,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(14118,null),d(14119,null),d(14120,null)]},description:{type:"string",markdownDescription:d(14121,null)}}},untrustedWorkspaces:{description:d(14122,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(14123,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(14124,null),d(14125,null),d(14126,null)]},restrictedConfigurations:{description:d(14127,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(14128,null)}}}}},sponsor:{description:d(14129,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(14130,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(14131,null),type:"string"},"vscode:uninstall":{description:d(14132,null),type:"string"}}},icon:{type:"string",description:d(14133,null)},l10n:{type:"string",description:d(14134,null)},pricing:{type:"string",markdownDescription:d(14135,null),enum:["Free","Trial"],default:"Free"}}},bW=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new vW(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&Kj.register(e.extensionPoint,e.activationEventsGenerator),My.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Ny.registerSchema(sI,My),t}getExtensionPoints(){return Array.from(this.a.values())}},rI={ExtensionsRegistry:"ExtensionsRegistry"};Xt.add(rI.ExtensionsRegistry,new bW);var yW=Xt.as(rI.ExtensionsRegistry);Ny.registerSchema(sI,My),Ny.registerSchema(qU,{properties:{extensionEnabledApiProposals:{description:d(14136,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Qg),markdownEnumDescriptions:Object.values(Qg).map(e=>e.proposal)}}]}}}});var xW={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(11454,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(11455,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(11456,null),default:""}}},Oy;(function(e){function t(i,s,r){if(!i)return;const n=Ue(i.type)?i.type:void 0;if(!n||n.length===0){r.error(d(11457,null));return}const o=[];if(Array.isArray(i.required))for(const a of i.required)Ue(a)&&o.push(a);return{extensionId:s.value,taskType:n,required:o,properties:i.properties?Qe(i.properties):{},when:i.when?Nt.deserialize(i.when):void 0}}e.from=t})(Oy||(Oy={}));var EW=yW.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const i of e)i.type&&t.push(`onTaskType:${i.type}`)},jsonSchema:{description:d(11458,null),type:"array",items:xW}}),kW=class{constructor(){this.d=new D,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{EW.setHandler((i,s)=>{this.c=void 0;try{for(const r of s.removed){const n=r.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const r of s.added){const n=r.value;for(const o of n){const a=Oy.from(o,r.description.identifier,r.collector);a&&(this.a[a.taskType]=a)}}(s.removed.length>0||s.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),t.properties!==void 0?i.properties=Qe(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this.c={oneOf:e}}return this.c}},SW=new kW,CW="settings",Nie=new $("taskRunning",!1,d(11459,null)),Mie=new $("taskTerminalActive",!1,d(11460,null)),Oie=fd(11462,"Tasks"),Xg;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Xg||(Xg={})),function(e){function t(i){if(!i)return e.Strong;switch(i.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(Xg||(Xg={}));var nI;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(nI||(nI={}));var fh;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(fh||(fh={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(fh||(fh={}));var ph;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(ph||(ph={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(ph||(ph={}));var gh;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(gh||(gh={})),function(e){function t(i){switch(i.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(gh||(gh={}));var oI;(function(e){e.defaults={echo:!0,reveal:fh.Always,revealProblems:ph.Never,focus:!1,panel:gh.Shared,showReuseMessage:!0,clear:!1}})(oI||(oI={}));var Kg;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(Kg||(Kg={})),function(e){function t(s){switch(s.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function i(s){switch(s){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=i}(Kg||(Kg={}));var aI;(function(e){function t(i){return Ue(i)?i:i.value}e.value=t})(aI||(aI={}));var cI;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(s){return s===e.Clean._id||s===e.Build._id||s===e.Rebuild._id||s===e.Test._id}e.is=t;function i(s){if(s!==void 0)return Ue(s)?t(s)?{_id:s,isDefault:!1}:void 0:s}e.from=i})(cI||(cI={}));var lI;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(lI||(lI={}));var uI;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(i){switch(i){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(uI||(uI={}));var hI;(function(e){e.parallel="parallel",e.sequence="sequence"})(hI||(hI={}));var Fy;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(Fy||(Fy={}));var dI;(function(e){e.terminateNewest="terminateNewest",e.terminateOldest="terminateOldest",e.prompt="prompt",e.warn="warn",e.silent="silent"})(dI||(dI={}));var fI;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:Fy.default,instanceLimit:1,instancePolicy:"prompt"}})(fI||(fI={}));var em;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(em||(em={})),function(e){e._default=e.Terminal}(em||(em={}));var pI;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(pI||(pI={}));var gI;(function(e){e.SingleRun="singleRun",e.Background="background"})(gI||(gI={}));var sa;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(sa||(sa={}));var mI;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(mI||(mI={}));var vI;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function i(c,l,u){return{...t(c),kind:sa.Start,terminalId:l,resolvedVariables:u}}e.start=i;function s(c,l,u){return{...t(c),kind:sa.ProcessStarted,terminalId:l,processId:u}}e.processStarted=s;function r(c,l,u){return{...t(c),kind:sa.ProcessEnded,terminalId:l,exitCode:u}}e.processEnded=r;function n(c,l,u){return{...t(c),kind:sa.Terminated,exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:sa.Changed}}e.changed=a})(vI||(vI={}));var tm;(function(e){function t(s){const r=Object.keys(s).sort();let n="";for(const o of r){let a=s[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function i(s){const n={_key:t(s),type:s.taskType};return Object.assign(n,s),n}e.create=i})(tm||(tm={}));var wI;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(wI||(wI={}));var bI;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(bI||(bI={}));var yI;(function(e){function t(i,s){const r=SW.get(i.type);if(r===void 0){const c=Qe(i);return delete c._key,tm.create(c)}const n=Object.create(null);n.type=r.taskType;const o=new Set;r.required.forEach(c=>o.add(c));const a=r.properties;for(const c of Object.keys(a)){const l=i[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=Qe(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:s.error(d(11461,null,JSON.stringify(i,void 0,0),c));return}}}return tm.create(n)}e.createTaskIdentifier=t})(yI||(yI={}));var im;(function(e){function t(s){if(s!=null)return s}e.from=t;function i(s){if(s!=null)return s}e.to=i})(im||(im={}));var sm;(function(e){function t(s){if(s!=null)return s}e.from=t;function i(s){if(s!=null)return s}e.to=i})(sm||(sm={}));var Uy;(function(e){function t(s){if(s!=null)return s}e.from=t;function i(s){if(s!=null)return s}e.to=i})(Uy||(Uy={}));var mh;(function(e){function t(r){if(r){const n=r;return n&&!!n.process}else return!1}e.is=t;function i(r){if(r==null)return;const n={process:r.process,args:r.args};return r.options&&(n.options=Uy.from(r.options)),n}e.from=i;function s(r){if(r!=null)return new sc(r.process,r.args,r.options)}e.to=s})(mh||(mh={}));var jy;(function(e){function t(s){if(s!=null)return s}e.from=t;function i(s){if(s!=null)return s}e.to=i})(jy||(jy={}));var vh;(function(e){function t(r){if(r){const n=r;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function i(r){if(r==null)return;const n={};return r.commandLine!==void 0?n.commandLine=r.commandLine:(n.command=r.command,n.args=r.args),r.options&&(n.options=jy.from(r.options)),n}e.from=i;function s(r){if(!(r==null||r.command===void 0&&r.commandLine===void 0))return r.commandLine?new Fo(r.commandLine,r.options):new Fo(r.command,r.args?r.args:[],r.options)}e.to=s})(vh||(vh={}));var Hs;(function(e){function t(r){if(r){const n=r;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function i(r){return{customExecution:"customExecution"}}e.from=i;function s(r,n){return n.get(r)}e.to=s})(Hs||(Hs={}));var By;(function(e){function t(i,s){let r;return i.scope!==void 0&&typeof i.scope!="number"?r=i.scope.uri:i.scope!==void 0&&typeof i.scope=="number"&&(i.scope===Ln.Workspace&&s&&s.workspaceFile?r=s.workspaceFile:r=CW),{id:i._id,workspaceFolder:r}}e.from=t})(By||(By={}));var Hy;(function(e){function t(i){if(i!=null)return{_id:i.id,isDefault:i.isDefault}}e.from=t})(Hy||(Hy={}));var pr;(function(e){function t(r,n){if(r==null)return[];const o=[];for(const a of r){const c=i(a,n);c&&o.push(c)}return o}e.fromMany=t;function i(r,n){if(r==null)return;let o;r.execution instanceof sc?o=mh.from(r.execution):r.execution instanceof Fo?o=vh.from(r.execution):r.execution&&r.execution instanceof ew&&(o=Hs.from(r.execution));const a=im.from(r.definition);let c;return r.scope?typeof r.scope=="number"?c=r.scope:c=r.scope.uri:c=Ln.Workspace,!a||!c?void 0:{_id:r._id,definition:a,name:r.name,source:{extensionId:n.identifier.value,label:r.source,scope:c},execution:o,isBackground:r.isBackground,group:Hy.from(r.group),presentationOptions:sm.from(r.presentationOptions),problemMatchers:Qi(r.problemMatchers),hasDefinedMatchers:r.hasDefinedMatchers,runOptions:r.runOptions?r.runOptions:{reevaluateOnRerun:!0},detail:r.detail}}e.from=i;async function s(r,n,o){if(r==null)return;let a;mh.is(r.execution)?a=mh.to(r.execution):vh.is(r.execution)?a=vh.to(r.execution):Hs.is(r.execution)&&(a=Hs.to(r._id,o));const c=im.to(r.definition);let l;if(r.source&&(r.source.scope!==void 0?typeof r.source.scope=="number"?l=r.source.scope:l=await n.resolveWorkspaceFolder(x.revive(r.source.scope)):l=Ln.Workspace),!c||!l)return;const u=new op(c,l,r.name,r.source.label,a,r.problemMatchers);return r.isBackground!==void 0&&(u.isBackground=r.isBackground),r.group!==void 0&&(u.group=gu.from(r.group._id),u.group&&r.group.isDefault&&(u.group=new gu(u.group.id,u.group.label),r.group.isDefault===!0&&(u.group.isDefault=r.group.isDefault))),r.presentationOptions&&(u.presentationOptions=sm.to(r.presentationOptions)),r._id&&(u._id=r._id),r.detail&&(u.detail=r.detail),u}e.to=s})(pr||(pr={}));var zy;(function(e){function t(s){return s}e.from=t;function i(s){if(s)return Object.assign(Object.create(null),s)}e.to=i})(zy||(zy={}));var Wy=class{#e;constructor(e,t,i){this._id=t,this.a=i,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},rm=class{constructor(t,i,s,r,n,o,a,c){this.q=new D,this.r=new D,this.s=new D,this.u=new D,this.v=new D,this.w=new D,this.a=t.getProxy(Z.MainThreadTask),this.b=s,this.c=r,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,i,s){if(!s)return new Le(()=>{});const r=this.z();return this.j.set(r,{type:i,provider:s,extension:t}),this.a.$registerTaskProvider(r,i),new Le(()=>{this.j.delete(r),this.a.$unregisterTaskProvider(r)})}registerTaskSystem(t,i){this.a.$registerTaskSystem(t,i)}fetchTasks(t){return this.a.$fetchTasks(zy.from(t)).then(async i=>{const s=[];for(const r of i){const n=await pr.to(r,this.b,this.m);n&&s.push(n)}return s})}get taskExecutions(){const t=[];return this.k.forEach(i=>t.push(i)),t}terminateTask(t){if(!(t instanceof Wy))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,i,s){const r=this.m.get(t.id);r&&(this.o.set(t.id,r),this.e.attachPtyToTerminal(i,await r.callback(s))),this.p=t.id,this.q.fire({execution:await this.B(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const i=await this.B(t);this.l.delete(t.id),this.k.delete(t.id),this.D(t),this.r.fire({execution:i})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const i=await this.B(t.id);this.s.fire({execution:i,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const i=await this.B(t.id);this.u.fire({execution:i,exitCode:t.exitCode})}get onDidStartTaskProblemMatchers(){return this.v.event}async $onDidStartTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.v.fire({execution:i})}get onDidEndTaskProblemMatchers(){return this.w.event}async $onDidEndTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.w.fire({execution:i,hasErrors:t.hasErrors})}$provideTasks(t,i){const s=this.j.get(t);if(!s)return Promise.reject(new Error("no handler found"));const r=[],n=ai(()=>s.provider.provideTasks(Ye.None)).then(o=>this.x(i,r,s,o));return new Promise(o=>{n.then(a=>{Promise.all(r).then(()=>{o(a)})})})}async $resolveTask(t,i){const s=this.j.get(t);if(!s)return Promise.reject(new Error("no handler found"));if(i.definition.type!==s.type)throw new Error(`Unexpected: Task of type [${i.definition.type}] cannot be resolved by provider of type [${s.type}].`);const r=await pr.to(i,this.b,this.m);if(!r)throw new Error("Unexpected: Task cannot be resolved.");const n=await s.provider.resolveTask(r,Ye.None);if(!n)return;this.C(n,s);const o=pr.from(n,s.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==r.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Hs.is(o.execution)&&await this.A(o,n,!0),await this.y(o)}z(){return this.h++}async A(t,i,s){const r=await this.a.$createTaskId(t);!s&&!this.m.has(r)&&(this.n.add(r),this.o.set(r,i.execution)),this.m.set(r,i.execution)}async B(t,i){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new xs("Unexpected: The specified task is missing an execution");return n}const s=this.l.get(t.id);if(s)return s;let r;return i?r=Promise.resolve(new Wy(this,t.id,i)):r=pr.to(t.task,this.b,this.m).then(n=>{if(!n)throw new xs("Unexpected: Task does not exist.");return new Wy(this,t.id,n)}),this.l.set(t.id,r),r.then(n=>(this.k.set(t.id,n),n))}C(t,i){t._deprecated&&this.g.report("Task.constructor",i.extension,"Use the Task constructor that takes a `scope` instead.")}D(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const s=this.n.values();let r=s.next();for(;!r.done;)!this.o.has(r.value)&&this.p!==r.value&&(this.m.delete(r.value),this.n.delete(r.value)),r=s.next()}};rm=__decorate([__param(0,Ae),__param(1,kt),__param(2,js),__param(3,ia),__param(4,ms),__param(5,Jr),__param(6,De),__param(7,jc)],rm);var Vy=class extends rm{constructor(t,i,s,r,n,o,a,c){super(t,i,s,r,n,o,a,c),this.registerTaskSystem(G.vscodeRemote,{scheme:G.vscodeRemote,authority:"",platform:jT(0)})}async executeTask(t,i){if(!i.execution)throw new Error("Tasks to execute must include an execution");const s=pr.from(i,t);if(s===void 0)throw new Error("Task is not valid");if(Hs.is(s.execution))await this.A(s,i,!1);else throw new S1;const r=await this.B(await this.a.$getTaskExecution(s),i);return this.a.$executeTask(s).catch(n=>{throw new Error(n)}),r}x(t,i,s,r){const n=[];if(r)for(const o of r){if(this.C(o,s),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=pr.from(o,s.extension);a&&Hs.is(a.execution)?(n.push(a),i.push(this.A(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:s.extension}}async y(t){if(Hs.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,i){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,i,s){}};Vy=__decorate([__param(0,Ae),__param(1,kt),__param(2,js),__param(3,ia),__param(4,ms),__param(5,Jr),__param(6,De),__param(7,jc)],Vy);var _y=q("IExtHostTask"),xI=class{constructor(){this.f=new Map,this.m=[],this.n=new D,this.o=new D,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,i,s){const r={command:e};if(t&&Object.keys(t).length>0&&(r.arguments=t),this.u("request",r),typeof s=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(r.seq);if(o){this.f.delete(r.seq);const a={type:"response",seq:0,request_seq:r.seq,success:!1,command:e,message:d(6779,null,s,e)};o(a)}},s)}return i&&this.f.set(r.seq,i),r.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await ii(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,i=this.f.get(t.request_seq);i&&(this.f.delete(t.request_seq),i(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,i)=>e.set(i,t)),await ii(500),e.forEach((t,i)=>{t({type:"response",seq:0,request_seq:i,success:!1,command:"canceled",message:"canceled"}),this.f.delete(i)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function $W(e){return e.type&&(e.label||e.program||e.runtime)}var IW=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function PW(e){return!!(e&&e.match(IW))}function EI(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(PW(e.path))return x.parse(e.path);if(es(e.path))return x.file(e.path)}return e.path}function kI(e){if(typeof e.path=="object"){const t=x.revive(e.path);if(t)return t.scheme===G.file?t.fsPath:t.toString()}return e.path}function DW(e,t){const i=t?EI:kI,s=Qe(e);return SI(s,(r,n)=>{r&&n&&(n.path=i(n))}),s}function AW(e,t){const i=t?EI:kI,s=Qe(e);return SI(s,(r,n)=>{!r&&n&&(n.path=i(n))}),s}function SI(e,t){switch(e.type){case"event":{const i=e;switch(i.event){case"output":t(!1,i.body.source);break;case"loadedSource":t(!1,i.body.source);break;case"breakpoint":t(!1,i.body.breakpoint.source);break;default:break}break}case"request":{const i=e;switch(i.command){case"setBreakpoints":t(!0,i.arguments.source);break;case"breakpointLocations":t(!0,i.arguments.source);break;case"source":t(!0,i.arguments.source);break;case"gotoTargets":t(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach(s=>t(!1,s));break;default:break}break}case"response":{const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach(s=>t(!1,s.source));break;case"loadedSources":i.body.sources.forEach(s=>t(!1,s));break;case"scopes":i.body.scopes.forEach(s=>t(!1,s.source));break;case"setFunctionBreakpoints":i.body.breakpoints.forEach(s=>t(!1,s.source));break;case"setBreakpoints":i.body.breakpoints.forEach(s=>t(!1,s.source));break;case"disassemble":i.body?.instructions.forEach(r=>t(!1,r.location));break;case"locations":t(!1,i.body?.source);break;default:break}break}}}var Bc=q("IExtHostEditorTabs"),CI=class{constructor(e,t,i){this.e=i,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new yw(x.revive(this.b.input.uri));case 2:return new Dp(x.revive(this.b.input.original),x.revive(this.b.input.modified));case 3:return new W7(x.revive(this.b.input.base),x.revive(this.b.input.input1),x.revive(this.b.input.input2),x.revive(this.b.input.result));case 6:return new xw(x.revive(this.b.input.uri),this.b.input.viewType);case 7:return new V7(this.b.input.viewType);case 4:return new Ew(x.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new kw(x.revive(this.b.input.original),x.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new _7;case 9:return new q7(x.revive(this.b.input.uri),x.revive(this.b.input.inputBoxUri));case 10:return new G7;case 11:return new J7(this.b.input.diffEditors.map(e=>new Dp(x.revive(e.original),x.revive(e.modified))));default:return}}},TW=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const i of e.tabs)i.isActive&&(this.d=i.id),this.c.push(new CI(i,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return Wt.to(e.b.viewColumn)},get activeTab(){return e.c.find(i=>i.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(i=>i.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const i=new CI(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,i),e.tabDto.isActive&&(this.d=i.tabId),i}else if(e.kind===1){const i=this.c.splice(e.index,1)[0];if(!i)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return i.tabId===this.d&&(this.d=""),i}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const i=this.c.splice(e.oldIndex,1)[0];if(!i)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,i),i}const t=this.c.find(i=>i.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},qy=class{constructor(t){this.b=new D,this.c=new D,this.e=[],this.a=t.getProxy(Z.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,i={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(s=>s.apiObject))},get activeTabGroup(){const s=t.d;return wa(t.e.find(n=>n.groupId===s)?.apiObject)},close:async(s,r)=>{const n=Array.isArray(s)?s:[s];return n.length?RW(n[0])?this.j(n,r):this.i(n,r):!0}};this.f=Object.freeze(i)}return this.f}$acceptEditorTabModel(t){const i=new Set(this.e.map(l=>l.groupId)),s=new Set(t.map(l=>l.groupId)),r=_2(i,s),n=this.e.filter(l=>r.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new TW(l,()=>this.d);return r.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=wa(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const i=this.e.find(s=>s.groupId===t.groupId);if(!i)throw new Error("Update Group IPC call received before group creation.");i.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[i.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const i=this.e.find(r=>r.groupId===t.groupId);if(!i)throw new Error("Update Tabs IPC call received before group creation.");const s=i.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[s.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[s.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[s.apiObject]}));return}}g(t){for(const i of this.e)for(const s of i.tabs)if(s.apiObject===t)return s}h(t){return this.e.find(i=>i.apiObject===t)}async i(t,i){const s=[];for(const r of t){const n=this.g(r);if(!n)throw new Error("Tab close: Invalid tab not found!");s.push(n.tabId)}return this.a.$closeTab(s,i)}async j(t,i){const s=[];for(const r of t){const n=this.h(r);if(!n)throw new Error("Group close: Invalid group not found!");s.push(n.groupId)}return this.a.$closeGroup(s,i)}};qy=__decorate([__param(0,Ae)],qy);function RW(e){return e.tabs!==void 0}var LW=0,$I=new WeakMap,wh=q("IExtHostTesting"),Gy=class extends X{constructor(t,i,s,r){super(),this.C=i,this.D=s,this.F=r,this.f=this.B(new D),this.g=new Map,this.w=this.B(new D),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(Z.MainThreadTesting),this.m=new jW(this.h),this.j=new OW(this.h,i),s.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Be.root(a))?.collection.tree.get(a)?.actual??r$(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Be.root(c))?.collection.tree.get(c)?.actual??r$({$mid:16,tests:[o]}),message:$c.to(a)}}default:return n}}}),s.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await s.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Be.root(a));if(c)return Be.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(Xi)||[],exclude:n?.exclude.map(o).filter(Xi)||[]}})}createTestController(t,i,s,r){if(this.g.has(i))throw new Error(`Attempt to insert a duplicate controller with ID "${i}"`);const n=new se,o=n.add(new tz(i,s,this.F));o.root.label=s;const a=new Map,c=new Set,l=this.h,u=()=>{let p=0;r&&(p|=2);const g=f.relatedCodeProvider;return g&&(g?.provideRelatedTests&&(p|=8),g?.provideRelatedCode&&(p|=4)),p},h={items:o.root.children,get label(){return s},set label(p){s=p,o.root.label=p,l.$updateController(i,{label:s})},get refreshHandler(){return r},set refreshHandler(p){r=p,l.$updateController(i,{capabilities:u()})},get id(){return i},get relatedCodeProvider(){return f.relatedCodeProvider},set relatedCodeProvider(p){L(t,"testRelatedCode"),f.relatedCodeProvider=p,l.$updateController(i,{capabilities:u()})},createRunProfile:(p,g,v,b,E,k)=>{let I=Rr(p);for(;a.has(I);)I++;return new AI(this.h,a,c,this.w.event,i,I,p,g,v,b,E,k)},createTestItem(p,g,v){return new ah(i,p,g,v)},createTestRun:(p,g,v=!0)=>this.j.createTestRun(t,i,o,p,g,v),invalidateTestResults:p=>{if(p===void 0)this.h.$markTestRetired(void 0);else{const g=p instanceof Array?p:[p];this.h.$markTestRetired(g.map(v=>Be.fromExtHostTestItem(v,i).toString()))}},set resolveHandler(p){o.resolveHandler=p},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},f={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(i,s,u()),n.add(ie(()=>l.$unregisterTestController(i))),this.g.set(i,f),n.add(ie(()=>this.g.delete(i))),n.add(o.onDidGenerateDiff(p=>l.$publishDiff(i,p.map(Hf.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,i=Ye.None){const s=PI(t);if(!s)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const r=this.g.get(s.controllerId);if(!r)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:Ic.from(s.kind),targets:[{testIds:t.include?.map(n=>Be.fromExtHostTestItem(n,r.collection.root.id).toString())??[r.collection.root.id],profileId:s.profileId,controllerId:s.controllerId}],exclude:t.exclude?.map(n=>n.id)},i)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,i,s){const r=this.F.getDocument(x.revive(t));if(!r)return[];const n=Je.to(i),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(r.document,n,s)}catch(l){s.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Be.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,i){const s=this.g.get(Be.root(t));if(!s)return[];const r=s.collection.tree.get(t);return r?(await s.relatedCodeProvider?.provideRelatedCode?.(r.actual,i))?.map(Ai.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,i,s){return(await this.j.getCoverageDetails(t,i,s))?.map(_u.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,i){this.g.get(t)?.profiles.get(i)?.configureHandler?.()}$setDefaultRunProfiles(t){const i=new Map;for(const[s,r]of Object.entries(t)){const n=this.g.get(s);if(!n)continue;const o=new Map,a=r.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!r.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&i.set(s,o)}this.w.fire(i)}async $refreshTests(t,i){await this.g.get(t)?.controller.refreshHandler?.(i)}$publishTestResults(t){this.results=Object.freeze(t.map(i=>{const s=ab.to(i),r=i.tasks.findIndex(n=>n.hasCoverage);return r!==-1&&(s.getDetailedCoverage=(n,o=Ye.None)=>this.h.$getCoverageDetails(i.id,r,n,o).then(a=>a.map(_u.to))),$I.set(s,i.id),s}).concat(this.results).sort((i,s)=>s.completedAt-i.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,i){const s=this.g.get(Be.fromString(t).controllerId)?.collection;s&&(await s.expand(t,i<0?1/0:i),s.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(i=>Hf.deserialize({asCanonicalUri:s=>s},i)))}async $runControllerTests(t,i){return Promise.all(t.map(s=>this.G(s,!1,i)))}async $startContinuousRun(t,i){const s=new Ke(i),r=await Promise.all(t.map(n=>this.G(n,!0,s.token)));return!i.isCancellationRequested&&!r.some(n=>n.error)&&await new Promise(n=>i.onCancellationRequested(n)),s.dispose(!0),r}async $provideTestFollowups(t,i){const s=this.results.find(o=>$I.get(o)===t.resultId),r=s&&BW(Be.fromString(t.extId),s?.results);if(!r)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(s,r,t.taskIndex,t.messageIndex,i);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),i.isCancellationRequested?[]:n.map(o=>{const a=LW++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const i of t)this.z.delete(i)}$executeTestFollowup(t){const i=this.z.get(t);return i?this.D.executeCommand(i.command,...i.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,i){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,i)}getMetadataForRun(t){for(const i of this.j.trackers){const s=i.getTaskIdForRun(t);if(s)return{taskId:s,runId:i.id}}}async G(t,i,s){const r=this.g.get(t.controllerId);if(!r)return{};const{collection:n,profiles:o,extension:a}=r,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(p=>n.tree.get(p)).filter(Xi),u=t.excludeExtIds.map(p=>r.collection.tree.get(p)).filter(Xi).filter(p=>l.some(g=>g.fullId.compare(p.fullId)===2));if(!l.length)return{};const h=new Sp(l.some(p=>p.actual instanceof Zb)?void 0:l.map(p=>p.actual),u.map(p=>p.actual),c,i),f=Uj(t)&&this.j.prepareForMainThreadTestRun(a,h,DI.fromInternal(t,r.collection),c,s);try{return await c.runHandler(h,s),{}}catch(p){return{error:String(p)}}finally{f&&f.hasRunningTasks&&!s.isCancellationRequested&&await Ve.toPromise(f.onEnd)}}};Gy=__decorate([__param(0,Ae),__param(1,De),__param(2,Bs),__param(3,ia)],Gy);var NW=1e4,II;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(II||(II={}));var MW=class extends X{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,i,s,r,n){super(),this.C=e,this.D=t,this.F=i,this.G=s,this.H=r,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new D),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new Ke(n));const o=this.B(new Zs(()=>this.I(),NW));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new D;this.y=a.event,this.B(ie(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:i}]of this.h)if(i===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,i){const[,s]=Be.fromString(e).path,r=this.z.get(e);if(!r)return[];const{report:n,extIds:o}=r,a=this.h.get(s);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof Pp){const u=o.indexOf(t);if(u===-1)return[];c=n.includesTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,i):this.G?.loadDetailedCoverage?.(a.run,n,i))??[]}createRun(e){const t=this.C.id,i=this.C.controllerId,s=ut(),r=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map($c.from):[$c.from(u)];if(l.uri&&l.range){const f={range:O.from(l.range),uri:l.uri};for(const p of h)p.location=p.location||f}this.D.$appendTestMessagesInRun(t,s,Be.fromExtHostTestItem(l,i).toString(),h)};let o=!1;const a=this.B(new Ke(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof Pp?l.includesTests:[];if(u.length)for(const p of u)this.L(p);const h=l.uri.toString(),f=new Be([t,s,h]).toString();this.z.set(f,{report:l,extIds:u.map(p=>Be.fromExtHostTestItem(p,i).toString())}),this.D.$appendCoverage(t,s,_u.fromFile(i,f,l))},enqueued:r(l=>{this.D.$updateTestStateInRun(t,s,Be.fromExtHostTestItem(l,i).toString(),1)}),skipped:r(l=>{this.D.$updateTestStateInRun(t,s,Be.fromExtHostTestItem(l,i).toString(),5)}),started:r(l=>{this.D.$updateTestStateInRun(t,s,Be.fromExtHostTestItem(l,i).toString(),2)}),errored:r((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,s,Be.fromExtHostTestItem(l,i).toString(),6,h)}),failed:r((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,s,Be.fromExtHostTestItem(l,i).toString(),4,h)}),passed:r((l,u)=>{this.D.$updateTestStateInRun(t,s,Be.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,s,_.fromString(l),u&&Ai.from(u),h&&Be.fromExtHostTestItem(h,i).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,s),--this.g||this.J())}};return this.g++,this.h.set(s,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:s,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof ah))throw new zf(e.id);if(this.j.has(Be.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],i=this.C.colllection.root;for(;;){const s=Hn.from(e);if(t.unshift(s),this.j.has(s.extId)||(this.j.add(s.extId),e===i))break;e=e.parent||i}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},OW=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,i){const s=Be.root(e);return this.g.get(s)?.getCoverageDetails(e,t,i)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:i}]of this.f)i===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,i,s,r){return this.k(t,i,s,e,r)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,i,s,r,n){const o=this.f.get(s);if(o)return o.createRun(r);const a=DI.fromPublic(t,i,s,n),c=PI(s);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!s.continuous,profile:c&&{group:Ic.from(c.kind),id:c.profileId},exclude:s.exclude?.map(u=>Be.fromExtHostTestItem(u,i.root.id).toString())??[],id:a.id,include:s.include?.map(u=>Be.fromExtHostTestItem(u,i.root.id).toString())??[i.root.id],preserveFocus:s.preserveFocus??!0,persist:n});const l=this.k(s,a,s.profile,e);return Ve.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(r)}k(e,t,i,s,r){const n=new MW(t,this.h,this.j,i,s,r);return this.f.set(e,n),this.g.set(n.id,n),n}},PI=e=>{if(e.profile){if(!(e.profile instanceof AI))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},DI=class V5{static fromPublic(t,i,s,r){return new V5(t,ut(),r,i)}static fromInternal(t,i){return new V5(t.controllerId,t.runId,!0,i)}constructor(t,i,s,r){this.controllerId=t,this.id=i,this.isPersisted=s,this.colllection=r}},FW=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,Hn.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Be.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:i}=this;return{get added(){return[...e].map(s=>s.revived)},get updated(){return[...t].map(s=>s.revived)},get removed(){return[...i].map(s=>s.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},UW=class extends jj{constructor(){super(...arguments),this.z=new D,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:Hn.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new FW(this.z)}},jW=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:cd(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new UW({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},bh=(e,t,i,s)=>{i?Object.assign(i,s):t.$updateTestRunConfig(e.controllerId,e.profileId,s)},AI=class extends j7{#e;#t;#i;#s;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,bh(this,this.#e,this.#s,{label:e}))}get supportsContinuousRun(){return this.j}set supportsContinuousRun(e){e!==this.j&&(this.j=e,bh(this,this.#e,this.#s,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),bh(this,this.#e,this.#s,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,bh(this,this.#e,this.#s,{tag:e?Us.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,bh(this,this.#e,this.#s,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return Ve.chain(this.#i,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(Xi))}constructor(e,t,i,s,r,n,o,a,c,l=!1,u=void 0,h=!1){super(r,n,a),this.g=o,this.runHandler=c,this._tag=u,this.j=h,this.#e=e,this.#n=t,this.#t=i,this.#i=s,t.set(n,this);const f=Ic.from(a);l&&i.add(n),this.#s={profileId:n,controllerId:r,tag:u?Us.namespace(this.controllerId,u.id):null,label:o,group:f,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#s&&(this.#e.$publishTestRunProfile(this.#s),this.#s=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#s=void 0}};function BW(e,t){for(let i=0;i<e.path.length;i++){const s=t.find(r=>r.id===e.path[i]);if(!s)return;if(i===e.path.length-1)return s;t=s.children}}var Hie=q("configurationResolverService"),nt;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.ColumnNumber="columnNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(nt||(nt={}));var HW=Object.values(nt).filter(e=>typeof e=="string"),Ti=class extends xs{constructor(e,t){super(t),this.variable=e}},TI=class _5{static{this.VARIABLE_LHS="${"}constructor(t){this.a=new Map,this.d=new Set,typeof t=="string"?(this.c=!0,this.b={value:t}):(this.c=!1,this.b=structuredClone(t))}static parse(t){if(t instanceof _5)return t;const i=new _5(t);return i.e(),i.g(i.b),i}e(){const t=this.b,i=Fe?"windows":Ct?"osx":$t?"linux":void 0;i&&t&&typeof t=="object"&&t.hasOwnProperty(i)&&Object.keys(t[i]).forEach(s=>t[s]=t[i][s]),delete t.windows,delete t.osx,delete t.linux}f(t,i){if(t[i]!=="$"||t[i+1]!=="{")return;let s=i+2,r=1;for(;s<t.length;){if(t[s]==="{")r++;else if(t[s]==="}"&&(r--,r===0))break;s++}if(r!==0)return;const n=t.slice(i,s+1),o=t.substring(i+2,s),a=o.indexOf(":");return a===-1?{replacement:{id:n,name:o,inner:o},end:s}:{replacement:{id:n,inner:o,name:o.slice(0,a),arg:o.slice(a+1)},end:s}}g(t){if(!(typeof t!="object"||t===null)){if(Array.isArray(t)){for(let i=0;i<t.length;i++){const s=t[i];typeof s=="string"?this.h(t,i,s):this.g(s)}return}for(const[i,s]of Object.entries(t))this.h(t,i,i,!0),typeof s=="string"?this.h(t,i,s):this.g(s)}}h(t,i,s,r,n){let o=0;for(;o<s.length;){const a=s.indexOf("${",o);if(a===-1)break;const c=this.f(s,a);if(c){if(o=c.end+1,n?.includes(c.replacement.id))continue;const l=this.a.get(c.replacement.id)||{locations:[],replacement:c.replacement},u={object:t,propertyName:i,replaceKeyName:r};l.locations.push(u),this.a.set(c.replacement.id,l),l.resolved?this.j(c.replacement,u,l.resolved,n):this.d.forEach(h=>h(c.replacement))}else o=a+2}}*unresolved(){const t=new Map,i=s=>{t.set(s.id,s)};for(const s of this.a.values())s.resolved===void 0&&t.set(s.replacement.id,s.replacement);for(this.d.add(i);;){const s=Zt.first(t);if(!s)break;const[r,n]=s;yield n,t.delete(r)}this.d.delete(i)}resolved(){return Zt.map(Zt.filter(this.a.values(),t=>!!t.resolved),t=>[t.replacement,t.resolved])}resolve(t,i){typeof i!="object"&&(i={value:String(i)});const s=this.a.get(t.id);if(s&&(s.resolved=i,i.value!==void 0))for(const r of s.locations||Zt.empty())this.j(t,r,i)}j(t,{replaceKeyName:i,propertyName:s,object:r},n,o=[]){if(n.value!==void 0){if(o.push(t.id),i&&typeof s=="string"){const a=r[s],c=s.replaceAll(t.id,n.value);delete r[s],r[c]=a,this.m(r,s,c),this.h(r,c,n.value,!0,o)}else r[s]=r[s].replaceAll(t.id,n.value),this.h(r,s,n.value,!1,o);o.pop()}}m(t,i,s){for(const r of this.a.values())for(const n of r.locations)n.object===t&&n.propertyName===i&&(n.propertyName=s)}toObject(){return this.c?this.b.value:this.b}},zW=class{constructor(e,t,i,s){this.h=new Map,this.resolvableVariables=new Set(HW),this.a=e,this.b=t,this.g=i,s&&(this.c=s.then(r=>this.i(r)))}i(e){if(Fe){const t=Object.create(null);return Object.keys(e).forEach(i=>{t[i.toLowerCase()]=e[i]}),t}return e}async resolveWithEnvironment(e,t,i){const s=TI.parse(i);for(const r of s.unresolved()){const n=await this.l(r,t?.uri,e);n!==void 0&&s.resolve(r,String(n))}return s.toObject()}async resolveAsync(e,t){const i=TI.parse(t);for(const s of i.unresolved()){const r=await this.l(s,e?.uri);r!==void 0&&i.resolve(s,String(r))}return i.toObject()}resolveWithInteractionReplace(e,t){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(e,t){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(e,t){if(this.h.has(e))throw new Error("Variable "+e+" is contributed twice.");this.resolvableVariables.add(e),this.h.set(e,t)}j(e){return this.b?this.b.getUriLabel(e,{noPrefix:!0}):e.fsPath}async l(e,t,i,s){const r={env:i!==void 0?this.i(i):await this.c,userHome:i!==void 0?void 0:await this.g},{name:n,arg:o}=e,a=u=>{const h=this.a.getFilePath();if(h)return lh(h);throw new Ti(u,d(13849,null,e.id))},c=u=>{const h=a(u);if(this.a.getWorkspaceFolderPathForFile){const f=this.a.getWorkspaceFolderPathForFile();if(f)return lh(f)}throw new Ti(u,d(13850,null,e.id,vt(h)))},l=u=>{if(o){const h=this.a.getFolderUri(o);if(h)return h;throw new Ti(u,d(13851,null,u,o))}if(t)return t;throw this.a.getWorkspaceFolderCount()>1?new Ti(u,d(13852,null,u)):new Ti(u,d(13853,null,u))};switch(n){case"env":if(o){if(r.env){const u=r.env[Fe?o.toLowerCase():o];if(Ue(u))return u}return""}throw new Ti(nt.Env,d(13854,null,e.id));case"config":if(o){const u=this.a.getConfigurationValue(t,o);if(Tt(u))throw new Ti(nt.Config,d(13855,null,e.id,o));if(St(u))throw new Ti(nt.Config,d(13856,null,e.id,o));return u}throw new Ti(nt.Config,d(13857,null,e.id));case"command":return this.m(nt.Command,e.id,o,s,"command");case"input":return this.m(nt.Input,e.id,o,s,"input");case"extensionInstallFolder":if(o){const u=await this.a.getExtension(o);if(!u)throw new Ti(nt.ExtensionInstallFolder,d(13858,null,e.id,o));return this.j(u.extensionLocation)}throw new Ti(nt.ExtensionInstallFolder,d(13859,null,e.id));default:switch(n){case"workspaceRoot":case"workspaceFolder":{const u=l(nt.WorkspaceFolder);return u?lh(this.j(u)):void 0}case"cwd":{if(!t&&!o)return oo();const u=l(nt.Cwd);return u?lh(this.j(u)):void 0}case"workspaceRootFolderName":case"workspaceFolderBasename":{const u=l(nt.WorkspaceFolderBasename);return u?lh(vt(this.j(u))):void 0}case"userHome":if(r.userHome)return r.userHome;throw new Ti(nt.UserHome,d(13860,null,e.id));case"lineNumber":{const u=this.a.getLineNumber();if(u)return u;throw new Ti(nt.LineNumber,d(13861,null,e.id))}case"columnNumber":{const u=this.a.getColumnNumber();if(u)return u;throw new Error(d(13862,null,e.id))}case"selectedText":{const u=this.a.getSelectedText();if(u)return u;throw new Ti(nt.SelectedText,d(13863,null,e.id))}case"file":return a(nt.File);case"fileWorkspaceFolder":return c(nt.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return vt(c(nt.FileWorkspaceFolderBasename));case"relativeFile":return t||o?Ea(this.j(l(nt.RelativeFile)),a(nt.RelativeFile)):a(nt.RelativeFile);case"relativeFileDirname":{const u=mi(a(nt.RelativeFileDirname));if(t||o){const h=Ea(this.j(l(nt.RelativeFileDirname)),u);return h.length===0?".":h}return u}case"fileDirname":return mi(a(nt.FileDirname));case"fileExtname":return wl(a(nt.FileExtname));case"fileBasename":return vt(a(nt.FileBasename));case"fileBasenameNoExtension":{const u=vt(a(nt.FileBasenameNoExtension));return u.slice(0,u.length-wl(u).length)}case"fileDirnameBasename":return vt(mi(a(nt.FileDirnameBasename)));case"execPath":{const u=this.a.getExecPath();return u||e.id}case"execInstallFolder":{const u=this.a.getAppRoot();return u||e.id}case"pathSeparator":case"/":return wt;default:try{return this.m(nt.Unknown,e.id,o,s,void 0)}catch{return e.id}}}}m(e,t,i,s,r){if(i&&s){const n=r===void 0?s[i]:s[r+":"+i];if(typeof n=="string")return n;throw new Ti(e,d(13864,null,t))}return t}},Hc=q("IExtHostVariableResolverProvider"),WW=class extends zW{constructor(e,t,i,s,r,n,o){function a(){if(i){const c=i.activeEditor();if(c)return c.document.uri;const l=s.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Dp||l.input instanceof kw)return l.input.modified;if(l.input instanceof yw||l.input instanceof Ew||l.input instanceof xw)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>r.getConfiguration(void 0,c).get(l),getAppRoot:()=>oo(),getExecPath:()=>kr.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return $r(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return $r(l.uri.fsPath)}}},getSelectedText:()=>{if(i){const c=i.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.line+1)}},getColumnNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.character+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(kr))}},nm=class extends X{constructor(t,i,s,r,n){super(),this.b=t,this.c=i,this.g=s,this.h=r,this.j=n,this.a=new Qt(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new WW(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};nm=__decorate([__param(0,Yr),__param(1,js),__param(2,ia),__param(3,ms),__param(4,Bc)],nm);var Jy=q("IExtHostDebugService"),om=class extends X{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,i,s,r,n,o,a,c){super(),this.Z=i,this.$=s,this.ab=r,this.bb=n,this.cb=o,this.db=a,this.eb=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new D),this.z=this.B(new D),this.C=this.B(new D),this.F=this.B(new D),this.u=t.getProxy(Z.MainThreadDebugService),this.I=this.B(new D),this.L=this.B(new D),this.G=new _W(this.u),this.H=new Map,this.$.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.gb(l)})),this.gb(l)}),this.Y=t.getProxy(Z.MainThreadTelemetry)}async $getVisualizerTreeItem(t,i){const s=this.hb(i);if(!s)return;const r=await this.Q.get(t)?.getTreeItem?.(s);return r?this.fb(t,r):void 0}registerDebugVisualizationTree(t,i,s){const r=qe.toKey(t.identifier),n=this.zb(r,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.Q.set(n,s),this.u.$registerDebugVisualizerTree(n,!!s.editItem),ie(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(i)})}async $getVisualizerTreeItemChildren(t,i){const s=this.S.get(i)?.item;return s?(await this.Q.get(t)?.getChildren?.(s))?.map(n=>this.fb(t,n))||[]:[]}async $editVisualizerTreeItem(t,i){const s=this.S.get(t);if(!s)return;const r=await this.Q.get(s.provider)?.editItem?.(s.item,i);return this.fb(s.provider,r||s.item)}$disposeVisualizedTree(t){const i=this.S.get(t);if(!i)return;const s=[i.children];for(const r of s)if(r)for(const n of r)s.push(this.S.get(n)?.children),this.S.delete(n)}fb(t,i){let s=this.R.get(i);return s||(s=this.O++,this.R.set(i,s),this.S.set(s,{provider:t,item:i})),yb.from(i,s)}asDebugSourceUri(t,i){const s=t;if(typeof s.sourceReference=="number"&&s.sourceReference>0){let r=`debug:${encodeURIComponent(s.path||"")}`,n="?";return i&&(r+=`${n}session=${encodeURIComponent(i.id)}`,n="&"),r+=`${n}ref=${s.sourceReference}`,x.parse(r)}else{if(s.path)return x.file(s.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}gb(t){const i=[];for(const s of t.getAllExtensionDescriptions())if(s.contributes){const r=s.contributes.debuggers;if(r&&r.length>0)for(const n of r)$W(n)&&i.push(n.type)}this.u.$registerDebugTypes(i)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(i=>t.push(i)),t}async $resolveDebugVisualizer(t,i){const s=this.W.get(t);if(!s)throw new Error(`No debug visualizer found with id '${t}'`);let{v:r,provider:n,extensionId:o}=s;if(r.visualization||(r=await n.resolveDebugVisualization?.(r,i)||r,s.v=r),!r.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.Ab(o,r.visualization)}async $executeDebugVisualizerCommand(t){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);const s=i.v.visualization;s&&"command"in s&&this.db.executeCommand(s.command,...s.arguments||[])}hb(t){const i=this.w.get(t.sessionId);return i&&{session:i.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,i,s,r){const n=this.hb(s),o=this.zb(t,i),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,r);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Bb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.Ab(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const i of t)this.W.delete(i)}registerDebugVisualizationProvider(t,i,s){if(!t.contributes?.debugVisualizers?.some(o=>o.id===i))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${i})`);const r=qe.toKey(t.identifier),n=this.zb(r,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.P.set(n,s),this.u.$registerDebugVisualizer(r,i),ie(()=>{this.u.$unregisterDebugVisualizer(r,i),this.P.delete(i)})}addBreakpoints(t){const i=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.wb(i,[],[]);const s=[],r=new Map;for(const n of i)if(n instanceof jo){let o=r.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},r.set(n.location.uri.toString(),o),s.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof Bo&&s.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(s)}removeBreakpoints(t){const i=t.filter(o=>this.H.delete(o.id));this.wb([],i,[]);const s=i.filter(o=>o instanceof jo).map(o=>o.id),r=i.filter(o=>o instanceof Bo).map(o=>o.id),n=i.filter(o=>o instanceof up).map(o=>o.id);return this.u.$unregisterBreakpoints(s,r,n)}startDebugging(t,i,s){const r=s.testRun&&this.eb.getMetadataForRun(s.testRun);return this.u.$startDebugging(t?t.uri:void 0,i,{parentSessionID:s.parentSession?s.parentSession.id:void 0,lifecycleManagedByParent:s.lifecycleManagedByParent,repl:s.consoleMode===mp.MergeWithParent?"mergeWithParent":"separate",noDebug:s.noDebug,compact:s.compact,suppressSaveBeforeStart:s.suppressSaveBeforeStart,testRun:r&&{runId:r.runId,taskId:r.taskId},suppressDebugStatusbar:s.suppressDebugStatusbar??s.debugUI?.simple,suppressDebugToolbar:s.suppressDebugToolbar??s.debugUI?.simple,suppressDebugView:s.suppressDebugView??s.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,i,s){if(!i)return new Le(()=>{});const r=this.f++;return this.g.push({type:t,handle:r,provider:i}),this.u.$registerDebugConfigurationProvider(t,s,!!i.provideDebugConfigurations,!!i.resolveDebugConfiguration,!!i.resolveDebugConfigurationWithSubstitutedVariables,r),new Le(()=>{this.g=this.g.filter(n=>n.provider!==i),this.u.$unregisterDebugConfigurationProvider(r)})}registerDebugAdapterDescriptorFactory(t,i,s){if(!s)return new Le(()=>{});if(!this.sb(t,i))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${i}' debugger.`);if(this.pb(i))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const r=this.h++;return this.j.push({type:i,handle:r,factory:s}),this.u.$registerDebugAdapterDescriptorFactory(i,r),new Le(()=>{this.j=this.j.filter(n=>n.factory!==s),this.u.$unregisterDebugAdapterDescriptorFactory(r)})}registerDebugAdapterTrackerFactory(t,i){if(!i)return new Le(()=>{});const s=this.m++;return this.n.push({type:t,handle:s,factory:i}),new Le(()=>{this.n=this.n.filter(r=>r.factory!==i)})}async $runInTerminal(t,i){return Promise.resolve(void 0)}async $substituteVariables(t,i){let s;const r=await this.yb(t);return r&&(s={uri:r.uri,name:r.name,index:r.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.cb.getResolver()).resolveAsync(s,i)}ib(t,i){if(t instanceof wu)return new GW(t.implementation)}jb(){}async $startDASession(t,i){const s=this,r=await this.xb(i);return this.ub(this.pb(r.type),r).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${r.type}' (extension might have failed to activate)`);const o=this.ib(n,r);if(!o)throw new Error(`Couldn't create a debug adapter for type '${r.type}'.`);const a=o;return this.M.set(t,a),this.tb(r).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.jb());try{if(this.U){const f=await this.U.sign(u.arguments.value);h.body={signature:f},a.sendResponse(h)}else throw new Error("no signer")}catch(f){h.success=!1,h.message=f.message,a.sendResponse(h)}}else{c&&c.onDidSendMessage&&c.onDidSendMessage(l);try{l=AW(l,!0)}catch(u){const h=l.type+"_"+(l.command??l.event??"");throw this.Y.$publicLog2("debugProtocolMessageError",{type:h,from:r.type}),u}s.u.$acceptDAMessage(t,l)}}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,i){i=DW(i,!1);const s=this.N.get(t);s&&s.onWillReceiveMessage&&s.onWillReceiveMessage(i),this.M.get(t)?.sendMessage(i)}$stopDASession(t){const i=this.N.get(t);this.N.delete(t),i&&i.onWillStopSession&&i.onWillStopSession();const s=this.M.get(t);return this.M.delete(t),s?s.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const i=[],s=[],r=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new Bo(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new up(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=x.revive(n.uri);a=new jo(new ns(c,new Ne(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}SB(a,o),this.H.set(o,a),i.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),s.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof Bo&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof jo&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new ns(x.revive(n.uri),new Ne(n.line,n.character))}r.push(o)}}}this.wb(i,s,r)}async $acceptStackFrameFocus(t){let i;if(t){const s=await this.xb(t.sessionId);t.kind==="thread"?i=new N7(s.api,t.threadId):i=new L7(s.api,t.threadId,t.frameId)}this.J=i,this.L.fire(this.J)}$provideDebugConfigurations(t,i,s){return ai(async()=>{const r=this.rb(t);if(!r)throw new Error("no DebugConfigurationProvider found");if(!r.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.yb(i);return r.provideDebugConfigurations(n,s)}).then(r=>{if(!r)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return r})}$resolveDebugConfiguration(t,i,s,r){return ai(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.yb(i);return n.resolveDebugConfiguration(o,s,r)})}$resolveDebugConfigurationWithSubstitutedVariables(t,i,s,r){return ai(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.yb(i);return n.resolveDebugConfigurationWithSubstitutedVariables(o,s,r)})}async $provideDebugAdapter(t,i){const s=this.qb(t);if(!s)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const r=await this.xb(i);return this.ub(s,r).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${r.type}'`);return this.kb(n)})}async $acceptDebugSessionStarted(t){const i=await this.xb(t);this.y.fire(i.api)}async $acceptDebugSessionTerminated(t){const i=await this.xb(t);i&&(this.z.fire(i.api),this.w.delete(i.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.xb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,i){(await this.xb(t))?._acceptNameChanged(i)}async $acceptDebugSessionCustomEvent(t,i){const r={session:(await this.xb(t)).api,event:i.event,body:i.body};this.F.fire(r)}kb(t){if(t instanceof cc)return this.lb(t);if(t instanceof lc)return this.mb(t);if(t instanceof vu)return this.nb(t);if(t instanceof wu)return this.ob(t);throw new Error("convertToDto unexpected type")}lb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}mb(t){return{type:"server",port:t.port,host:t.host}}nb(t){return{type:"pipeServer",path:t.path}}ob(t){return{type:"implementation"}}pb(t){const i=this.j.filter(s=>s.type===t);if(i.length>0)return i[0].factory}qb(t){const i=this.j.filter(s=>s.handle===t);if(i.length>0)return i[0].factory}rb(t){const i=this.g.filter(s=>s.handle===t);if(i.length>0)return i[0].provider}sb(t,i){if(t.contributes){const s=t.contributes.debuggers;if(s&&s.length>0){for(const r of s)if(r.label&&r.type&&r.type===i)return!0}}return!1}tb(t){const s=t.configuration.type,r=this.n.filter(n=>n.type===s||n.type==="*").map(n=>ai(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(r).then(n=>{const o=yt(n);if(o.length>0)return new qW(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async ub(t,i){const s=i.configuration.debugServer;if(typeof s=="number")return Promise.resolve(new lc(s));if(t){const n=await this.$.getExtensionRegistry();return ai(()=>t.createDebugAdapterDescriptor(i.api,this.vb(i,n))).then(o=>{if(o)return o})}const r=await this.$.getExtensionRegistry();return Promise.resolve(this.vb(i,r))}vb(t,i){}wb(t,i,s){(t.length>0||i.length>0||s.length>0)&&this.I.fire(Object.freeze({added:t,removed:i,changed:s}))}async xb(t){if(t)if(typeof t=="string"){const i=this.w.get(t);if(i)return i}else{let i=this.w.get(t.id);if(!i){const s=await this.yb(t.folderUri),r=t.parent?this.w.get(t.parent):void 0;i=new VW(this.u,t.id,t.type,t.name,s,t.configuration,r?.api),this.w.set(i.id,i),this.u.$sessionCached(i.id)}return i}throw new Error("cannot find session")}yb(t){if(t){const i=x.revive(t);return this.Z.resolveWorkspaceFolder(i)}return Promise.resolve(void 0)}zb(t,i){return`${t}\0${i}`}Ab(t,i){if(i){if("title"in i&&"command"in i)return{type:0};if("treeId"in i)return{type:1,id:`${t}\0${i.treeId}`};throw new Error("Unsupported debug visualization type")}}Bb(t){const i=this.Cb(t);let s,r;return"id"in i?r=Ut.asClassName(i):s=i,{iconPath:s,iconClass:r}}Cb(t){if(t instanceof di)return{id:t.id};const i=typeof t=="object"&&"dark"in t?t.dark:t,s=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof i=="string"?x.file(i):i,light:typeof s=="string"?x.file(s):s}}};om=__decorate([__param(0,Ae),__param(1,js),__param(2,Yr),__param(3,ms),__param(4,Bc),__param(5,Hc),__param(6,Bs),__param(7,wh)],om);var VW=class{constructor(e,t,i,s,r,n,o){this.f=e,this.g=t,this.h=i,this.j=s,this.k=r,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,i){return e.f.$customDebugAdapterRequest(e.g,t,i)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},_W=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},qW=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(i=>i.onExit?i.onExit(e,t):void 0)}},GW=class extends xI{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},Yy=class extends om{constructor(t,i,s,r,n,o,a,c){super(t,i,s,r,n,o,a,c)}};Yy=__decorate([__param(0,Ae),__param(1,js),__param(2,Yr),__param(3,ms),__param(4,Bc),__param(5,Hc),__param(6,Bs),__param(7,wh)],Yy);function JW(e){return"uri"in e&&"ranges"in e&&"preview"in e}function YW(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var RI=class{constructor(e){this.a=e}provideFileSearchResults(e,t,i){return(async()=>{const r=YW(t);return Promise.all(r.map(n=>this.a.provideFileSearchResults({pattern:e},n,i)))})().then(r=>yt(r).flat())}};function ZW(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:LI(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function LI(e){return{matchLines:e?.matchLines??Pb.matchLines,charsPerLine:e?.charsPerLine??Pb.charsPerLine}}function QW(e){if(JW(e)){const t=Qi(e.ranges).map((i,s)=>{const n=Qi(e.preview.matches)[s];return{sourceRange:i,previewRange:n}});return new _r(e.uri,t,e.preview.text)}else return new Eg(e.uri,e.text,e.lineNumber)}var XW=class{constructor(e){this.a=e}provideTextSearchResults(e,t,i,s){const r=a=>{KW(a)&&i.report(QW(a))};return(async()=>yt(await Promise.all(ZW(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>r(c)},s)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:yt(Qi(a.message))}))}};function KW(e){if(eV(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function eV(e){return!!e.preview}var NI=class extends En{constructor(e,t,i=()=>!1){const s=new $S(i,()=>!1);super(s);const r=new Ht;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});r.has(a)?r.get(a).push({fq:n,i:o}):r.set(a,[{fq:n,i:o}])}),r.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.m(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const i=this.m(e);return t.get(i)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(i=>e(i)))}m(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},tV=class{constructor(e,t,i){this.l=e,this.o=t,this.p=i,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&Ds(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&Ds(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((i,s)=>{const r=n=>{this.g++,e(n)};if(this.h)return i({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=vt(o);this.k&&this.k(o,a)||this.w(r,{base:n,basename:a})}),this.q(t,r).then(n=>{i({limitHit:this.f,stats:n||void 0})},n=>{s(new Error(Ks(n)))})})}async q(e,t){const i=new Ke,s=e.map(l=>this.r(l)),r=this.o instanceof RI?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:s,maxResults:this.l.maxResults??Sg,session:r},o=l=>{const u=new O9(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new NI(e,o);let c;try{this.j.add(i),c=Fi.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,i.token),u=c.elapsed(),h=Fi.create();return this.h&&!this.f||(l&&l.forEach(f=>{const p=a.findQueryFragmentAwareSubstr(f),g=je.relative(p.folder.path,f.path);if(p.noSiblingsClauses){const v=vt(f.path);this.w(t,{base:p.folder,relativePath:g,basename:v});return}this.u(p.tree,p.folder,g,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(f=>{this.v(f.tree,f.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{i.dispose(),this.j.delete(i)}}r(e){const t=Rc(this.l.includePattern,e.includePattern);let i=e.excludePattern?.map(r=>({folder:r.folder,patterns:Rc(this.l.excludePattern,r.pattern)}));i?.length||(i=[{folder:void 0,patterns:Rc(this.l.excludePattern,void 0)}]);const s=U9(i);return{folder:e.folder,excludes:s,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,i,s){if(i===this.a){const n=vt(this.a);this.w(s,{base:t,relativePath:this.a,basename:n})}function r(n){const o=vt(n),a=mi(n);let c=e[a];c||(c=e[a]=[],r(a)),c.push({base:t,relativePath:n,basename:o})}r(i)}v({rootEntries:e,pathToEntries:t},i,s){const r=this,n=this.a;function o(a){const c=Ib(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:f,basename:p}=h;if(i.matchesExcludesSync(f,p,n!==p?c:void 0))continue;const g=t[f];if(g)o(g);else{if(f===n)continue;r.w(s,h)}if(r.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},iV=class{constructor(){this.a=new Object,this.tokenSource=new Ke}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},sV=class GA{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,i,s,r){const n=this.c(t.cacheKey),o=new tV(t,i,n);let a=0;const c=l=>{a+=l.length,s(l.map(u=>this.d(u)))};return this.f(o,GA.a,c,r).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new iV),this.b.get(t)}d(t){return t.relativePath?{resource:xt(t.base,t.relativePath)}:{resource:t.base}}f(t,i,s,r){const n=r.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),i>0&&a.length>=i&&(s(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&s(a),n.dispose(),c),c=>(a.length&&s(a),n.dispose(),Promise.reject(c)))}},Zy=class{constructor(e,t,i){this.f=e,this.g=t,this.h=i,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t,i){const s=this.j.folderQueries||[],r=new Ke(t);return new Promise((n,o)=>{this.b=new nV(e);let a=!1;const c=(l,u)=>{if(!(l instanceof kb)&&!a&&!this.c){const h=this.l(l);l instanceof _r&&typeof this.j.maxResults=="number"&&this.d+h>this.j.maxResults&&(this.c=!0,a=!0,r.cancel(),l=this.m(l,this.j.maxResults-this.d));const f=this.l(l);this.d+=f;const p=l instanceof _r;(f>0||!p)&&this.b.add(l,u)}};this.n(s,c,r.token,i).then(l=>{r.dispose(),this.b.flush(),n({limitHit:this.c||l?.limitHit,messages:this.k(l),stats:{type:this.h}})},l=>{r.dispose();const u=Ks(l);o(new Error(u))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof _r?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new _r(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,i,s){const r=new NI(e,(u,h)=>({queryTester:new O9(this.j,u),folder:u.folder,folderIdx:h}),()=>!0),n=[],o={report:u=>{if(u instanceof kb)s?.(u);else{if(u.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const h=r.findQueryFragmentAwareSubstr(u.uri),f=h.folder.scheme===G.file?sH(()=>this.g.readdir(xl(u.uri))):void 0,p=wE(h.folder,u.uri);if(p){const g=h.queryTester.includedInQuery(p,vt(p),f);vn(g)?n.push(g.then(v=>{v&&t(u,h.folderIdx)})):g&&t(u,h.folderIdx)}}}},c={folderOptions:e.map(u=>this.o(u)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??Sg,previewOptions:this.j.previewOptions??Pb,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(c.usePCRE2=this.j.usePCRE2);let l;return this.f.query.type===3?l=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,c,o,i):l=await this.f.provider.provideTextSearchResults(rV(this.f.query.contentPattern),c,o,i),n.length&&await Promise.all(n),l}o(e){const t=Rc(this.j.includePattern,e.includePattern);let i=e.excludePattern?.map(n=>({folder:n.folder,patterns:Rc(this.j.excludePattern,n.pattern)}));(!i||i.length===0)&&(i=[{folder:void 0,patterns:Rc(this.j.excludePattern,void 0)}]);const s=U9(i);return{folder:x.from(e.folder),excludes:s,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function rV(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var nV=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new aV(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!Sa(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(oV(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function oV(e){return e instanceof _r?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var aV=class q5{static{this.b=4e3}static{this.c=50}constructor(t,i){this.j=t,this.k=i,this.d=0,this.f=[],this.g=0}addItem(t,i){t&&this.l(t,i)}addItems(t,i){t&&this.m(t,i)}l(t,i){this.f.push(t),this.g+=i,this.n()}m(t,i){this.f=this.f.concat(t),this.g+=i,this.n()}n(){this.d<q5.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},q5.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=void 0))}},Qy=q("IExtHostSearch"),am=class{constructor(t,i,s){this.o=t,this.q=i,this.s=s,this.c=this.o.getProxy(Z.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new sV}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const s=this.e++;return this.g.set(s,new XW(i)),this.c.$registerTextSearchProvider(s,this.t(t)),ie(()=>{this.h.delete(t),this.g.delete(s),this.c.$unregisterProvider(s)})}registerTextSearchProvider(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const s=this.e++;return this.g.set(s,i),this.c.$registerTextSearchProvider(s,this.t(t)),ie(()=>{this.h.delete(t),this.g.delete(s),this.c.$unregisterProvider(s)})}registerAITextSearchProvider(t,i){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const s=this.e++;return this.i.set(s,i),this.c.$registerAITextSearchProvider(s,this.t(t)),ie(()=>{this.j.delete(t),this.i.delete(s),this.c.$unregisterProvider(s)})}registerFileSearchProviderOld(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const s=this.e++;return this.k.set(s,new RI(i)),this.c.$registerFileSearchProvider(s,this.t(t)),ie(()=>{this.l.delete(t),this.k.delete(s),this.c.$unregisterProvider(s)})}registerFileSearchProvider(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const s=this.e++;return this.k.set(s,i),this.c.$registerFileSearchProvider(s,this.t(t)),ie(()=>{this.l.delete(t),this.k.delete(s),this.c.$unregisterProvider(s)})}$provideFileSearchResults(t,i,s,r){const n=cm(s),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,i,a.map(c=>c.resource))},r);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,i,s){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,i,s,r){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=cm(s);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,i,c),r)}$provideAITextSearchResults(t,i,s,r){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=cm(s);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,i,c),r,c=>this.c.$handleKeywordResult(t,i,c))}$enableExtensionHostSearch(){}async $getAIName(t){const i=this.i.get(t);if(!(!i||!i.provideAITextSearchResults))return i.name??"AI"}v(t,i){return new Zy({query:t,provider:i},{readdir:s=>Promise.resolve([]),toCanonicalName:s=>s},"textSearchProvider")}w(t,i){return new Zy({query:t,provider:i},{readdir:s=>Promise.resolve([]),toCanonicalName:s=>s},"aiTextSearchProvider")}};am=__decorate([__param(0,Ae),__param(1,Ml),__param(2,De)],am);function cm(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(cV),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>x.revive(t))}}function cV(e){return Et(e)}var lm=class extends sO{constructor(t,i){super(i.logLevel,i.logsLocation,i.loggers.map(s=>Et(s))),this.c=t.getProxy(Z.MainThreadLogger)}$setLogLevel(t,i){i?this.setLogLevel(x.revive(i),t):this.setLogLevel(t)}setVisibility(t,i){super.setVisibility(t,i),this.c.$setVisibility(t,i)}t(t,i,s){return new lV(this.c,t,i,s)}};lm=__decorate([__param(0,Ae),__param(1,kt)],lm);var lV=class extends Pv{constructor(e,t,i,s){super(s?.logLevel==="always"),this.s=e,this.t=t,this.n=!1,this.r=[],this.setLevel(i),this.s.$createLogger(t,s).then(()=>{this.w(this.r),this.n=!0})}m(e,t){const i=[[e,t]];this.n?this.w(i):this.r.push(...i)}w(e){this.s.$log(this.t,e)}flush(){this.s.$flush(this.t)}},Xy=q("IExtHostTerminalShellIntegration"),Ky=class extends X{constructor(t,i){super(),this.h=i,this.b=new Map,this.c=new D,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new D,this.onDidStartTerminalShellExecution=this.f.event,this.g=new D,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(Z.MainThreadTerminalShellIntegration),this.B(ie(()=>{for(const[s,r]of this.b)r.dispose();this.b.clear()}))}$shellIntegrationChange(t){const i=this.h.getTerminalById(t);if(!i)return;const s=i.value;let r=this.b.get(t);r||(r=new uV(i.value,this.f),this.b.set(t,r),r.store.add(i.onWillDispose(()=>this.b.get(t)?.dispose())),r.store.add(r.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),r.store.add(r.onDidRequestEndExecution(n=>this.g.fire(n))),r.store.add(r.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),i.shellIntegration=r.value),this.c.fire({terminal:s,shellIntegration:r.value})}$shellExecutionStart(t,i,s,r,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:i,confidence:s,isTrusted:r};this.b.get(t)?.startShellExecution(o,x.revive(n))}$shellExecutionEnd(t,i,s,r,n){const o={value:i,confidence:s,isTrusted:r};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,i){this.b.get(t)?.emitData(i)}$shellEnvChange(t,i,s,r){this.b.get(t)?.setEnv(i,s,r)}$cwdChange(t,i){this.b.get(t)?.setCwd(x.revive(i))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};Ky=__decorate([__param(0,Ae),__param(1,Jr)],Ky);var uV=class extends X{get currentExecution(){return this.f}constructor(e,t){super(),this.s=e,this.t=t,this.a=[],this.store=this.B(new se),this.j=this.B(new D),this.onDidRequestChangeShellIntegration=this.j.event,this.m=this.B(new D),this.onDidRequestShellExecution=this.m.event,this.n=this.B(new D),this.onDidRequestEndExecution=this.n.event,this.r=this.B(new D),this.onDidRequestNewExecution=this.r.event;const i=this;this.value={get cwd(){return i.h},get env(){if(i.g)return Object.freeze({isTrusted:i.g.isTrusted,value:Object.freeze({...i.g.value})})},executeCommand(s,r){let n=s;if(r)for(const c of r)!c.match(/["'`]/)&&c.match(/\s/)?n+=` "${c}"`:n+=` ${c}`;i.m.fire(n);const o={value:n,confidence:pu.High,isTrusted:!0};return i.requestNewShellExecution(o,i.h).value}}}requestNewShellExecution(e,t){const i=new MI(e,t??this.h);return um(e.value).length>1&&(this.c={isMultiLine:!0,unresolvedCommandLines:um(e.value)}),this.a.push(i),this.r.fire(e.value),i}startShellExecution(e,t){if(this.b&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.b.value,exitCode:void 0}),this.b=void 0),this.f){if(this.c?.isMultiLine&&this.c.unresolvedCommandLines){const s=OI(this.c.unresolvedCommandLines,e);if(s){this.c.unresolvedCommandLines=s.unresolvedCommandLines;return}}this.f.endExecution(void 0),this.f.flush(),this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value,exitCode:void 0})}let i;if(e.confidence===pu.High)for(const[s,r]of this.a.entries())if(r.value.commandLine.value===e.value){i=r,this.c={isMultiLine:!1,unresolvedCommandLines:void 0},i=r,this.a.splice(s,1);break}else{const n=OI(um(r.value.commandLine.value),e);if(n){this.c={isMultiLine:!0,unresolvedCommandLines:n.unresolvedCommandLines},i=r,this.a.splice(s,1);break}}else i=this.a.shift();i||(i=new MI(e,t??this.h)),this.f=i,this.t.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value})}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){if(!(this.c?.isMultiLine&&this.c.unresolvedCommandLines&&this.c.unresolvedCommandLines.length>0)&&this.f){const i=this.c?.isMultiLine?this.f.value.commandLine:e;this.f.endExecution(i);const s=this.f;this.b=s,this.f=void 0,s.flush().then(()=>{this.b===s&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:s.value,exitCode:t}),this.b=void 0)})}}setEnv(e,t,i){const s={};for(let r=0;r<e.length;r++)s[e[r]]=t[r];this.g={value:s,isTrusted:i},this.u()}setCwd(e){let t=!1;x.isUri(this.h)?t=!x.isUri(e)||this.h.toString()!==e.toString():this.h!==e&&(t=!0),t&&(this.h=e,this.u())}u(){this.j.fire({terminal:this.s,shellIntegration:this.value})}},MI=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const i=this;this.value={get commandLine(){return i.c},get cwd(){return i.cwd},read(){return i.d()}}}d(){if(!this.a){if(this.b)return El.EMPTY;this.a=new hV}return this.a.createIterable()}emitData(e){this.b||this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.b=!0}async flush(){this.a&&(await this.a.flush(),this.a.dispose(),this.a=void 0)}},hV=class extends X{constructor(){super(...arguments),this.b=[],this.c=[]}createIterable(){this.a||(this.a=new ds);const e=this.a,t=new El(async i=>{this.c.push(i),await e.wait()});return this.b.push(t),t}emitData(e){for(const t of this.c)t.emitOne(e)}endExecution(){this.a?.open()}async flush(){await Promise.all(this.b.map(e=>e.toPromise()))}};function um(e){return e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0)}function OI(e,t){if(e.length===0)return!1;const i=[...e],s=um(t.value);if(i&&i.length>0){for(;i.length>0&&i[0]===s[0];)i.shift(),s.shift();if(s.length===0)return{unresolvedCommandLines:i}}return!1}var FI;(function(e){e[e.CR=13]="CR",e[e.LF=10]="LF",e[e.COLON=58]="COLON",e[e.SPACE=32]="SPACE"})(FI||(FI={}));var e4=class{constructor(e){this.a="",this.b="",this.f=[],this.g=!1,this.h=e,this.i=new TextDecoder("utf-8")}getLastEventId(){return this.d}getReconnectionTime(){return this.e}feed(e){if(e.length===0)return;let t=0;for(this.g&&e[0]===10&&t++,this.g=!1;t<e.length;){const i=e.indexOf(13,t),s=e.indexOf(10,t),r=i===-1?s:s===-1?i:Math.min(i,s);if(r===-1)break;let n="";for(const o of this.f)n+=this.i.decode(o,{stream:!0});n+=this.i.decode(e.subarray(t,r)),this.j(n),this.f.length=0,t=r+(e[r]===13&&e[r+1]===10?2:1)}t<e.length?this.f.push(e.subarray(t)):this.g=e[e.length-1]===13}j(e){if(!e.length){this.l();return}if(e.startsWith(":"))return;let t,i;const s=e.indexOf(":");s===-1?(t=e,i=""):(t=e.substring(0,s),i=e.substring(s+1),i.startsWith(" ")&&(i=i.substring(1))),this.k(t,i)}k(e,t){switch(e){case"event":this.b=t;break;case"data":this.a+=t,this.a+=`
`;break;case"id":t.includes("\0")?this.c=void 0:this.c=this.d=t;break;case"retry":/^\d+$/.test(t)&&(this.e=parseInt(t,10));break}}l(){if(this.a===""){this.a="",this.b="";return}this.a.endsWith(`
`)&&(this.a=this.a.substring(0,this.a.length-1));const e={type:this.b||"message",data:this.a};this.c!==void 0&&(e.id=this.c),this.e!==void 0&&(e.retry=this.e),this.h(e),this.reset()}reset(){this.a="",this.b="",this.c=void 0}},hm=q("IExtHostMpcService"),dm=class extends X{constructor(t,i){super(),this.h=i,this.c=new Set,this.f=this.B(new dl),this.g=new Map,this.b=t.getProxy(Z.MainThreadMcp)}$startMcp(t,i){this.j(t,Uu.fromSerialized(i))}j(t,i){if(i.type===2){this.f.set(t,new dV(t,i,this.b));return}throw new Error("not implemented")}$stopMcp(t){this.f.has(t)&&(this.f.deleteAndDispose(t),this.b.$onDidChangeState(t,{state:0}))}$sendMessage(t,i){this.f.get(t)?.send(i)}async $waitForInitialCollectionProviders(){await Promise.all(this.c)}async $resolveMcpLaunch(t,i){const s=this.g.get(t);if(!s)return;const r=s.servers.find(o=>o.label===i);if(!r)return;if(!s.provider.resolveMcpServerDefinition)return eh.from(r);const n=await s.provider.resolveMcpServerDefinition(r,Ye.None);return n?eh.from(n):void 0}registerMcpConfigurationProvider(t,i,s){const r=new se,n=t.contributes?.mcpServerDefinitionProviders?.find(l=>l.id===i);if(!n)throw new Error(`MCP configuration providers must be registered in the contributes.mcpServerDefinitionProviders array within your package.json, but "${i}" was not`);const o={id:qB(t.identifier,i),isTrustedByDefault:!0,label:n?.label??t.displayName??t.name,scope:1,canResolveLaunch:typeof s.resolveMcpServerDefinition=="function",extensionId:t.identifier.value,configTarget:this.h.remote.isRemote?4:2},a=async()=>{const l=await s.provideMcpServerDefinitions(Ye.None);this.g.set(o.id,{servers:l??[],provider:s});const u=[];for(const h of l??[]){let f=qe.toKey(t.identifier)+"/"+h.label;if(u.some(p=>p.id===f)){let p=2;for(;u.some(g=>g.id===f+p);)p++;f=f+p}u.push({id:f,label:h.label,cacheNonce:h.version,launch:eh.from(h)})}this.b.$upsertMcpCollection(o,u)};r.add(ie(()=>{this.g.delete(o.id),this.b.$deleteMcpCollection(o.id)})),s.onDidChangeMcpServerDefinitions&&r.add(s.onDidChangeMcpServerDefinitions(a)),s.onDidChangeServerDefinitions&&r.add(s.onDidChangeServerDefinitions(a)),s.onDidChange&&r.add(s.onDidChange(a));const c=new Promise(l=>{setTimeout(()=>a().finally(()=>{this.c.delete(c),l()}),0)});return this.c.add(c),r}};dm=__decorate([__param(0,Ae),__param(1,kt)],dm);var UI;(function(e){e[e.Unknown=0]="Unknown",e[e.Http=1]="Http",e[e.SSE=2]="SSE"})(UI||(UI={}));var dV=class extends X{constructor(e,t,i){super(),this.j=e,this.n=t,this.r=i,this.a=new sL,this.b=new is,this.c={value:0},this.f=new Ke,this.g=new AbortController,this.B(ie(()=>{this.g.abort(),this.f.dispose(!0)})),this.r.$onDidChangeState(this.j,{state:2})}async send(e){try{await this.a.queue(()=>this.c.value===2?this.G(this.c.endpoint,e):this.t(e,this.c.value===1?this.c.sessionId:void 0))}catch(t){const i=`Error sending message to ${this.n.uri}: ${String(t)}`;this.r.$onDidChangeState(this.j,{state:3,message:i})}}async t(e,t){const i=new TextEncoder().encode(e),s={...Object.fromEntries(this.n.headers),"Content-Type":"application/json","Content-Length":String(i.length),Accept:"text/event-stream, application/json"};t&&(s["Mcp-Session-Id"]=t),await this.I(s);const r=await this.M(this.n.uri.toString(!0),{method:"POST",signal:this.g.signal,headers:s,body:i},s),n=this.c.value===0,o=r.headers.get("Mcp-Session-Id");if(o&&(this.c={value:1,sessionId:o}),this.c.value===0&&r.status>=400&&r.status<500&&r.status!==401&&r.status!==403){this.J(oe.Info,`${r.status} status sending message to ${this.n.uri}, will attempt to fall back to legacy SSE`),this.u(e);return}if(r.status>=300){const a=this.c.value===1&&!!this.c.sessionId&&(r.status===400||r.status===404);this.r.$onDidChangeState(this.j,{state:3,message:`${r.status} status sending message to ${this.n.uri}: ${await this.L(r)}`+a?"; will retry with new session ID":"",shouldRetry:a});return}this.c.value===0&&(this.c={value:1,sessionId:void 0}),n&&this.D(),this.C(r,e)}async u(e){const t=await this.F();t&&(this.c={value:2,endpoint:t},await this.G(t,e))}async w(e){let t;if(e.headers.has("WWW-Authenticate")){const c=e.headers.get("WWW-Authenticate"),{scheme:l,params:u}=mz(c);l==="Bearer"&&u.resource_metadata&&(t=u.resource_metadata)}let i,s,r;if(t){const c=await this.y(t);i=c.authorization_servers?.[0],s=c.scopes_supported,r=c}const n=new URL(e.url).origin;let o={};i||(i=n,o={...Object.fromEntries(this.n.headers)});try{const c=await this.z(i,o),l=pz(c);this.h={authorizationServer:x.parse(i),serverMetadata:l,resourceMetadata:r};return}catch(c){this.J(oe.Warning,`Error populating auth metadata: ${String(c)}`)}const a=fz(new URL(n));a.scopes_supported=s??a.scopes_supported??[],this.h={authorizationServer:x.parse(i),serverMetadata:a,resourceMetadata:r}}async y(e){const t=new URL(e),i=new URL(this.n.uri.toString(!0));let s={};t.origin===i.origin&&(s={...Object.fromEntries(this.n.headers)});const r=await fetch(e,{method:"GET",signal:this.g.signal,headers:{...s,Accept:"application/json","MCP-Protocol-Version":Fu.LATEST_PROTOCOL_VERSION}});if(r.status!==200)throw new Error(`Failed to fetch resource metadata: ${r.status} ${await this.L(r)}`);const n=await r.json();if(lz(n))return n;throw new Error(`Invalid resource metadata: ${JSON.stringify(n)}`)}async z(e,t){const i=new URL(e),s=i.pathname==="/"?"":i.pathname,r=new URL(cz,e).toString()+s;let n=await fetch(r,{method:"GET",signal:this.g.signal,headers:{...t,Accept:"application/json","MCP-Protocol-Version":Fu.LATEST_PROTOCOL_VERSION}});if(n.status!==200&&(n=await fetch(x.joinPath(x.parse(e),".well-known","openid-configuration").toString(!0),{method:"GET",signal:this.g.signal,headers:{...t,Accept:"application/json","MCP-Protocol-Version":Fu.LATEST_PROTOCOL_VERSION}}),n.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${n.status} ${await this.L(n)}`);const o=await n.json();if(uz(o))return o;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(o)}`)}async C(e,t){if(e.status!==202)switch(e.headers.get("Content-Type")?.toLowerCase()){case"text/event-stream":{const i=new e4(s=>{if(s.type==="message")this.r.$onDidReceiveMessage(this.j,s.data);else if(s.type==="endpoint")throw this.J(oe.Warning,`Received SSE endpoint from a POST to ${this.n.uri}, will fall back to legacy SSE`),this.u(t),new mt});try{await this.H(i,e)}catch(s){this.J(oe.Warning,`Error reading SSE stream: ${String(s)}`)}break}case"application/json":this.r.$onDidReceiveMessage(this.j,await e.text());break;default:{const i=await e.text();fV(i)?this.r.$onDidReceiveMessage(this.j,i):this.J(oe.Warning,`Unexpected ${e.status} response for request: ${i}`)}}}async D(){let e;for(let t=0;!this.q.isDisposed;t++){await ii(Math.min(t*1e3,3e4),this.f.token);let i;try{const r={...Object.fromEntries(this.n.headers),Accept:"text/event-stream"};await this.I(r),this.c.value===1&&this.c.sessionId!==void 0&&(r["Mcp-Session-Id"]=this.c.sessionId),e&&(r["Last-Event-ID"]=e),i=await this.M(this.n.uri.toString(!0),{method:"GET",signal:this.g.signal,headers:r},r)}catch{this.J(oe.Info,`Error connecting to ${this.n.uri} for async notifications, will retry`);continue}if(i.status>=400){this.J(oe.Debug,`${i.status} status connecting to ${this.n.uri} for async notifications; they will be disabled: ${await this.L(i)}`);return}t=0;const s=new e4(r=>{r.type==="message"&&this.r.$onDidReceiveMessage(this.j,r.data),r.id&&(e=r.id)});try{await this.H(s,i)}catch(r){this.J(oe.Info,`Error reading from async stream, we will reconnect: ${r}`)}}}async F(){const e=new is,t={...Object.fromEntries(this.n.headers),Accept:"text/event-stream"};await this.I(t);let i;try{if(i=await this.M(this.n.uri.toString(!0),{method:"GET",signal:this.g.signal,headers:t},t),i.status>=300){this.r.$onDidChangeState(this.j,{state:3,message:`${i.status} status connecting to ${this.n.uri} as SSE: ${await this.L(i)}`});return}}catch(r){this.r.$onDidChangeState(this.j,{state:3,message:`Error connecting to ${this.n.uri} as SSE: ${r}`});return}const s=new e4(r=>{r.type==="message"?this.r.$onDidReceiveMessage(this.j,r.data):r.type==="endpoint"&&e.complete(new URL(r.data,this.n.uri.toString(!0)).toString())});return this.B(ie(()=>e.cancel())),this.H(s,i).catch(r=>{this.r.$onDidChangeState(this.j,{state:3,message:`Error reading SSE stream: ${String(r)}`})}),e.p}async G(e,t){const i=new TextEncoder().encode(t),s={...Object.fromEntries(this.n.headers),"Content-Type":"application/json","Content-Length":String(i.length)};await this.I(s);const r=await fetch(e,{method:"POST",signal:this.g.signal,headers:s,body:i});r.status>=300&&this.J(oe.Warning,`${r.status} status sending message to ${this.b}: ${await this.L(r)}`)}async H(e,t){if(!t.body)return;const i=t.body.getReader();let s;do{try{s=await $d(i.read(),this.f.token)}catch(r){if(i.cancel(),this.q.isDisposed)return;throw r}s.value&&e.feed(s.value)}while(!s.done)}async I(e){if(this.h)try{const t=await this.r.$getTokenFromServerMetadata(this.j,this.h.authorizationServer,this.h.serverMetadata,this.h.resourceMetadata);t&&(e.Authorization=`Bearer ${t}`)}catch(t){this.J(oe.Warning,`Error getting token from server metadata: ${String(t)}`)}return e}J(e,t){this.q.isDisposed||this.r.$onDidPublishLog(this.j,e,t)}async L(e){try{return await e.text()}catch{return e.statusText}}async M(e,t,i){const s=()=>fetch(e,t);let r=await s();return r.status===401&&(this.h||(await this.w(r),await this.I(i),i.Authorization&&(t.headers=i,r=await s()))),r}};function fV(e){try{return JSON.parse(e),!0}catch{return!1}}Re(xy,yy,1),Re(xn,lm,1),Re(jc,$y,1),Re(Bs,Xb,0),Re(Wg,cy,0),Re(hy,dy,0),Re(ms,Bb,0),Re(nh,_b,0),Re(wh,Gy,0),Re(Jy,Yy,0),Re(iI,Ty,0),Re(ia,Ly,0),Re(Ey,ky,0),Re(Ra,kO,0),Re(tI,Ay,1),Re(Qy,am,0),Re(Vb,i$,0),Re(_y,Vy,0),Re(Jr,ty,0),Re(Xy,Ky,0),Re(Og,Fg,0),Re(Hg,ny,0),Re(zg,ay,0),Re(js,Ob,0),Re(by,G$,0),Re(Bc,qy,0),Re(Hc,nm,0),Re(hm,dm,0);var t4=class extends jg{constructor(t,i){super(!0,t,i)}createTerminal(t,i,s){return this.createTerminalFromOptions({name:t,shellPath:i,shellArgs:s})}createTerminalFromOptions(t,i){const s=new Kb(this.a,ut(),t,t.name);return this.f.push(s),s.create(t,this.S(t,i)),s.value}};t4=__decorate([__param(0,Bs),__param(1,Ae)],t4);import{promises as jI}from"fs";var BI;(function(e){e[e.stdout=0]="stdout",e[e.stderr=1]="stderr"})(BI||(BI={}));var HI;(function(e){e[e.Success=0]="Success",e[e.Unknown=1]="Unknown",e[e.AccessDenied=2]="AccessDenied",e[e.ProcessNotFound=3]="ProcessNotFound"})(HI||(HI={}));function pV(e,...t){const i=t.reduce((n,o)=>(n[o]=!0,n),{}),s=[/^ELECTRON_.+$/,/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(e).filter(n=>!i[n]).forEach(n=>{for(let o=0;o<s.length;o++)if(n.search(s[o])!==-1){delete e[n];break}})}function gV(e){e&&(delete e.DEBUG,$t&&delete e.LD_PRELOAD)}function zI(e=kr){return e.comspec||"cmd.exe"}function mV(e){let t=[],i=!1;const s=function(r){if(i){t.push(r);return}(!e.send(r,o=>{if(o&&console.error(o),i=!1,t.length>0){const a=t.slice(0);t=[],a.forEach(c=>s(c))}})||Fe)&&(i=!0)};return{send:s}}async function vV(e){if(await it.exists(e)){let t;try{t=await jI.stat(e)}catch(i){i.message.startsWith("EACCES")&&(t=await jI.lstat(e))}return t?!t.isDirectory():!1}return!1}function WI(e=kr){return(mk(e,"PATHEXT")||".COM;.EXE;.BAT;.CMD").split(";")}async function yh(e,t,i,s=kr,r=vV){if(es(e))return await r(e)?e:void 0;if(t===void 0&&(t=oo()),mi(e)!=="."){const c=Pe(t,e);return await r(c)?c:void 0}const o=mk(s,"PATH");if(i===void 0&&Ue(o)&&(i=o.split(Wx)),i===void 0||i.length===0){const c=Pe(t,e);return await r(c)?c:void 0}for(const c of i){let l;if(es(c)?l=Pe(c,e):l=Pe(t,c,e),Fe){const u=WI(s).map(async h=>{const f=l+h;return await r(f)?f:void 0});for(const h of u){const f=await h;if(f)return f}}if(await r(l))return l}const a=Pe(t,e);return await r(a)?a:void 0}import{homedir as wV}from"os";var i4=class extends rm{constructor(t,i,s,r,n,o,a,c,l){super(t,i,s,r,n,o,a,c),this.E=s,this.F=l,i.remote.isRemote&&i.remote.authority?this.registerTaskSystem(G.vscodeRemote,{scheme:G.vscodeRemote,authority:i.remote.authority,platform:process.platform}):this.registerTaskSystem(G.file,{scheme:G.file,authority:"",platform:process.platform}),this.a.$registerSupportedExecutions(!0,!0,!0)}async executeTask(t,i){const s=i;if(!i.execution&&s._id===void 0)throw new Error("Tasks to execute must include an execution");if(s._id!==void 0){const r=By.from(s,this.E),n=await this.a.$getTaskExecution(r);if(n.task===void 0)throw new Error("Task from execution DTO is undefined");const o=await this.B(n,i);return this.a.$executeTask(r).catch(()=>{}),o}else{const r=pr.from(i,t);if(r===void 0)return Promise.reject(new Error("Task is not valid"));Hs.is(r.execution)&&await this.A(r,i,!1);const n=await this.B(await this.a.$getTaskExecution(r),i);return this.a.$executeTask(r).catch(()=>{}),n}}x(t,i,s,r){const n=[];if(r)for(const o of r){this.C(o,s),(!o.definition||!t[o.definition.type])&&this.f.warn(`The task [${o.source}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`);const a=pr.from(o,s.extension);a&&(n.push(a),Hs.is(a.execution)&&i.push(this.A(a,o,!0)))}return{tasks:n,extension:s.extension}}async y(t){return t}async I(t){let i=t&&t.length>0?t[0]:void 0;if(!i){const s=x.file(wV());i=new Tv({uri:s,name:ts(s),index:0})}return{uri:i.uri,name:i.name,index:i.index,toResource:()=>{throw new Error("Not implemented")}}}async $resolveVariables(t,i){const s=x.revive(t),r={process:void 0,variables:Object.create(null)},n=await this.b.resolveWorkspaceFolder(s),o=await this.b.getWorkspaceFolders2()??[],a=await this.F.getResolver(),c=n?{uri:n.uri,name:n.name,index:n.index,toResource:()=>{throw new Error("Not implemented")}}:await this.I(o);for(const l of i.variables)r.variables[l]=await a.resolveAsync(c,l);if(i.process!==void 0){let l;if(i.process.path!==void 0){l=i.process.path.split(Wx);for(let p=0;p<l.length;p++)l[p]=await a.resolveAsync(c,l[p])}const u=await a.resolveAsync(c,i.process.name),h=i.process.cwd!==void 0?await a.resolveAsync(c,i.process.cwd):void 0,f=await yh(u,h,l);f?r.process=f:es(u)?r.process=u:r.process=Pe(h??"",u)}return r}async $jsonTasksSupported(){return!0}async $findExecutable(t,i,s){return yh(t,i,s)}};i4=__decorate([__param(0,Ae),__param(1,kt),__param(2,js),__param(3,ia),__param(4,ms),__param(5,Jr),__param(6,De),__param(7,jc),__param(8,Hc)],i4);import*as zc from"child_process";var Kie=q("externalTerminal"),fm="Terminal.app",VI=d(2006,null),s4=class{async getDefaultTerminalForPlatforms(){return{windows:r4.getDefaultTerminalWindows(),linux:await _I.getDefaultTerminalLinuxReady(),osx:"xterm"}}},r4=class on extends s4{static{this.b="cmd.exe"}openTerminal(t,i){return this.spawnTerminal(zc,t,zI(),i)}spawnTerminal(t,i,s,r){const n=i.windowsExec||on.getDefaultTerminalWindows();r&&r[1]===":"&&(r=r[0].toUpperCase()+r.substr(1));const o=vt(n,".exe").toLowerCase();if(o==="cmder")return t.spawn(n,r?[r]:void 0),Promise.resolve(void 0);const a=["/c","start","/wait"];return n.indexOf(" ")>=0&&a.push(n),a.push(n),o==="wt"&&a.push("-d ."),new Promise((c,l)=>{const u=Wc(process),h=t.spawn(s,a,{cwd:r,env:u,detached:!0});h.on("error",l),h.on("exit",()=>c())})}async runInTerminal(t,i,s,r,n){const o="windowsExec"in n&&n.windowsExec?n.windowsExec:on.getDefaultTerminalWindows(),a=await on.f();return new Promise((c,l)=>{const u=`"${i} - ${VI}"`,h=`"${s.join('" "')}" & pause`,f=Object.assign({},Wc(process),r);Object.keys(f).filter(E=>f[E]===null).forEach(E=>delete f[E]);const p={cwd:i,env:f,windowsVerbatimArguments:!0};let g,v;vt(o,".exe")==="wt"?(g=o,v=["-d",".",on.b,"/c",h]):a?(g=a,v=["-d",".",o,"/c",h]):(g=on.b,v=["/c","start",u,"/wait",o,"/c",`"${h}"`]),zc.spawn(g,v,p).on("error",E=>{l(n4(E))}),c(void 0)})}static getDefaultTerminalWindows(){if(!on.d){const t=!!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");on.d=`${process.env.windir?process.env.windir:"C:\\Windows"}\\${t?"Sysnative":"System32"}\\cmd.exe`}return on.d}static async f(){try{return await yh("wt")}catch{return}}};__decorate([YE],r4,"f",null);var bV=class JA extends s4{static{this.b="/usr/bin/osascript"}openTerminal(t,i){return this.spawnTerminal(zc,t,i)}runInTerminal(t,i,s,r,n){const o=n.osxExec||fm;return new Promise((a,c)=>{if(o===fm||o==="iTerm.app"){const l=o===fm?"TerminalHelper":"iTermHelper",h=[G1.asFileUri(`vs/workbench/contrib/externalTerminal/node/${l}.scpt`).fsPath,"-t",t||VI,"-w",i];for(const g of s)h.push("-a"),h.push(g);if(r){const g=Object.assign({},Wc(process),r);for(const v in g){const b=g[v];b===null?(h.push("-u"),h.push(v)):(h.push("-e"),h.push(`${v}=${b}`))}}let f="";const p=zc.spawn(JA.b,h);p.on("error",g=>{c(n4(g))}),p.stderr.on("data",g=>{f+=g.toString()}),p.on("exit",g=>{if(g===0)a(void 0);else if(f){const v=f.split(`
`,1);c(new Error(v[0]))}else c(new Error(d(2007,null,l,g)))})}else c(new Error(d(2008,null,o)))})}spawnTerminal(t,i,s){const r=i.osxExec||fm;return new Promise((n,o)=>{const a=["-a",r];s&&a.push(s);const c=Wc(process),l=t.spawn("/usr/bin/open",a,{cwd:s,env:c});l.on("error",o),l.on("exit",()=>n())})}},_I=class Zn extends s4{static{this.b=d(2009,null)}openTerminal(t,i){return this.spawnTerminal(zc,t,i)}runInTerminal(t,i,s,r,n){const o=n.linuxExec?Promise.resolve(n.linuxExec):Zn.getDefaultTerminalLinuxReady();return new Promise((a,c)=>{const l=[];o.then(u=>{u.indexOf("gnome-terminal")>=0?l.push("-x"):l.push("-e"),l.push("bash"),l.push("-c");const h=`${yV(s)}; echo; read -p "${Zn.b}" -n1;`;l.push(`''${h}''`);const f=Object.assign({},Wc(process),r);Object.keys(f).filter(b=>f[b]===null).forEach(b=>delete f[b]);const p={cwd:i,env:f};let g="";const v=zc.spawn(u,l,p);v.on("error",b=>{c(n4(b))}),v.stderr.on("data",b=>{g+=b.toString()}),v.on("exit",b=>{if(b===0)a(void 0);else if(g){const E=g.split(`
`,1);c(new Error(E[0]))}else c(new Error(d(2010,null,u,b)))})})})}static async getDefaultTerminalLinuxReady(){if(!Zn.d)if(!$t)Zn.d=Promise.resolve("xterm");else{const t=await it.exists("/etc/debian_version");Zn.d=new Promise(i=>{t?i("x-terminal-emulator"):process.env.DESKTOP_SESSION==="gnome"||process.env.DESKTOP_SESSION==="gnome-classic"?i("gnome-terminal"):process.env.DESKTOP_SESSION==="kde-plasma"?i("konsole"):process.env.COLORTERM?i(process.env.COLORTERM):process.env.TERM?i(process.env.TERM):i("xterm")})}return Zn.d}spawnTerminal(t,i,s){const r=i.linuxExec?Promise.resolve(i.linuxExec):Zn.getDefaultTerminalLinuxReady();return new Promise((n,o)=>{r.then(a=>{const c=Wc(process),l=t.spawn(a,[],{cwd:s,env:c});l.on("error",o),l.on("exit",()=>n())})})}};function Wc(e){const t={...e.env};return pV(t),t}function n4(e){return"errno"in e&&e.errno==="ENOENT"&&"path"in e&&typeof e.path=="string"?new Error(d(2011,null,e.path)):e}function yV(e){let t="";for(const i of e)i.indexOf(" ")>=0?t+='"'+i+'"':t+=i,t+=" ";return t}var xV=class YA{constructor(){this.b=new Map}static{this.a=1}async createNewMessage(t){try{const i=await this.c();if(i){const s=String(YA.a++);return this.b.set(s,i),{id:s,data:i.createNewMessage(t)}}}catch{}return{id:"",data:t}}async validate(t,i){if(!t.id)return!0;const s=this.b.get(t.id);if(!s)return!1;this.b.delete(t.id);try{return s.validate(i)==="ok"}catch{return!1}finally{s.dispose?.()}}async sign(t){try{return await this.d(t)}catch{}return t}},qI=class extends xV{c(){return this.h().then(e=>new e.validator)}d(e){return this.h().then(t=>new t.signer().sign(e))}async h(){const e="vsda",{default:t}=await import(e);return t}};import*as o4 from"child_process";import*as GI from"net";var JI=class el extends xI{static{this.b=`\r
\r
`}static{this.i=/\r?\n/}static{this.l=/: */}constructor(){super(),this.r=Buffer.allocUnsafe(0),this.t=-1}v(t,i){this.p=i,this.r=Buffer.allocUnsafe(0),this.t=-1,t.on("data",s=>this.x(s))}sendMessage(t){if(this.p){const i=JSON.stringify(t);this.p.write(`Content-Length: ${Buffer.byteLength(i,"utf8")}${el.b}${i}`,"utf8")}}x(t){for(this.r=Buffer.concat([this.r,t]);;){if(this.t>=0){if(this.r.length>=this.t){const i=this.r.toString("utf8",0,this.t);if(this.r=this.r.slice(this.t),this.t=-1,i.length>0)try{this.acceptMessage(JSON.parse(i))}catch(s){this.n.fire(new Error((s.message||s)+`
`+i))}continue}}else{const i=this.r.indexOf(el.b);if(i!==-1){const r=this.r.toString("utf8",0,i).split(el.i);for(const n of r){const o=n.split(el.l);o[0]==="Content-Length"&&(this.t=Number(o[1]))}this.r=this.r.slice(i+el.b.length);continue}}break}}},YI=class extends JI{startSession(){return new Promise((e,t)=>{let i=!1;this.y=this.z(()=>{this.v(this.y,this.y),e(),i=!0}),this.y.on("close",()=>{i?this.n.fire(new Error("connection closed")):t(new Error("connection closed"))}),this.y.on("error",s=>{s instanceof AggregateError&&(s=s.errors[0]),i?this.n.fire(s):t(s)})})}async stopSession(){await this.w(),this.y&&(this.y.end(),this.y=void 0)}},EV=class extends YI{constructor(e){super(),this.A=e}z(e){return GI.createConnection(this.A.port,this.A.host||"127.0.0.1",e)}},kV=class extends YI{constructor(e){super(),this.A=e}z(e){return GI.createConnection(this.A.path,e)}},ZI=class pa extends JI{constructor(t,i){super(),this.z=t,this.A=i}async startSession(){const t=this.z.command,i=this.z.args,s=this.z.options||{};try{if(t)if(es(t)){if(!await it.exists(t))throw new Error(d(6917,null,t))}else t.indexOf("/")<0&&t.indexOf("\\")<0;else throw new Error(d(6918,null,this.A));let r=process.env;if(s.env&&Object.keys(s.env).length>0&&(r=Pr(Qe(process.env),s.env)),t==="node")if(Array.isArray(i)&&i.length>0){const n=!!process.env.ELECTRON_RUN_AS_NODE||!!process.versions.electron,o={env:r,execArgv:n?["-e","delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])"]:[],silent:!0};s.cwd&&(o.cwd=s.cwd);const a=o4.fork(i[0],i.slice(1),o);if(!a.pid)throw new Error(d(6919,null,i[0]));this.y=a}else throw new Error(d(6920,null));else{let n=t,o=i;const a={env:r};s.cwd&&(a.cwd=s.cwd),Fe&&(t.endsWith(".bat")||t.endsWith(".cmd"))&&(a.shell=!0,n=`"${t}"`,o=i.map(c=>(c=c.replace(/"/g,'\\"'),`"${c}"`))),this.y=o4.spawn(n,o,a)}this.y.on("error",n=>{this.n.fire(n)}),this.y.on("exit",(n,o)=>{this.o.fire(n)}),this.y.stdout.on("close",()=>{this.n.fire(new Error("read error"))}),this.y.stdout.on("error",n=>{this.n.fire(n)}),this.y.stdin.on("error",n=>{this.n.fire(n)}),this.y.stderr.resume(),this.v(this.y.stdout,this.y.stdin)}catch(r){this.n.fire(r)}}async stopSession(){return this.y?(await this.w(),Fe?new Promise((t,i)=>{const s=o4.exec(`taskkill /F /T /PID ${this.y.pid}`,function(r,n,o){if(r)return i(r)});s.on("exit",t),s.on("error",i)}):(this.y.kill("SIGTERM"),Promise.resolve(void 0))):Promise.resolve(void 0)}static B(t,i){if(!t)return;const s=Object.create(null);t.runtime&&(t.runtime.indexOf("./")===0?s.runtime=Pe(i,t.runtime):s.runtime=t.runtime),t.runtimeArgs&&(s.runtimeArgs=t.runtimeArgs),t.program&&(es(t.program)?s.program=t.program:s.program=Pe(i,t.program)),t.args&&(s.args=t.args);const r=t;return r.win&&(s.win=pa.B(r.win,i)),r.winx86&&(s.winx86=pa.B(r.winx86,i)),r.windows&&(s.windows=pa.B(r.windows,i)),r.osx&&(s.osx=pa.B(r.osx,i)),r.linux&&(s.linux=pa.B(r.linux,i)),s}static platformAdapterExecutable(t,i){let s=Object.create(null);i=i.toLowerCase();for(const l of t)if(l.contributes){const u=l.contributes.debuggers;u&&u.length>0&&u.filter(h=>typeof h.type=="string"&&hs(h.type,i)).forEach(h=>{const f=pa.B(h,l.extensionLocation.fsPath);s=Pr(s,f,l.isBuiltin)})}let r;Fe&&!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?r=s.winx86||s.win||s.windows:Fe?r=s.win||s.windows:Ct?r=s.osx:$t&&(r=s.linux),r=r||s;const n=r.program||s.program,o=r.args||s.args,a=r.runtime||s.runtime,c=r.runtimeArgs||s.runtimeArgs;if(a)return{type:"executable",command:a,args:(c||[]).concat(typeof n=="string"?[n]:[]).concat(o||[])};if(n)return{type:"executable",command:n,args:o||[]}}};import*as SV from"child_process";function CV(e,t){return new Promise((i,s)=>{let r="";const n=SV.spawn(e,t);n.pid&&n.stdout.on("data",o=>{r+=o.toString()}),n.on("error",o=>{s(o)}),n.on("close",o=>{i(r)})})}async function $V(e){if(e)if(Fe){const t=await import("@vscode/windows-process-tree");return new Promise(i=>{t.getProcessTree(e,s=>{i(!!s&&s.children.length>0)})})}else return CV("/usr/bin/pgrep",["-lP",String(e)]).then(t=>{const i=t.trim();return!(i.length===0||i.indexOf(" tmux")>=0)},t=>!0);return Promise.resolve(!0)}var QI;(function(e){e[e.cmd=0]="cmd",e[e.powershell=1]="powershell",e[e.bash=2]="bash"})(QI||(QI={}));function IV(e,t,i,s,r){e=e.trim().toLowerCase();let n;e.indexOf("powershell")>=0||e.indexOf("pwsh")>=0?n=1:e.indexOf("cmd.exe")>=0?n=0:e.indexOf("bash")>=0?n=2:Fe?n=0:n=2;let o,a=" ";switch(n){case 1:if(o=c=>(c=c.replace(/\'/g,"''"),c.length>0&&c.charAt(c.length-1)==="\\"?`'${c}\\'`:`'${c}'`),s){const c=cE(s);c&&(a+=`${c}:; `),a+=`cd ${o(s)}; `}if(r)for(const c in r){const l=r[c];l===null?a+=`Remove-Item env:${c}; `:a+=`\${env:${c}}='${l}'; `}if(t.length>0){const c=t.shift(),l=i?c:o(c);a+=l[0]==="'"?`& ${l} `:`${l} `;for(const u of t)a+=u==="<"||u===">"||i?u:o(u),a+=" "}break;case 0:if(o=c=>(c=c.replace(/\"/g,'""'),c=c.replace(/([><!^&|])/g,"^$1"),' "'.split("").some(l=>c.includes(l))||c.length===0?`"${c}"`:c),s){const c=cE(s);c&&(a+=`${c}: && `),a+=`cd ${o(s)} && `}if(r){a+='cmd /C "';for(const c in r){let l=r[c];l===null?a+=`set "${c}=" && `:(l=l.replace(/[&^|<>]/g,u=>`^${u}`),a+=`set "${c}=${l}" && `)}}for(const c of t)a+=c==="<"||c===">"||i?c:o(c),a+=" ";r&&(a+='"');break;case 2:{o=l=>(l=l.replace(/(["'\\\$!><#()\[\]*&^| ;{}?`])/g,"\\$1"),l.length===0?'""':l);const c=l=>/[^\w@%\/+=,.:^-]/.test(l)?`'${l.replace(/'/g,"'\\''")}'`:l;if(s&&(a+=`cd ${o(s)} ; `),r){a+="/usr/bin/env";for(const l in r){const u=r[l];u===null?a+=` -u ${c(l)}`:a+=` ${c(`${l}=${u}`)}`}a+=" "}for(const l of t)a+=l==="<"||l===">"||i?l:o(l),a+=" ";break}}return a}var a4=class extends om{constructor(t,i,s,r,n,o,a,c,l,u){super(t,i,s,r,a,c,l,u),this.Fb=n,this.Gb=o,this.Db=new DV}ib(t,i){return t instanceof cc?new ZI(this.lb(t),i.type):t instanceof lc?new EV(this.mb(t)):t instanceof vu?new kV(this.nb(t)):super.ib(t,i)}vb(t,i){const s=ZI.platformAdapterExecutable(i.getAllExtensionDescriptions(),t.type);if(s)return new cc(s.command,s.args,s.options)}jb(){return new qI}async $runInTerminal(t,i){if(t.kind==="integrated"){this.Eb||(this.Eb=this.B(this.Fb.onDidCloseTerminal(g=>{this.Db.onTerminalClosed(g)})));const s=await this.ab.getConfigProvider(),r=this.Fb.getDefaultShell(!0),n=this.Fb.getDefaultShellArgs(!0),o=t.title||d(2930,null),a=JSON.stringify({shell:r,shellArgs:n});let c=await this.Db.checkout(a,o),l,u=!1;if(c)l=t.cwd;else{const g={shellPath:r,shellArgs:n,cwd:t.cwd,name:o,iconPath:new di("debug")};u=!0,c=this.Fb.createTerminalFromOptions(g,{isFeatureTerminal:!0,forceShellIntegration:!0,useShellEnvironment:!0}),this.Db.insert(c,a)}c.show(!0);const h=await c.processId;if(u){let g;(function(b){b[b.DataDebounce=500]="DataDebounce",b[b.MaxDelay=5e3]="MaxDelay"})(g||(g={}));const v=new se;await new Promise(b=>{const E=v.add(new Zs(b,500));v.add(this.Fb.onDidWriteTerminalData(k=>{k.terminal===c&&E.schedule()})),v.add(this.Gb.onDidChangeTerminalShellIntegration(k=>{k.terminal===c&&b()})),v.add(Z1(b,5e3))}),v.dispose()}else if(c.state.isInteractedWith&&!c.shellIntegration&&(c.sendText(""),await ii(200)),s.getConfiguration("debug.terminal").get("clearBeforeReusing")){let g;if(r.indexOf("powershell")>=0||r.indexOf("pwsh")>=0||r.indexOf("cmd.exe")>=0?g="cls":r.indexOf("bash")>=0?g="clear":Fe?g="cls":g="clear",c.shellIntegration){const v=new se,b=c.shellIntegration.executeCommand(g);await new Promise(E=>{v.add(this.Gb.onDidEndTerminalShellExecution(k=>{k.execution===b&&E()})),v.add(Z1(E,500))}),v.dispose()}else c.sendText(g),await ii(200)}const f=IV(r,t.args,!!t.argsCanBeInterpretedByShell,l,t.env);c.shellIntegration?c.shellIntegration.executeCommand(f):c.sendText(f);const p=this.onDidTerminateDebugSession(g=>{g.id===i&&(this.Db.free(c),p.dispose())});return h}else if(t.kind==="external")return PV(t,await this.ab.getConfigProvider());return super.$runInTerminal(t,i)}};a4=__decorate([__param(0,Ae),__param(1,js),__param(2,Yr),__param(3,ms),__param(4,Jr),__param(5,Xy),__param(6,Bc),__param(7,Hc),__param(8,Bs),__param(9,wh)],a4);var xh=void 0;function PV(e,t){if(!xh)if(Fe)xh=new r4;else if(Ct)xh=new bV;else if($t)xh=new _I;else throw new Error("external terminals not supported on this platform");const i=t.getConfiguration("terminal");return xh.runInTerminal(e.title,e.cwd,e.args,e.env||{},i.external||{})}var DV=class ZA{constructor(){this.b=new Map}static{this.a=1e3}async checkout(t,i,s=!1){const n=[...this.b.entries()].map(([o,a])=>Ir(async c=>{if(o.name!==i||a.lastUsedAt!==-1&&await $V(await o.processId))return null;const l=Date.now();return a.lastUsedAt+ZA.a>l||c.isCancellationRequested?null:a.config!==t?(s&&o.dispose(),null):(a.lastUsedAt=l,o)}));return await aL(n,o=>!!o)}insert(t,i){this.b.set(t,{lastUsedAt:Date.now(),config:i})}free(t){const i=this.b.get(t);i&&(i.lastUsedAt=-1)}onTerminalClosed(t){this.b.delete(t)}},XI=new Qt(()=>{const e=Gg.Collator(void 0,{numeric:!0,sensitivity:"base"}).value;return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),tse=new Qt(()=>({collator:Gg.Collator(void 0,{numeric:!0}).value})),ise=new Qt(()=>({collator:Gg.Collator(void 0,{numeric:!0,sensitivity:"accent"}).value}));function KI(e,t,i=!1){const s=e||"",r=t||"",n=XI.value.collator.compare(s,r);return XI.value.collatorIsNumeric&&n===0&&s!==r?s<r?-1:1:n}function AV(e,t,i=!1){return i||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function pm(e,t,i=!1){const s=e.split(wt),r=t.split(wt),n=s.length-1,o=r.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return KI(s[l],r[l],i);if(a)return-1;if(c)return 1;const u=AV(s[l],r[l],i);if(u!==0)return u}}function c4(e,t,i){const s=e.toLowerCase(),r=t.toLowerCase(),n=TV(e,t,i);if(n)return n;const o=s.endsWith(i),a=r.endsWith(i);if(o!==a)return o?-1:1;const c=KI(s,r);return c!==0?c:s.localeCompare(r)}function TV(e,t,i){const s=e.toLowerCase(),r=t.toLowerCase(),n=s.startsWith(i),o=r.startsWith(i);if(n!==o)return n?-1:1;if(n&&o){if(s.length<r.length)return-1;if(s.length>r.length)return 1}return 0}var gm=0,eP=[gm,[]];function tP(e,t,i,s){if(!e||!t)return eP;const r=e.length,n=t.length;if(r<n)return eP;const o=e.toLowerCase();return RV(t,i,n,e,o,r,s)}function RV(e,t,i,s,r,n,o){const a=[],c=[];for(let f=0;f<i;f++){const p=f*n,g=p-n,v=f>0,b=e[f],E=t[f];for(let k=0;k<n;k++){const I=k>0,B=p+k,j=B-1,te=g+k-1,F=I?a[j]:0,H=v&&I?a[te]:0,U=v&&I?c[te]:0;let Y;!H&&v?Y=0:Y=LV(b,E,s,r,k,U),Y&&H+Y>=F&&(o||v||r.startsWith(t,k))?(c[B]=U+1,a[B]=H+Y):(c[B]=gm,a[B]=F)}}const l=[];let u=i-1,h=n-1;for(;u>=0&&h>=0;){const f=u*n+h;c[f]===gm||(l.push(h),u--),h--}return[a[i*n-1],l.reverse()]}function LV(e,t,i,s,r,n){let o=0;if(!NV(t,s[r]))return o;if(o+=1,n>0&&(o+=n*5),e===i[r]&&(o+=1),r===0)o+=8;else{const a=MV(i.charCodeAt(r-1));a?o+=a:Fl(i.charCodeAt(r))&&n===0&&(o+=2)}return o}function NV(e,t){return e===t?!0:e==="/"||e==="\\"?t==="/"||t==="\\":!1}function MV(e){switch(e){case 47:case 92:return 5;case 95:case 45:case 46:case 32:case 39:case 34:case 58:return 4;default:return 0}}var mm=Object.freeze({score:0}),vm=1<<18,l4=1<<17,u4=65536;function OV(e,t,i,s){const r=s.values?s.values:[s];return Rr({[s.normalized]:{values:r.map(o=>({value:o.normalized,expectContiguousMatch:o.expectContiguousMatch})),label:e,description:t,allowNonContiguousMatches:i}})}function iP(e,t,i,s,r){if(!e||!t.normalized)return mm;const n=s.getItemLabel(e);if(!n)return mm;const o=s.getItemDescription(e),a=OV(n,o,i,t),c=r[a];if(c)return c;const l=FV(n,o,s.getItemPath(e),t,i);return r[a]=l,l}function FV(e,t,i,s,r){const n=!i||!s.containsPathSeparator;return i&&($t?s.pathNormalized===i:hs(s.pathNormalized,i))?{score:vm,labelMatch:[{start:0,end:e.length}],descriptionMatch:t?[{start:0,end:t.length}]:void 0}:s.values&&s.values.length>1?UV(e,t,i,s.values,n,r):sP(e,t,i,s,n,r)}function UV(e,t,i,s,r,n){let o=0;const a=[],c=[];for(const l of s){const{score:u,labelMatch:h,descriptionMatch:f}=sP(e,t,i,l,r,n);if(u===gm)return mm;o+=u,h&&a.push(...h),f&&c.push(...f)}return{score:o,labelMatch:nP(a),descriptionMatch:nP(c)}}function sP(e,t,i,s,r,n){if(r||!t){const[o,a]=tP(e,s.normalized,s.normalizedLowercase,n&&!s.expectContiguousMatch);if(o){const c=Nv(s.normalized,e);let l;if(c){l=l4;const u=Math.round(s.normalized.length/e.length*100);l+=u}else l=u4;return{score:l+o,labelMatch:c||rP(a)}}}if(t){let o=t;i&&(o=`${t}${wt}`);const a=o.length,c=`${o}${e}`,[l,u]=tP(c,s.normalized,s.normalizedLowercase,n&&!s.expectContiguousMatch);if(l){const h=rP(u),f=[],p=[];return h.forEach(g=>{g.start<a&&g.end>a?(f.push({start:0,end:g.end-a}),p.push({start:g.start,end:a})):g.start>=a?f.push({start:g.start-a,end:g.end-a}):p.push(g)}),{score:l,labelMatch:f,descriptionMatch:p}}}return mm}function rP(e){const t=[];if(!e)return t;let i;for(const s of e)i&&i.end===s?i.end+=1:(i={start:s,end:s+1},t.push(i));return t}function nP(e){const t=e.sort((r,n)=>r.start-n.start),i=[];let s;for(const r of t)!s||!jV(s,r)?(s=r,i.push(r)):(s.start=Math.min(s.start,r.start),s.end=Math.max(s.end,r.end));return i}function jV(e,t){return!(e.end<t.start||t.end<e.start)}function BV(e,t,i,s,r,n){const o=iP(e,i,s,r,n),a=iP(t,i,s,r,n),c=o.score,l=a.score;if((c===vm||l===vm)&&c!==l)return c===vm?-1:1;if(c>u4||l>u4){if(c!==l)return c>l?-1:1;if(c<l4&&l<l4){const b=HV(o.labelMatch,a.labelMatch);if(b!==0)return b}const g=r.getItemLabel(e)||"",v=r.getItemLabel(t)||"";if(g.length!==v.length)return g.length-v.length}if(c!==l)return c>l?-1:1;const u=Array.isArray(o.labelMatch)&&o.labelMatch.length>0,h=Array.isArray(a.labelMatch)&&a.labelMatch.length>0;if(u&&!h)return-1;if(h&&!u)return 1;const f=oP(e,o,r),p=oP(t,a,r);return f&&p&&f!==p?p>f?-1:1:zV(e,t,i,r)}function oP(e,t,i){let s=-1,r=-1;if(t.descriptionMatch&&t.descriptionMatch.length?s=t.descriptionMatch[0].start:t.labelMatch&&t.labelMatch.length&&(s=t.labelMatch[0].start),t.labelMatch&&t.labelMatch.length){if(r=t.labelMatch[t.labelMatch.length-1].end,t.descriptionMatch&&t.descriptionMatch.length){const n=i.getItemDescription(e);n&&(r+=n.length)}}else t.descriptionMatch&&t.descriptionMatch.length&&(r=t.descriptionMatch[t.descriptionMatch.length-1].end);return r-s}function HV(e,t){if(!e&&!t||(!e||!e.length)&&(!t||!t.length))return 0;if(!t||!t.length)return-1;if(!e||!e.length)return 1;const i=e[0].start,r=e[e.length-1].end-i,n=t[0].start,a=t[t.length-1].end-n;return r===a?0:a<r?1:-1}function zV(e,t,i,s){const r=s.getItemLabel(e)||"",n=s.getItemLabel(t)||"",o=s.getItemDescription(e),a=s.getItemDescription(t),c=r.length+(o?o.length:0),l=n.length+(a?a.length:0);if(c!==l)return c-l;const u=s.getItemPath(e),h=s.getItemPath(t);return u&&h&&u.length!==h.length?u.length-h.length:r!==n?c4(r,n,i.normalized):o&&a&&o!==a?c4(o,a,i.normalized):u&&h&&u!==h?c4(u,h,i.normalized):0}function aP(e){return e.startsWith('"')&&e.endsWith('"')}var WV=" ";function h4(e){typeof e!="string"&&(e="");const t=e.toLowerCase(),{pathNormalized:i,normalized:s,normalizedLowercase:r}=cP(e),n=i.indexOf(wt)>=0,o=aP(e);let a;const c=e.split(WV);if(c.length>1)for(const l of c){const u=aP(l),{pathNormalized:h,normalized:f,normalizedLowercase:p}=cP(l);f&&(a||(a=[]),a.push({original:l,originalLowercase:l.toLowerCase(),pathNormalized:h,normalized:f,normalizedLowercase:p,expectContiguousMatch:u}))}return{original:e,originalLowercase:t,pathNormalized:i,normalized:s,normalizedLowercase:r,values:a,containsPathSeparator:n,expectContiguousMatch:o}}function cP(e){let t;Fe?t=e.replace(/\//g,wt):t=e.replace(/\\/g,wt);const i=lR(t).replace(/\s|"/g,"");return{pathNormalized:t,normalized:i,normalizedLowercase:i.toLowerCase()}}import*as VV from"child_process";import*as d4 from"fs";import{StringDecoder as lP}from"string_decoder";import*as _V from"child_process";function wm(e){return e.startsWith("**")||e.startsWith("/")?e:`/${e}`}function qV(e){return new Cb(e.start.line,e.start.character,e.end.line,e.end.character)}function uP(e){return new S9(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)}var bm=class{constructor(t,i){this.a=t,this.b=i}appendLine(t){this.b.debug(`${this.a}#search`,t)}};bm=__decorate([__param(1,De)],bm);import{rgPath as GV}from"@vscode/ripgrep";var hP=GV.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked");function JV(e,t,i,s,r){const n=YV(e,t,i,s,r),o=t.folder.fsPath;return{cmd:_V.spawn(hP,n.args,{cwd:o}),rgDiskPath:hP,siblingClauses:n.siblingClauses,rgArgs:n,cwd:o}}function YV(e,t,i,s,r){const n=["--files","--hidden","--case-sensitive","--no-require-git"];QV([t],i,!1).forEach(a=>{const c=wm(a);if(n.push("-g",c),Ct){const l=FE(c);l!==c&&n.push("-g",l)}});const o=ZV([t],s,void 0,!1);return o.globArgs.forEach(a=>{const c=`!${wm(a)}`;if(n.push("-g",c),Ct){const l=FE(c);l!==c&&n.push("-g",l)}}),t.disregardIgnoreFiles!==!1?n.push("--no-ignore"):t.disregardParentIgnoreFiles!==!1&&n.push("--no-ignore-parent"),t.ignoreSymlinks||n.push("--follow"),e.exists&&n.push("--quiet"),r&&n.push("--threads",`${r}`),n.push("--no-config"),t.disregardGlobalIgnoreFiles&&n.push("--no-ignore-global"),{args:n,siblingClauses:o.siblingClauses}}function ZV(e,t,i,s=!0){const r=[];let n={};return e.forEach(o=>{const a=Object.assign({},o.excludePattern||{},t||{}),c=dP(a,s?o.folder.fsPath:void 0,i);r.push(...c.globArgs),c.siblingClauses&&(n=Object.assign(n,c.siblingClauses))}),{globArgs:r,siblingClauses:n}}function QV(e,t,i=!0){const s=[];return e.forEach(r=>{const n=Object.assign({},t||{},r.includePattern||{}),o=dP(n,i?r.folder.fsPath:void 0);s.push(...o.globArgs)}),s}function dP(e,t,i){const s=[],r={};return Object.keys(e).forEach(n=>{if(i&&i.has(n)||!n)return;const o=e[n];n=KV(t?XV(t,n):n),n.startsWith("\\\\")?n="\\\\"+n.substr(2).replace(/\\/g,"/"):n=n.replace(/\\/g,"/"),typeof o=="boolean"&&o?(n.startsWith("\\\\")&&(n+="**"),s.push(e_(n))):o&&o.when&&(r[n]=o)}),{globArgs:s,siblingClauses:r}}function XV(e,t){return es(t)?t:Pe(e,t)}function KV(e){return e=gn(e,"\\"),gn(e,"/")}function e_(e){return W1(e).toLowerCase()==="c:/"?e.replace(/^c:[/\\]/i,"/"):e}var ym=new Set;process.on("exit",()=>{ym.forEach(e=>e())});var t_=class{constructor(e){this.c=null,this.h=null,this.l=!1,this.m=null,this.r=null,this.s=0,this.a=e,this.b=e.filePattern||"",this.d=e.includePattern&&Ds(e.includePattern),this.f=e.maxResults||null,this.g=!!e.exists,this.v=Object.create(null),this.k=0,this.j=!1,this.o=0,this.p=0,this.q=[],this.b&&(this.c=e.shouldGlobMatchFilePattern?null:h4(this.b).normalizedLowercase),this.u=e.excludePattern&&Ds(e.excludePattern),this.t=new Map,e.folderQueries.forEach(t=>{const i={};t.excludePattern?.forEach(r=>{Object.assign(i,r.pattern||{},this.a.excludePattern||{})}),t.excludePattern?.length||Object.assign(i,this.a.excludePattern||{});const s=t.folder.fsPath;e.folderQueries.map(r=>r.folder.fsPath).filter(r=>r!==s).forEach(r=>{lo(r,s)&&(i[Ea(s,r)]=!0)}),this.t.set(s,new i_(i,s))})}cancel(){this.l=!0,ym.forEach(e=>e())}walk(e,t,i,s,r,n){if(this.m=Fi.create(!1),this.l)return n(null,this.j);t.forEach(o=>{const a=vt(o.fsPath);this.u&&this.u(o.fsPath,a)||this.J(s,{relativePath:o.fsPath,searchPath:void 0})}),this.r=Fi.create(!1),this.w(e,(o,a)=>{this.x(this.y,this,o,i,s,r,c=>{if(c){const l=Ks(c);console.error(l),this.q.push(l),a(c,void 0)}else a(null,void 0)})},(o,a)=>{this.m.stop();const c=o?yt(o)[0]:null;n(c,this.j)})}w(e,t,i){const s=new Array(e.length),r=new Array(e.length);let n=!1,o=0;if(e.length===0)return i(null,[]);e.forEach((a,c)=>{t(a,(l,u)=>{if(l?(n=!0,s[c]=null,r[c]=l):(s[c]=u,r[c]=null),++o===e.length)return i(n?r:null,s)})})}x(e,t,...i){try{e.apply(t,i)}catch(s){i[i.length-1](s)}}y(e,t,i,s,r){const n=e.folder.fsPath,o=Ct,a=()=>f&&f.kill();ym.add(a);let c=b=>{ym.delete(a),c=()=>{},r(b)},l="";const u=this.D(),h=JV(this.a,e,this.a.includePattern,this.t.get(e.folder.fsPath).expression,t),f=h.cmd,p=!Object.keys(h.siblingClauses).length,g=h.rgArgs.args.map(b=>b.match(/^-/)?b:`'${b}'`).join(" ");let v=`${h.rgDiskPath} ${g}
 - cwd: ${h.cwd}`;h.rgArgs.siblingClauses&&(v+=`
 - Sibling clauses: ${JSON.stringify(h.rgArgs.siblingClauses)}`),s({message:v}),this.s=0,this.z(f,"utf8",s,(b,E,k)=>{if(b){c(b);return}if(this.j){c();return}const B=(l+(o?Nd(E||""):E)).split(`
`);if(k){const j=B.length;B[j-1]=B[j-1].trim(),B[j-1]||B.pop()}else l=B.pop()||"";if(B.length&&B[0].indexOf(`
`)!==-1){c(new Error("Splitting up files failed"));return}if(this.s+=B.length,p){for(const j of B)if(this.J(i,{base:n,relativePath:j,searchPath:this.N(e,j)}),this.j){a();break}(k||this.j)&&c();return}this.G(e,u,n,B,i),k&&(this.H(u,n,i),c())})}spawnFindCmd(e){const t=this.t.get(e.folder.fsPath),i=t.getBasenameTerms(),s=t.getPathTerms(),r=["-L","."];if(i.length||s.length){r.push("-not","(","(");for(const n of i)r.push("-name",n),r.push("-o");for(const n of s)r.push("-path",n),r.push("-o");r.pop(),r.push(")","-prune",")")}return r.push("-type","f"),VV.spawn("find",r,{cwd:e.folder.fsPath})}readStdout(e,t,i){let s="";this.z(e,t,()=>{},(r,n,o)=>{if(r){i(r);return}s+=n,o&&i(null,s)})}z(e,t,i,s){let r=(a,c,l)=>{(a||l)&&(r=()=>{},this.r?.stop()),s(a,c,l)},n=!1;e.stdout?(this.A(e.stdout,t,r),e.stdout.once("data",()=>n=!0)):i({message:"stdout is null"});let o;e.stderr?o=this.B(e.stderr):i({message:"stderr is null"}),e.on("error",a=>{r(a)}),e.on("close",a=>{let c;!n&&(c=this.C(o,t))&&s_(c)?r(new Error(`command failed with error code ${a}: ${this.C(o,t)}`)):(this.g&&a===0&&(this.j=!0),r(null,"",!0))})}A(e,t,i){const s=new lP(t);return e.on("data",r=>{i(null,s.write(r))}),s}B(e){const t=[];return e.on("data",i=>{t.push(i)}),t}C(e,t){const i=new lP(t);return e.map(s=>i.write(s)).join("")}D(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}G(e,{pathToEntries:t},i,s,r){s.indexOf(this.b)!==-1&&this.J(r,{base:i,relativePath:this.b,searchPath:this.N(e,this.b)});const n=o=>{const a=vt(o),c=mi(o);let l=t[c];l||(l=t[c]=[],n(c)),l.push({base:i,relativePath:o,basename:a,searchPath:this.N(e,o)})};s.forEach(n)}H({rootEntries:e,pathToEntries:t},i,s){const r=this,n=this.t.get(i),o=this.b;function a(c){r.o++;const l=Ib(()=>c.map(u=>u.basename));for(let u=0,h=c.length;u<h;u++){const f=c[u],{relativePath:p,basename:g}=f;if(n.test(p,g,o!==g?l:void 0))continue;const v=t[p];if(v)a(v);else{if(r.p++,p===o)continue;r.J(s,f)}if(r.j)break}}a(e)}getStats(){return{cmdTime:this.r.elapsed(),fileWalkTime:this.m.elapsed(),directoriesWalked:this.o,filesWalked:this.p,cmdResultCount:this.s}}I(e,t,i,s,r){const n=e.folder,o=Ib(()=>i);this.w(i,(a,c)=>{if(this.l||this.j)return c(null);const l=t?[t,a].join(wt):a;if(this.t.get(e.folder.fsPath).test(l,a,this.a.filePattern!==a?o:void 0))return c(null);const u=[n.fsPath,l].join(wt);d4.lstat(u,(h,f)=>{if(h||this.l||this.j)return c(null);this.L(u,f,(p,g)=>p||this.l||this.j?c(null):g.isDirectory()?(this.o++,this.M(u,f,(v,b)=>v||this.l||this.j||(b=b||"",this.v[b])?c(null):(this.v[b]=!0,it.readdir(u).then(E=>{if(this.l||this.j)return c(null);this.I(e,l,E,s,k=>c(k||null))},E=>{c(null)})))):(this.p++,l===this.b||this.h&&us(g.size)&&g.size>this.h||this.J(s,{base:n.fsPath,relativePath:l,searchPath:this.N(e,l)}),c(null,void 0)))})},a=>{const c=a&&yt(a);return r(c&&c.length>0?c[0]:void 0)})}J(e,t){this.K(t)&&(!this.d||this.d(t.relativePath,vt(t.relativePath)))&&(this.k++,(this.g||this.f&&this.k>this.f)&&(this.j=!0),this.j||e(t))}K(e){if(this.b){if(this.b==="*")return!0;if(this.c)return $b(e,this.c);if(this.b)return $b(e,this.b,!1)}return!0}L(e,t,i){return t.isSymbolicLink()?d4.stat(e,i):i(null,t)}M(e,t,i){return t.isSymbolicLink()?d4.realpath(e,(s,r)=>s?i(s):i(null,r)):i(null,e)}N(e,t){return e.folderName?Pe(e.folderName,t):t}},fP=class{constructor(e,t){this.a=e.folderQueries,this.b=e.extraFileResources||[],this.d=t,this.c=new t_(e)}search(e,t,i){this.c.walk(this.a,this.b,this.d,e,t,(s,r)=>{i(s,{limitHit:r,stats:this.c.getStats(),messages:[]})})}cancel(){this.c.cancel()}},i_=class{constructor(e,t){this.expression=e,this.c=t,this.d(e)}d(e){let t,i;Object.keys(e).filter(s=>e[s]).forEach(s=>{es(s)?(t=t||b8(),t[s]=e[s]):(i=i||b8(),i[s]=e[s])}),this.a=t&&Ds(t,{trimForExclusions:!0}),this.b=i&&Ds(i,{trimForExclusions:!0})}test(e,t,i){return this.b&&this.b(e,t,i)||this.a&&this.a(Pe(this.c,e),t,i)}getBasenameTerms(){const e=[];return this.a&&e.push(...$8(this.a)),this.b&&e.push(...$8(this.b)),e}getPathTerms(){const e=[];return this.a&&e.push(...I8(this.a)),this.b&&e.push(...I8(this.b)),e}};function s_(e){const t=e.trim().split(`
`),i=t[0].trim();if(i.startsWith("Error parsing regex"))return i;if(i.startsWith("regex parse error"))return CR(t[t.length-1].trim());if(i.startsWith("error parsing glob")||i.startsWith("unsupported encoding"))return i.charAt(0).toUpperCase()+i.substr(1);if(i==="Literal '\\n' not allowed.")return"Literal '\\n' currently not supported";if(i.startsWith("Literal "))return i}import*as r_ from"child_process";import{EventEmitter as n_}from"events";import{StringDecoder as o_}from"string_decoder";import{RegExpParser as a_,RegExpVisitor as c_}from"vscode-regexpp";import{rgPath as l_}from"@vscode/ripgrep";var pP=l_.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked"),gP=class{constructor(e,t){this.a=e,this.b=t}provideTextSearchResults(e,t,i,s){return Promise.all(t.folderOptions.map(r=>{const n={folderOptions:r,numThreads:this.b,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};return this.provideTextSearchResultsWithRgOptions(e,n,i,s)})).then(r=>({limitHit:r.some(o=>!!o&&o.limitHit)}))}provideTextSearchResultsWithRgOptions(e,t,i,s){return this.a.appendLine(`provideTextSearchResults ${e.pattern}, ${JSON.stringify({...t,folder:t.folderOptions.folder.toString()})}`),new Promise((r,n)=>{s.onCancellationRequested(()=>g());const o={...t,numThreads:this.b},a=f_(e,o),c=t.folderOptions.folder.fsPath,l=a.map(I=>I.match(/^-/)?I:`'${I}'`).join(" ");this.a.appendLine(`${pP} ${l}
 - cwd: ${c}`);let u=r_.spawn(pP,a,{cwd:c});u.on("error",I=>{console.error(I),this.a.appendLine("Error: "+(I&&I.message)),n(M9(new Xo(I&&I.message,zn.rgProcessError)))});let h=!1;const f=new d_(t.maxResults??Sg,t.folderOptions.folder,LI(t.previewOptions));f.on("result",I=>{h=!0,b="",i.report(I)});let p=!1;const g=()=>{p=!0,u?.kill(),f?.cancel()};let v=!1;f.on("hitLimit",()=>{v=!0,g()});let b="";u.stdout.on("data",I=>{f.handleData(I),h||(b+=I)});let E=!1;u.stdout.once("data",()=>E=!0);let k="";u.stderr.on("data",I=>{const B=I.toString();this.a.appendLine(B),k.length+B.length<1e6&&(k+=B)}),u.on("close",()=>{if(this.a.appendLine(E?"Got data from stdout":"No data from stdout"),this.a.appendLine(h?"Got result from parser":"No result from parser"),b&&this.a.appendLine(`Got data without result: ${b}`),this.a.appendLine(""),p)r({limitHit:v});else{f.flush(),u=null;let I;k&&!E&&(I=u_(k))?n(M9(new Xo(I.message,I.code))):r({limitHit:v})}})})}};function u_(e){const t=e.split(`
`),i=t[0].trim();if(t.some(r=>r.startsWith("regex parse error")))return new Xo(h_(t),zn.regexParseError);const s=i.match(/grep config error: unknown encoding: (.*)/);if(s)return new Xo(`Unknown encoding: ${s[1]}`,zn.unknownEncoding);if(i.startsWith("error parsing glob"))return new Xo(i.charAt(0).toUpperCase()+i.substr(1),zn.globParseError);if(i.startsWith("the literal"))return new Xo(i.charAt(0).toUpperCase()+i.substr(1),zn.invalidLiteral);if(i.startsWith("PCRE2: error compiling pattern"))return new Xo(i,zn.regexParseError)}function h_(e){const t=["Regex parse error"],i=e.filter(s=>s.startsWith("PCRE2:"));if(i.length>=1){const s=i[0].replace("PCRE2:","");if(s.indexOf(":")!==-1&&s.split(":").length>=2){const r=s.split(":")[1];t.push(":"+r)}}return t.join("")}var d_=class extends n_{constructor(e,t,i){super(),this.g=e,this.h=t,this.j=i,this.a="",this.b=!1,this.c=!1,this.f=0,this.d=new o_}cancel(){this.b=!0}flush(){this.k(this.d.end())}on(e,t){return super.on(e,t),this}handleData(e){if(this.b)return;const t=typeof e=="string"?e:this.d.write(e);this.k(t)}k(e){let t=e.indexOf(`
`);const i=this.a+e;if(t>=0)t+=this.a.length;else{this.a=i;return}let s=0;for(;t>=0;)this.m(i.substring(s,t).trim()),s=t+1,t=i.indexOf(`
`,s);this.a=i.substring(s)}m(e){if(this.b||!e)return;let t;try{t=JSON.parse(e)}catch{throw new Error(`malformed line from rg: ${e}`)}if(t.type==="match"){const i=Eh(t.data.path),s=x.joinPath(this.h,i),r=this.n(t.data,s);this.p(r),this.c&&(this.cancel(),this.emit("hitLimit"))}else if(t.type==="context"){const i=Eh(t.data.path),s=x.joinPath(this.h,i);this.o(t.data,s).forEach(n=>this.p(n))}}n(e,t){const i=e.line_number-1,s=Eh(e.lines),r=Buffer.from(s);let n=0,o=0,a=i;e.submatches.length===0&&e.submatches.push(s.length?{start:0,end:1,match:{text:s[0]}}:{start:0,end:0,match:{text:""}});const c=yt(e.submatches.map((h,f)=>{if(this.c)return null;this.f++,this.f>=this.g&&(this.c=!0);const p=Eh(h.match),g=r.slice(n,h.start).toString(),v=mP(g),b=v.numLines>0?v.lastLineLength:v.lastLineLength+o,E=mP(p),k=v.numLines+a,I=E.numLines+k,B=E.numLines>0?E.lastLineLength:E.lastLineLength+b;return n=h.end,o=B,a=I,new S9(k,b,I,B)})),l=ld(c,qV),u=new A9(s,l,this.j);return new _r(t,u.rangeLocations.map(h=>({sourceRange:uP(h.source),previewRange:uP(h.preview)})),u.previewText)}o(e,t){const i=Eh(e.lines),s=e.line_number;return i.replace(/\r?\n$/,"").split(`
`).map((r,n)=>new Eg(t,r,s+n))}p(e){this.emit("result",e)}};function Eh(e){return e.bytes?Buffer.from(e.bytes,"base64").toString():e.text}function mP(e){const t=/\n/g;let i=0,s=-1,r;for(;r=t.exec(e);)i++,s=r.index;const n=s>=0?e.length-s-1:e.length;return{numLines:i,lastLineLength:n}}function f_(e,t){const i=["--hidden","--no-require-git"];i.push(e.isCaseSensitive?"--case-sensitive":"--ignore-case");const{doubleStarIncludes:s,otherIncludes:r}=y1(t.folderOptions.includes,o=>o.startsWith("**")?"doubleStarIncludes":"otherIncludes");if(r&&r.length){const o=new Set;r.forEach(a=>{o.add(a)}),i.push("-g","!*"),o.forEach(a=>{p_(a).map(wm).forEach(c=>{i.push("-g",c)})})}s&&s.length&&s.forEach(o=>{i.push("-g",o)}),t.folderOptions.excludes.map(o=>typeof o=="string"?o:o.pattern).map(wm).forEach(o=>i.push("-g",`!${o}`)),t.maxFileSize&&i.push("--max-filesize",t.maxFileSize+""),t.folderOptions.useIgnoreFiles.local?t.folderOptions.useIgnoreFiles.parent||i.push("--no-ignore-parent"):i.push("--no-ignore"),t.folderOptions.followSymlinks&&i.push("--follow"),t.folderOptions.encoding&&t.folderOptions.encoding!=="utf8"&&i.push("--encoding",t.folderOptions.encoding),t.numThreads&&i.push("--threads",`${t.numThreads}`),e.pattern==="--"&&(e.isRegExp=!0,e.pattern="\\-\\-"),e.isMultiline&&!e.isRegExp&&(e.pattern=pn(e.pattern),e.isRegExp=!0),t.usePCRE2&&i.push("--pcre2"),i.push("--crlf"),e.isRegExp&&(e.pattern=g_(e.pattern),i.push("--engine","auto"));let n;if(e.isWordMatch){const a=_x(e.pattern,!!e.isRegExp,{wholeWord:e.isWordMatch}).source.replace(/\\\//g,"/");i.push("--regexp",a)}else if(e.isRegExp){let o=m_(e.pattern);o=v_(o),i.push("--regexp",o)}else n=e.pattern,i.push("--fixed-strings");return i.push("--no-config"),t.folderOptions.useIgnoreFiles.global||i.push("--no-ignore-global"),i.push("--json"),e.isMultiline&&i.push("--multiline"),t.surroundingContext&&(i.push("--before-context",t.surroundingContext+""),i.push("--after-context",t.surroundingContext+"")),i.push("--"),n&&i.push(n),i.push("."),i}function p_(e){return wP(e).flatMap(i=>{const s=Gl(i,"/");return s.map((r,n)=>s.slice(0,n+1).join("/"))})}function g_(e){const t=/((?:[^\\]|^)(?:\\\\)*)\\u([a-z0-9]{4})/gi;for(;e.match(t);)e=e.replace(t,"$1\\x{$2}");const i=/((?:[^\\]|^)(?:\\\\)*)\\u\{([a-z0-9]{4})\}/gi;for(;e.match(i);)e=e.replace(i,"$1\\x{$2}");return e}var vP=e=>e.type==="Assertion"&&e.kind==="lookbehind";function m_(e){let t;try{t=new a_().parsePattern(e)}catch{return e}let i="",s=0;const r=(a,c,l)=>{i+=e.slice(s,a)+l,s=c},n=[];return new c_({onCharacterEnter(a){if(a.raw!=="\\n")return;const c=n[0];if(!c)r(a.start,a.end,"\\r?\\n");else if(!n.some(vP))if(c.type==="CharacterClass")if(c.negate){const l=e.slice(c.start+2,a.start)+e.slice(a.end,c.end-1);c.parent?.type==="Quantifier"?r(c.start,c.end,l?`[^${l}]`:"."):r(c.start,c.end,"(?!\\r?\\n"+(l?`|[${l}]`:"")+")")}else{const l=e.slice(c.start+1,a.start)+e.slice(a.end,c.end-1);r(c.start,c.end,l===""?"\\r?\\n":`(?:[${l}]|\\r?\\n)`)}else c.type==="Quantifier"&&r(a.start,a.end,"(?:\\r?\\n)")},onQuantifierEnter(a){n.unshift(a)},onQuantifierLeave(){n.shift()},onCharacterClassRangeEnter(a){n.unshift(a)},onCharacterClassRangeLeave(){n.shift()},onCharacterClassEnter(a){n.unshift(a)},onCharacterClassLeave(){n.shift()},onAssertionEnter(a){vP(a)&&n.push(a)},onAssertionLeave(a){n[0]===a&&n.shift()}}).visit(t),i+=e.slice(s),i}function v_(e){return e.replace(/\n/g,"\\r?\\n")}function w_(e){let t=!1,i=!1,s="",r="";for(let n=0;n<e.length;n++){const o=e[n];switch(o){case"\\":i?(t?r+="\\"+o:s+="\\"+o,i=!1):i=!0;break;case"{":if(i)t?r+=o:s+=o,i=!1;else{if(t)return{strInBraces:s+"{"+r+"{"+e.substring(n+1)};t=!0}break;case"}":if(i)t?r+=o:s+=o,i=!1;else{if(t)return{fixedStart:s,strInBraces:r,fixedEnd:e.substring(n+1)};s+=o}break;default:t?r+=(i?"\\":"")+o:s+=(i?"\\":"")+o,i=!1;break}}return{strInBraces:s+(t?"{"+r:"")}}function wP(e){const{fixedStart:t,strInBraces:i,fixedEnd:s}=w_(e);if(t===void 0||s===void 0)return[i];let r=Gl(i,",");r.length||(r=[""]);const n=wP(s);return r.flatMap(o=>{const a=t+o;return n.map(c=>a+c)})}var bP=class extends Zy{constructor(e,t,i=Ld,s="searchProcess"){super({query:e,provider:t},{readdir:r=>i.Promises.readdir(r.fsPath),toCanonicalName:r=>EH(r)},s)}},b_=class{constructor(e,t){this.a=e,this.b=t}search(e,t,i){if((!this.a.folderQueries||!this.a.folderQueries.length)&&(!this.a.extraFileResources||!this.a.extraFileResources.length))return Promise.resolve({type:"success",limitHit:!1,stats:{type:"searchProcess"},messages:[]});const s={appendLine(n){i({message:n})}},r=new bP(this.a,new gP(s,this.b),Ld);return new Promise((n,o)=>r.search(a=>{t(a.map(y_))},e).then(a=>n({limitHit:a.limitHit??!1,type:"success",stats:a.stats,messages:[]}),o))}};function y_(e){return{path:e.resource&&e.resource.fsPath,results:e.results,numMatches:(e.results||[]).reduce((t,i)=>Sb(i)?t+i.rangeLocations.length:t+1,0)}}var x_=class d1{static{this.a=512}constructor(t="searchProcess",i){this.d=t,this.f=i,this.b=Object.create(null)}fileSearch(t){let i;const s=yP(t),r=new D({onDidAddFirstListener:()=>{i=Ir(async n=>{const o=await this.f?.();return this.doFileSearchWithEngine(fP,s,a=>r.fire(a),n,d1.a,o)}),i.then(n=>r.fire(n),n=>r.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{i.cancel()}});return r.event}textSearch(t){let i;const s=yP(t),r=new D({onDidAddFirstListener:()=>{i=Ir(n=>this.g(s,o=>r.fire(o),n)),i.then(n=>r.fire(n),n=>r.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{i.cancel()}});return r.event}async g(t,i,s){t.maxFileSize=this.h().maxFileSize;const r=await this.f?.();return new b_(t,r).search(s,i,i)}h(){return{maxFileSize:16*B6.GB}}doFileSearch(t,i,s,r){return this.doFileSearchWithEngine(fP,t,s,r,d1.a,i)}doFileSearchWithEngine(t,i,s,r,n=d1.a,o){let a=0;const c=u=>{Array.isArray(u)?(a+=u.length,s(u.map(h=>this.j(h)))):u.relativePath?(a++,s(this.j(u))):s(u)};if(i.sortByScore){let u=this.n(i,c,r);if(!u){const h=i.maxResults?Object.assign({},i,{maxResults:null}):i,f=new t(h,o);u=this.k(f,i,s,c,r)}return new Promise((h,f)=>{u.then(([p,g])=>{const v=g.map(b=>this.j(b));this.q(v,s,n),h(p)},f)})}const l=new t(i,o);return this.s(l,c,n,r).then(u=>({limitHit:u.limitHit,type:"success",stats:{detailStats:u.stats,type:this.d,fromCache:!1,resultCount:a,sortingTime:void 0},messages:[]}))}j(t){return{path:t.base?Pe(t.base,t.relativePath):t.relativePath}}k(t,i,s,r,n){const o=new D;let a=Ir(l=>{let u=[];const h=f=>{Array.isArray(f)?u=f:(r(f),o.fire(f))};return this.s(t,h,-1,l).then(f=>[f,u])}),c;if(i.cacheKey){c=this.l(i.cacheKey);const l={promise:a,event:o.event,resolved:!1};c.resultsToSearchCache[i.filePattern||""]=l,a.then(()=>{l.resolved=!0},u=>{delete c.resultsToSearchCache[i.filePattern||""]}),a=this.t(a)}return a.then(([l,u])=>{const h=c?c.scorerCache:Object.create(null),f=(typeof i.maxResults!="number"||i.maxResults>0)&&Fi.create(!1);return this.o(i,u,h,n).then(p=>{const g=f?f.elapsed():-1;return[{type:"success",stats:{detailStats:l.stats,sortingTime:g,fromCache:!1,type:this.d,resultCount:p.length},messages:l.messages,limitHit:l.limitHit||typeof i.maxResults=="number"&&u.length>i.maxResults},p]})})}l(t){const i=this.b[t];return i||(this.b[t]=new E_)}n(t,i,s){const r=t.cacheKey&&this.b[t.cacheKey];if(!r)return;const n=this.r(r,t.filePattern||"",i,s);if(n)return n.then(([o,a,c])=>{const l=Fi.create(!1);return this.o(t,a,r.scorerCache,s).then(u=>{const h=l.elapsed(),f={fromCache:!0,detailStats:c,type:this.d,resultCount:a.length,sortingTime:h};return[{type:"success",limitHit:o.limitHit||typeof t.maxResults=="number"&&a.length>t.maxResults,stats:f,messages:[]},u]})})}o(t,i,s,r){const n=h4(t.filePattern||""),o=(c,l)=>BV(c,l,n,!0,k_,s),a=typeof t.maxResults=="number"?t.maxResults:Sg;return tT(i,o,a,1e4,r)}q(t,i,s){if(s&&s>0)for(let r=0;r<t.length;r+=s)i(t.slice(r,r+s));else i(t)}r(t,i,s,r){const n=Fi.create(!1),o=i.indexOf(wt)>=0;let a;for(const h in t.resultsToSearchCache)if(i.startsWith(h)){if(o&&h.indexOf(wt)<0&&h!=="")continue;const f=t.resultsToSearchCache[h];a={promise:this.t(f.promise),event:f.event,resolved:f.resolved};break}if(!a)return null;const c=n.elapsed(),l=Fi.create(!1),u=a.event(s);return r&&r.onCancellationRequested(()=>{u.dispose()}),a.promise.then(([h,f])=>{if(r&&r.isCancellationRequested)throw al();const p=[],g=h4(i).normalizedLowercase;for(const v of f)$b(v,g)&&p.push(v);return[h,p,{cacheWasResolved:a.resolved,cacheLookupTime:c,cacheFilterTime:l.elapsed(),cacheEntryCount:f.length}]})}s(t,i,s,r){return new Promise((n,o)=>{let a=[];r?.onCancellationRequested(()=>t.cancel()),t.search(c=>{c&&(s?(a.push(c),s>0&&a.length>=s&&(i(a),a=[])):i(c))},c=>{i(c)},(c,l)=>{a.length&&i(a),c?(i({message:"Search finished. Error: "+c.message}),o(c)):(i({message:"Search finished. Stats: "+JSON.stringify(l.stats)}),n(l))})})}clearCache(t){return delete this.b[t],Promise.resolve(void 0)}t(t){return new class{get[Symbol.toStringTag](){return this.toString()}cancel(){}then(i,s){return t.then(i,s)}catch(i){return this.then(void 0,i)}finally(i){return t.finally(i)}}}},E_=class{constructor(){this.resultsToSearchCache=Object.create(null),this.scorerCache=Object.create(null)}},k_=new class{getItemLabel(e){return vt(e.relativePath)}getItemDescription(e){return mi(e.relativePath)}getItemPath(e){return e.relativePath}};function yP(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(S_),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>x.revive(t))}}function S_(e){return Et(e)}var xP=class{constructor(e,t){this.b=e,this.c=t,this.a=new Set,process.once("exit",()=>this.f())}async provideTextSearchResults(e,t,i,s){const r=await this.c(),n=new gP(this.b,r);return Promise.all(t.folderOptions.map(o=>{const a={folderOptions:o,numThreads:r,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};if(o.folder.scheme===G.vscodeUserData){const c={...a,folder:o.folder.with({scheme:G.file})},l=new Bg(u=>i.report({...u,uri:u.uri.with({scheme:o.folder.scheme})}));return this.d(s,u=>n.provideTextSearchResultsWithRgOptions(e,c,l,u))}else return this.d(s,c=>n.provideTextSearchResultsWithRgOptions(e,a,i,c))})).then(o=>({limitHit:o.some(c=>!!c&&c.limitHit)}))}async d(e,t){const i=C_(e);this.a.add(i);const s=await t(i.token);return this.a.delete(i),s}f(){this.a.forEach(e=>e.cancel())}};function C_(e){const t=new Ke;return e.onCancellationRequested(()=>t.cancel()),t}var f4=class extends am{constructor(t,i,s,r,n){super(t,s,n),this.E=r,this.x=Ld,this.y=-1,this.z=null,this.A=!1,this.C=new se,this.D=!1,this.getNumThreads=this.getNumThreads.bind(this),this.getNumThreadsCached=this.getNumThreadsCached.bind(this),this.F=this.F.bind(this);const o=new bm("RipgrepSearchUD",this.s);this.C.add(this.registerTextSearchProvider(G.vscodeUserData,new xP(o,this.getNumThreadsCached))),i.remote.isRemote&&i.remote.authority&&this.G(),r.getConfigProvider().then(a=>{this.D||this.C.add(a.onDidChangeConfiguration(this.F))})}F(t){t.affectsConfiguration("search")&&(this.B=void 0)}async getNumThreads(){return(await this.E.getConfigProvider()).getConfiguration("search").get("ripgrep.maxThreads")}async getNumThreadsCached(){return this.B||(this.B=this.getNumThreads()),this.B}dispose(){this.D=!0,this.C.dispose()}$enableExtensionHostSearch(){this.G()}G(){if(this.A)return;this.A=!0;const t=new bm("RipgrepSearchEH",this.s);this.C.add(this.registerTextSearchProvider(G.file,new xP(t,this.getNumThreadsCached))),this.C.add(this.H(G.file,new x_("fileSearchProvider",this.getNumThreadsCached)))}H(t,i){const s=this.e++;return this.z=i,this.y=s,this.c.$registerFileSearchProvider(s,this.t(t)),ie(()=>{this.z=null,this.c.$unregisterProvider(s)})}$provideFileSearchResults(t,i,s,r){const n=cm(s);if(t===this.y){const o=Date.now();return this.I(t,i,n,r).then(a=>{const c=Date.now()-o;return this.s.debug(`Ext host file search time: ${c}ms`),a})}return super.$provideFileSearchResults(t,i,s,r)}async doInternalFileSearchWithCustomCallback(t,i,s){const r=o=>{if(tH(o)&&(o=[o]),Array.isArray(o)){s(o.map(a=>x.file(a.path)));return}o.message&&this.s.debug("ExtHostSearch",o.message)};if(!this.z)throw new Error("No internal file search handler");const n=await this.getNumThreadsCached();return this.z.doFileSearch(t,n,r,i)}async I(t,i,s,r){return this.doInternalFileSearchWithCustomCallback(s,r,n=>{this.c.$handleFileMatch(t,i,n)})}$clearCache(t){return this.z?.clearCache(t),super.$clearCache(t)}v(t,i){return new bP(t,i,void 0,"textSearchProvider")}};f4=__decorate([__param(0,Ae),__param(1,kt),__param(2,Ml),__param(3,ms),__param(4,De)],f4);function EP(e,t,i,s,r,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=EP(a,t,i,s,r,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return s?e==="*"?5:e===i?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!s&&!l)return 0;u&&r&&(t=r);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===i)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let f;if(typeof a=="string"?f=a:f={...a,base:$r(a.base)},f===t.fsPath||Ba(f,t.fsPath))h=10;else return 0}return h}else return 0}}function kP(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(kP):!!e.notebookType}var p4;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(p4||(p4={}));var hse=q("editSessionIdentityService"),g4;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(g4||(g4={}));var dse=new $("debugType",void 0,{type:"string",description:d(6780,null)}),fse=new $("debugConfigurationType",void 0,{type:"string",description:d(6781,null)}),pse=new $("debugState","inactive",{type:"string",description:d(6782,null)}),$_="debugUx",gse=new $($_,"default",{type:"string",description:d(6783,null)}),mse=new $("hasDebugged",!1,{type:"boolean",description:d(6784,null)}),vse=new $("inDebugMode",!1,{type:"boolean",description:d(6785,null)}),wse=new $("inDebugRepl",!1,{type:"boolean",description:d(6786,null)}),bse=new $("breakpointWidgetVisible",!1,{type:"boolean",description:d(6787,null)}),yse=new $("inBreakpointWidget",!1,{type:"boolean",description:d(6788,null)}),xse=new $("breakpointsFocused",!0,{type:"boolean",description:d(6789,null)}),Ese=new $("watchExpressionsFocused",!0,{type:"boolean",description:d(6790,null)}),kse=new $("watchExpressionsExist",!1,{type:"boolean",description:d(6791,null)}),Sse=new $("variablesFocused",!0,{type:"boolean",description:d(6792,null)}),Cse=new $("expressionSelected",!1,{type:"boolean",description:d(6793,null)}),$se=new $("breakpointInputFocused",!1,{type:"boolean",description:d(6794,null)}),Ise=new $("callStackItemType",void 0,{type:"string",description:d(6795,null)}),Pse=new $("callStackSessionIsAttach",!1,{type:"boolean",description:d(6796,null)}),Dse=new $("callStackItemStopped",!1,{type:"boolean",description:d(6797,null)}),Ase=new $("callStackSessionHasOneThread",!1,{type:"boolean",description:d(6798,null)}),Tse=new $("callStackFocused",!0,{type:"boolean",description:d(6799,null)}),Rse=new $("watchItemType",void 0,{type:"string",description:d(6800,null)}),Lse=new $("canViewMemory",void 0,{type:"boolean",description:d(6801,null)}),Nse=new $("breakpointItemType",void 0,{type:"string",description:d(6802,null)}),Mse=new $("breakpointItemBytes",void 0,{type:"boolean",description:d(6803,null)}),Ose=new $("breakpointHasModes",!1,{type:"boolean",description:d(6804,null)}),Fse=new $("breakpointSupportsCondition",!1,{type:"boolean",description:d(6805,null)}),Use=new $("loadedScriptsSupported",!1,{type:"boolean",description:d(6806,null)}),jse=new $("loadedScriptsItemType",void 0,{type:"string",description:d(6807,null)}),Bse=new $("focusedSessionIsAttach",!1,{type:"boolean",description:d(6808,null)}),Hse=new $("focusedSessionIsNoDebug",!1,{type:"boolean",description:d(6809,null)}),zse=new $("stepBackSupported",!1,{type:"boolean",description:d(6810,null)}),Wse=new $("restartFrameSupported",!1,{type:"boolean",description:d(6811,null)}),Vse=new $("stackFrameSupportsRestart",!1,{type:"boolean",description:d(6812,null)}),_se=new $("jumpToCursorSupported",!1,{type:"boolean",description:d(6813,null)}),qse=new $("stepIntoTargetsSupported",!1,{type:"boolean",description:d(6814,null)}),Gse=new $("breakpointsExist",!1,{type:"boolean",description:d(6815,null)}),Jse=new $("debuggersAvailable",!1,{type:"boolean",description:d(6816,null)}),Yse=new $("debugExtensionAvailable",!0,{type:"boolean",description:d(6817,null)}),Zse=new $("debugProtocolVariableMenuContext",void 0,{type:"string",description:d(6818,null)}),Qse=new $("debugSetVariableSupported",!1,{type:"boolean",description:d(6819,null)}),Xse=new $("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:d(6820,null)}),Kse=new $("debugSetExpressionSupported",!1,{type:"boolean",description:d(6821,null)}),ere=new $("breakWhenValueChangesSupported",!1,{type:"boolean",description:d(6822,null)}),tre=new $("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:d(6823,null)}),ire=new $("breakWhenValueIsReadSupported",!1,{type:"boolean",description:d(6824,null)}),sre=new $("terminateDebuggeeSupported",!1,{type:"boolean",description:d(6825,null)}),rre=new $("suspendDebuggeeSupported",!1,{type:"boolean",description:d(6826,null)}),nre=new $("variableEvaluateNamePresent",!1,{type:"boolean",description:d(6827,null)}),ore=new $("variableIsReadonly",!1,{type:"boolean",description:d(6828,null)}),are=new $("variableValue",!1,{type:"string",description:d(6829,null)}),cre=new $("variableType",!1,{type:"string",description:d(6830,null)}),lre=new $("variableInterfaces",!1,{type:"array",description:d(6831,null)}),ure=new $("variableName",!1,{type:"string",description:d(6832,null)}),hre=new $("variableLanguage",!1,{type:"string",description:d(6833,null)}),dre=new $("variableExtensionId",!1,{type:"string",description:d(6834,null)}),fre=new $("exceptionWidgetVisible",!1,{type:"boolean",description:d(6835,null)}),pre=new $("multiSessionRepl",!1,{type:"boolean",description:d(6836,null)}),gre=new $("multiSessionDebug",!1,{type:"boolean",description:d(6837,null)}),mre=new $("disassembleRequestSupported",!1,{type:"boolean",description:d(6838,null)}),vre=new $("disassemblyViewFocus",!1,{type:"boolean",description:d(6839,null)}),wre=new $("languageSupportsDisassembleRequest",!1,{type:"boolean",description:d(6840,null)}),bre=new $("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:d(6841,null)}),yre={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:d(6843,null)},SP;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(SP||(SP={}));var CP;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(CP||(CP={}));var $P;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})($P||($P={}));var xm;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(xm||(xm={}));var IP;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(IP||(IP={}));var xre=q("debugService"),PP;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(PP||(PP={}));var DP;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(DP||(DP={}));var AP;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(AP||(AP={}));var TP;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(TP||(TP={}));var RP;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:x.revive(t.iconPath.light),dark:x.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(RP||(RP={}));var I_=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Z.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(this.a.size===0)throw new Error("No related information providers registered");const s=this.a.get(e);if(!s)throw new Error("related information provider not found");return await s.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this.c.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const s=this.b;return this.b++,this.a.set(s,i),this.c.$registerAiRelatedInformationProvider(s,t),new Le(()=>{this.c.$unregisterAiRelatedInformationProvider(s),this.a.delete(s)})}},LP;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(LP||(LP={}));function NP(e){for(let t=0,i=e.length;t<i;t+=4){const s=e[t+0],r=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=r,e[t+3]=s}}function P_(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return jx()||NP(t),_.wrap(t)}function D_(e){const t=e.buffer;if(jx()||NP(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const i=new Uint8Array(t.byteLength);return i.set(t),new Uint32Array(i.buffer,i.byteOffset,i.length/4)}}function m4(e){const t=new Uint32Array(A_(e));let i=0;if(t[i++]=e.id,e.type==="full")t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=2,t[i++]=e.deltas.length;for(const s of e.deltas)t[i++]=s.start,t[i++]=s.deleteCount,s.data?(t[i++]=s.data.length,t.set(s.data,i),i+=s.data.length):t[i++]=0}return P_(t)}function A_(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}function MP(e){const t=D_(e);let i=0;const s=t[i++];if(t[i++]===1){const a=t[i++],c=t.subarray(i,i+a);return i+=a,{id:s,type:"full",data:c}}const n=t[i++],o=[];for(let a=0;a<n;a++){const c=t[i++],l=t[i++],u=t[i++];let h;u>0&&(h=t.subarray(i,i+u),i+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:s,type:"delta",deltas:o}}var T_=[new be("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[z.Uri,z.Position],new ve("A promise that resolves to an array of DocumentHighlight-instances.",zs(bc.to))),new be("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[z.Uri],new ve("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(C1(e))return;class i extends ou{constructor(){super(...arguments),this.containerName=""}static to(r){const n=new i(r.name,gs.to(r.kind),r.containerName||"",new ns(t[0],O.to(r.range)));return n.detail=r.detail,n.range=n.location.range,n.selectionRange=O.to(r.selectionRange),n.children=r.children?r.children.map(i.to):[],n}}return e.map(i.to)})),new be("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[z.Uri,new z("options","Formatting options",e=>!0,e=>e)],new ve("A promise that resolves to an array of TextEdits.",zs(Vt.to))),new be("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[z.Uri,z.Range,new z("options","Formatting options",e=>!0,e=>e)],new ve("A promise that resolves to an array of TextEdits.",zs(Vt.to))),new be("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[z.Uri,z.Position,new z("ch","Trigger character",e=>typeof e=="string",e=>e),new z("options","Formatting options",e=>!0,e=>e)],new ve("A promise that resolves to an array of TextEdits.",zs(Vt.to))),new be("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",qn)),new be("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",qn)),new be("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",qn)),new be("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",qn)),new be("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",qn)),new be("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",qn)),new be("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",qn)),new be("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",qn)),new be("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location-instances.",zs(Ai.to))),new be("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location-instances.",zs(Ai.to))),new be("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Hover-instances.",zs(Hu.to))),new be("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Hover-instances.",zs(Hu.to))),new be("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[z.Uri,new z("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Ne.isPosition(t)),e=>e.map(Je.from))],new ve("A promise that resolves to an array of ranges.",e=>e.map(t=>{let i;for(const s of t.reverse())i=new uu(O.to(s),i);return i}))),new be("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[z.String.with("query","Search string")],new ve("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(qo.to))),new be("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[z.Uri,z.Position],new ve("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Go.to))),new be("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[z.CallHierarchyItem],new ve("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(qw.to))),new be("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[z.CallHierarchyItem],new ve("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(Gw.to))),new be("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[z.Uri,z.Position],new ve("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:O.to(e.range),placeholder:e.text}})),new be("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[z.Uri,z.Position,z.String.with("newName","The new symbol name")],new ve("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return qi.to(e)}})),new be("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[z.Uri,z.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new ve("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Jo.to))),new be("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[z.Uri],new ve("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new lw(e.tokenTypes,e.tokenModifiers)})),new be("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[z.Uri],new ve("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=MP(e);if(t.type==="full")return new hc(t.data,void 0)})),new be("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[z.Uri,z.Range.optional()],new ve("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new lw(e.tokenTypes,e.tokenModifiers)})),new be("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[z.Uri,z.Range],new ve("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=MP(e);if(t.type==="full")return new hc(t.data,void 0)})),new be("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[z.Uri,z.Position,z.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),z.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new ve("A promise that resolves to a CompletionList-instance.",(e,t,i)=>{if(!e)return new Za([]);const s=e.suggestions.map(r=>Xw.to(r,i));return new Za(s,e.incomplete)})),new be("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[z.Uri,z.Position,z.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new ve("A promise that resolves to SignatureHelp.",e=>{if(e)return zu.to(e)})),new be("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[z.Uri,z.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new ve("A promise that resolves to an array of CodeLens-instances.",(e,t,i)=>zs(s=>new Xf(O.to(s.range),s.command&&i.fromInternal(s.command)))(e))),new be("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[z.Uri,new z("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>$e.isRange(e),e=>jr.isSelection(e)?Fs.from(e):O.from(e)),z.String.with("kind","Code action kind to return code actions for").optional(),z.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new ve("A promise that resolves to an array of Command-instances.",(e,t,i)=>zs(s=>{if(s._isSynthetic){if(!s.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(s.command)}else{const r=new lu(s.title,s.kind?new pt(s.kind):void 0);return s.edit&&(r.edit=qi.to(s.edit)),s.command&&(r.command=i.fromInternal(s.command)),r.isPreferred=s.isPreferred,r}})(e))),new be("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[z.Uri],new ve("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new rp(O.to(t.range),yc.to(t.color))):[])),new be("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new z("color","The color to show and insert",e=>e instanceof ic,yc.from),new z("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:O.from(e.range)}))],new ve("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(Xp.to):[])),new be("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[z.Uri,z.Range],new ve("A promise that resolves to an array of Inlay objects",(e,t,i)=>e.map(Kw.to.bind(void 0,i)))),new be("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[z.Uri],new ve("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(tg.to)})),new be("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new ve("A promise that resolves to an array of NotebookContentProvider static info objects.",zs(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>sg.to(t))})))),new be("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[z.Uri,z.Range,new z("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof $e,e=>qp.from(e))],new ve("A promise that resolves to an array of InlineValue objects",e=>e.map(_p.to))),new be("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new z("uriOrString","Uri-instance or string (only http/https)",e=>x.isUri(e)||typeof e=="string"&&_R(e,G.http,G.https),e=>e),new z("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Wt.from(e),void 0]:[Wt.from(e.viewColumn),Wu.from(e)])).optional(),z.String.with("label","").optional()],ve.Void),new be("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[z.Uri.with("resource","Resource to open"),z.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new z("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Wt.from(e),void 0]:[Wt.from(e.viewColumn),Wu.from(e)])).optional()],ve.Void),new be("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[z.Uri.with("left","Left-hand side resource of the diff editor"),z.Uri.with("right","Right-hand side resource of the diff editor"),z.String.with("title","Human readable title for the diff editor").optional(),new z("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[Wt.from(e.viewColumn),Wu.from(e)]).optional()],ve.Void),new be("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[z.String.with("title","Human readable title for the changes editor"),new z("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[i,s,r]=t;if(!x.isUri(i)||!x.isUri(s)&&s!==void 0&&s!==null||!x.isUri(r)&&r!==void 0&&r!==null)return!1}return!0},e=>e)],ve.Void),new be("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[z.Uri,z.Position],new ve("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Yo.to))),new be("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[z.TypeHierarchyItem],new ve("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Yo.to))),new be("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[z.TypeHierarchyItem],new ve("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Yo.to))),new be("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[z.TestItem],ve.Void),new be("vscode.startContinuousTestRun","testing.startContinuousRunFromExtension","Starts running the given tests with continuous run mode.",[z.TestProfile,z.Arr(z.TestItem)],ve.Void),new be("vscode.stopContinuousTestRun","testing.stopContinuousRunFromExtension","Stops running the given tests with continuous run mode.",[z.Arr(z.TestItem)],ve.Void),new be("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[z.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],ve.Void),new be("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[z.String.with("name","The context key name"),new z("value","The context key value",()=>!0,e=>e)],ve.Void),new be("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new z("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?O.from(e.initialRange):void 0,initialSelection:jr.isSelection(e.initialSelection)?Fs.from(e.initialSelection):void 0,message:e.message,attachments:e.attachments,autoSend:e.autoSend,position:e.position?Je.from(e.position):void 0}})],ve.Void)],R_=class{static register(e){T_.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",QM)}};function zs(e){return t=>{if(Array.isArray(t))return t.map(e)}}function qn(e){if(!Array.isArray(e))return;const t=[];for(const i of e)kF(i)?t.push(Bu.to(i)):t.push(Ai.to(i));return t}var v4=class{constructor(t,i){this.a=t.getProxy(Z.MainThreadBulkEdits),this.b={getTextDocumentVersion:s=>i.getDocument(s)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,i,s){const r=new bi(qi.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(r,void 0,s?.isRefactoring??!1)}};v4=__decorate([__param(0,Ae)],v4);function L_(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var N_=class{constructor(e,t,i,s,r){this.j=e,this.k=t,this.l=i,this.m=s,this.n=r,this.b=Fi.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let i=function(l){if(r.c){const u=new Error("Response stream has been closed");throw Error.captureStackTrace(u,l),u}},s=function(l,u){if(o.push(u!==void 0?[l,u]:l)===1&&queueMicrotask(()=>{r.l.$handleProgressChunk(r.k.requestId,o).finally(()=>{a.forEach(f=>f()),a.length=0}),o.length=0}),u!==void 0)return new Promise(f=>{a.push(f)})};var e=i,t=s;const r=this;this.b.reset();let n=0;const o=[],a=[],c=(l,u)=>{if(typeof this.d>"u"&&(l.kind==="markdownContent"||l.kind==="markdownVuln"||l.kind==="prepareToolInvocation")&&(this.d=this.b.elapsed()),u){const h=n++,f=s(l,h),p={report:g=>{f.then(()=>{Vi.isMarkdownString(g.value)?s(Zu.from(g),h):s(Qo.from(g),h)})}};Promise.all([f,u(p)]).then(([g,v])=>{s(hb.from(v),h)})}else s(l)};this.g=Object.freeze({markdown(l){i(this.markdown);const u=new Ap(l),h=Gu.from(u);return c(h),this},markdownWithVulnerabilities(l,u){i(this.markdown),u&&L(r.j,"chatParticipantAdditions");const h=new Au(l,u),f=cg.from(h);return c(f),this},codeblockUri(l,u){i(this.codeblockUri),L(r.j,"chatParticipantAdditions");const h=new Mp(l,u),f=ag.from(h);return c(f),this},filetree(l,u){i(this.filetree);const h=new Rp(l,u),f=Ju.from(h);return c(f),this},anchor(l,u){const h=new Tu(l,u);return this.push(h)},button(l){i(this.anchor);const u=new Np(l),h=Xu.from(u,r.m,r.n);return c(h),this},progress(l,u){i(this.progress);const h=new Lp(l,u),f=u?ug.from(h):Yu.from(h);return c(f,u),this},warning(l){i(this.progress),L(r.j,"chatParticipantAdditions");const u=new Ru(l),h=Zu.from(u);return c(h),this},reference(l,u){return this.reference2(l,u)},reference2(l,u,h){if(i(this.reference),typeof l=="object"&&"variableName"in l&&L(r.j,"chatParticipantAdditions"),typeof l=="object"&&"variableName"in l&&!l.value){const f=r.k.variables.variables.find(p=>p.name===l.variableName);if(f){let p;if(f.references?.length)p=f.references.map(g=>({kind:"reference",reference:{variableName:l.variableName,value:g.reference}}));else{const g=new Vo(l,u,h);p=[Qo.from(g)]}return p.forEach(g=>c(g)),this}}else{const f=new Vo(l,u,h),p=Qo.from(f);c(p)}return this},codeCitation(l,u,h){i(this.codeCitation),L(r.j,"chatParticipantAdditions");const f=new Op(l,u,h),p=pg.from(f);c(p)},textEdit(l,u){i(this.textEdit),L(r.j,"chatParticipantAdditions");const h=new Lu(l,u);h.isDone=u===!0?!0:void 0;const f=hg.from(h);return c(f),this},notebookEdit(l,u){i(this.notebookEdit),L(r.j,"chatParticipantAdditions");const h=new Up(l,u),f=fg.from(h);return c(f),this},confirmation(l,u,h,f){i(this.confirmation),L(r.j,"chatParticipantAdditions");const p=new Tp(l,u,h,f),g=lg.from(p);return c(g),this},prepareToolInvocation(l){i(this.prepareToolInvocation),L(r.j,"chatParticipantAdditions");const u=new Nu(l),h=Qu.from(u);return c(h),this},push(l){if(i(this.push),(l instanceof Lu||l instanceof Up||l instanceof Au||l instanceof Ru||l instanceof Tp||l instanceof Op||l instanceof Fp||l instanceof Aw||l instanceof Lp)&&L(r.j,"chatParticipantAdditions"),l instanceof Vo)this.reference2(l.value,l.iconPath,l.options);else if(l instanceof Lp){const u=l.task?ug.from(l):Yu.from(l);c(u,l.task)}else if(l instanceof Tu){const u=Ac.from(l);if(l.resolve){L(r.j,"chatParticipantAdditions"),u.resolveId=ut();const h=new Ke;l.resolve(h.token).then(()=>{const f=Ac.from(l);r.l.$handleAnchorResolve(r.k.requestId,u.resolveId,f)}).then(()=>h.dispose(),()=>h.dispose()),r.n.add(ie(()=>h.dispose(!0)))}c(u)}else if(l instanceof Nu){L(r.j,"chatParticipantAdditions");const u=Qu.from(l);return c(u),this}else{const u=gg.from(l,r.m,r.n);c(u)}return this}})}return this.g}},M_=class Zh extends X{static{this.b=0}static{this.j=0}static{this.n=0}constructor(t,i,s,r,n,o,a){super(),this.z=i,this.C=s,this.D=r,this.F=n,this.G=o,this.H=a,this.c=new Map,this.m=new Map,this.s=new Map,this.t=this.B(new dl),this.u=this.B(new dl),this.w=new Set,this.y=this.B(new D),this.onDidDisposeChatSession=this.y.event,this.g=t.getProxy(Z.MainThreadChatAgents2),s.registerArgumentProcessor({processArgument:c=>L_(c)?null:c})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,i,s){const r=Zh.b++,n=new OP(t,i,this.g,r,s);return this.c.set(r,n),this.g.$registerAgent(r,t.identifier,i,{},void 0),n.apiAgent}createDynamicChatAgent(t,i,s,r){const n=Zh.b++,o=new OP(t,i,this.g,n,r);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,i,{isSticky:!0},s),o.apiAgent}registerChatParticipantDetectionProvider(t,i){const s=Zh.j++;return this.m.set(s,new O_(t,i)),this.g.$registerChatParticipantDetectionProvider(s),ie(()=>{this.m.delete(s),this.g.$unregisterChatParticipantDetectionProvider(s)})}registerRelatedFilesProvider(t,i,s){const r=Zh.n++;return this.s.set(r,new F_(t,i)),this.g.$registerRelatedFilesProvider(r,s),ie(()=>{this.s.delete(r),this.g.$unregisterRelatedFilesProvider(r)})}async $provideRelatedFiles(t,i,s){const r=this.s.get(t);if(!r)return Promise.resolve([]);const n=db.to(i);return await r.provider.provideRelatedFiles(n,s)??void 0}async $detectChatParticipant(t,i,s,r,n){const o=this.m.get(t);if(!o)return;const{request:a,location:c,history:l}=await this.I(i,s,o.extension),u=await this.J(a,o.extension),h=mg.to(a,c,u,this.L(o.extension),this.M(o.extension,a),o.extension,this.z);return o.provider.provideParticipantDetection(h,{history:l},{participants:r.participants,location:vg.to(r.location)},n)}async I(t,i,s){const r=Et(t),n=await this.N(s,r.agentId,i);let o;if(r.locationData?.type===hi.Editor){const a=this.D.getDocument(r.locationData.document);o=new Z7(a,Fs.to(r.locationData.selection),O.to(r.locationData.wholeRange))}else if(r.locationData?.type===hi.Notebook){const a=this.D.getDocument(r.locationData.sessionInputUri);o=new Q7(a)}else r.locationData?.type,hi.Terminal;return{request:r,location:o,history:n}}async J(t,i){let s;if(t.userSelectedModelId&&(s=await this.F.getLanguageModelByIdentifier(i,t.userSelectedModelId)),!s&&(s=await this.F.getDefaultLanguageModel(i),!s))throw new Error("Language model unavailable");return s}async $setRequestPaused(t,i,s){const r=this.c.get(t);if(!r)return;const n=Zt.find(this.w,o=>o.requestId===i);n&&r.setChatRequestPauseState({request:n.extRequest,isPaused:s})}async $invokeAgent(t,i,s,r){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o,a;try{const{request:c,location:l,history:u}=await this.I(i,s,n.extension);let h=this.t.get(c.sessionId);h||(h=new se,this.t.set(c.sessionId,h)),o=new N_(n.extension,c,this.g,this.C.converter,h);const f=await this.J(c,n.extension),p=mg.to(c,l,f,this.L(n.extension),this.M(n.extension,c),n.extension,this.z);a={requestId:i.requestId,extRequest:p},this.w.add(a);const g=n.invoke(p,{history:u},o.apiObject,r);return await U_(1e3,Promise.resolve(g).then(v=>{if(v?.metadata)try{JSON.stringify(v.metadata)}catch(E){const k=`result.metadata MUST be JSON.stringify-able. Got error: ${E.message}`;return this.z.error(`[${n.extension.identifier.value}] [@${n.id}] ${k}`,n.extension),{errorDetails:{message:k},timings:o?.timings,nextQuestion:v.nextQuestion}}let b;return v?.errorDetails&&(b={...v.errorDetails,responseIsIncomplete:!0}),(b?.responseIsRedacted||b?.isQuotaExceeded||b?.confirmationButtons)&&L(n.extension,"chatParticipantPrivate"),{errorDetails:b,timings:o?.timings,metadata:v?.metadata,nextQuestion:v?.nextQuestion}}),r)}catch(c){this.z.error(c,n.extension),c instanceof Wr&&c.cause&&(c=c.cause);const l=c instanceof Error&&c.name==="ChatQuotaExceeded";return{errorDetails:{message:Ks(c),responseIsIncomplete:!0,isQuotaExceeded:l}}}finally{a&&this.w.delete(a),o?.close()}}L(t){return tt(t,"chatReferenceDiagnostic")?this.G.getDiagnostics():[]}M(t,i){if(!i.userSelectedTools)return new Map;const s=new Map;for(const r of this.H.getTools(t))typeof i.userSelectedTools[r.name]=="boolean"&&s.set(r.name,i.userSelectedTools[r.name]);return s}async N(t,i,s){const r=[];for(const n of s.history){const o=Tc.to(n.result),a=i===n.request.agentId?o:{...o,metadata:void 0},c=[],l=[];for(const p of n.request.variables.variables)if(p.kind==="tool")l.push(Ku.to(p));else if(p.kind==="toolset")l.push(...p.value.map(Ku.to));else{const g=wg.to(p,this.L(t),this.z);g&&c.push(g)}const u=tt(t,"chatParticipantPrivate")?n.request.editedFileEvents:void 0,h=new Tw(n.request.message,n.request.command,c,n.request.agentId,l,u);r.push(h);const f=yt(n.response.map(p=>gg.toContent(p,this.C.converter)));r.push(new Y7(f,a,n.request.agentId,n.request.command))}return r}$releaseSession(t){this.t.deleteAndDispose(t),this.y.fire(t)}async $provideFollowups(t,i,s,r,n){const o=this.c.get(i);if(!o)return Promise.resolve([]);const a=Et(t),c=await this.N(o.extension,o.id,r),l=Tc.to(s);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||Zt.some(this.c.values(),f=>f.id===u.participant&&qe.equals(f.extension.identifier,o.extension.identifier));return h||this.z.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>og.from(u,a))}$acceptFeedback(t,i,s){const r=this.c.get(t);if(!r)return;const n=Tc.to(i);let o;switch(s.direction){case Af.Down:o=Du.Unhelpful;break;case Af.Up:o=Du.Helpful;break}const a={result:n,kind:o,unhelpfulReason:tt(r.extension,"chatParticipantAdditions")?s.reason:void 0};r.acceptFeedback(Object.freeze(a))}$acceptAction(t,i,s){const r=this.c.get(t);if(!r||s.action.kind==="vote")return;const n=pb.to(i,s,this.C.converter);n&&r.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,i,s){const r=this.c.get(t);if(!r)return[];let n=this.u.get(t);return n?n.clear():(n=new se,this.u.set(t,n)),(await r.invokeCompletionProvider(i,s)).map(a=>fb.from(a,this.C.converter,n))}async $provideChatTitle(t,i,s){const r=this.c.get(t);if(!r)return;const n=await this.N(r.extension,r.id,{history:i});return await r.provideTitle({history:n},s)}},O_=class{constructor(e,t){this.extension=e,this.provider=t}},F_=class{constructor(e,t){this.extension=e,this.provider=t}},OP=class{constructor(e,t,i,s,r){this.extension=e,this.id=t,this.u=i,this.w=s,this.x=r,this.k=new D,this.l=new D,this.t=new D}acceptFeedback(e){this.k.fire(e)}acceptAction(e){this.l.fire(e)}setChatRequestPauseState(e){this.t.fire(e)}async invokeCompletionProvider(e,t){return this.n?await this.n.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this.b)return[];const s=await this.b.provideFollowups(e,t,i);return s?s.filter(r=>!(r&&"commandId"in r)).filter(r=>!(r&&"message"in r)):[]}async provideTitle(e,t){if(this.q)return await this.q.provideChatTitle(e,t)??void 0}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask(()=>{this.u.$updateAgent(this.w,{icon:this.c?this.c instanceof x?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof di?this.c:void 0,hasFollowups:this.b!==void 0,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:xe.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:xe.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:xe.from(this.j),supportIssueReporting:this.m,requester:this.s,additionalWelcomeMessage:!this.o||typeof this.o=="string"?this.o:xe.from(this.o)}),t=!1}))},s=this;return{get id(){return s.id},get iconPath(){return s.c},set iconPath(r){s.c=r,i()},get requestHandler(){return s.x},set requestHandler(r){D1(typeof r=="function","Invalid request handler"),s.x=r},get followupProvider(){return s.b},set followupProvider(r){s.b=r,i()},get helpTextPrefix(){return L(s.extension,"defaultChatParticipant"),s.d},set helpTextPrefix(r){L(s.extension,"defaultChatParticipant"),s.d=r,i()},get helpTextVariablesPrefix(){return L(s.extension,"defaultChatParticipant"),s.g},set helpTextVariablesPrefix(r){L(s.extension,"defaultChatParticipant"),s.g=r,i()},get helpTextPostfix(){return L(s.extension,"defaultChatParticipant"),s.j},set helpTextPostfix(r){L(s.extension,"defaultChatParticipant"),s.j=r,i()},get supportIssueReporting(){return L(s.extension,"chatParticipantPrivate"),s.m},set supportIssueReporting(r){L(s.extension,"chatParticipantPrivate"),s.m=r,i()},get onDidReceiveFeedback(){return s.k.event},set participantVariableProvider(r){if(L(s.extension,"chatParticipantAdditions"),s.n=r,r){if(!r.triggerCharacters.length)throw new Error("triggerCharacters are required");s.u.$registerAgentCompletionsProvider(s.w,s.id,r.triggerCharacters)}else s.u.$unregisterAgentCompletionsProvider(s.w,s.id)},get participantVariableProvider(){return L(s.extension,"chatParticipantAdditions"),s.n},set additionalWelcomeMessage(r){L(s.extension,"defaultChatParticipant"),s.o=r,i()},get additionalWelcomeMessage(){return L(s.extension,"defaultChatParticipant"),s.o},set titleProvider(r){L(s.extension,"defaultChatParticipant"),s.q=r,i()},get titleProvider(){return L(s.extension,"defaultChatParticipant"),s.q},get onDidChangePauseState(){return L(s.extension,"chatParticipantAdditions"),s.t.event},onDidPerformAction:tt(this.extension,"chatParticipantAdditions")?this.l.event:void 0,set requester(r){s.s=r,i()},get requester(){return s.s},dispose(){e=!0,s.b=void 0,s.k.dispose(),s.u.$unregisterAgent(s.w)}}}invoke(e,t,i,s){return this.x(e,t,i,s)}};function U_(e,t,i){return new Promise((s,r)=>{const n=i.onCancellationRequested(async()=>{n.dispose(),await ii(e),s(void 0)});t.then(s,r).finally(()=>n.dispose())})}var j_=class{constructor(e){this.b=new Map,this.a=e.getProxy(Z.MainThreadChatStatus)}createChatStatusItem(e,t){const i=B_(e.identifier,t);if(this.b.has(i))throw new Error(`Chat status item '${t}' already exists`);const s={id:i,title:"",description:"",detail:""};let r=!1,n=!1;const o=()=>{if(r)throw new Error("Chat status item is disposed");n&&this.a.$setEntry(t,s)},a=Object.freeze({id:t,get title(){return s.title},set title(c){s.title=c,o()},get description(){return s.description},set description(c){s.description=c,o()},get detail(){return s.detail},set detail(c){s.detail=c,o()},show:()=>{n=!0,o()},hide:()=>{n=!1,this.a.$disposeEntry(t)},dispose:()=>{r=!0,this.a.$disposeEntry(t),this.b.delete(i)}});return this.b.set(i,a),a}};function B_(e,t){return`${qe.toKey(e)}.${t}`}var H_=class{constructor(e){const t=e.getProxy(Z.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(i){return t.$writeText(i)}})}},FP="vscode-cdn.net",z_=`vscode-resource.${FP}`,w4=`'self' https://*.${FP}`;function kh(e,t){return e.scheme===G.http||e.scheme===G.https?e:(t&&t.authority&&t.isRemote&&e.scheme===G.file&&(e=x.from({scheme:G.vscodeRemote,authority:t.authority,path:e.path})),x.from({scheme:G.https,authority:`${e.scheme}+${W_(e.authority)}.${z_}`,path:e.path,fragment:e.fragment,query:e.query}))}function W_(e){return e.replace(/./g,t=>{const i=t.charCodeAt(0);return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57?t:"-"+i.toString(16).padStart(4,"0")})}var V_=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i,this.a=0,this.b=new se,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const s=t.getVisibleTextEditors();for(const r of this.c.values())s.indexOf(r.editor)<0&&r.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,i,s,r){let n;for(const f of this.e.getVisibleTextEditors(!0))if(f.value===e){n=f;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new D,l=new D,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(f){return kh(f,o.f)}get cspSource(){return w4}set options(f){this.b=f,o.d.$setOptions(a,f)}get options(){return this.b}set html(f){this.a=f,o.d.$setHtml(a,f)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(f){return o.d.$postMessage(a,f)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,i,s||{},r.identifier,r.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}},__=class QA{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(Z.MainThreadCodeMapper)}async $mapCode(t,i,s){const r=this.c.get(t);if(!r)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Qi(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(Vt.from)})},notebookEdit:(c,l)=>{l=Qi(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(dg.from)})}},o={location:i.location,chatRequestId:i.chatRequestId,chatRequestModel:i.chatRequestModel,chatSessionId:i.chatSessionId,codeBlocks:i.codeBlocks.map(c=>({code:c.code,resource:x.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock}))};return await r.provideMappedEdits(o,n,s)??null}registerMappedEditsProvider(t,i){const s=QA.a++;return this.b.$registerCodeMapperProvider(s,t.displayName??t.name),this.c.set(s,i),{dispose:()=>this.b.$unregisterCodeMapperProvider(s)}}};function q_(e,t,i){const s=e.getProxy(Z.MainThreadComments);class r{static{this.a=0}constructor(){this.b=new Map,this.c=new Tr,t.registerArgumentProcessor({processArgument:g=>{if(g&&g.$mid===6){const v=this.b.get(g.handle);return v?v.value:g}else if(g&&g.$mid===7){const v=g,b=this.b.get(v.commentControlHandle);if(!b)return v;const E=b.getCommentThread(v.commentThreadHandle);return E?E.value:v}else if(g&&(g.$mid===9||g.$mid===8)){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const b=v.getCommentThread(g.thread.commentThreadHandle);return b?g.$mid===8?b.value:{thread:b.value,text:g.text}:g}else if(g&&g.$mid===10){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const b=v.getCommentThread(g.thread.commentThreadHandle);if(!b)return g;const E=g.commentUniqueId,k=b.getCommentByUniqueId(E);return k||g}else if(g&&g.$mid===11){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const b=v.getCommentThread(g.thread.commentThreadHandle);if(!b)return g;const E=g.text,k=g.commentUniqueId,I=b.getCommentByUniqueId(k);return I?(typeof I.body=="string"?I.body=E:I.body=new Vi(E),I):g}return g}})}createCommentController(g,v,b){const E=r.a++,k=new o(g,E,v,b);this.b.set(k.handle,k);const I=this.c.get(g.identifier)||[];return I.push(k),this.c.set(g.identifier,I),k.value}async $createCommentThreadTemplate(g,v,b,E){const k=this.b.get(g);k&&k.$createCommentThreadTemplate(v,b,E)}async $setActiveComment(g,v){const b=this.b.get(g);b&&b.$setActiveComment(v??void 0)}async $updateCommentThreadTemplate(g,v,b){const E=this.b.get(g);E&&E.$updateCommentThreadTemplate(v,b)}$deleteCommentThread(g,v){this.b.get(g)?.$deleteCommentThread(v)}async $updateCommentThread(g,v,b){this.b.get(g)?.$updateCommentThread(v,b)}async $provideCommentingRanges(g,v,b){const E=this.b.get(g);if(!E||!E.commentingRangeProvider)return Promise.resolve(void 0);const k=await i.ensureDocumentData(x.revive(v));return ai(async()=>{const I=await E.commentingRangeProvider?.provideCommentingRanges(k.document,b);let B;return Array.isArray(I)?B={ranges:I,fileComments:!1}:I?B={ranges:I.ranges||[],fileComments:I.enableFileComments||!1}:B=I??void 0,B}).then(I=>{let B;return I&&(B={ranges:I.ranges.map(j=>O.from(j)),fileComments:I.fileComments}),B})}$toggleReaction(g,v,b,E,k){const I=this.b.get(g);return!I||!I.reactionHandler?Promise.resolve(void 0):ai(()=>{const B=I.getCommentThread(v);if(B){const j=B.getCommentByUniqueId(E.uniqueIdInThread);if(I!==void 0&&j&&I.reactionHandler)return I.reactionHandler(j,l(k))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(g){this.n=g}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(g){(g===void 0!=(this.p===void 0)||!g||!this.p||!g.isEqual(this.p))&&(this.p=g,this.b.range=g,this.c.fire())}get range(){return this.p}set canReply(g){this.d!==g&&(this.d=g,this.b.canReply=g,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(g){this.e=g,this.b.label=g,this.c.fire()}get contextValue(){return this.f}set contextValue(g){this.f=g,this.b.contextValue=g,this.c.fire()}get comments(){return this.q}set comments(g){this.q=g,this.b.comments=g,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(g){this.g!==g&&(this.g=g,this.b.collapsibleState=g,this.c.fire())}get state(){return this.h}set state(g){this.h=g,typeof g=="object"?(L(this.extensionDescription,"commentThreadApplicability"),this.b.state=g.resolved,this.b.applicability=g.applicability):this.b.state=g,this.c.fire()}get isDisposed(){return this.j}constructor(g,v,b,E,k,I,B,j,te){this.m=v,this.n=b,this.o=E,this.p=k,this.q=I,this.extensionDescription=B,this.r=j,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new D,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new Js,this.l.value=new se,this.n===void 0&&(this.n=`${g}.${this.handle}`),s.$createCommentThread(v,this.handle,this.n,this.o,O.from(this.p),this.q.map(H=>a(this,H,this.k,this.extensionDescription)),B.identifier,this.r,te),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{s.$deleteCommentThread(v,this.handle)}});const F=this;this.value={get uri(){return F.uri},get range(){return F.range},set range(H){F.range=H},get comments(){return F.comments},set comments(H){F.comments=H},get collapsibleState(){return F.collapsibleState},set collapsibleState(H){F.collapsibleState=H},get canReply(){return F.canReply},set canReply(H){F.canReply=H},get contextValue(){return F.contextValue},set contextValue(H){F.contextValue=H},get label(){return F.label},set label(H){F.label=H},get state(){return F.state},set state(H){F.state=H},reveal:(H,U)=>F.reveal(H,U),hide:()=>F.hide(),dispose:()=>{F.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new se);const g=b=>Object.prototype.hasOwnProperty.call(this.b,b),v={};g("range")&&(v.range=O.from(this.p)),g("label")&&(v.label=this.label),g("contextValue")&&(v.contextValue=this.contextValue??null),g("comments")&&(v.comments=this.q.map(b=>a(this,b,this.k,this.extensionDescription))),g("collapsibleState")&&(v.collapseState=u(this.g)),g("canReply")&&(v.canReply=this.canReply),g("state")&&(v.state=h(this.h)),g("applicability")&&(v.applicability=f(this.h)),g("isTemplate")&&(v.isTemplate=this.r),this.b={},s.$updateCommentThread(this.m,this.handle,this.n,this.o,v)}getCommentByUniqueId(g){for(const v of this.k){const b=v[0],E=v[1];if(g===E)return b}}async reveal(g,v){L(this.extensionDescription,"commentReveal");let b;g&&g.body!==void 0?b=g:v=v??g;let E=b?this.k.get(b):void 0;E??=this.k.get(this.q[0]);let k=!0,I=!1;return v?.focus===Su.Reply?(I=!0,k=!1):v?.focus===Su.Comment&&(k=!1),s.$revealCommentThread(this.m,this.handle,E,{preserveFocus:k,focusReply:I})}async hide(){return s.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(g=>g.dispose())}}__decorate([Od(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(g){this.b=g,g?.resourceHints&&L(this.h,"commentingRangeHint"),s.$updateCommentingRanges(this.handle,g?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(g){this.c=g,s.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!g})}get options(){return this.d}set options(g){this.d=g,s.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return L(this.h,"activeComment"),this.e}get activeCommentThread(){return L(this.h,"activeComment"),this.f?.value}constructor(g,v,b,E){this.h=g,this.i=v,this.j=b,this.k=E,this.a=new Map,s.$registerCommentController(this.handle,b,E,this.h.identifier.value);const k=this;this.value=Object.freeze({id:k.id,label:k.label,get options(){return k.options},set options(I){k.options=I},get commentingRangeProvider(){return k.commentingRangeProvider},set commentingRangeProvider(I){k.commentingRangeProvider=I},get reactionHandler(){return k.reactionHandler},set reactionHandler(I){k.reactionHandler=I},get activeCommentThread(){return k.activeCommentThread},createCommentThread(I,B,j){return k.createCommentThread(I,B,j).value},dispose:()=>{k.dispose()}}),this.g=[],this.g.push({dispose:()=>{s.$unregisterCommentController(this.handle)}})}createCommentThread(g,v,b){const E=new n(this.id,this.handle,void 0,g,v,b,this.h,!1);return this.a.set(E.handle,E),E}$setActiveComment(g){if(!g){this.e=void 0,this.f=void 0;return}const v=this.a.get(g.commentThreadHandle);v&&(this.e=g.uniqueIdInThread?v.getCommentByUniqueId(g.uniqueIdInThread):void 0,this.f=v)}$createCommentThreadTemplate(g,v,b){const E=new n(this.id,this.handle,void 0,x.revive(g),O.to(v),[],this.h,!0,b);return E.collapsibleState=Oa.Expanded,this.a.set(E.handle,E),E}$updateCommentThreadTemplate(g,v){const b=this.a.get(g);b&&(b.range=O.to(v))}$updateCommentThread(g,v){const b=this.a.get(g);if(!b)return;(k=>Object.prototype.hasOwnProperty.call(v,k))("collapseState")&&(b.collapsibleState=u(v.collapseState))}$deleteCommentThread(g){this.a.get(g)?.dispose(),this.a.delete(g)}getCommentThread(g){return this.a.get(g)}dispose(){this.a.forEach(g=>{g.dispose()}),this.g.forEach(g=>g.dispose())}}function a(p,g,v,b){let E=v.get(g);return E||(E=++p.commentHandle,v.set(g,E)),g.state!==void 0&&L(b,"commentsDraftState"),g.reactions?.some(k=>k.reactors!==void 0)&&L(b,"commentReactor"),{mode:g.mode,contextValue:g.contextValue,uniqueIdInThread:E,body:typeof g.body=="string"?g.body:xe.from(g.body),userName:g.author.name,userIconPath:g.author.iconPath,label:g.label,commentReactions:g.reactions?g.reactions.map(k=>c(k)):void 0,state:g.state,timestamp:g.timestamp?.toJSON()}}function c(p){return{label:p.label,iconPath:p.iconPath?Wp(p.iconPath):void 0,count:p.count,hasReacted:p.authorHasReacted,reactors:p.reactors&&p.reactors.length>0&&typeof p.reactors[0]!="string"?p.reactors.map(g=>g.name):p.reactors}}function l(p){return{label:p.label||"",count:p.count||0,iconPath:p.iconPath?x.revive(p.iconPath):"",authorHasReacted:p.hasReacted||!1,reactors:p.reactors?.map(g=>({name:g}))}}function u(p){if(p!==void 0)switch(p){case xu.Expanded:return Oa.Expanded;case xu.Collapsed:return Oa.Collapsed}return Oa.Collapsed}function h(p){let g;if(typeof p=="object"?g=p.resolved:g=p,g!==void 0)switch(g){case Eu.Unresolved:return Wl.Unresolved;case Eu.Resolved:return Wl.Resolved}return Wl.Unresolved}function f(p){let g;if(typeof p=="object"&&(g=p.applicability),g!==void 0)switch(g){case ku.Current:return Vl.Current;case ku.Outdated:return Vl.Outdated}return Vl.Current}return new r}var Em={},He={exports:Em};(function(e,t){if(typeof Em=="object"&&typeof He=="object")He.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var i=t();for(var s in i)(typeof Em=="object"?Em:e)[s]=i[s]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(s,r,n){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:n})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(1&r&&(s=i(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var o in s)i.d(n,o,function(a){return s[a]}.bind(null,o));return n},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="",i(i.s=0)}([function(e,t,i){(function(s){var r;t=e.exports=ne,r=typeof s=="object"&&s.env&&s.env.NODE_DEBUG&&/\bsemver\b/i.test(s.env.NODE_DEBUG)?function(){var P=Array.prototype.slice.call(arguments,0);P.unshift("SEMVER"),console.log.apply(console,P)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var f=l++;c[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=l++;c[p]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var g=l++;c[g]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var v=l++;c[v]="(?:"+c[u]+"|"+c[f]+")";var b=l++;c[b]="(?:"+c[h]+"|"+c[f]+")";var E=l++;c[E]="(?:-("+c[v]+"(?:\\."+c[v]+")*))";var k=l++;c[k]="(?:-?("+c[b]+"(?:\\."+c[b]+")*))";var I=l++;c[I]="[0-9A-Za-z-]+";var B=l++;c[B]="(?:\\+("+c[I]+"(?:\\."+c[I]+")*))";var j=l++,te="v?"+c[p]+c[E]+"?"+c[B]+"?";c[j]="^"+te+"$";var F="[v=\\s]*"+c[g]+c[k]+"?"+c[B]+"?",H=l++;c[H]="^"+F+"$";var U=l++;c[U]="((?:<|>)?=?)";var Y=l++;c[Y]=c[h]+"|x|X|\\*";var he=l++;c[he]=c[u]+"|x|X|\\*";var re=l++;c[re]="[v=\\s]*("+c[he]+")(?:\\.("+c[he]+")(?:\\.("+c[he]+")(?:"+c[E]+")?"+c[B]+"?)?)?";var dt=l++;c[dt]="[v=\\s]*("+c[Y]+")(?:\\.("+c[Y]+")(?:\\.("+c[Y]+")(?:"+c[k]+")?"+c[B]+"?)?)?";var V=l++;c[V]="^"+c[U]+"\\s*"+c[re]+"$";var W=l++;c[W]="^"+c[U]+"\\s*"+c[dt]+"$";var Q=l++;c[Q]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var K=l++;c[K]="(?:~>?)";var ae=l++;c[ae]="(\\s*)"+c[K]+"\\s+",a[ae]=new RegExp(c[ae],"g");var fe=l++;c[fe]="^"+c[K]+c[re]+"$";var Te=l++;c[Te]="^"+c[K]+c[dt]+"$";var ot=l++;c[ot]="(?:\\^)";var Ce=l++;c[Ce]="(\\s*)"+c[ot]+"\\s+",a[Ce]=new RegExp(c[Ce],"g");var qt=l++;c[qt]="^"+c[ot]+c[re]+"$";var Dt=l++;c[Dt]="^"+c[ot]+c[dt]+"$";var Gt=l++;c[Gt]="^"+c[U]+"\\s*("+F+")$|^$";var fi=l++;c[fi]="^"+c[U]+"\\s*("+te+")$|^$";var xi=l++;c[xi]="(\\s*)"+c[U]+"\\s*("+F+"|"+c[re]+")",a[xi]=new RegExp(c[xi],"g");var jt=l++;c[jt]="^\\s*("+c[re]+")\\s+-\\s+("+c[re]+")\\s*$";var Qn=l++;c[Qn]="^\\s*("+c[dt]+")\\s+-\\s+("+c[dt]+")\\s*$";var ed=l++;c[ed]="(<|>)?=?\\s*\\*";for(var Zi=0;Zi<35;Zi++)r(Zi,c[Zi]),a[Zi]||(a[Zi]=new RegExp(c[Zi]));function cs(P,R){if(P instanceof ne)return P;if(typeof P!="string"||P.length>n||!(R?a[H]:a[j]).test(P))return null;try{return new ne(P,R)}catch{return null}}function ne(P,R){if(P instanceof ne){if(P.loose===R)return P;P=P.version}else if(typeof P!="string")throw new TypeError("Invalid Version: "+P);if(P.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof ne))return new ne(P,R);r("SemVer",P,R),this.loose=R;var M=P.trim().match(R?a[H]:a[j]);if(!M)throw new TypeError("Invalid Version: "+P);if(this.raw=P,this.major=+M[1],this.minor=+M[2],this.patch=+M[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");M[4]?this.prerelease=M[4].split(".").map(function(ge){if(/^[0-9]+$/.test(ge)){var Se=+ge;if(Se>=0&&Se<o)return Se}return ge}):this.prerelease=[],this.build=M[5]?M[5].split("."):[],this.format()}t.parse=cs,t.valid=function(P,R){var M=cs(P,R);return M?M.version:null},t.clean=function(P,R){var M=cs(P.trim().replace(/^[=v]+/,""),R);return M?M.version:null},t.SemVer=ne,ne.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ne.prototype.toString=function(){return this.version},ne.prototype.compare=function(P){return r("SemVer.compare",this.version,this.loose,P),P instanceof ne||(P=new ne(P,this.loose)),this.compareMain(P)||this.comparePre(P)},ne.prototype.compareMain=function(P){return P instanceof ne||(P=new ne(P,this.loose)),cn(this.major,P.major)||cn(this.minor,P.minor)||cn(this.patch,P.patch)},ne.prototype.comparePre=function(P){if(P instanceof ne||(P=new ne(P,this.loose)),this.prerelease.length&&!P.prerelease.length)return-1;if(!this.prerelease.length&&P.prerelease.length)return 1;if(!this.prerelease.length&&!P.prerelease.length)return 0;var R=0;do{var M=this.prerelease[R],ge=P.prerelease[R];if(r("prerelease compare",R,M,ge),M===void 0&&ge===void 0)return 0;if(ge===void 0)return 1;if(M===void 0)return-1;if(M!==ge)return cn(M,ge)}while(++R)},ne.prototype.inc=function(P,R){switch(P){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",R);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",R);break;case"prepatch":this.prerelease.length=0,this.inc("patch",R),this.inc("pre",R);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",R),this.inc("pre",R);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var M=this.prerelease.length;--M>=0;)typeof this.prerelease[M]=="number"&&(this.prerelease[M]++,M=-2);M===-1&&this.prerelease.push(0)}R&&(this.prerelease[0]===R?isNaN(this.prerelease[1])&&(this.prerelease=[R,0]):this.prerelease=[R,0]);break;default:throw new Error("invalid increment argument: "+P)}return this.format(),this.raw=this.version,this},t.inc=function(P,R,M,ge){typeof M=="string"&&(ge=M,M=void 0);try{return new ne(P,M).inc(R,ge).version}catch{return null}},t.diff=function(P,R){if(il(P,R))return null;var M=cs(P),ge=cs(R);if(M.prerelease.length||ge.prerelease.length){for(var Se in M)if((Se==="major"||Se==="minor"||Se==="patch")&&M[Se]!==ge[Se])return"pre"+Se;return"prerelease"}for(var Se in M)if((Se==="major"||Se==="minor"||Se==="patch")&&M[Se]!==ge[Se])return Se},t.compareIdentifiers=cn;var td=/^[0-9]+$/;function cn(P,R){var M=td.test(P),ge=td.test(R);return M&&ge&&(P=+P,R=+R),M&&!ge?-1:ge&&!M?1:P<R?-1:P>R?1:0}function li(P,R,M){return new ne(P,M).compare(new ne(R,M))}function Gs(P,R,M){return li(P,R,M)>0}function Xn(P,R,M){return li(P,R,M)<0}function il(P,R,M){return li(P,R,M)===0}function id(P,R,M){return li(P,R,M)!==0}function sl(P,R,M){return li(P,R,M)>=0}function rl(P,R,M){return li(P,R,M)<=0}function Kn(P,R,M,ge){var Se;switch(R){case"===":typeof P=="object"&&(P=P.version),typeof M=="object"&&(M=M.version),Se=P===M;break;case"!==":typeof P=="object"&&(P=P.version),typeof M=="object"&&(M=M.version),Se=P!==M;break;case"":case"=":case"==":Se=il(P,M,ge);break;case"!=":Se=id(P,M,ge);break;case">":Se=Gs(P,M,ge);break;case">=":Se=sl(P,M,ge);break;case"<":Se=Xn(P,M,ge);break;case"<=":Se=rl(P,M,ge);break;default:throw new TypeError("Invalid operator: "+R)}return Se}function Mi(P,R){if(P instanceof Mi){if(P.loose===R)return P;P=P.value}if(!(this instanceof Mi))return new Mi(P,R);r("comparator",P,R),this.loose=R,this.parse(P),this.semver===yr?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(P,R){return cn(R,P)},t.major=function(P,R){return new ne(P,R).major},t.minor=function(P,R){return new ne(P,R).minor},t.patch=function(P,R){return new ne(P,R).patch},t.compare=li,t.compareLoose=function(P,R){return li(P,R,!0)},t.rcompare=function(P,R,M){return li(R,P,M)},t.sort=function(P,R){return P.sort(function(M,ge){return t.compare(M,ge,R)})},t.rsort=function(P,R){return P.sort(function(M,ge){return t.rcompare(M,ge,R)})},t.gt=Gs,t.lt=Xn,t.eq=il,t.neq=id,t.gte=sl,t.lte=rl,t.cmp=Kn,t.Comparator=Mi;var yr={};function gt(P,R){if(P instanceof gt)return P.loose===R?P:new gt(P.raw,R);if(P instanceof Mi)return new gt(P.value,R);if(!(this instanceof gt))return new gt(P,R);if(this.loose=R,this.raw=P,this.set=P.split(/\s*\|\|\s*/).map(function(M){return this.parseRange(M.trim())},this).filter(function(M){return M.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+P);this.format()}function ui(P){return!P||P.toLowerCase()==="x"||P==="*"}function v1(P,R,M,ge,Se,Bt,Ze,Jt,At,ni,ls,bt,Yt){return((R=ui(M)?"":ui(ge)?">="+M+".0.0":ui(Se)?">="+M+"."+ge+".0":">="+R)+" "+(Jt=ui(At)?"":ui(ni)?"<"+(+At+1)+".0.0":ui(ls)?"<"+At+"."+(+ni+1)+".0":bt?"<="+At+"."+ni+"."+ls+"-"+bt:"<="+Jt)).trim()}function ln(P,R){for(var M=0;M<P.length;M++)if(!P[M].test(R))return!1;if(R.prerelease.length){for(M=0;M<P.length;M++)if(r(P[M].semver),P[M].semver!==yr&&P[M].semver.prerelease.length>0){var ge=P[M].semver;if(ge.major===R.major&&ge.minor===R.minor&&ge.patch===R.patch)return!0}return!1}return!0}function ga(P,R,M){try{R=new gt(R,M)}catch{return!1}return R.test(P)}function nl(P,R,M,ge){var Se,Bt,Ze,Jt,At;switch(P=new ne(P,ge),R=new gt(R,ge),M){case">":Se=Gs,Bt=rl,Ze=Xn,Jt=">",At=">=";break;case"<":Se=Xn,Bt=sl,Ze=Gs,Jt="<",At="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ga(P,R,ge))return!1;for(var ni=0;ni<R.set.length;++ni){var ls=R.set[ni],bt=null,Yt=null;if(ls.forEach(function(pi){pi.semver===yr&&(pi=new Mi(">=0.0.0")),bt=bt||pi,Yt=Yt||pi,Se(pi.semver,bt.semver,ge)?bt=pi:Ze(pi.semver,Yt.semver,ge)&&(Yt=pi)}),bt.operator===Jt||bt.operator===At||(!Yt.operator||Yt.operator===Jt)&&Bt(P,Yt.semver)||Yt.operator===At&&Ze(P,Yt.semver))return!1}return!0}Mi.prototype.parse=function(P){var R=this.loose?a[Gt]:a[fi],M=P.match(R);if(!M)throw new TypeError("Invalid comparator: "+P);this.operator=M[1],this.operator==="="&&(this.operator=""),M[2]?this.semver=new ne(M[2],this.loose):this.semver=yr},Mi.prototype.toString=function(){return this.value},Mi.prototype.test=function(P){return r("Comparator.test",P,this.loose),this.semver===yr||(typeof P=="string"&&(P=new ne(P,this.loose)),Kn(P,this.operator,this.semver,this.loose))},Mi.prototype.intersects=function(P,R){if(!(P instanceof Mi))throw new TypeError("a Comparator is required");var M;if(this.operator==="")return M=new gt(P.value,R),ga(this.value,M,R);if(P.operator==="")return M=new gt(this.value,R),ga(P.semver,M,R);var ge=!(this.operator!==">="&&this.operator!==">"||P.operator!==">="&&P.operator!==">"),Se=!(this.operator!=="<="&&this.operator!=="<"||P.operator!=="<="&&P.operator!=="<"),Bt=this.semver.version===P.semver.version,Ze=!(this.operator!==">="&&this.operator!=="<="||P.operator!==">="&&P.operator!=="<="),Jt=Kn(this.semver,"<",P.semver,R)&&(this.operator===">="||this.operator===">")&&(P.operator==="<="||P.operator==="<"),At=Kn(this.semver,">",P.semver,R)&&(this.operator==="<="||this.operator==="<")&&(P.operator===">="||P.operator===">");return ge||Se||Bt&&Ze||Jt||At},t.Range=gt,gt.prototype.format=function(){return this.range=this.set.map(function(P){return P.join(" ").trim()}).join("||").trim(),this.range},gt.prototype.toString=function(){return this.range},gt.prototype.parseRange=function(P){var R=this.loose;P=P.trim(),r("range",P,R);var M=R?a[Qn]:a[jt];P=P.replace(M,v1),r("hyphen replace",P),P=P.replace(a[xi],"$1$2$3"),r("comparator trim",P,a[xi]),P=(P=(P=P.replace(a[ae],"$1~")).replace(a[Ce],"$1^")).split(/\s+/).join(" ");var ge=R?a[Gt]:a[fi],Se=P.split(" ").map(function(Bt){return function(Ze,Jt){return r("comp",Ze),Ze=function(At,ni){return At.trim().split(/\s+/).map(function(ls){return function(bt,Yt){r("caret",bt,Yt);var pi=Yt?a[Dt]:a[qt];return bt.replace(pi,function(S,ye,Me,J,we){var ei;return r("caret",bt,S,ye,Me,J,we),ui(ye)?ei="":ui(Me)?ei=">="+ye+".0.0 <"+(+ye+1)+".0.0":ui(J)?ei=ye==="0"?">="+ye+"."+Me+".0 <"+ye+"."+(+Me+1)+".0":">="+ye+"."+Me+".0 <"+(+ye+1)+".0.0":we?(r("replaceCaret pr",we),we.charAt(0)!=="-"&&(we="-"+we),ei=ye==="0"?Me==="0"?">="+ye+"."+Me+"."+J+we+" <"+ye+"."+Me+"."+(+J+1):">="+ye+"."+Me+"."+J+we+" <"+ye+"."+(+Me+1)+".0":">="+ye+"."+Me+"."+J+we+" <"+(+ye+1)+".0.0"):(r("no pr"),ei=ye==="0"?Me==="0"?">="+ye+"."+Me+"."+J+" <"+ye+"."+Me+"."+(+J+1):">="+ye+"."+Me+"."+J+" <"+ye+"."+(+Me+1)+".0":">="+ye+"."+Me+"."+J+" <"+(+ye+1)+".0.0"),r("caret return",ei),ei})}(ls,ni)}).join(" ")}(Ze,Jt),r("caret",Ze),Ze=function(At,ni){return At.trim().split(/\s+/).map(function(ls){return function(bt,Yt){var pi=Yt?a[Te]:a[fe];return bt.replace(pi,function(S,ye,Me,J,we){var ei;return r("tilde",bt,S,ye,Me,J,we),ui(ye)?ei="":ui(Me)?ei=">="+ye+".0.0 <"+(+ye+1)+".0.0":ui(J)?ei=">="+ye+"."+Me+".0 <"+ye+"."+(+Me+1)+".0":we?(r("replaceTilde pr",we),we.charAt(0)!=="-"&&(we="-"+we),ei=">="+ye+"."+Me+"."+J+we+" <"+ye+"."+(+Me+1)+".0"):ei=">="+ye+"."+Me+"."+J+" <"+ye+"."+(+Me+1)+".0",r("tilde return",ei),ei})}(ls,ni)}).join(" ")}(Ze,Jt),r("tildes",Ze),Ze=function(At,ni){return r("replaceXRanges",At,ni),At.split(/\s+/).map(function(ls){return function(bt,Yt){bt=bt.trim();var pi=Yt?a[W]:a[V];return bt.replace(pi,function(S,ye,Me,J,we,ei){r("xRange",bt,S,ye,Me,J,we,ei);var sd=ui(Me),un=sd||ui(J),eo=un||ui(we);return ye==="="&&eo&&(ye=""),sd?S=ye===">"||ye==="<"?"<0.0.0":"*":ye&&eo?(un&&(J=0),eo&&(we=0),ye===">"?(ye=">=",un?(Me=+Me+1,J=0,we=0):eo&&(J=+J+1,we=0)):ye==="<="&&(ye="<",un?Me=+Me+1:J=+J+1),S=ye+Me+"."+J+"."+we):un?S=">="+Me+".0.0 <"+(+Me+1)+".0.0":eo&&(S=">="+Me+"."+J+".0 <"+Me+"."+(+J+1)+".0"),r("xRange return",S),S})}(ls,ni)}).join(" ")}(Ze,Jt),r("xrange",Ze),Ze=function(At,ni){return r("replaceStars",At,ni),At.trim().replace(a[ed],"")}(Ze,Jt),r("stars",Ze),Ze}(Bt,R)}).join(" ").split(/\s+/);return this.loose&&(Se=Se.filter(function(Bt){return!!Bt.match(ge)})),Se=Se.map(function(Bt){return new Mi(Bt,R)})},gt.prototype.intersects=function(P,R){if(!(P instanceof gt))throw new TypeError("a Range is required");return this.set.some(function(M){return M.every(function(ge){return P.set.some(function(Se){return Se.every(function(Bt){return ge.intersects(Bt,R)})})})})},t.toComparators=function(P,R){return new gt(P,R).set.map(function(M){return M.map(function(ge){return ge.value}).join(" ").trim().split(" ")})},gt.prototype.test=function(P){if(!P)return!1;typeof P=="string"&&(P=new ne(P,this.loose));for(var R=0;R<this.set.length;R++)if(ln(this.set[R],P))return!0;return!1},t.satisfies=ga,t.maxSatisfying=function(P,R,M){var ge=null,Se=null;try{var Bt=new gt(R,M)}catch{return null}return P.forEach(function(Ze){Bt.test(Ze)&&(ge&&Se.compare(Ze)!==-1||(Se=new ne(ge=Ze,M)))}),ge},t.minSatisfying=function(P,R,M){var ge=null,Se=null;try{var Bt=new gt(R,M)}catch{return null}return P.forEach(function(Ze){Bt.test(Ze)&&(ge&&Se.compare(Ze)!==1||(Se=new ne(ge=Ze,M)))}),ge},t.validRange=function(P,R){try{return new gt(P,R).range||"*"}catch{return null}},t.ltr=function(P,R,M){return nl(P,R,"<",M)},t.gtr=function(P,R,M){return nl(P,R,">",M)},t.outside=nl,t.prerelease=function(P,R){var M=cs(P,R);return M&&M.prerelease.length?M.prerelease:null},t.intersects=function(P,R,M){return P=new gt(P,M),R=new gt(R,M),P.intersects(R)},t.coerce=function(P){if(P instanceof ne)return P;if(typeof P!="string")return null;var R=P.match(a[Q]);return R==null?null:cs((R[1]||"0")+"."+(R[2]||"0")+"."+(R[3]||"0"))}}).call(this,i(1))},function(e,t){var i,s,r=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(b){if(i===setTimeout)return setTimeout(b,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(b,0);try{return i(b,0)}catch{try{return i.call(null,b,0)}catch{return i.call(this,b,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:n}catch{i=n}try{s=typeof clearTimeout=="function"?clearTimeout:o}catch{s=o}})();var c,l=[],u=!1,h=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){var b=a(f);u=!0;for(var E=l.length;E;){for(c=l,l=[];++h<E;)c&&c[h].run();h=-1,E=l.length}c=null,u=!1,function(k){if(s===clearTimeout)return clearTimeout(k);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(k);try{s(k)}catch{try{return s.call(null,k)}catch{return s.call(this,k)}}}(b)}}function g(b,E){this.fun=b,this.array=E}function v(){}r.nextTick=function(b){var E=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)E[k-1]=arguments[k];l.push(new g(b,E)),l.length!==1||u||a(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(b){return[]},r.binding=function(b){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(b){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}])});var kre=He.exports.SEMVER_SPEC_VERSION,Sre=He.exports.parse,Cre=He.exports.valid,$re=He.exports.coerce,Ire=He.exports.clean,Pre=He.exports.inc,Dre=He.exports.major,Are=He.exports.minor,Tre=He.exports.patch,Rre=He.exports.prerelease,Lre=He.exports.gt,Nre=He.exports.gte,Mre=He.exports.lt,Ore=He.exports.lte,Fre=He.exports.eq,Ure=He.exports.neq,jre=He.exports.cmp,Bre=He.exports.compare,Hre=He.exports.rcompare,zre=He.exports.compareIdentifiers,Wre=He.exports.rcompareIdentifiers,Vre=He.exports.compareBuild,_re=He.exports.sort,qre=He.exports.rsort,Gre=He.exports.diff,Jre=He.exports.validRange,Yre=He.exports.satisfies,Zre=He.exports.maxSatisfying,Qre=He.exports.minSatisfying,Xre=He.exports.minVersion,Kre=He.exports.gtr,ene=He.exports.ltr,tne=He.exports.outside,ine=He.exports.intersects,sne=He.exports.SemVer,rne=He.exports.Comparator,nne=He.exports.Range,UP=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,G_=/^-(\d{4})(\d{2})(\d{2})$/;function J_(e){return e=e.trim(),e==="*"||UP.test(e)}function jP(e){if(!J_(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(UP);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function BP(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,s=e.minorBase;let r=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(r=!1),o=!1);let a=0;if(e.preRelease){const c=G_.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:i,minorBase:s,minorMustEqual:r,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var Y_=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function Z_(e,t){if(t.serializeBuffersForPostMessage){const i=new Y_,r=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a)};if(ArrayBuffer.isView(a)){const c=Q_(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=i.buffers.map(o=>{const a=new Uint8Array(o);return _.wrap(a)});return{message:r,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function Q_(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function X_(e,t){const i=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),s=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=i[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,s),arrayBuffers:i}}var K_=class{#e;#t;#i;#s;#n;#r;#a;#o;#c;#l;#u;#d;constructor(e,t,i,s,r,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new D,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new D,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=i,this.#s=s,this.#n=r,this.#r=n,this.#u=Vc(n),this.#d=eq(n),this.#i=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,kh(e,this.#s)}get cspSource(){const e=this.#r.extensionLocation;if(e.scheme===G.https||e.scheme===G.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+w4}return w4}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#i.report("Webview vscode-resource: uris",this.#r,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),wi(this.#o,e)||this.#t.$setOptions(this.#e,HP(this.#r,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=Z_(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#r.extensionLocation?.scheme===G.vscodeRemote,i=this.#r.extensionLocation.scheme===G.vscodeRemote?this.#r.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(s,r,n,o,a,c)=>{const l=x.from({scheme:o||"file",path:decodeURIComponent(a)}),u=kh(l,{isRemote:t,authority:i}).toString();return`${r}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(s,r,n,o,a,c)=>{const l=x.from({scheme:o||"file",path:decodeURIComponent(a)}),u=kh(l,{isRemote:t,authority:i}).toString();return`${r}${u}${c}`})}};function Vc(e){try{const t=BP(jP(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function eq(e){try{const t=BP(jP(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var tq=class extends X{constructor(e,t,i,s,r){super(),this.c=t,this.f=i,this.g=s,this.h=r,this.b=new Map,this.a=e.getProxy(Z.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,i){const s=this.j(e);if(s){const{message:r}=X_(t,i.value);s._onMessageEmitter.fire(r)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const s=new K_(e,this.a,iq(t),this.c,this.f,i,this.h);this.b.set(e,s);const r=s._onDidDispose(()=>{r.dispose(),this.deleteWebview(e)});return s}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function km(e){return{id:e.identifier,location:e.extensionLocation}}function HP(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,localResourceRoots:i.localResourceRoots||sq(e,t)}}function iq(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>x.from(t))}}function sq(e,t){return[...(t?.getWorkspaceFolders()||[]).map(i=>i.uri),e.extensionLocation]}var Ws=class XA{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const i=this.c++;return this.b.set(i,t),this.e(),i}get(t,i){return this.b.has(t)?this.b.get(t)[i]:void 0}delete(t){this.b.delete(t),this.e()}e(){XA.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},rq=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new Ws("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=uq(this.document.uri)+this.a++;return xt(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},nq=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,i){const s=this.b(e,t.uri);if(this.a.has(s))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const r=new rq(t,i);return this.a.set(s,r),r}delete(e,t){const i=this.b(e,t.uri);this.a.delete(i)}b(e,t){return`${e}@@@${t}`}},zP;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(zP||(zP={}));var oq=class{constructor(){this.a=new Map}addTextProvider(e,t,i){return this.b(e,{type:0,extension:t,provider:i})}addCustomProvider(e,t,i){return this.b(e,{type:1,extension:t,provider:i})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Le(()=>this.a.delete(e))}},aq=class{constructor(e,t,i,s,r){this.d=t,this.f=i,this.g=s,this.h=r,this.b=new oq,this.c=new nq,this.a=e.getProxy(Z.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,s){const r=new se;return cq(i)?(r.add(this.b.addTextProvider(t,e,i)),this.a.$registerTextEditorProvider(km(e),t,s.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},Vc(e))):(r.add(this.b.addCustomProvider(t,e,i)),Sm(i)&&r.add(i.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(lq(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(km(e),t,s.webviewOptions||{},!!s.supportsMultipleEditorsPerDocument,Vc(e))),Le.from(r,new Le(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,i,s,r){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=x.revive(e),a=await n.provider.openCustomDocument(o,{backupId:i,untitledDocumentData:s?.buffer},r);let c;return Sm(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:Sm(n.provider)}}async $disposeCustomDocument(e,t){const i=this.b.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==1)throw new Error(`Invalid provider type for '${t}'`);const s=x.revive(e),{document:r}=this.i(t,s);this.c.delete(t,r),r.dispose()}async $resolveCustomEditor(e,t,i,s,r,n){const o=this.b.get(i);if(!o)throw new Error(`No provider found for '${i}'`);const a=Wt.to(r),c=this.g.createNewWebview(t,s.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,i,s.title,a,s.options,c,s.active),u=x.revive(e);switch(o.type){case 1:{const{document:h}=this.i(i,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.i(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const s=this.b.get(i);if(!s)throw new Error(`No provider found for '${i}'`);if(!s.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const r=this.h.getWebviewPanel(e);if(!r)throw new Error("No webview found");const n=x.revive(t),o=this.d.getDocument(n);await s.provider.moveCustomTextEditor(o,r,Ye.None)}async $undo(e,t,i,s){return this.i(t,e).undo(i,s)}async $redo(e,t,i,s){return this.i(t,e).redo(i,s)}async $revert(e,t,i){const s=this.i(t,e);await this.j(t).revertCustomDocument(s.document,i),s.disposeBackup()}async $onSave(e,t,i){const s=this.i(t,e);await this.j(t).saveCustomDocument(s.document,i),s.disposeBackup()}async $onSaveAs(e,t,i,s){const r=this.i(t,e);return this.j(t).saveCustomDocumentAs(r.document,x.revive(i),s)}async $backup(e,t,i){const s=this.i(t,e),n=await this.j(t).backupCustomDocument(s.document,{destination:s.getNewBackupUri()},i);return s.updateBackup(n),n.id}i(e,t){const i=this.c.get(e,x.revive(t));if(!i)throw new Error("No custom document found");return i}j(e){const i=this.b.get(e)?.provider;if(!i||!Sm(i))throw new Error("Custom document is not editable");return i}};function Sm(e){return!!e.onDidChangeCustomDocument}function cq(e){return typeof e.resolveCustomTextEditor=="function"}function lq(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function uq(e){const t=e.scheme===G.file||e.scheme===G.untitled?e.fsPath:e.toString();return Rr(t)+""}var ra,WP=class KA{#e;#t;#i;constructor(t,i,s,r,n,o,a,c){this.d=t,this.e=i,this.f=s,this.g=r,this.h=n,this.c=!1,this.f=Math.max(r,s),this.#i=new Ht(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#i.keys()]),this.#e?.$clear(this.e),this.#i.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,i){if(!t){this.clear();return}this.j();let s=[];if(x.isUri(t)){if(!i){this.delete(t);return}this.#i.set(t,i.slice()),s=[t]}else if(Array.isArray(t)){s=[];let o;t=[...t].sort(KA.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#i.get(o).length===0&&this.#i.delete(o),o=c,s.push(c),this.#i.set(c,[])),l)this.#i.get(c)?.push(...l);else{const u=this.#i.get(c);u&&(u.length=0)}}}if(this.#t.fire(s),!this.#e)return;const r=[];let n=0;for(const o of s){let a=[];const c=this.#i.get(o);if(c)if(c.length>this.g){a=[];const l=[ci.Error,ci.Warning,ci.Information,ci.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...vc.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:Ii.Info,message:d(2895,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...vc.from(l),modelVersionId:this.h(o)}));if(r.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,r)}delete(t){this.j(),this.#t.fire([t]),this.#i.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#i.keys()]),this.#i.clear(),this.#e?.$clear(this.e)}forEach(t,i){this.j();for(const[s,r]of this)t.call(i,s,r,this)}*[Symbol.iterator](){this.j();for(const t of this.#i.keys())yield[t,this.get(t)]}get(t){this.j();const i=this.#i.get(t);return Array.isArray(i)?Object.freeze(i.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#i.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,i){return t[0].toString()<i[0].toString()?-1:t[0].toString()>i[0].toString()?1:0}},b4=class{static{ra=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const i=new Ht;for(const s of t)i.set(s,s);return{uris:Object.freeze(Array.from(i.values()))}}constructor(t,i,s,r){this.j=i,this.k=s,this.l=r,this.g=new Map,this.h=new AT({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=Ve.map(this.h.event,ra._mapper),this.f=t.getProxy(Z.MainThreadDiagnostics)}createDiagnosticCollection(t,i){const{g:s,f:r,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(f,p){r.$changeMany(f,p),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,f,p.length===0?"CLEARING":p)}$clear(f){r.$clear(f),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,f)}dispose(){r.dispose()}};let u;if(!i)i="_generated_diagnostic_collection_name_#"+ra.c++,u=i;else if(!s.has(i))u=i;else{this.j.warn(`DiagnosticCollection with name '${i}' does already exist.`);do u=i+ra.c++;while(s.has(u))}return new class extends WP{constructor(){super(i,u,ra.e,ra.d,f=>c.getDocument(f)?.version,a.extUri,l,n),s.set(u,this)}dispose(){super.dispose(),s.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const i=new Map,s=[];for(const r of this.g.values())r.forEach((n,o)=>{let a=i.get(n.toString());typeof a>"u"&&(a=s.length,i.set(n.toString(),a),s.push([n,[]])),s[a][1]=s[a][1].concat(...o)});return s}}m(t){let i=[];for(const s of this.g.values())s.has(t)&&(i=i.concat(s.get(t)));return i}$acceptMarkersChange(t){if(!this.n){const i="_generated_mirror",s=new WP(i,i,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,r=>{},this.k.extUri,void 0,this.h);this.g.set(i,s),this.n=s}for(const[i,s]of t)this.n.set(x.revive(i),s.map(vc.to))}};b4=ra=__decorate([__param(1,De),__param(2,Ra)],b4);var hq=class{constructor(e){this.a=e.getProxy(Z.MainThreadDialogs)}showOpenDialog(e){return this.a.$showOpenDialog(e).then(t=>t?t.map(i=>x.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?x.revive(t):void 0)}},dq=class e2{static{this.a=0}constructor(t,i,s){this.d=i,this.e=s,this.b=new Map,this.c=t.getProxy(Z.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,i){if(Object.keys(G).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const s=e2.a++;this.b.set(s,i),this.c.$registerTextContentProvider(s,t);let r;if(typeof i.onDidChange=="function"){let n;r=i.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(s,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=Gx(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(lt).finally(()=>{n===a&&(n=void 0)});n=a})}return new Le(()=>{this.b.delete(s)&&this.c.$unregisterTextContentProvider(s),r&&(r.dispose(),r=void 0)})}$provideTextDocumentContent(t,i){const s=this.b.get(t);return s?Promise.resolve(s.provideTextDocumentContent(x.revive(i),Ye.None)):Promise.reject(new Error(`unsupported uri-scheme: ${i.scheme}`))}},fq=class{constructor(e,t,i,s={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=i,this.g=s,this.a=new hn,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,s)=>{const n={dispose:this.a.push([t,i,e])};return Array.isArray(s)&&s.push(n),n}}async $participateInSave(e,t){const i=x.revive(e);let s=!1;const r=setTimeout(()=>s=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(s)break;const a=this.d.getDocument(i),c=await this.h(o,{document:a,reason:Kp.to(t)});n.push(c)}}finally{clearTimeout(r)}return n}h([e,t,i],s){const r=this.b.get(e);return typeof r=="number"&&r>this.g.errors?Promise.resolve(!1):this.i(i,e,t,s).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,i,s){const r=[],n=Date.now(),{document:o,reason:a}=s,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(r))throw k1("waitUntil can not be called async");r.push(Promise.resolve(u))}});try{t.apply(i,[l])}catch(u){return Promise.reject(u)}return Object.freeze(r),new Promise((u,h)=>{const f=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(r).then(p=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(f),u(p)}).catch(p=>{clearTimeout(f),h(p)})}).then(u=>{const h={edits:[]};for(const f of u)if(Array.isArray(f)&&f.every(p=>p instanceof Tn))for(const{newText:p,newEol:g,range:v}of f)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:v&&O.from(v),text:p,eol:g&&Ec.from(g)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new bi(h)):Promise.reject(new Error("concurrent_edits"))})}},pq=class{constructor(e,t){this.a=new D,this.b=new D,this.c=new D,this.d=new D,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new se,this.h=new Map,this.f=e.getProxy(Z.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(i=>{for(const s of i)this.b.fire(s.document)},void 0,this.e),this.g.onDidAddDocuments(i=>{for(const s of i)this.a.fire(s.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e,t){const i=this.g.getDocument(e);if(i&&(!t?.encoding||i.document.encoding===t.encoding))return Promise.resolve(i);let s=this.h.get(e.toString());return s?t?.encoding&&(s=s.then(r=>r.document.encoding!==t.encoding?this.ensureDocumentData(e,t):r)):(s=this.f.$tryOpenDocument(e,t).then(r=>{this.h.delete(e.toString());const n=x.revive(r);return wa(this.g.getDocument(n))},r=>(this.h.delete(e.toString()),Promise.reject(r))),this.h.set(e.toString(),s)),s}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>x.revive(t))}$acceptModelLanguageChanged(e,t){const i=x.revive(e),s=this.g.getDocument(i);if(!s)throw new Error("unknown document");this.b.fire(s.document),s._acceptLanguageId(t),this.a.fire(s.document)}$acceptModelSaved(e){const t=x.revive(e),i=this.g.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=x.revive(e),s=this.g.getDocument(i);if(!s)throw new Error("unknown document");s._acceptIsDirty(t),this.c.fire({document:s.document,contentChanges:[],reason:void 0})}$acceptEncodingChanged(e,t){const i=x.revive(e),s=this.g.getDocument(i);if(!s)throw new Error("unknown document");s._acceptEncoding(t),this.c.fire({document:s.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,i){const s=x.revive(e),r=this.g.getDocument(s);if(!r)throw new Error("unknown document");r._acceptIsDirty(i),r.onEvents(t);let n;t.isUndoing?n=fu.Undo:t.isRedoing&&(n=fu.Redo),this.c.fire(pk({document:r.document,contentChanges:t.changes.map(o=>({range:O.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){oW(e,t)}},gq=class{constructor(e){this.b=new Map,this.c=new D,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(Z.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,i){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const s=this.e++;return this.a.$registerEmbeddingProvider(s,t),this.b.set(s,{id:t,provider:i}),ie(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(s),this.b.delete(s)})}async computeEmbeddings(e,t,i){i??=Ye.None;let s=!1;typeof t=="string"&&(t=[t],s=!0);const r=await this.a.$computeEmbeddings(e,t,i);if(r.length!==t.length)throw new Error;if(s){if(r.length!==1)throw new Error;return r[0]}return r}async $provideEmbeddings(e,t,i){const s=this.b.get(e);if(!s)return[];const r=await s.provider.provideEmbeddings(t,i);return r||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},mq=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Z.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(this.a.size===0)throw new Error("No embedding vector providers registered");const s=this.a.get(e);if(!s)throw new Error("Embedding vector provider not found");const r=await s.provideEmbeddingVector(t,i);if(!r)throw new Error("Embedding vector provider returned undefined");return r}registerEmbeddingVectorProvider(e,t,i){const s=this.b;return this.b++,this.a.set(s,i),this.c.$registerAiEmbeddingVectorProvider(t,s),new Le(()=>{this.c.$unregisterAiEmbeddingVectorProvider(s),this.a.delete(s)})}},VP;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(VP||(VP={}));var vq=class{constructor(e,t,i){const s=new Uint8Array(e*t);for(let r=0,n=e*t;r<n;r++)s[r]=i;this.a=s,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,i){this.a[e*this.cols+t]=i}},_P=class{constructor(e){let t=0,i=0;for(let r=0,n=e.length;r<n;r++){const[o,a,c]=e[r];a>t&&(t=a),o>i&&(i=o),c>i&&(i=c)}t++,i++;const s=new vq(i,t,0);for(let r=0,n=e.length;r<n;r++){const[o,a,c]=e[r];s.set(o,a,c)}this.a=s,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},y4=null;function wq(){return y4===null&&(y4=new _P([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),y4}var qP;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(qP||(qP={}));var Sh=null;function bq(){if(Sh===null){Sh=new S$(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let i=0;i<e.length;i++)Sh.set(e.charCodeAt(i),1);const t=".,;:";for(let i=0;i<t.length;i++)Sh.set(t.charCodeAt(i),2)}return Sh}var yq=class G5{static a(t,i,s,r,n){let o=n-1;do{const a=i.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>r);if(r>0){const a=i.charCodeAt(r-1),c=i.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:s,startColumn:r+1,endLineNumber:s,endColumn:o+2},url:i.substring(r,o+1)}}static computeLinks(t,i=wq()){const s=bq(),r=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,f=1,p=!1,g=!1,v=!1,b=!1;for(;l<c;){let E=!1;const k=a.charCodeAt(l);if(f===13){let I;switch(k){case 40:p=!0,I=0;break;case 41:I=p?0:1;break;case 91:v=!0,g=!0,I=0;break;case 93:v=!1,I=g?0:1;break;case 123:b=!0,I=0;break;case 125:I=b?0:1;break;case 39:case 34:case 96:h===k?I=1:h===39||h===34||h===96?I=0:I=1;break;case 42:I=h===42?1:0;break;case 124:I=h===124?1:0;break;case 32:I=v?0:1;break;default:I=s.get(k)}I===1&&(r.push(G5.a(s,a,n,u,l)),E=!0)}else if(f===12){let I;k===91?(g=!0,I=0):I=s.get(k),I===1?E=!0:f=13}else f=i.nextState(f,k),f===0&&(E=!0);E&&(f=1,p=!1,g=!1,b=!1,u=l+1,h=k),l++}f===13&&r.push(G5.a(s,a,n,u,c))}return r}},xq=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let i,s,r=14,n=14;for(const o of e){let a=i?hR(i,o):0;for(a===0?s=1:s=n;a<o.length;a++)a+1===o.length?(r=n,n=9):n+=1,t.push([s,o.toUpperCase().charCodeAt(a),n]),t.push([s,o.toLowerCase().charCodeAt(a),n]),s=n;i=o,n=r}t.push([9,58,10]),t.push([10,47,12]),this.b=new _P(t)}}provideDocumentLinks(e){this.c();const t=[],i=yq.computeLinks({getLineContent(s){return e.lineAt(s-1).text},getLineCount(){return e.lineCount}},this.b);for(const s of i){const r=Jo.to(s);r.target&&t.push(r)}return t}},Eq=class J5{constructor(t,i){this.i=i,this.b=new xq,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(Z.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,i,s,r={}){if(J5.j(s),this.d.has(i))throw new Error(`a provider for the scheme '${i}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(i),this.d.add(i),this.c.set(n,s);let o=2;r.isCaseSensitive&&(o+=1024),r.isReadonly&&(o+=2048),typeof s.copy=="function"&&(o+=8),typeof s.open=="function"&&typeof s.close=="function"&&typeof s.read=="function"&&typeof s.write=="function"&&(L(t,"fsChunks"),o+=4);let a;r.isReadonly&&Nr(r.isReadonly)&&r.isReadonly.value!==""&&(a={value:r.isReadonly.value,isTrusted:r.isReadonly.isTrusted,supportThemeIcons:r.isReadonly.supportThemeIcons,supportHtml:r.isReadonly.supportHtml,baseUri:r.isReadonly.baseUri,uris:r.isReadonly.uris}),this.a.$registerFileSystemProvider(n,i,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${i}`),console.error(l)});const c=s.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:f,type:p}=h;if(f.scheme!==i)continue;let g;switch(p){case uc.Changed:g=0;break;case uc.Created:g=1;break;case uc.Deleted:g=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:f,type:g})}this.a.$onFileSystemChange(n,u)});return ie(()=>{c.dispose(),this.b.delete(i),this.d.delete(i),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:i,ctime:s,mtime:r,size:n,permissions:o}=t;return{type:i,ctime:s,mtime:r,size:n,permissions:o}}$stat(t,i){return Promise.resolve(this.l(t).stat(x.revive(i))).then(s=>J5.k(s))}$readdir(t,i){return Promise.resolve(this.l(t).readDirectory(x.revive(i)))}$readFile(t,i){return Promise.resolve(this.l(t).readFile(x.revive(i))).then(s=>_.wrap(s))}$writeFile(t,i,s,r){return Promise.resolve(this.l(t).writeFile(x.revive(i),s.buffer,r))}$delete(t,i,s){return Promise.resolve(this.l(t).delete(x.revive(i),s))}$rename(t,i,s,r){return Promise.resolve(this.l(t).rename(x.revive(i),x.revive(s),r))}$copy(t,i,s,r){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(x.revive(i),x.revive(s),r))}$mkdir(t,i){return Promise.resolve(this.l(t).createDirectory(x.revive(i)))}$watch(t,i,s,r){const n=this.l(t).watch(x.revive(s),r);this.f.set(i,n)}$unwatch(t,i){const s=this.f.get(i);s&&(s.dispose(),this.f.delete(i))}$open(t,i,s){const r=this.l(t);if(!r.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(r.open(x.revive(i),s))}$close(t,i){const s=this.l(t);if(!s.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(s.close(i))}$read(t,i,s,r){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=_.alloc(r);return Promise.resolve(n.read(i,s,o.buffer,0,r)).then(a=>o.slice(0,a))}$write(t,i,s,r){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(i,s,r.buffer,0,r.byteLength))}l(t){const i=this.c.get(t);if(!i){const s=new Error;throw s.name="ENOPRO",s.message="no provider",s}return i}};function GP(e){return typeof e.correlationId=="number"}function kq(e){return e.recursive===!0}var JP=class t2 extends X{static{this.a=5}constructor(t,i,s,r){super(),this.h=t,this.j=i,this.m=s,this.n=r,this.c=this.B(new Js),this.f=void 0,this.g=0}s(){const t=new se;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(i=>this.h(i))),t.add(this.b.onDidLogMessage(i=>this.j(i))),t.add(this.b.onDidError(i=>this.t(i.error,i.request)))}t(t,i){this.u(t,i)?this.g<t2.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,i){return!(!this.n.restartOnError||i||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}},Sq=class extends JP{constructor(e,t,i){super(e,t,i,{type:"node.js",restartOnError:!1})}},Cq=class extends JP{constructor(e,t,i){super(e,t,i,{type:"universal",restartOnError:!0})}};function YP(e){return e.map(t=>({type:t.type,resource:x.revive(t.resource),cId:t.cId}))}function $q(e){const t=new Iq;for(const i of e)t.processEvent(i);return t.coalesce()}function ZP(e,t){return typeof t=="string"&&!t.startsWith($o)&&!es(t)?{base:e,pattern:t}:t}function QP(e,t){const i=[];for(const s of t)i.push(Ds(ZP(e,s)));return i}var Iq=class{constructor(){this.a=new Set,this.b=new Map}c(e){return $t?e.resource.fsPath:e.resource.fsPath.toLowerCase()}processEvent(e){const t=this.b.get(this.c(e));let i=!1;if(t){const s=t.type,r=e.type;t.resource.fsPath!==e.resource.fsPath&&(e.type===2||e.type===1)?i=!0:s===1&&r===2?(this.b.delete(this.c(e)),this.a.delete(t)):s===2&&r===1?t.type=0:s===1&&r===0||(t.type=r)}else i=!0;i&&(this.a.add(e),this.b.set(this.c(e),e))}coalesce(){const e=[],t=[];return Array.from(this.a).filter(i=>i.type!==2?(e.push(i),!1):!0).sort((i,s)=>i.resource.fsPath.length-s.resource.fsPath.length).filter(i=>t.some(s=>DF(i.resource.fsPath,s,!$t))?!1:(t.push(i.resource.fsPath),!0)).concat(e)}};function Pq(e,t){if(typeof t=="number")switch(e.type){case 1:return(t&4)===0;case 2:return(t&8)===0;case 0:return(t&2)===0}return!1}function Dq(e){if(typeof e=="number"){const t=[];return e&4&&t.push("Added"),e&8&&t.push("Deleted"),e&2&&t.push("Updated"),t.length===0?"<all>":`[${t.join(", ")}]`}return"<none>"}var Aq=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,i,s,r,n,o){this.a=Math.random(),this.b=new D,this.c=new D,this.d=new D,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=Ds(n),c=typeof n=="string",l=!1,u=r(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const f of h.created){const p=x.revive(f);a(p.fsPath)&&(!c||i.getWorkspaceFolder(p))&&this.b.fire(p)}if(!o.ignoreChangeEvents)for(const f of h.changed){const p=x.revive(f);a(p.fsPath)&&(!c||i.getWorkspaceFolder(p))&&this.c.fire(p)}if(!o.ignoreDeleteEvents)for(const f of h.deleted){const p=x.revive(f);a(p.fsPath)&&(!c||i.getWorkspaceFolder(p))&&this.d.fire(p)}}});this.g=Le.from(this.i(e,i,t,s,n,o,!1),this.b,this.c,this.d,u)}i(e,t,i,s,r,n,o){const a=Le.from();if(typeof r=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(Z.MainThreadFileSystemEventService);let l=!1;(r.pattern.includes($o)||r.pattern.includes(c0))&&(l=!0);const u=[];let h,f;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(f=14,n.ignoreChangeEvents&&(f&=-3),n.ignoreCreateEvents&&(f&=-5),n.ignoreDeleteEvents&&(f&=-9));else if(l&&u.length===0){const p=t.getWorkspaceFolder(x.revive(r.baseUri)),g=i.getConfiguration("files",p).get("watcherExclude");if(g)for(const v in g)v&&g[v]===!0&&u.push(v)}else if(!l){const p=t.getWorkspaceFolder(x.revive(r.baseUri));if(p){const g=i.getConfiguration("files",p).get("watcherExclude");if(g){for(const v in g)if(v&&g[v]===!0){const b=`${gn(v,"/")}/${$o}`;h||(h=[]),h.push(ZP(p.uri.fsPath,b))}}if(!h||h.length===0)return a}}return c.$watch(s.identifier.value,this.a,r.baseUri,{recursive:l,excludes:u,includes:h,filter:f},!!o),Le.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},Tq=class{get created(){return this.a.value}get changed(){return this.b.value}get deleted(){return this.c.value}constructor(e){this.d=e,this.a=new Qt(()=>this.d.created.map(x.revive)),this.b=new Qt(()=>this.d.changed.map(x.revive)),this.c=new Qt(()=>this.d.deleted.map(x.revive)),this.session=this.d.session}},Rq=class{constructor(e,t,i){this.j=e,this.k=t,this.l=i,this.a=new D,this.b=new D,this.c=new D,this.d=new D,this.g=new fl,this.h=new fl,this.i=new fl,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,i,s,r){return new Aq(this.j,t,e,i,this.a.event,Gi.from(s),r)}$onFileEvent(e){this.a.fire(new Tq(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(i=>({oldUri:x.revive(i.source),newUri:x.revive(i.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(i=>x.revive(i.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(i=>x.revive(i.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(i,s,r)=>{const n=function(a){i.call(s,a)};return n.extension=e,t.event(n,void 0,r)}}async $onWillRunFileOperation(e,t,i,s){switch(e){case 2:return await this.n(this.g,{files:t.map(r=>({oldUri:x.revive(r.source),newUri:x.revive(r.target)}))},i,s);case 1:return await this.n(this.i,{files:t.map(r=>x.revive(r.target))},i,s);case 0:case 3:return await this.n(this.h,{files:t.map(r=>x.revive(r.target))},i,s)}}async n(e,t,i,s){const r=new Set,n=[];if(await e.fireAsync(t,s,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof Ro&&(n.push([c.extension,u]),r.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>i&&this.k.warn("SLOW file-participant",c.extension.identifier)}),s.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=qi.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(r)}}},Lq=class{constructor(e,t,i,s,r){this.a=t,this.b=i,this.c=s;const n=new be("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new z("showOptions","Show Options",o=>!0,o=>o),new z("resource","Interactive resource Uri",o=>!0,o=>o),new z("controllerId","Notebook controller Id",o=>!0,o=>o),new z("title","Interactive editor title",o=>!0,o=>o)],new ve("Notebook and input URI",o=>{if(r.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return r.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:x.revive(o.notebookUri),inputUri:x.revive(o.inputUri),notebookEditor:a.apiEditor}}return r.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:x.revive(o.notebookUri),inputUri:x.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,i,s){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1,encoding:"utf8"}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},Nq=class{constructor(e){this.b=0,this.a=e.getProxy(Z.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),ie(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},XP;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(XP||(XP={}));var Mq=class ys extends We{constructor(t,i,s,r){super(t,i,s,r),this.selectionStartLineNumber=t,this.selectionStartColumn=i,this.positionLineNumber=s,this.positionColumn=r}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return ys.selectionsEqual(this,t)}static selectionsEqual(t,i){return t.selectionStartLineNumber===i.selectionStartLineNumber&&t.selectionStartColumn===i.selectionStartColumn&&t.positionLineNumber===i.positionLineNumber&&t.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,i){return this.getDirection()===0?new ys(this.startLineNumber,this.startColumn,t,i):new ys(t,i,this.startLineNumber,this.startColumn)}getPosition(){return new rs(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new rs(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,i){return this.getDirection()===0?new ys(t,i,this.endLineNumber,this.endColumn):new ys(this.endLineNumber,this.endColumn,t,i)}static fromPositions(t,i=t){return new ys(t.lineNumber,t.column,i.lineNumber,i.column)}static fromRange(t,i){return i===0?new ys(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new ys(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new ys(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,i){if(t&&!i||!t&&i)return!1;if(!t&&!i)return!0;if(t.length!==i.length)return!1;for(let s=0,r=t.length;s<r;s++)if(!this.selectionsEqual(t[s],i[s]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,i,s,r,n){return n===0?new ys(t,i,s,r):new ys(s,r,t,i)}},KP=class i2{constructor(t,i){this.d=t,this.e=i}async provideDocumentSymbols(t,i){const s=this.d.getDocument(t),r=await this.e.provideDocumentSymbols(s,i);if(!C1(r))return r[0]instanceof au?r.map(_w.from):i2.f(r)}static f(t){t=t.slice(0).sort((r,n)=>{let o=r.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(r.location.range.end)),o});const i=[],s=[];for(const r of t){const n={name:r.name||"!!MISSING: name!!",kind:gs.from(r.kind),tags:r.tags?.map(Vr.from)||[],detail:"",containerName:r.containerName,range:O.from(r.location.range),selectionRange:O.from(r.location.range),children:[]};for(;;){if(s.length===0){s.push(n),i.push(n);break}const o=s[s.length-1];if(We.containsRange(o.range,n.range)&&!We.equalsRange(o.range,n.range)){o.children?.push(n),s.push(n);break}s.pop()}}return i}},Cm=class{constructor(e,t,i,s,r,n){this.f=e,this.g=t,this.h=i,this.j=s,this.k=r,this.l=n,this.d=new Ws("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const i=this.f.getDocument(e),s=await this.h.provideCodeLenses(i,t);if(!s||t.isCancellationRequested)return;const r=this.d.add(s),n=new se;this.e.set(r,n);const o={cacheId:r,lenses:[]};for(let a=0;a<s.length;a++){if(!$e.isRange(s[a].range)){console.warn("INVALID code lens, range is not defined",this.j.identifier.value);continue}o.lenses.push({cacheId:[r,a],range:O.from(s[a].range),command:this.g.toInternal(s[a].command,n)})}return o}async resolveCodeLens(e,t){const i=e.cacheId&&this.d.get(...e.cacheId);if(!i)return;let s;if(typeof this.h.resolveCodeLens!="function"||i.isResolved?s=i:s=await this.h.resolveCodeLens(i,t),s||(s=i),t.isCancellationRequested)return;const r=e.cacheId&&this.e.get(e.cacheId[0]);if(r){if(!s.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(s.command,r),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function $m(e){return Array.isArray(e)?e.map(Bu.from):e?[Bu.from(e)]:[]}var eD=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,i){const s=this.d.getDocument(e),r=Je.to(t),n=await this.e.provideDefinition(s,r,i);return $m(n)}},tD=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,i){const s=this.d.getDocument(e),r=Je.to(t),n=await this.e.provideDeclaration(s,r,i);return $m(n)}},iD=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,i){const s=this.d.getDocument(e),r=Je.to(t),n=await this.e.provideImplementation(s,r,i);return $m(n)}},sD=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,i){const s=this.d.getDocument(e),r=Je.to(t),n=await this.e.provideTypeDefinition(s,r,i);return $m(n)}},x4=class s2{static{this.f=10}constructor(t,i){this.g=t,this.h=i,this.d=0,this.e=new Map}async provideHover(t,i,s,r){const n=this.g.getDocument(t),o=Je.to(i);let a;if(s&&s.verbosityRequest){const h=s.verbosityRequest.previousHover.id,f=this.e.get(h);if(!f)throw new Error(`Hover with id ${h} not found`);const p={verbosityDelta:s.verbosityRequest.verbosityDelta,previousHover:f};a=await this.h.provideHover(n,o,r,p)}else a=await this.h.provideHover(n,o,r);if(!a||C1(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new $e(o,o));const c=Hu.from(a),l=this.d;if(this.e.size===s2.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},rD=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,i){const s=this.d.getDocument(e),r=Je.to(t),n=await this.e.provideEvaluatableExpression(s,r,i);if(n)return Jw.from(n)}},nD=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,i,s){const r=this.d.getDocument(e),n=await this.e.provideInlineValues(r,O.to(t),qp.to(i),s);if(Array.isArray(n))return n.map(o=>_p.from(o))}},oD=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,i){const s=this.d.getDocument(e),r=Je.to(t),n=await this.e.provideDocumentHighlights(s,r,i);if(Array.isArray(n))return n.map(bc.from)}},aD=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideMultiDocumentHighlights(e,t,i,s){const r=this.d.getDocument(e),n=i.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=Je.to(t),a=await this.e.provideMultiDocumentHighlights(r,o,n,s);if(Array.isArray(a))return a.map(Yw.from)}},cD=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,i){const s=this.d.getDocument(e),r=Je.to(t),n=await this.e.provideLinkedEditingRanges(s,r,i);if(n&&Array.isArray(n.ranges))return{ranges:yt(n.ranges.map(O.from)),wordPattern:n.wordPattern}}},lD=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,i,s){const r=this.d.getDocument(e),n=Je.to(t),o=await this.e.provideReferences(r,n,i,s);if(Array.isArray(o))return o.map(Ai.from)}},Im=class f1{static{this.d=1e3}constructor(t,i,s,r,n,o,a){this.g=t,this.h=i,this.j=s,this.k=r,this.l=n,this.m=o,this.n=a,this.e=new Ws("CodeAction"),this.f=new Map}async provideCodeActions(t,i,s,r){const n=this.g.getDocument(t),o=Mq.isISelection(i)?Fs.to(i):O.to(i),a=[];for(const p of this.j.getDiagnostics(t))if(o.intersection(p.range)&&a.push(p)>f1.d)break;const c={diagnostics:a,only:s.only?new pt(s.only):void 0,triggerKind:cb.to(s.trigger)},l=await this.k.provideCodeActions(n,o,c,r);if(!cl(l)||r.isCancellationRequested)return;const u=this.e.add(l),h=new se;this.f.set(u,h);const f=[];for(let p=0;p<l.length;p++){const g=l[p];if(g)if(f1.o(g)&&!(g instanceof lu))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),f.push({_isSynthetic:!0,title:g.title,command:this.h.toInternal(g,h)});else{const v=g;c.only&&(v.kind?c.only.contains(v.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${v.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const b=v.ranges??[];f.push({cacheId:[u,p],title:v.title,command:v.command&&this.h.toInternal(v.command,h),diagnostics:v.diagnostics&&v.diagnostics.map(vc.from),edit:v.edit&&qi.from(v.edit,void 0),kind:v.kind&&v.kind.value,isPreferred:v.isPreferred,isAI:tt(this.m,"codeActionAI")?v.isAI:!1,ranges:tt(this.m,"codeActionRanges")?yt(b.map(O.from)):void 0,disabled:v.disabled?.reason})}}return{cacheId:u,actions:f}}async resolveCodeAction(t,i){const[s,r]=t,n=this.e.get(s,r);if(!n||f1.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,i)??n;let a;o.edit&&(a=qi.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(s);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},Ch=class{constructor(e,t,i,s,r){this.f=e,this.g=t,this.h=i,this.j=s,this.k=r,this.e=new Ws("DocumentPasteEdit.edits")}async prepareDocumentPaste(e,t,i,s){if(!this.h.prepareDocumentPaste)return;this.d=void 0;const r=this.g.getDocument(e),n=t.map(u=>O.to(u)),o=Pc.toDataTransfer(i,()=>{throw new J2});if(await this.h.prepareDocumentPaste(r,n,o,s),s.isCancellationRequested)return;const a=Array.from(o).filter(([,u])=>!(u instanceof lp)),c=new Map,l=await Promise.all(Array.from(a,async([u,h])=>{const f=ut();return c.set(f,h),[u,await Zo.from(u,h,f)]}));return this.d=c,{items:l}}async providePasteEdits(e,t,i,s,r,n){if(!this.h.provideDocumentPasteEdits)return[];const o=this.g.getDocument(t),a=i.map(f=>O.to(f)),c=s.items.map(([f,p])=>{const g=this.d?.get(p.id);return g?[f,g]:[f,Zo.to(f,p,async v=>(await this.f.$resolvePasteFileData(this.j,e,v)).buffer)]}),l=new rc(c),u=await this.h.provideDocumentPasteEdits(o,a,l,{only:r.only?new Mn(r.only):void 0,triggerKind:r.triggerKind},n);if(!u||n.isCancellationRequested)return[];const h=this.e.add(u);return u.map((f,p)=>({_cacheId:[h,p],title:f.title??d(2898,null,this.k.displayName||this.k.name),kind:f.kind,yieldTo:f.yieldTo?.map(g=>g.value),insertText:typeof f.insertText=="string"?f.insertText:{snippet:f.insertText.value},additionalEdit:f.additionalEdit?qi.from(f.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[i,s]=e,r=this.e.get(i,s);if(!r||!this.h.resolveDocumentPasteEdit)return{};const n=await this.h.resolveDocumentPasteEdit(r,t)??r;return{insertText:n.insertText,additionalEdit:n.additionalEdit?qi.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.e.delete(e)}},uD=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,i){const s=this.d.getDocument(e),r=await this.e.provideDocumentFormattingEdits(s,t,i);if(Array.isArray(r))return r.map(Vt.from)}},E4=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,i,s){const r=this.d.getDocument(e),n=O.to(t),o=await this.e.provideDocumentRangeFormattingEdits(r,n,i,s);if(Array.isArray(o))return o.map(Vt.from)}async provideDocumentRangesFormattingEdits(e,t,i,s){D1(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const r=this.d.getDocument(e),n=t.map(O.to),o=await this.e.provideDocumentRangesFormattingEdits(r,n,i,s);if(Array.isArray(o))return o.map(Vt.from)}},hD=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,s,r){const n=this.d.getDocument(e),o=Je.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,i,s,r);if(Array.isArray(a))return a.map(Vt.from)}},Pm=class{constructor(e,t){this.e=e,this.f=t,this.d=new Ws("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this.e.provideWorkspaceSymbols(e,t);if(!cl(i))return{symbols:[]};const s=this.d.add(i),r={cacheId:s,symbols:[]};for(let n=0;n<i.length;n++){const o=i[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}r.symbols.push({...qo.from(o),cacheId:[s,n]})}return r}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const i=this.d.get(...e.cacheId);if(i){const s=await this.e.resolveWorkspaceSymbol(i,t);return s&&Pr(e,qo.from(s),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},Dm=class Y5{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,i,s){this.d=t,this.e=i,this.f=s}async provideRenameEdits(t,i,s,r){const n=this.d.getDocument(t),o=Je.to(i);try{const a=await this.e.provideRenameEdits(n,o,s,r);return a?qi.from(a):void 0}catch(a){const c=Y5.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,i,s){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const r=this.d.getDocument(t),n=Je.to(i);try{const o=await this.e.prepareRename(r,n,s);let a,c;if($e.isRange(o)?(a=o,c=r.getText(o)):St(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:O.from(a),text:c}}catch(o){const a=Y5.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},k4=class Z5{static{this.d={[tf.Invoke]:yu.Invoke,[tf.Automatic]:yu.Automatic}}constructor(t,i,s){this.e=t,this.f=i,this.g=s}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,i,s,r){const n=this.e.getDocument(t),o=O.to(i);try{const a=Z5.d[s],c=await this.f.provideNewSymbolNames(n,o,a,r);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(Z5.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},S4=class{constructor(e,t){this.resultId=e,this.tokens=t}},C4=class _s{constructor(t,i){this.f=t,this.g=i,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,i,s){const r=this.f.getDocument(t),n=i!==0?this.d.get(i):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(r,n.resultId,s):await this.g.provideDocumentSemanticTokens(r,s);return n&&this.d.delete(i),o?(o=_s.h(o),this.o(_s.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return _s.j(t)?_s.k(t)?t:new hc(new Uint32Array(t.data),t.resultId):_s.l(t)?_s.m(t)?t:new gp(t.edits.map(i=>new M7(i.start,i.deleteCount,i.data?new Uint32Array(i.data):i.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const i of t.edits)if(!(i.data instanceof Uint32Array))return!1;return!0}static n(t,i){if(!_s.j(i)||!t||!t.tokens)return i;const s=t.tokens,r=s.length,n=i.data,o=n.length;let a=0;const c=Math.min(r,o);for(;a<c&&s[a]===n[a];)a++;if(a===r&&a===o)return new gp([],i.resultId);let l=0;const u=c-a;for(;l<u&&s[r-l-1]===n[o-l-1];)l++;return new gp([{start:a,deleteCount:r-a-l,data:n.subarray(a,o-l)}],i.resultId)}o(t,i){if(_s.j(t)){const s=this.e++;return this.d.set(s,new S4(t.resultId,t.data)),m4({id:s,type:"full",data:t.data})}if(_s.l(t)){const s=this.e++;return _s.j(i)?this.d.set(s,new S4(i.resultId,i.data)):this.d.set(s,new S4(t.resultId)),m4({id:s,type:"delta",deltas:(t.edits||[]).map(r=>({start:r.start,deleteCount:r.deleteCount,data:r.data}))})}return null}},dD=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,i){const s=this.d.getDocument(e),r=await this.e.provideDocumentRangeSemanticTokens(s,O.to(t),i);return r?this.f(r):null}f(e){return m4({id:0,type:"full",data:e.data})}},$h=class r2{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,i,s,r,n){this.f=t,this.g=i,this.h=s,this.j=r,this.k=n,this.d=new Ws("CompletionItem"),this.e=new Map}async provideCompletionItems(t,i,s,r){const n=this.f.getDocument(t),o=Je.to(i),a=n.getWordRangeAtPosition(o)||new $e(o,o),c=a.with({end:o}),l=new Fi,u=await this.h.provideCompletionItems(n,o,r,Qw.to(s));if(!u||r.isCancellationRequested)return;const h=Array.isArray(u)?new Za(u):u,f=r2.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),p=new se;this.e.set(f,p);const g=[],v={x:f,b:g,a:{replace:O.from(a),insert:O.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let b=0;b<h.items.length;b++){const E=h.items[b],k=this.l(E,[f,b],c,a);g.push(k)}return v}async resolveCompletionItem(t,i){if(typeof this.h.resolveCompletionItem!="function")return;const s=this.d.get(...t);if(!s)return;const r=this.l(s,t),n=await this.h.resolveCompletionItem(s,i);if(!n)return;const o=this.l(n,t);return(r.h!==o.h||r.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(r.n!==o.n||r.o!==o.o||!wi(r.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...r,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,i,s,r){const n=this.e.get(i[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:i,a:t.label,b:t.kind!==void 0?Jp.from(t.kind):void 0,m:t.tags&&t.tags.map(Gp.from),c:t.detail,d:typeof t.documentation>"u"?void 0:xe.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(Vt.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof Lo&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),$e.isRange(c)?a.j=O.from(c):c&&(!s?.isEqual(c.inserting)||!r?.isEqual(c.replacing))&&(a.j={insert:O.from(c.inserting),replace:O.from(c.replacing)}),a}},Gn=class{constructor(e,t,i,s){this.f=e,this.g=t,this.h=i,this.j=s,this.d=new fD,this.k={[Kd.Automatic]:bu.Automatic,[Kd.Explicit]:bu.Invoke},this.e=tt(this.f,"inlineCompletionsAdditions")}get supportsHandleEvents(){return tt(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function"||typeof this.h.handleDidRejectCompletionItem=="function"||typeof this.h.handleEndOfLifetime=="function")}async provideInlineCompletions(e,t,i,s){const r=this.g.getDocument(e),n=Je.to(t),o=await this.h.provideInlineCompletionItems(r,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:O.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],requestUuid:i.requestUuid},s);if(!o||s.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let g;f.command&&(u||(u=new se),g=this.j.toInternal(f.command,u));let v;f.action&&(u||(u=new se),v=this.j.toInternal(f.action,u));const b=f.insertText;return{insertText:typeof b=="string"?b:{snippet:b.value},filterText:f.filterText,range:f.range?O.from(f.range):void 0,showRange:this.e&&f.showRange?O.from(f.showRange):void 0,command:g,action:v,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1,isInlineEdit:this.e?f.isInlineEdit:!1,showInlineEditMenu:this.e?f.showInlineEditMenu:!1,displayLocation:f.displayLocation&&this.e?{range:O.from(f.displayLocation.range),label:f.displayLocation.label}:void 0,warning:f.warning&&this.e?{message:xe.from(f.warning.message),icon:f.warning.icon?xb.fromThemeIcon(f.warning.icon):void 0}:void 0}}),commands:c.map(f=>(u||(u=new se),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,i,s){if(!this.h.provideInlineEditsForRange)return;L(this.f,"inlineCompletionsAdditions");const r=this.g.getDocument(e),n=O.to(t),o=await this.h.provideInlineEditsForRange(r,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:O.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],userPrompt:i.userPrompt,requestUuid:i.requestUuid},s);if(!o||s.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let g;f.command&&(u||(u=new se),g=this.j.toInternal(f.command,u));let v;f.action&&(u||(u=new se),v=this.j.toInternal(f.action,u));const b=f.insertText;return{insertText:typeof b=="string"?b:{snippet:b.value},filterText:f.filterText,range:f.range?O.from(f.range):void 0,command:g,action:v,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1}}),commands:c.map(f=>(u||(u=new se),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,i){const s=this.d.get(e)?.items[t];s&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(s,i)}handlePartialAccept(e,t,i,s){const r=this.d.get(e)?.items[t];r&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(r,i),this.h.handleDidPartiallyAcceptCompletionItem(r,vb.to(s)))}handleEndOfLifetime(e,t,i){const s=this.d.get(e)?.items[t];if(s&&this.h.handleEndOfLifetime&&this.e){const r=bb.to(i,n=>this.d.get(n.pid)?.items[n.idx]);this.h.handleEndOfLifetime(s,r)}}handleRejection(e,t){const i=this.d.get(e)?.items[t];i&&this.h.handleDidRejectCompletionItem&&this.e&&this.h.handleDidRejectCompletionItem(i)}},$4=class{async provideInlineEdits(e,t,i){const s=this.f.getDocument(e),r=await this.g.provideInlineEdit(s,{triggerKind:this.e[t.triggerKind],requestUuid:t.requestUuid},i);if(!r||i.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:r});let a;r.accepted&&(n||(n=new se),a=this.h.toInternal(r.accepted,n));let c;r.rejected&&(n||(n=new se),c=this.h.toInternal(r.rejected,n));let l;r.shown&&(n||(n=new se),l=this.h.toInternal(r.shown,n));let u;return r.action&&(n||(n=new se),u=this.h.toInternal(r.action,n)),n||(n=new se),{pid:o,text:r.text,range:O.from(r.range),showRange:O.from(r.showRange),accepted:a,rejected:c,shown:l,action:u,commands:r.commands?.map(f=>this.h.toInternal(f,n))}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,i,s){this.f=t,this.g=i,this.h=s,this.d=new fD,this.e={[sf.Automatic]:Mu.Automatic,[sf.Invoke]:Mu.Invoke}}},fD=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},I4=class{constructor(e,t){this.e=e,this.f=t,this.d=new Ws("SignatureHelp")}async provideSignatureHelp(e,t,i,s){const r=this.e.getDocument(e),n=Je.to(t),o=this.g(i),a=await this.f.provideSignatureHelp(r,n,s,o);if(a){const c=this.d.add([a]);return{...zu.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const i=zu.to(e.activeSignatureHelp),s=this.d.get(e.activeSignatureHelp.id,0);s?(t=s,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},Am=class{constructor(e,t,i,s,r){this.f=e,this.g=t,this.h=i,this.j=s,this.k=r,this.d=new Ws("InlayHints"),this.e=new Map}async provideInlayHints(e,t,i){const s=this.f.getDocument(e),r=O.to(t),n=await this.h.provideInlayHints(s,r,i);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(i.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new se);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],r)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const i=this.d.get(...e);if(!i)return;const s=await this.h.resolveInlayHint(i,t);if(s&&this.l(s))return this.m(s,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(i=>i.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const i=this.e.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const s={label:"",cacheId:t,tooltip:xe.fromStrict(e.tooltip),position:Je.from(e.position),textEdits:e.textEdits&&e.textEdits.map(Vt.from),kind:e.kind&&Qp.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")s.label=e.label;else{const r=[];s.label=r;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:xe.fromStrict(n.tooltip)};ns.isLocation(n.location)&&(o.location=Ai.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,i)),r.push(o)}}return s}},Tm=class p1{constructor(t,i){this.e=t,this.f=i,this.d=new Ws("DocumentLink")}async provideLinks(t,i){const s=this.e.getDocument(t),r=await this.f.provideDocumentLinks(s,i);if(!(!Array.isArray(r)||r.length===0)&&!i.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:r.filter(p1.g).map(Jo.from)};{const n=this.d.add(r),o={links:[],cacheId:n};for(let a=0;a<r.length;a++){if(!p1.g(r[a]))continue;const c=Jo.from(r[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,i){if(typeof this.f.resolveDocumentLink!="function")return;const s=this.d.get(...t);if(!s)return;const r=await this.f.resolveDocumentLink(s,i);if(!(!r||!p1.g(r)))return Jo.from(r)}releaseLinks(t){this.d.delete(t)}},P4=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const i=this.d.getDocument(e),s=await this.e.provideDocumentColors(i,t);return Array.isArray(s)?s.map(n=>({color:yc.from(n.color),range:O.from(n.range)})):[]}async provideColorPresentations(e,t,i){const s=this.d.getDocument(e),r=O.to(t.range),n=yc.to(t.color),o=await this.e.provideColorPresentations(n,{document:s,range:r},i);if(Array.isArray(o))return o.map(Xp.from)}},pD=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,i){const s=this.d.getDocument(e),r=await this.e.provideFoldingRanges(s,t,i);if(Array.isArray(r))return r.map(tg.from)}},gD=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideSelectionRanges(e,t,i){const s=this.d.getDocument(e),r=t.map(Je.to),n=await this.e.provideSelectionRanges(s,r,i);if(!cl(n))return[];if(n.length!==r.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<r.length;a++){const c=[];o.push(c);let l=r[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(tb.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},Ih=class{constructor(e,t){this.f=e,this.g=t,this.d=new Zg(""),this.e=new Map}async prepareSession(e,t,i){const s=this.f.getDocument(e),r=Je.to(t),n=await this.g.prepareCallHierarchy(s,r,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,i){const s=this.j(e,t);if(!s)throw new Error("missing call hierarchy item");const r=await this.g.provideCallHierarchyIncomingCalls(s,i);if(r)return r.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>O.from(o))}))}async provideCallsFrom(e,t,i){const s=this.j(e,t);if(!s)throw new Error("missing call hierarchy item");const r=await this.g.provideCallHierarchyOutgoingCalls(s,i);if(r)return r.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>O.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),s=Go.from(t,e,i.size.toString(36));return i.set(s._itemId,t),s}j(e,t){return this.e.get(e)?.get(t)}},Ph=class{constructor(e,t){this.f=e,this.g=t,this.d=new Zg(""),this.e=new Map}async prepareSession(e,t,i){const s=this.f.getDocument(e),r=Je.to(t),n=await this.g.prepareTypeHierarchy(s,r,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,i){const s=this.j(e,t);if(!s)throw new Error("missing type hierarchy item");const r=await this.g.provideTypeHierarchySupertypes(s,i);if(r)return r.map(n=>this.h(e,n))}async provideSubtypes(e,t,i){const s=this.j(e,t);if(!s)throw new Error("missing type hierarchy item");const r=await this.g.provideTypeHierarchySubtypes(s,i);if(r)return r.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),s=Yo.from(t,e,i.size.toString(36));return i.set(s._itemId,t),s}j(e,t){return this.e.get(e)?.get(t)}},Rm=class{constructor(e,t,i,s,r){this.e=e,this.f=t,this.g=i,this.h=s,this.j=r,this.d=new Ws("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,i,s,r){const n=this.f.getDocument(t),o=Je.to(i),a=Pc.toDataTransfer(s,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,r);if(!c)return;const l=Qi(c),u=this.d.add(l);return l.map((h,f)=>({_cacheId:[u,f],title:h.title??d(2899,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(p=>p.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?qi.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[i,s]=e,r=this.d.get(i,s);if(!r||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(r,t)??r;return{additionalEdit:n.additionalEdit?qi.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},Dh=class{constructor(e,t){this.adapter=e,this.extension=t}},Oq=class Kt{static{this.d=0}constructor(t,i,s,r,n,o,a,c){this.g=i,this.h=s,this.j=r,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(Z.MainThreadLanguageFeatures)}o(t,i){return mc.from(t,this.g,i)}p(t){return new Le(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return Kt.d++}async s(t,i,s,r,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof i))return r;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${s.toString().replace(/[\r\n]/g,"")}'`);const l=s(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{Ei(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),Ye.isCancellationToken(n)?$d(l,n):l}t(t,i){const s=this.q();return this.f.set(s,new Dh(t,i)),s}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,i,s,r){const n=this.t(new KP(this.h,s),t),o=r&&r.label||Kt.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(i,t),o),this.p(n)}$provideDocumentSymbols(t,i,s){return this.s(t,KP,r=>r.provideDocumentSymbols(x.revive(i),s),void 0,s)}registerCodeLensProvider(t,i,s){const r=this.q(),n=typeof s.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(r,new Dh(new Cm(this.h,this.j.converter,s,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(r,this.o(i,t),n);let o=this.p(r);if(n!==void 0){const a=s.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=Le.from(o,a)}return o}$provideCodeLenses(t,i,s){return this.s(t,Cm,r=>r.provideCodeLenses(x.revive(i),s),void 0,s,i.scheme==="output")}$resolveCodeLens(t,i,s){return this.s(t,Cm,r=>r.resolveCodeLens(i,s),void 0,void 0,!0)}$releaseCodeLenses(t,i){this.s(t,Cm,s=>Promise.resolve(s.releaseCodeLenses(i)),void 0,void 0,!0)}registerDefinitionProvider(t,i,s){const r=this.t(new eD(this.h,s),t);return this.e.$registerDefinitionSupport(r,this.o(i,t)),this.p(r)}$provideDefinition(t,i,s,r){return this.s(t,eD,n=>n.provideDefinition(x.revive(i),s,r),[],r)}registerDeclarationProvider(t,i,s){const r=this.t(new tD(this.h,s),t);return this.e.$registerDeclarationSupport(r,this.o(i,t)),this.p(r)}$provideDeclaration(t,i,s,r){return this.s(t,tD,n=>n.provideDeclaration(x.revive(i),s,r),[],r)}registerImplementationProvider(t,i,s){const r=this.t(new iD(this.h,s),t);return this.e.$registerImplementationSupport(r,this.o(i,t)),this.p(r)}$provideImplementation(t,i,s,r){return this.s(t,iD,n=>n.provideImplementation(x.revive(i),s,r),[],r)}registerTypeDefinitionProvider(t,i,s){const r=this.t(new sD(this.h,s),t);return this.e.$registerTypeDefinitionSupport(r,this.o(i,t)),this.p(r)}$provideTypeDefinition(t,i,s,r){return this.s(t,sD,n=>n.provideTypeDefinition(x.revive(i),s,r),[],r)}registerHoverProvider(t,i,s,r){const n=this.t(new x4(this.h,s),t);return this.e.$registerHoverProvider(n,this.o(i,t)),this.p(n)}$provideHover(t,i,s,r,n){return this.s(t,x4,o=>o.provideHover(x.revive(i),s,r,n),void 0,n)}$releaseHover(t,i){this.s(t,x4,s=>Promise.resolve(s.releaseHover(i)),void 0,void 0)}registerEvaluatableExpressionProvider(t,i,s,r){const n=this.t(new rD(this.h,s),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(i,t)),this.p(n)}$provideEvaluatableExpression(t,i,s,r){return this.s(t,rD,n=>n.provideEvaluatableExpression(x.revive(i),s,r),void 0,r)}registerInlineValuesProvider(t,i,s,r){const n=typeof s.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new nD(this.h,s),t);this.e.$registerInlineValuesProvider(o,this.o(i,t),n);let a=this.p(o);if(n!==void 0){const c=s.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=Le.from(a,c)}return a}$provideInlineValues(t,i,s,r,n){return this.s(t,nD,o=>o.provideInlineValues(x.revive(i),s,r,n),void 0,n)}registerDocumentHighlightProvider(t,i,s){const r=this.t(new oD(this.h,s),t);return this.e.$registerDocumentHighlightProvider(r,this.o(i,t)),this.p(r)}registerMultiDocumentHighlightProvider(t,i,s){const r=this.t(new aD(this.h,s,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(r,this.o(i,t)),this.p(r)}$provideDocumentHighlights(t,i,s,r){return this.s(t,oD,n=>n.provideDocumentHighlights(x.revive(i),s,r),void 0,r)}$provideMultiDocumentHighlights(t,i,s,r,n){return this.s(t,aD,o=>o.provideMultiDocumentHighlights(x.revive(i),s,r.map(a=>x.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,i,s){const r=this.t(new cD(this.h,s),t);return this.e.$registerLinkedEditingRangeProvider(r,this.o(i,t)),this.p(r)}$provideLinkedEditingRanges(t,i,s,r){return this.s(t,cD,async n=>{const o=await n.provideLinkedEditingRanges(x.revive(i),s,r);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?Kt.y(o.wordPattern):void 0}},void 0,r)}registerReferenceProvider(t,i,s){const r=this.t(new lD(this.h,s),t);return this.e.$registerReferenceSupport(r,this.o(i,t)),this.p(r)}$provideReferences(t,i,s,r,n){return this.s(t,lD,o=>o.provideReferences(x.revive(i),s,r,n),void 0,n)}registerCodeActionProvider(t,i,s,r){const n=new se,o=this.t(new Im(this.h,this.j.converter,this.k,s,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(i,t),{providedKinds:r?.providedCodeActionKinds?.map(a=>a.value),documentation:r?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},Kt.u(t),Kt.w(t),!!s.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,i,s,r,n){return this.s(t,Im,o=>o.provideCodeActions(x.revive(i),s,r,n),void 0,n)}$resolveCodeAction(t,i,s){return this.s(t,Im,r=>r.resolveCodeAction(i,s),{},void 0)}$releaseCodeActions(t,i){this.s(t,Im,s=>Promise.resolve(s.releaseCodeActions(i)),void 0,void 0)}registerDocumentFormattingEditProvider(t,i,s){const r=this.t(new uD(this.h,s),t);return this.e.$registerDocumentFormattingSupport(r,this.o(i,t),t.identifier,t.displayName||t.name),this.p(r)}$provideDocumentFormattingEdits(t,i,s,r){return this.s(t,uD,n=>n.provideDocumentFormattingEdits(x.revive(i),s,r),void 0,r)}registerDocumentRangeFormattingEditProvider(t,i,s){const r=typeof s.provideDocumentRangesFormattingEdits=="function",n=this.t(new E4(this.h,s),t);return this.e.$registerRangeFormattingSupport(n,this.o(i,t),t.identifier,t.displayName||t.name,r),this.p(n)}$provideDocumentRangeFormattingEdits(t,i,s,r,n){return this.s(t,E4,o=>o.provideDocumentRangeFormattingEdits(x.revive(i),s,r,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,i,s,r,n){return this.s(t,E4,o=>o.provideDocumentRangesFormattingEdits(x.revive(i),s,r,n),void 0,n)}registerOnTypeFormattingEditProvider(t,i,s,r){const n=this.t(new hD(this.h,s),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(i,t),r,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,i,s,r,n,o){return this.s(t,hD,a=>a.provideOnTypeFormattingEdits(x.revive(i),s,r,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,i){const s=this.t(new Pm(i,this.l),t);return this.e.$registerNavigateTypeSupport(s,typeof i.resolveWorkspaceSymbol=="function"),this.p(s)}$provideWorkspaceSymbols(t,i,s){return this.s(t,Pm,r=>r.provideWorkspaceSymbols(i,s),{symbols:[]},s)}$resolveWorkspaceSymbol(t,i,s){return this.s(t,Pm,r=>r.resolveWorkspaceSymbol(i,s),void 0,void 0)}$releaseWorkspaceSymbols(t,i){this.s(t,Pm,s=>s.releaseWorkspaceSymbols(i),void 0,void 0)}registerRenameProvider(t,i,s){const r=this.t(new Dm(this.h,s,this.l),t);return this.e.$registerRenameSupport(r,this.o(i,t),Dm.supportsResolving(s)),this.p(r)}$provideRenameEdits(t,i,s,r,n){return this.s(t,Dm,o=>o.provideRenameEdits(x.revive(i),s,r,n),void 0,n)}$resolveRenameLocation(t,i,s,r){return this.s(t,Dm,n=>n.resolveRenameLocation(x.revive(i),s,r),void 0,r)}registerNewSymbolNamesProvider(t,i,s){const r=this.t(new k4(this.h,s,this.l),t);return this.e.$registerNewSymbolNamesProvider(r,this.o(i,t)),this.p(r)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,k4,i=>i.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,i,s,r,n){return this.s(t,k4,o=>o.provideNewSymbolNames(x.revive(i),s,r,n),void 0,n)}registerDocumentSemanticTokensProvider(t,i,s,r){const n=this.t(new C4(this.h,s),t),o=typeof s.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(i,t),r,o);let a=this.p(n);if(o){const c=s.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Le.from(a,c)}return a}$provideDocumentSemanticTokens(t,i,s,r){return this.s(t,C4,n=>n.provideDocumentSemanticTokens(x.revive(i),s,r),null,r)}$releaseDocumentSemanticTokens(t,i){this.s(t,C4,s=>s.releaseDocumentSemanticColoring(i),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,i,s,r){const n=this.t(new dD(this.h,s),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(i,t),r),this.p(n)}$provideDocumentRangeSemanticTokens(t,i,s,r){return this.s(t,dD,n=>n.provideDocumentRangeSemanticTokens(x.revive(i),s,r),null,r)}registerCompletionItemProvider(t,i,s,r){const n=this.t(new $h(this.h,this.j.converter,s,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(i,t),r,$h.supportsResolving(s),t.identifier),this.p(n)}$provideCompletionItems(t,i,s,r,n){return this.s(t,$h,o=>o.provideCompletionItems(x.revive(i),s,r,n),void 0,n)}$resolveCompletionItem(t,i,s){return this.s(t,$h,r=>r.resolveCompletionItem(i,s),void 0,s)}$releaseCompletionItems(t,i){this.s(t,$h,s=>s.releaseCompletionItems(i),void 0,void 0)}registerInlineCompletionsProvider(t,i,s,r){const n=typeof s.onDidChange=="function"&&tt(t,"inlineCompletionsAdditions")?this.q():void 0,o=new Gn(t,this.h,s,this.j.converter),a=this.t(o,t);let c=this.p(a);if(n!==void 0){const l=s.onDidChange(u=>this.e.$emitInlineCompletionsChange(n));c=Le.from(c,l)}return this.e.$registerInlineCompletionsSupport(a,this.o(i,t),o.supportsHandleEvents,qe.toKey(t.identifier.value),r?.yieldTo?.map(l=>qe.toKey(l))||[],r?.displayName,r?.debounceDelayMs,n),c}$provideInlineCompletions(t,i,s,r,n){return this.s(t,Gn,o=>o.provideInlineCompletions(x.revive(i),s,r,n),void 0,n)}$provideInlineEditsForRange(t,i,s,r,n){return this.s(t,Gn,o=>o.provideInlineEditsForRange(x.revive(i),s,r,n),void 0,n)}$handleInlineCompletionDidShow(t,i,s,r){this.s(t,Gn,async n=>{n.handleDidShowCompletionItem(i,s,r)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,i,s,r,n){this.s(t,Gn,async o=>{o.handlePartialAccept(i,s,r,n)},void 0,void 0)}$handleInlineCompletionEndOfLifetime(t,i,s,r){this.s(t,Gn,async n=>{n.handleEndOfLifetime(i,s,r)},void 0,void 0)}$handleInlineCompletionRejection(t,i,s){this.s(t,Gn,async r=>{r.handleRejection(i,s)},void 0,void 0)}$freeInlineCompletionsList(t,i){this.s(t,Gn,async s=>{s.disposeCompletions(i)},void 0,void 0)}registerInlineEditProvider(t,i,s){const r=new $4(t,this.h,s,this.j.converter),n=this.t(r,t);return this.e.$registerInlineEditProvider(n,this.o(i,t),t.identifier,s.displayName||t.name),this.p(n)}$provideInlineEdit(t,i,s,r){return this.s(t,$4,n=>n.provideInlineEdits(x.revive(i),s,r),void 0,r)}$freeInlineEdit(t,i){this.s(t,$4,async s=>{s.disposeEdit(i)},void 0,void 0)}registerSignatureHelpProvider(t,i,s,r){const n=Array.isArray(r)?{triggerCharacters:r,retriggerCharacters:[]}:r,o=this.t(new I4(this.h,s),t);return this.e.$registerSignatureHelpProvider(o,this.o(i,t),n),this.p(o)}$provideSignatureHelp(t,i,s,r,n){return this.s(t,I4,o=>o.provideSignatureHelp(x.revive(i),s,r,n),void 0,n)}$releaseSignatureHelp(t,i){this.s(t,I4,s=>s.releaseSignatureHelp(i),void 0,void 0)}registerInlayHintsProvider(t,i,s){const r=typeof s.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new Am(this.h,this.j.converter,s,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(i,t),typeof s.resolveInlayHint=="function",r,Kt.u(t));let o=this.p(n);if(r!==void 0){const a=s.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(r));o=Le.from(o,a)}return o}$provideInlayHints(t,i,s,r){return this.s(t,Am,n=>n.provideInlayHints(x.revive(i),s,r),void 0,r)}$resolveInlayHint(t,i,s){return this.s(t,Am,r=>r.resolveInlayHint(i,s),void 0,s)}$releaseInlayHints(t,i){this.s(t,Am,s=>s.releaseHints(i),void 0,void 0)}registerDocumentLinkProvider(t,i,s){const r=this.t(new Tm(this.h,s),t);return this.e.$registerDocumentLinkProvider(r,this.o(i,t),typeof s.resolveDocumentLink=="function"),this.p(r)}$provideDocumentLinks(t,i,s){return this.s(t,Tm,r=>r.provideLinks(x.revive(i),s),void 0,s,i.scheme==="output")}$resolveDocumentLink(t,i,s){return this.s(t,Tm,r=>r.resolveLink(i,s),void 0,void 0,!0)}$releaseDocumentLinks(t,i){this.s(t,Tm,s=>s.releaseLinks(i),void 0,void 0,!0)}registerColorProvider(t,i,s){const r=this.t(new P4(this.h,s),t);return this.e.$registerDocumentColorProvider(r,this.o(i,t)),this.p(r)}$provideDocumentColors(t,i,s){return this.s(t,P4,r=>r.provideColors(x.revive(i),s),[],s)}$provideColorPresentations(t,i,s,r){return this.s(t,P4,n=>n.provideColorPresentations(x.revive(i),s,r),void 0,r)}registerFoldingRangeProvider(t,i,s){const r=this.q(),n=typeof s.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(r,new Dh(new pD(this.h,s),t)),this.e.$registerFoldingRangeProvider(r,this.o(i,t),t.identifier,n);let o=this.p(r);if(n!==void 0){const a=s.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=Le.from(o,a)}return o}$provideFoldingRanges(t,i,s,r){return this.s(t,pD,n=>n.provideFoldingRanges(x.revive(i),s,r),void 0,r)}registerSelectionRangeProvider(t,i,s){const r=this.t(new gD(this.h,s,this.l),t);return this.e.$registerSelectionRangeProvider(r,this.o(i,t)),this.p(r)}$provideSelectionRanges(t,i,s,r){return this.s(t,gD,n=>n.provideSelectionRanges(x.revive(i),s,r),[],r)}registerCallHierarchyProvider(t,i,s){const r=this.t(new Ih(this.h,s),t);return this.e.$registerCallHierarchyProvider(r,this.o(i,t)),this.p(r)}$prepareCallHierarchy(t,i,s,r){return this.s(t,Ih,n=>Promise.resolve(n.prepareSession(x.revive(i),s,r)),void 0,r)}$provideCallHierarchyIncomingCalls(t,i,s,r){return this.s(t,Ih,n=>n.provideCallsTo(i,s,r),void 0,r)}$provideCallHierarchyOutgoingCalls(t,i,s,r){return this.s(t,Ih,n=>n.provideCallsFrom(i,s,r),void 0,r)}$releaseCallHierarchy(t,i){this.s(t,Ih,s=>Promise.resolve(s.releaseSession(i)),void 0,void 0)}registerTypeHierarchyProvider(t,i,s){const r=this.t(new Ph(this.h,s),t);return this.e.$registerTypeHierarchyProvider(r,this.o(i,t)),this.p(r)}$prepareTypeHierarchy(t,i,s,r){return this.s(t,Ph,n=>Promise.resolve(n.prepareSession(x.revive(i),s,r)),void 0,r)}$provideTypeHierarchySupertypes(t,i,s,r){return this.s(t,Ph,n=>n.provideSupertypes(i,s,r),void 0,r)}$provideTypeHierarchySubtypes(t,i,s,r){return this.s(t,Ph,n=>n.provideSubtypes(i,s,r),void 0,r)}$releaseTypeHierarchy(t,i){this.s(t,Ph,s=>Promise.resolve(s.releaseSession(i)),void 0,void 0)}registerDocumentOnDropEditProvider(t,i,s,r){const n=this.q();return this.f.set(n,new Dh(new Rm(this.e,this.h,s,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(i,t),r?{supportsResolve:!!s.resolveDocumentDropEdit,dropMimeTypes:r.dropMimeTypes,providedDropKinds:r.providedDropEditKinds?.map(o=>o.value)}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,i,s,r,n,o){return this.s(t,Rm,a=>Promise.resolve(a.provideDocumentOnDropEdits(i,x.revive(s),r,n,o)),void 0,void 0)}$resolveDropEdit(t,i,s){return this.s(t,Rm,r=>r.resolveDropEdit(i,s),{},void 0)}$releaseDocumentOnDropEdits(t,i){this.s(t,Rm,s=>Promise.resolve(s.releaseDropEdits(i)),void 0,void 0)}registerDocumentPasteEditProvider(t,i,s,r){const n=this.q();return this.f.set(n,new Dh(new Ch(this.e,this.h,s,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(i,t),{supportsCopy:!!s.prepareDocumentPaste,supportsPaste:!!s.provideDocumentPasteEdits,supportsResolve:!!s.resolveDocumentPasteEdit,providedPasteEditKinds:r.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:r.copyMimeTypes,pasteMimeTypes:r.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,i,s,r,n){return this.s(t,Ch,o=>o.prepareDocumentPaste(x.revive(i),s,r,n),void 0,n)}$providePasteEdits(t,i,s,r,n,o,a){return this.s(t,Ch,c=>c.providePasteEdits(i,x.revive(s),r,n,o,a),void 0,a)}$resolvePasteEdit(t,i,s){return this.s(t,Ch,r=>r.resolvePasteEdit(i,s),{},void 0)}$releasePasteEdits(t,i){this.s(t,Ch,s=>Promise.resolve(s.releasePasteEdits(i)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:Kt.y(t.decreaseIndentPattern),increaseIndentPattern:Kt.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?Kt.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?Kt.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:Kt.y(t.beforeText),afterText:t.afterText?Kt.y(t.afterText):void 0,previousLineText:t.previousLineText?Kt.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(Kt.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(i=>tc.toString(i)):void 0}}static E(t){return t.map(Kt.D)}setLanguageConfiguration(t,i,s){const{wordPattern:r}=s;if(r&&qx(r))throw new Error(`Invalid language configuration: wordPattern '${r}' is not allowed to match the empty string.`);r?this.h.setWordDefinitionFor(i,r):this.h.setWordDefinitionFor(i,void 0),s.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),s.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:s.comments,brackets:s.brackets,wordPattern:s.wordPattern?Kt.y(s.wordPattern):void 0,indentationRules:s.indentationRules?Kt.z(s.indentationRules):void 0,onEnterRules:s.onEnterRules?Kt.C(s.onEnterRules):void 0,__electricCharacterSupport:s.__electricCharacterSupport,__characterPairSupport:s.__characterPairSupport,autoClosingPairs:s.autoClosingPairs?Kt.E(s.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,i,o),this.p(n)}$setWordDefinitions(t){for(const i of t)this.h.setWordDefinitionFor(i.languageId,new RegExp(i.regexSource,i.regexFlags))}},Lm;(function(e){e.Internal={type:"internal",label:"Built-In"};function t(r){switch(r.type){case"extension":return`extension:${r.extensionId.value}`;case"mcp":return`mcp:${r.collectionId}:${r.definitionId}`;case"user":return`user:${r.file.toString()}`;case"internal":return"internal"}}e.toKey=t;function i(r,n){return t(r)===t(n)}e.equals=i;function s(r){return r.type==="internal"?{ordinal:1,label:d(5712,null)}:r.type==="mcp"?{ordinal:2,label:d(5713,null,r.label)}:r.type==="user"?{ordinal:0,label:d(5714,null)}:{ordinal:3,label:d(5715,null,r.label)}}e.classify=s})(Lm||(Lm={}));function Fq(e){return typeof e=="object"&&typeof e.sessionId=="string"}var Uq=q("ILanguageModelToolsService"),jq=q("notebookService"),Bq=q("codeMapperService"),mD="vscode_editFile",D4="vscode_editFile_internal",vD={id:D4,displayName:"",modelDescription:"",source:Lm.Internal},A4=class{constructor(t,i,s){this.a=t,this.b=i,this.c=s}async invoke(t,i,s,r){if(!t.context)throw new Error("toolInvocationToken is required for this tool");const n=t.parameters,o=x.revive(n.uri),a=ff.parse(o)?.notebook||o,c=this.a.getSession(t.context?.sessionId),l=c.getRequests().at(-1);c.acceptResponseProgress(l,{kind:"markdownContent",content:new Na("\n````\n")}),c.acceptResponseProgress(l,{kind:"codeblockUri",uri:a,isEdit:!0}),c.acceptResponseProgress(l,{kind:"markdownContent",content:new Na("\n````\n")}),this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",edits:[],uri:a}):c.acceptResponseProgress(l,{kind:"textEdit",edits:[],uri:a});const u=c.editingSession;if(!u)throw new Error("This tool must be called from within an editing session");const h=await this.b.mapCode({codeBlocks:[{code:n.code,resource:a,markdownBeforeBlock:n.explanation}],location:"tool",chatRequestId:t.chatRequestId,chatRequestModel:t.modelId,chatSessionId:t.context.sessionId},{textEdit:(p,g)=>{c.acceptResponseProgress(l,{kind:"textEdit",uri:p,edits:g})},notebookEdit(p,g){c.acceptResponseProgress(l,{kind:"notebookEdit",uri:p,edits:g})}},r);if(this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",uri:a,edits:[],done:!0}):c.acceptResponseProgress(l,{kind:"textEdit",uri:a,edits:[],done:!0}),h?.errorMessage)throw new Error(h.errorMessage);let f;return await new Promise(p=>{let g=!1;f=u8(v=>{const E=u.entries.read(v)?.find(k=>k.modifiedURI.toString()===a.toString());E&&(E.isCurrentlyBeingModifiedBy.read(v)?g=!0:g&&p(!0))})}).finally(()=>{f.dispose()}),{content:[{kind:"text",value:"The file was edited successfully"}]}}async prepareToolInvocation(t,i){return{presentation:"hidden"}}};A4=__decorate([__param(0,Dj),__param(1,Bq),__param(2,jq)],A4);var wD=class extends X{static{this.ID="chat.builtinTools"}constructor(t,i){super();const s=i.createInstance(A4);this.B(t.registerToolData(vD)),this.B(t.registerToolImplementation(vD.id,s))}};wD=__decorate([__param(0,Uq),__param(1,Dl)],wD);var Hq="vscode_fetchWebPage_internal",bD=q("commandService"),T4=new class{constructor(){this.a=new Map,this.b=new D,this.onDidRegisterCommand=this.b.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if(typeof e=="string"){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){const o=[];for(const c of e.metadata.args)o.push(c.constraint);const a=e.handler;e.handler=function(c,...l){return vT(l,o),a(c,...l)}}const{id:i}=e;let s=this.a.get(i);s||(s=new hn,this.a.set(i,s));const r=s.unshift(e),n=ie(()=>{r(),this.a.get(i)?.isEmpty()&&this.a.delete(i)});return this.b.fire(i),A1(n)}registerCommandAlias(e,t){return T4.registerCommand(e,(i,...s)=>i.get(bD).executeCommand(t,...s))}getCommand(e){const t=this.a.get(e);if(!(!t||t.isEmpty()))return Zt.first(t)}getCommands(){const e=new Map;for(const t of this.a.keys()){const i=this.getCommand(t);i&&e.set(t,i)}return e}};T4.registerCommand("noop",()=>{});var yD;(function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"})(yD||(yD={}));function xD(e,t){if(typeof e=="number"){if(e===0)return null;const i=(e&65535)>>>0,s=(e&4294901760)>>>16;return s!==0?new Mm([Nm(i,t),Nm(s,t)]):new Mm([Nm(i,t)])}else{const i=[];for(let s=0;s<e.length;s++)i.push(Nm(e[s],t));return new Mm(i)}}function Nm(e,t){const i=!!(e&2048),s=!!(e&256),r=t===2?s:i,n=!!(e&1024),o=!!(e&512),a=t===2?i:s,c=e&255;return new zq(r,n,o,a,c)}var zq=class n2{constructor(t,i,s,r,n){this.ctrlKey=t,this.shiftKey=i,this.altKey=s,this.metaKey=r,this.keyCode=n}equals(t){return t instanceof n2&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){const t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",s=this.altKey?"1":"0",r=this.metaKey?"1":"0";return`K${t}${i}${s}${r}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Mm([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},Mm=class{constructor(e){if(e.length===0)throw Ie("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}},ED;(function(e){e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension"})(ED||(ED={}));var Wq=class o2{constructor(){this.c=new hn,this.d=[],this.e=null}static f(t){if(ro===1){if(t&&t.win)return t.win}else if(ro===2){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}registerKeybindingRule(t){const i=o2.f(t),s=new se;if(i&&i.primary){const r=xD(i.primary,ro);r&&s.add(this.g(r,t.id,t.args,t.weight,0,t.when))}if(i&&Array.isArray(i.secondary))for(let r=0,n=i.secondary.length;r<n;r++){const o=i.secondary[r],a=xD(o,ro);a&&s.add(this.g(a,t.id,t.args,t.weight,-r-1,t.when))}return s}setExtensionKeybindings(t){const i=[];let s=0;for(const r of t)r.keybinding&&(i[s++]={keybinding:r.keybinding,command:r.id,commandArgs:r.args,when:r.when,weight1:r.weight,weight2:0,extensionId:r.extensionId||null,isBuiltinExtension:r.isBuiltinExtension||!1});this.d=i,this.e=null}registerCommandAndKeybindingRule(t){return T1(this.registerKeybindingRule(t),T4.registerCommand(t))}g(t,i,s,r,n,o){const a=this.c.push({keybinding:t,command:i,commandArgs:s,when:o,weight1:r,weight2:n,extensionId:null,isBuiltinExtension:!1});return this.e=null,ie(()=>{a(),this.e=null})}getDefaultKeybindings(){return this.e||(this.e=Array.from(this.c).concat(this.d),this.e.sort(qq)),this.e.slice(0)}},Vq=new Wq,_q={EditorModes:"platform.keybindingsRegistry"};Xt.add(_q.EditorModes,Vq);function qq(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}var Om;function Gq(e){return e.command!==void 0}var Ah=class A{static{this.a=new Map}static{this.CommandPalette=new A("CommandPalette")}static{this.DebugBreakpointsContext=new A("DebugBreakpointsContext")}static{this.DebugCallStackContext=new A("DebugCallStackContext")}static{this.DebugConsoleContext=new A("DebugConsoleContext")}static{this.DebugVariablesContext=new A("DebugVariablesContext")}static{this.NotebookVariablesContext=new A("NotebookVariablesContext")}static{this.DebugHoverContext=new A("DebugHoverContext")}static{this.DebugWatchContext=new A("DebugWatchContext")}static{this.DebugToolBar=new A("DebugToolBar")}static{this.DebugToolBarStop=new A("DebugToolBarStop")}static{this.DebugDisassemblyContext=new A("DebugDisassemblyContext")}static{this.DebugCallStackToolbar=new A("DebugCallStackToolbar")}static{this.DebugCreateConfiguration=new A("DebugCreateConfiguration")}static{this.EditorContext=new A("EditorContext")}static{this.SimpleEditorContext=new A("SimpleEditorContext")}static{this.EditorContent=new A("EditorContent")}static{this.EditorLineNumberContext=new A("EditorLineNumberContext")}static{this.EditorContextCopy=new A("EditorContextCopy")}static{this.EditorContextPeek=new A("EditorContextPeek")}static{this.EditorContextShare=new A("EditorContextShare")}static{this.EditorTitle=new A("EditorTitle")}static{this.CompactWindowEditorTitle=new A("CompactWindowEditorTitle")}static{this.EditorTitleRun=new A("EditorTitleRun")}static{this.EditorTitleContext=new A("EditorTitleContext")}static{this.EditorTitleContextShare=new A("EditorTitleContextShare")}static{this.EmptyEditorGroup=new A("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new A("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new A("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new A("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new A("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new A("EditorActionsPositionSubmenu")}static{this.ExplorerContext=new A("ExplorerContext")}static{this.ExplorerContextShare=new A("ExplorerContextShare")}static{this.ExtensionContext=new A("ExtensionContext")}static{this.ExtensionEditorContextMenu=new A("ExtensionEditorContextMenu")}static{this.GlobalActivity=new A("GlobalActivity")}static{this.CommandCenter=new A("CommandCenter")}static{this.CommandCenterCenter=new A("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new A("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new A("LayoutControlMenu")}static{this.MenubarMainMenu=new A("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new A("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new A("MenubarDebugMenu")}static{this.MenubarEditMenu=new A("MenubarEditMenu")}static{this.MenubarCopy=new A("MenubarCopy")}static{this.MenubarFileMenu=new A("MenubarFileMenu")}static{this.MenubarGoMenu=new A("MenubarGoMenu")}static{this.MenubarHelpMenu=new A("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new A("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new A("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new A("PanelAlignmentMenu")}static{this.PanelPositionMenu=new A("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new A("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new A("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new A("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new A("MenubarSelectionMenu")}static{this.MenubarShare=new A("MenubarShare")}static{this.MenubarSwitchEditorMenu=new A("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new A("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new A("MenubarTerminalMenu")}static{this.MenubarTerminalSuggestStatusMenu=new A("MenubarTerminalSuggestStatusMenu")}static{this.MenubarViewMenu=new A("MenubarViewMenu")}static{this.MenubarHomeMenu=new A("MenubarHomeMenu")}static{this.OpenEditorsContext=new A("OpenEditorsContext")}static{this.OpenEditorsContextShare=new A("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new A("ProblemsPanelContext")}static{this.SCMInputBox=new A("SCMInputBox")}static{this.SCMChangeContext=new A("SCMChangeContext")}static{this.SCMResourceContext=new A("SCMResourceContext")}static{this.SCMResourceContextShare=new A("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new A("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new A("SCMResourceGroupContext")}static{this.SCMSourceControl=new A("SCMSourceControl")}static{this.SCMSourceControlInline=new A("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new A("SCMSourceControlTitle")}static{this.SCMHistoryTitle=new A("SCMHistoryTitle")}static{this.SCMHistoryItemContext=new A("SCMHistoryItemContext")}static{this.SCMHistoryItemChatContext=new A("SCMHistoryItemChatContext")}static{this.SCMHistoryItemChangeContext=new A("SCMHistoryItemChangeContext")}static{this.SCMHistoryItemHover=new A("SCMHistoryItemHover")}static{this.SCMHistoryItemRefContext=new A("SCMHistoryItemRefContext")}static{this.SCMQuickDiffDecorations=new A("SCMQuickDiffDecorations")}static{this.SCMTitle=new A("SCMTitle")}static{this.SearchContext=new A("SearchContext")}static{this.SearchActionMenu=new A("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new A("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new A("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new A("StickyScrollContext")}static{this.TestItem=new A("TestItem")}static{this.TestItemGutter=new A("TestItemGutter")}static{this.TestProfilesContext=new A("TestProfilesContext")}static{this.TestMessageContext=new A("TestMessageContext")}static{this.TestMessageContent=new A("TestMessageContent")}static{this.TestPeekElement=new A("TestPeekElement")}static{this.TestPeekTitle=new A("TestPeekTitle")}static{this.TestCallStack=new A("TestCallStack")}static{this.TestCoverageFilterItem=new A("TestCoverageFilterItem")}static{this.TouchBarContext=new A("TouchBarContext")}static{this.TitleBar=new A("TitleBar")}static{this.TitleBarContext=new A("TitleBarContext")}static{this.TitleBarTitleContext=new A("TitleBarTitleContext")}static{this.TunnelContext=new A("TunnelContext")}static{this.TunnelPrivacy=new A("TunnelPrivacy")}static{this.TunnelProtocol=new A("TunnelProtocol")}static{this.TunnelPortInline=new A("TunnelInline")}static{this.TunnelTitle=new A("TunnelTitle")}static{this.TunnelLocalAddressInline=new A("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new A("TunnelOriginInline")}static{this.ViewItemContext=new A("ViewItemContext")}static{this.ViewContainerTitle=new A("ViewContainerTitle")}static{this.ViewContainerTitleContext=new A("ViewContainerTitleContext")}static{this.ViewTitle=new A("ViewTitle")}static{this.ViewTitleContext=new A("ViewTitleContext")}static{this.CommentEditorActions=new A("CommentEditorActions")}static{this.CommentThreadTitle=new A("CommentThreadTitle")}static{this.CommentThreadActions=new A("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new A("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new A("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new A("CommentThreadCommentContext")}static{this.CommentTitle=new A("CommentTitle")}static{this.CommentActions=new A("CommentActions")}static{this.CommentsViewThreadActions=new A("CommentsViewThreadActions")}static{this.InteractiveToolbar=new A("InteractiveToolbar")}static{this.InteractiveCellTitle=new A("InteractiveCellTitle")}static{this.InteractiveCellDelete=new A("InteractiveCellDelete")}static{this.InteractiveCellExecute=new A("InteractiveCellExecute")}static{this.InteractiveInputExecute=new A("InteractiveInputExecute")}static{this.InteractiveInputConfig=new A("InteractiveInputConfig")}static{this.ReplInputExecute=new A("ReplInputExecute")}static{this.IssueReporter=new A("IssueReporter")}static{this.NotebookToolbar=new A("NotebookToolbar")}static{this.NotebookToolbarContext=new A("NotebookToolbarContext")}static{this.NotebookStickyScrollContext=new A("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new A("NotebookCellTitle")}static{this.NotebookCellDelete=new A("NotebookCellDelete")}static{this.NotebookCellInsert=new A("NotebookCellInsert")}static{this.NotebookCellBetween=new A("NotebookCellBetween")}static{this.NotebookCellListTop=new A("NotebookCellTop")}static{this.NotebookCellExecute=new A("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new A("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new A("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new A("NotebookDiffCellInputTitle")}static{this.NotebookDiffDocumentMetadata=new A("NotebookDiffDocumentMetadata")}static{this.NotebookDiffCellMetadataTitle=new A("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new A("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new A("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new A("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new A("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new A("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new A("NotebookKernelSource")}static{this.BulkEditTitle=new A("BulkEditTitle")}static{this.BulkEditContext=new A("BulkEditContext")}static{this.TimelineItemContext=new A("TimelineItemContext")}static{this.TimelineTitle=new A("TimelineTitle")}static{this.TimelineTitleContext=new A("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new A("TimelineFilterSubMenu")}static{this.AccountsContext=new A("AccountsContext")}static{this.SidebarTitle=new A("SidebarTitle")}static{this.PanelTitle=new A("PanelTitle")}static{this.AuxiliaryBarTitle=new A("AuxiliaryBarTitle")}static{this.AuxiliaryBarHeader=new A("AuxiliaryBarHeader")}static{this.TerminalInstanceContext=new A("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new A("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new A("TerminalNewDropdownContext")}static{this.TerminalTabContext=new A("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new A("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new A("TerminalStickyScrollContext")}static{this.WebviewContext=new A("WebviewContext")}static{this.InlineCompletionsActions=new A("InlineCompletionsActions")}static{this.InlineEditsActions=new A("InlineEditsActions")}static{this.NewFile=new A("NewFile")}static{this.MergeInput1Toolbar=new A("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new A("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new A("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new A("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new A("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new A("InlineEditToolbar")}static{this.ChatContext=new A("ChatContext")}static{this.ChatCodeBlock=new A("ChatCodeblock")}static{this.ChatCompareBlock=new A("ChatCompareBlock")}static{this.ChatMessageTitle=new A("ChatMessageTitle")}static{this.ChatMessageFooter=new A("ChatMessageFooter")}static{this.ChatExecute=new A("ChatExecute")}static{this.ChatExecuteSecondary=new A("ChatExecuteSecondary")}static{this.ChatInput=new A("ChatInput")}static{this.ChatInputSide=new A("ChatInputSide")}static{this.ChatModelPicker=new A("ChatModelPicker")}static{this.ChatModePicker=new A("ChatModePicker")}static{this.ChatEditingWidgetToolbar=new A("ChatEditingWidgetToolbar")}static{this.ChatEditingEditorContent=new A("ChatEditingEditorContent")}static{this.ChatEditingEditorHunk=new A("ChatEditingEditorHunk")}static{this.ChatEditingDeletedNotebookCell=new A("ChatEditingDeletedNotebookCell")}static{this.ChatInputAttachmentToolbar=new A("ChatInputAttachmentToolbar")}static{this.ChatEditingWidgetModifiedFilesToolbar=new A("ChatEditingWidgetModifiedFilesToolbar")}static{this.ChatInputResourceAttachmentContext=new A("ChatInputResourceAttachmentContext")}static{this.ChatInputSymbolAttachmentContext=new A("ChatInputSymbolAttachmentContext")}static{this.ChatInlineResourceAnchorContext=new A("ChatInlineResourceAnchorContext")}static{this.ChatInlineSymbolAnchorContext=new A("ChatInlineSymbolAnchorContext")}static{this.ChatEditingCodeBlockContext=new A("ChatEditingCodeBlockContext")}static{this.ChatTitleBarMenu=new A("ChatTitleBarMenu")}static{this.ChatAttachmentsContext=new A("ChatAttachmentsContext")}static{this.ChatToolOutputResourceToolbar=new A("ChatToolOutputResourceToolbar")}static{this.ChatExplorerMenu=new A("ChatExplorerMenu")}static{this.ChatTextEditorMenu=new A("ChatTextEditorMenu")}static{this.ChatTerminalMenu=new A("ChatTerminalMenu")}static{this.ChatToolOutputResourceContext=new A("ChatToolOutputResourceContext")}static{this.AccessibleView=new A("AccessibleView")}static{this.MultiDiffEditorFileToolbar=new A("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new A("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new A("DiffEditorSelectionToolbar")}static for(t){return A.a.get(t)??new A(t)}constructor(t){if(A.a.has(t))throw new TypeError(`MenuId with identifier '${t}' already exists. Use MenuId.for(ident) or a unique identifier`);A.a.set(t,this),this.id=t}},lne=q("menuService"),Th=class Q5{static{this.a=new Map}static for(t){let i=this.a.get(t);return i||(i=new Q5(t),this.a.set(t,i)),i}static merge(t){const i=new Set;for(const s of t)s instanceof Q5&&i.add(s.b);return i}constructor(t){this.b=t,this.has=i=>i===t}},une=new class{constructor(){this.a=new Map,this.b=new Map,this.c=new TT({merge:Th.merge}),this.onDidChangeMenu=this.c.event}addCommand(e){return this.a.set(e.id,e),this.c.fire(Th.for(Ah.CommandPalette)),A1(ie(()=>{this.a.delete(e.id)&&this.c.fire(Th.for(Ah.CommandPalette))}))}getCommand(e){return this.a.get(e)}getCommands(){const e=new Map;return this.a.forEach((t,i)=>e.set(i,t)),e}appendMenuItem(e,t){let i=this.b.get(e);i||(i=new hn,this.b.set(e,i));const s=i.push(t);return this.c.fire(Th.for(e)),A1(ie(()=>{s(),this.c.fire(Th.for(e))}))}appendMenuItems(e){const t=new se;for(const{id:i,item:s}of e)t.add(this.appendMenuItem(i,s));return t}getMenuItems(e){let t;return this.b.has(e)?t=[...this.b.get(e)]:t=[],e===Ah.CommandPalette&&this.d(t),t}d(e){const t=new Set;for(const i of e)Gq(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this.a.forEach((i,s)=>{t.has(s)||e.push({command:i})})}},kD=Om=class{static label(t,i){return i?.renderShortTitle&&t.shortTitle?typeof t.shortTitle=="string"?t.shortTitle:t.shortTitle.value:typeof t.title=="string"?t.title:t.title.value}constructor(t,i,s,r,n,o,a){this.hideActions=r,this.menuKeybinding=n,this.b=a,this.id=t.id,this.label=Om.label(t,s),this.tooltip=(typeof t.tooltip=="string"?t.tooltip:t.tooltip?.value)??"",this.enabled=!t.precondition||o.contextMatchesRules(t.precondition),this.checked=void 0;let c;if(t.toggled){const l=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=o.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),this.checked&&Ut.isThemeIcon(l.icon)&&(c=l.icon),this.checked&&l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}c||(c=Ut.isThemeIcon(t.icon)?t.icon:void 0),this.item=t,this.alt=i?new Om(i,void 0,s,r,void 0,o,a):void 0,this.a=s,this.class=c&&Ut.asClassName(c)}run(...t){let i=[];return this.a?.arg&&(i=[...i,this.a.arg]),this.a?.shouldForwardArgs&&(i=[...i,...t]),this.b.executeCommand(this.id,...i)}};kD=Om=__decorate([__param(5,Wd),__param(6,bD)],kD);var dne=fd(7654,"Extensions"),SD;(function(e){e[e.Installing=0]="Installing",e[e.Installed=1]="Installed",e[e.Uninstalling=2]="Uninstalling",e[e.Uninstalled=3]="Uninstalled"})(SD||(SD={}));var CD;(function(e){e.ReloadWindow="reloadWindow",e.RestartExtensions="restartExtensions",e.DownloadUpdate="downloadUpdate",e.ApplyUpdate="applyUpdate",e.QuitAndInstall="quitAndInstall"})(CD||(CD={}));var $D=q("extensionsWorkbenchService"),ID;(function(e){e.Readme="readme",e.Features="features",e.Changelog="changelog",e.Dependencies="dependencies",e.ExtensionPack="extensionPack"})(ID||(ID={}));var PD=class extends X{constructor(t,i){super(),this.a=t,this.B(i.onChange(this.b,this))}set extension(t){this.a.forEach(i=>i.extension=t)}b(t){for(const i of this.a)t&&i.extension?Qj(i.extension.identifier,t.identifier)&&(i.extension.server&&t.server&&i.extension.server!==t.server?i.updateWhenCounterExtensionChanges&&i.update():i.extension=t):i.update()}};PD=__decorate([__param(1,$D)],PD);var pne=new $("defaultExtensionViews",!0),gne=new $("hasOutdatedExtensions",!1),mne=new $("hasGallery",!1),vne=new $("extensionResultListFocused ",!0),wne=new $("searchMcpServers",!1),bne=new Ah("extensionsSearchActionsMenu"),yne=new Ah("extensionsFilterSubMenu"),DD="vscode_searchExtensions_internal",xne={id:DD,toolReferenceName:"extensions",canBeReferencedInPrompt:!0,icon:Ut.fromId(le.extensions.id),displayName:d(7675,null),modelDescription:d(7676,null),userDescription:d(7677,null),source:Lm.Internal,inputSchema:{type:"object",properties:{category:{type:"string",description:"The category of extensions to search for",enum:tS},keywords:{type:"array",items:{type:"string"},description:"The keywords to search for"},ids:{type:"array",items:{type:"string"},description:"The ids of the extensions to search for"}}}},AD=class{constructor(t){this.a=t}async invoke(t,i,s,r){const n=t.parameters;if(!n.keywords?.length&&!n.category&&!n.ids?.length)return{content:[{kind:"text",value:d(7678,null)}]};const o=new Map,a=u=>{for(const h of u)h.deprecationInfo||h.isMalicious||o.set(h.identifier.id.toLowerCase(),{id:h.identifier.id,name:h.displayName,description:h.description,installed:h.state===1,installCount:h.installCount??0,rating:h.rating??0,categories:h.categories??[],tags:h.gallery?.tags??[]})},c=async u=>{const h=await this.a.queryGallery({text:u,pageSize:10,sortBy:"InstallCount"},r);h.firstPage.length&&a(h.firstPage)};if(n.ids?.length){const u=await this.a.getExtensions(n.ids.map(h=>({id:h})),r);a(u)}if(n.keywords?.length)for(const u of n.keywords??[])if(u==="featured")await c("featured");else{let h=n.category?`category:"${n.category}"`:"";h=u?`${h} ${u}`.trim():h,await c(h)}else await c(`category:"${n.category}"`);const l=Array.from(o.values());return{content:[{kind:"text",value:`Here are the list of extensions:
${JSON.stringify(l)}
. Important: Use the following format to display extensions to the user because there is a renderer available to parse these extensions in this format and display them with all details. So, do not describe about the extensions to the user.
\`\`\`vscode-extensions
extensionId1,extensionId2
\`\`\`
.`}],toolResultDetails:{input:JSON.stringify(n),output:[{isText:!0,value:JSON.stringify(l.map(u=>u.id))}]}}}};AD=__decorate([__param(0,$D)],AD);var TD=class{constructor(e){this.a=e}update(e){this.a=e}get data(){return this.a}get apiObject(){if(!this.b){const e=this;this.b=Object.freeze({get name(){return e.a.id},get description(){return e.a.modelDescription},get inputSchema(){return e.a.inputSchema},get tags(){return e.a.tags??[]}})}return this.b}},Jq=class{constructor(e,t){this.e=t,this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(Z.MainThreadLanguageModelTools),this.b.$getTools().then(i=>{for(const s of i)this.d.set(s.id,new TD(Et(s)))})}async $countTokensForInvocation(e,t,i){const s=this.c.get(e);if(!s)throw new Error(`Tool invocation call ${e} not found`);return await s(t,i)}async invokeTool(e,t,i,s){const r=ut();i.tokenizationOptions&&this.c.set(r,i.tokenizationOptions.countTokens);try{if(i.toolInvocationToken&&!Fq(i.toolInvocationToken))throw new Error("Invalid tool invocation token");if((t===D4||t===mD)&&!tt(e,"chatParticipantPrivate"))throw new Error(`Invalid tool: ${t}`);const n=await this.b.$invokeTool({toolId:t,callId:r,parameters:i.input,tokenBudget:i.tokenizationOptions?.tokenBudget,context:i.toolInvocationToken,chatRequestId:tt(e,"chatParticipantPrivate")?i.chatRequestId:void 0,chatInteractionId:tt(e,"chatParticipantPrivate")?i.chatInteractionId:void 0},s),o=n instanceof bi?n.value:n;return xg.to(Et(o))}finally{this.c.delete(r)}}$onDidChangeTools(e){const t=new Set(this.a.keys());for(const i of e){t.delete(i.id);const s=this.d.get(i.id);s?s.update(i):this.d.set(i.id,new TD(Et(i)))}for(const i of t)this.d.delete(i)}getTools(e){return Array.from(this.d.values()).map(t=>t.apiObject).filter(t=>{switch(t.name){case D4:case mD:case Hq:case DD:return tt(e,"chatParticipantPrivate");default:return!0}})}async $invokeTool(e,t){const i=this.a.get(e.toolId);if(!i)throw new Error(`Unknown tool ${e.toolId}`);const s={input:e.parameters,toolInvocationToken:e.context};tt(i.extension,"chatParticipantPrivate")&&(s.chatRequestId=e.chatRequestId,s.chatInteractionId=e.chatInteractionId,s.chatSessionId=e.context?.sessionId,e.toolSpecificData?.kind==="terminal"&&(s.terminalCommand=e.toolSpecificData.command)),tt(i.extension,"chatParticipantAdditions")&&e.modelId&&(s.model=await this.f(e.modelId,i.extension)),e.tokenBudget!==void 0&&(s.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((o,a=Ye.None)=>this.b.$countTokensForInvocation(e.callId,o,a))});let r;tt(i.extension,"toolProgress")&&(r={report:o=>{this.b.$acceptToolProgress(e.callId,{message:xe.fromStrict(o.message),increment:o.increment,total:100})}});const n=await tL(Promise.resolve(i.tool.invoke(s,t,r)),t);if(!n)throw new mt;return xg.from(n,i.extension)}async f(e,t){let i;if(e&&(i=await this.e.getLanguageModelByIdentifier(t,e)),!i&&(i=await this.e.getDefaultLanguageModel(t),!i))throw new Error("Language model unavailable");return i}async $prepareToolInvocation(e,t,i){const s=this.a.get(e);if(!s)throw new Error(`Unknown tool ${e}`);const r={input:t};if(tt(s.extension,"chatParticipantPrivate")&&s.tool.prepareInvocation2){const n=await s.tool.prepareInvocation2(r,i);return n?{confirmationMessages:n.confirmationMessages?{title:typeof n.confirmationMessages.title=="string"?n.confirmationMessages.title:xe.from(n.confirmationMessages.title),message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:xe.from(n.confirmationMessages.message)}:void 0,toolSpecificData:{kind:"terminal",language:n.language,command:n.command},presentation:n.presentation}:void 0}else if(s.tool.prepareInvocation){const n=await s.tool.prepareInvocation(r,i);return n?((n.pastTenseMessage||n.presentation)&&L(s.extension,"chatParticipantPrivate"),{confirmationMessages:n.confirmationMessages?{title:typeof n.confirmationMessages.title=="string"?n.confirmationMessages.title:xe.from(n.confirmationMessages.title),message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:xe.from(n.confirmationMessages.message)}:void 0,invocationMessage:xe.fromStrict(n.invocationMessage),pastTenseMessage:xe.fromStrict(n.pastTenseMessage),presentation:n.presentation}):void 0}}registerTool(e,t,i){return this.a.set(t,{extension:e,tool:i}),this.b.$registerTool(t),ie(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},Yq=class{constructor(e,t,i,s){this.c=t,this.d=i,this.e=s,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(Z.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const i=this.c.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,s=Je.from(t),r=await this.a.$tokensAtPosition(e.uri,s),n={type:Fn.Other,range:e.getWordRangeAtPosition(t)??new $e(t.line,t.character,t.line,t.character)};if(!r)return n;const o={range:O.to(r.range),type:zw.to(r.type)};return!o.range.contains(t)||i!==e.version?n:o}createLanguageStatusItem(e,t,i){const s=this.f++,r=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:i,id:t,name:e.displayName??e.name,severity:Ja.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new se,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=Z1(()=>{l.clear(),this.a.$setLanguageStatus(s,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:mc.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===Ja.Error?Mt.Error:a.severity===Ja.Warning?Mt.Warning:Mt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),r.$removeLanguageStatus(s),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(f){a.name=f,u()},get selector(){return a.selector},set selector(f){a.selector=f,u()},get text(){return a.text},set text(f){a.text=f,u()},set text2(f){L(e,"languageStatusText"),a.text=f,u()},get text2(){return L(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(f){a.detail=f,u()},get severity(){return a.severity},set severity(f){a.severity=f,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(f){a.accessibilityInformation=f,u()},get command(){return a.command},set command(f){a.command=f,u()},get busy(){return a.busy},set busy(f){a.busy=f,u()}};return u(),h}};function Zq(e){return e&&e.title}var R4=class{constructor(t,i){this.b=i,this.a=t.getProxy(Z.MainThreadMessageService)}showMessage(t,i,s,r,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof r=="string"||Zq(r)?a=[r,...n]:(o.modal=r?.modal,o.useCustom=r?.useCustom,o.detail=r?.detail,a=n),o.useCustom&&L(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:f,isCloseAffordance:p}=h;c.push({title:f,isCloseAffordance:!!p,handle:u}),p&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(i,s,o,c).then(u=>{if(typeof u=="number")return a[u]})}};R4=__decorate([__param(1,De)],R4);var L4=class{constructor(e,t,i,s){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=s}asApiEvent(){return{range:new Ms(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},N4=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1,encoding:"utf8"}}constructor(e,t,i){this.notebook=e,this.h=t,this.j=i,this.handle=i.handle,this.uri=x.revive(i.uri),this.cellKind=i.cellKind,this.a=i.outputs.map(Bn.to),this.e=i.internalMetadata??{},this.b=Object.freeze(i.metadata??{}),this.d=Object.freeze(kc.to(i.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:Vu.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(s){e.g=s},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(i)}return this.f}setOutputs(e){this.a=e.map(Bn.to)}setOutputItems(e,t,i){const s=i.map(Cc.to),r=this.a.find(n=>n.id===e);if(r&&(t||(r.items.length=0),r.items.push(...s),r.items.length>1&&r.items.every(n=>W8(n.mime)))){const n=new Map,o=[];r.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),r.items.length=0,o.forEach(a=>{const c=UU(n.get(a));r.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(kc.to(e))}setMime(e){}},Qq=class a2{static{this.a=0}constructor(t,i,s,r,n){this.k=t,this.l=i,this.m=s,this.uri=r,this.handle=a2.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,i={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===G.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(s){return s=t.n(s),t.b[s].apiCell},getCells(s){return(s?t.p(s):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(i)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,i,s){this.g=t.versionId,this.h=i,this.acceptDocumentPropertiesChanged({metadata:s});const r={notebook:this.apiNotebook,metadata:s,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===As.ModelChange?this.r(a.changes,!1,r.contentChanges):a.kind===As.Move?this.s(a.index,a.length,a.newIdx,r.contentChanges):a.kind===As.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===As.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===As.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===As.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===As.ChangeCellMime?this.w(a.index,a.mime):a.kind===As.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===As.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=r.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else r.cellChanges[l]={...r.cellChanges[l],...c}}return Object.freeze(r),Object.freeze(r.cellChanges),Object.freeze(r.contentChanges),r}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let i=t.start|0,s=t.end|0;return i<0&&(i=0),s>this.b.length&&(s=this.b.length),t.with({start:i,end:s})}p(t){t=this.o(t);const i=[];for(let s=t.start;s<t.end;s++)i.push(this.b[s]);return i}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,i,s){if(this.j)return;const r=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(f=>{const p=new N4(this,this.l,f);return i||n.push(N4.asModelAddData(f)),p}),u=new L4(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const f of h)o.push(f.uri),u.deletedItems.push(f.apiCell);r.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),s)for(const a of r)s.push(a.asApiEvent())}s(t,i,s,r){const n=this.b.splice(t,i);this.b.splice(s,0,...n);const o=[new L4(t,i,n.map(a=>a.apiCell),[]),new L4(s,0,[],n)];for(const a of o)r.push(a.asApiEvent())}t(t,i){this.b[t].setOutputs(i)}u(t,i,s,r){this.b[t].setOutputItems(i,s,r)}v(t,i){const s=this.b[t];s.apiCell.document.languageId!==i&&this.m.$acceptModelLanguageChanged(s.uri,i)}w(t,i){const s=this.b[t];s.apiCell.mime=i}x(t,i){this.b[t].setMetadata(i)}y(t,i){this.b[t].setInternalMetadata(i)}getCellFromApiCell(t){return this.b.find(i=>i.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(i=>i.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},M4=class c2{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,i,s,r,n,o,a){this.id=t,this.c=i,this.notebookData=s,this.d=r,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(i){this.selections=[i]},get selections(){return t.e},set selections(i){if(!Array.isArray(i)||!i.every(Ms.isNotebookRange))throw Ie("selections");t.e=i.length===0?[new Ms(0,0)]:i,t.h(t.e)},get visibleRanges(){return t.d},revealRange(i,s){t.c.$tryRevealRange(t.id,hr.from(i),s??xp.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},c2.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t.length===0?[new Ms(0,0)]:t}h(t){this.c.$trySetSelections(this.id,t.map(hr.from))}_acceptViewColumn(t){this.f=t}},O4=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ue)return F4(this.right);let e=this;for(;e.parent!==ue&&e.parent.left!==e;)e=e.parent;return e.parent===ue?ue:e.parent}prev(){if(this.left!==ue)return LD(this.left);let e=this;for(;e.parent!==ue&&e.parent.right!==e;)e=e.parent;return e.parent===ue?ue:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},RD;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(RD||(RD={}));var ue=new O4(null,0);ue.parent=ue,ue.left=ue,ue.right=ue,ue.color=0;function F4(e){for(;e.left!==ue;)e=e.left;return e}function LD(e){for(;e.right!==ue;)e=e.right;return e}function U4(e){return e===ue?0:e.size_left+e.piece.length+U4(e.right)}function j4(e){return e===ue?0:e.lf_left+e.piece.lineFeedCnt+j4(e.right)}function B4(){ue.parent=ue}function Rh(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==ue&&(i.left.parent=t),i.parent=t.parent,t.parent===ue?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function Lh(e,t){const i=t.left;t.left=i.right,i.right!==ue&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===ue?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function Fm(e,t){let i,s;if(t.left===ue?(s=t,i=s.right):t.right===ue?(s=t,i=s.left):(s=F4(t.right),i=s.right),s===e.root){e.root=i,i.color=0,t.detach(),B4(),e.root.parent=ue;return}const r=s.color===1;if(s===s.parent.left?s.parent.left=i:s.parent.right=i,s===t?(i.parent=s.parent,Nh(e,i)):(s.parent===t?i.parent=s:i.parent=s.parent,Nh(e,i),s.left=t.left,s.right=t.right,s.parent=t.parent,s.color=t.color,t===e.root?e.root=s:t===t.parent.left?t.parent.left=s:t.parent.right=s,s.left!==ue&&(s.left.parent=s),s.right!==ue&&(s.right.parent=s),s.size_left=t.size_left,s.lf_left=t.lf_left,Nh(e,s)),t.detach(),i.parent.left===i){const o=U4(i),a=j4(i);if(o!==i.parent.size_left||a!==i.parent.lf_left){const c=o-i.parent.size_left,l=a-i.parent.lf_left;i.parent.size_left=o,i.parent.lf_left=a,Zr(e,i.parent,c,l)}}if(Nh(e,i.parent),r){B4();return}let n;for(;i!==e.root&&i.color===0;)i===i.parent.left?(n=i.parent.right,n.color===1&&(n.color=0,i.parent.color=1,Rh(e,i.parent),n=i.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.right.color===0&&(n.left.color=0,n.color=1,Lh(e,n),n=i.parent.right),n.color=i.parent.color,i.parent.color=0,n.right.color=0,Rh(e,i.parent),i=e.root)):(n=i.parent.left,n.color===1&&(n.color=0,i.parent.color=1,Lh(e,i.parent),n=i.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.left.color===0&&(n.right.color=0,n.color=1,Rh(e,n),n=i.parent.left),n.color=i.parent.color,i.parent.color=0,n.left.color=0,Lh(e,i.parent),i=e.root));i.color=0,B4()}function ND(e,t){for(Nh(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Rh(e,t)),t.parent.color=0,t.parent.parent.color=1,Lh(e,t.parent.parent))}else{const i=t.parent.parent.left;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Lh(e,t)),t.parent.color=0,t.parent.parent.color=1,Rh(e,t.parent.parent))}e.root.color=0}function Zr(e,t,i,s){for(;t!==e.root&&t!==ue;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=s),t=t.parent}function Nh(e,t){let i=0,s=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,i=U4(t.left)-t.size_left,s=j4(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=s;t!==e.root&&(i!==0||s!==0);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=s),t=t.parent}}var Qr=65535;function MD(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var Xq=class{constructor(e,t,i,s,r){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=s,this.isBasicASCII=r}};function Xr(e,t=!0){const i=[0];let s=1;for(let r=0,n=e.length;r<n;r++){const o=e.charCodeAt(r);o===13?r+1<n&&e.charCodeAt(r+1)===10?(i[s++]=r+2,r++):i[s++]=r+1:o===10&&(i[s++]=r+1)}return t?MD(i):i}function Kq(e,t){e.length=0,e[0]=0;let i=1,s=0,r=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[i++]=c+2,c++):(s++,e[i++]=c+1):u===10?(r++,e[i++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new Xq(MD(e),s,r,n,o);return e.length=0,a}var Ri=class{constructor(e,t,i,s,r){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=s,this.length=r}},na=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},eG=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==ue&&e.iterate(e.root,i=>(i!==ue&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},tG=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const i=this.b;for(let s=0;s<i.length;s++){const r=i[s];if(r.node.parent===null||r.nodeStartOffset>=e){i[s]=null,t=!0;continue}}if(t){const s=[];for(const r of i)r!==null&&s.push(r);this.b=s}}},iG=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this.a=[new na("",[0])],this.g={line:0,column:0},this.root=ue,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=i;let s=null;for(let r=0,n=e.length;r<n;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=Xr(e[r].buffer));const o=new Ri(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this.a.push(e[r]),s=this.S(s,o)}this.h=new tG(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=Qr,i=t-Math.floor(t/3),s=i*2;let r="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=i||n+l<s)return r+=c,n+=l,!0;const u=r.replace(/\r\n|\r|\n/g,e);return o.push(new na(u,Xr(u))),r=c,n=l,!0}),n>0){const a=r.replace(/\r\n|\r|\n/g,e);o.push(new na(a,Xr(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new eG(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,s=>{if(s===ue)return!0;const r=this.R(s),n=r.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,r===c})}getOffsetAt(e,t){let i=0,s=this.root;for(;s!==ue;)if(s.left!==ue&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){i+=s.size_left;const r=this.B(s,e-s.lf_left-2);return i+=r+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,i+=s.size_left+s.piece.length,s=s.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const s=e;for(;t!==ue;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const r=this.A(t,e-t.size_left);if(i+=t.lf_left+r.index,r.index===0){const n=this.getOffsetAt(i+1,1),o=s-n;return new rs(i+1,o+1)}return new rs(i+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===ue){const r=this.getOffsetAt(i+1,1),n=s-e-r;return new rs(i+1,n+1)}else t=t.right;return new rs(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.H(e.startLineNumber,e.startColumn),s=this.H(e.endLineNumber,e.endColumn),r=this.getValueInRange2(i,s);return t?t!==this.d||!this.f?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let i=e.node;const s=this.a[i.piece.bufferIndex].buffer,r=this.u(i.piece.bufferIndex,i.piece.start);let n=s.substring(r+e.remainder,r+i.piece.length);for(i=i.next();i!==ue;){const o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(i===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,i.piece.length);i=i.next()}return n}getLinesContent(){const e=[];let t=0,i="",s=!1;return this.iterate(this.root,r=>{if(r===ue)return!0;const n=r.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(s&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=i,i="",s=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(s=!0,i+=a.substr(h,o-1)):i+=a.substr(h,o),!0;i+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=l+1;f<u;f++)i=this.f?a.substring(c[f],c[f+1]-this.e):a.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(s=!0,n.end.column===0?t--:i=a.substr(c[u],n.end.column-1)):i=a.substr(c[u],n.end.column),!0}),s&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this.a[t.piece.bufferIndex],s=this.u(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(s)}else{const t=this.a[e.node.piece.bufferIndex],s=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const i=this.H(e,t+1);return this.l(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i||i===ue)return"";const s=this.a[i.piece.bufferIndex],r=this.u(i.piece.bufferIndex,i.piece.start);return s.buffer.substring(r,r+i.piece.length)}else{const i=this.a[t.node.piece.bufferIndex],s=this.u(t.node.piece.bufferIndex,t.node.piece.start),r=s+t.remainder,n=s+t.node.piece.length;return i.buffer.substring(r,n)}}findMatchesInNode(e,t,i,s,r,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],f=this.u(e.piece.bufferIndex,e.piece.start),p=this.u(e.piece.bufferIndex,r),g=this.u(e.piece.bufferIndex,n);let v;const b={line:0,column:0};let E,k;t._wordSeparators?(E=h.buffer.substring(p,g),k=I=>I+p,t.reset(0)):(E=h.buffer,k=I=>I,t.reset(p));do if(v=t.next(E),v){if(k(v.index)>=g)return l;this.s(e,k(v.index)-f,b);const I=this.t(e.piece.bufferIndex,r,b),B=b.line===r.line?b.column-r.column+s:b.column+1,j=B+v[0].length;if(u[l++]=B$(new We(i+I,B,i+I,j),v,a),k(v.index)+v[0].length>=g||l>=c)return l}while(v);return l}findMatchesLineByLine(e,t,i,s){const r=[];let n=0;const o=new Tz(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,i,s,n,r),r;let h=e.startLineNumber,f=a.node;for(;f!==c.node;){const g=this.t(f.piece.bufferIndex,l,f.piece.end);if(g>=1){const b=this.a[f.piece.bufferIndex].lineStarts,E=this.u(f.piece.bufferIndex,f.piece.start),k=b[l.line+g],I=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(f,o,h,I,l,this.s(f,k-E),t,i,s,n,r),n>=s)return r;h+=g}const v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const b=this.getLineContent(h).substring(v,e.endColumn-1);return n=this.n(t,o,b,e.endLineNumber,v,n,r,i,s),r}if(n=this.n(t,o,this.getLineContent(h).substr(v),h,v,n,r,i,s),n>=s)return r;h++,a=this.H(h,1),f=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const g=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(g,e.endColumn-1);return n=this.n(t,o,v,e.endLineNumber,g,n,r,i,s),r}const p=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,p,l,u,t,i,s,n,r),r}n(e,t,i,s,r,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,p=i.length;let g=-f;for(;(g=i.indexOf(h,g+f))!==-1;)if((!l||H$(l,i,p,g,f))&&(o[n++]=new gy(new We(s,g+1+r,s,g+1+f+r),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(i),u&&(o[n++]=B$(new We(s,u.index+1+r,s,u.index+1+u[0].length+r),u,a),n>=c))return n;while(u);return n}insert(e,t,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==ue){const{node:s,remainder:r,nodeStartOffset:n}=this.G(e),o=s.piece,a=o.bufferIndex,c=this.s(s,r);if(s.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<Qr){this.F(s,t),this.y();return}if(n===e)this.o(t,s),this.h.validate(e);else if(n+s.piece.length>e){const l=[];let u=new Ri(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(s,r)===10){const g={line:u.start.line+1,column:0};u=new Ri(u.bufferIndex,g,u.end,this.t(u.bufferIndex,g,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(s,r-1)===13){const g=this.s(s,r-1);this.C(s,g),t="\r"+t,s.piece.length===0&&l.push(s)}else this.C(s,c);else this.C(s,c);const h=this.w(t);u.length>0&&this.S(s,u);let f=s;for(let p=0;p<h.length;p++)f=this.S(f,h[p]);this.v(l)}else this.q(t,s)}else{const s=this.w(t);let r=this.T(null,s[0]);for(let n=1;n<s.length;n++)r=this.S(r,s[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===ue)return;const i=this.G(e),s=this.G(e+t),r=i.node,n=s.node;if(r===n){const h=this.s(r,i.remainder),f=this.s(r,s.remainder);if(i.nodeStartOffset===e){if(t===r.piece.length){const p=r.next();Fm(this,r),this.N(p),this.y();return}this.D(r,f),this.h.validate(e),this.N(r),this.y();return}if(i.nodeStartOffset+r.piece.length===e+t){this.C(r,h),this.O(r),this.y();return}this.E(r,h,f),this.y();return}const o=[],a=this.s(r,i.remainder);this.C(r,a),this.h.validate(e),r.piece.length===0&&o.push(r);const c=this.s(n,s.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=r.next();for(let h=l;h!==ue&&h!==n;h=h.next())o.push(h);const u=r.piece.length===0?r.prev():r;this.v(o),this.O(u),this.y()}o(e,t){const i=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new Ri(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,Zr(this,t,-1,-1),t.piece.length===0&&i.push(t)}const s=this.w(e);let r=this.T(t,s[s.length-1]);for(let n=s.length-2;n>=0;n--)r=this.T(r,s[n]);this.N(r),this.v(i)}q(e,t){this.Q(e,t)&&(e+=`
`);const i=this.w(e),s=this.S(t,i[0]);let r=s;for(let n=1;n<i.length;n++)r=this.S(r,i[n]);this.N(s)}s(e,t,i){const s=e.piece,r=e.piece.bufferIndex,n=this.a[r].lineStarts,a=n[s.start.line]+s.start.column+t;let c=s.start.line,l=s.end.line,u=0,h=0,f=0;for(;c<=l&&(u=c+(l-c)/2|0,f=n[u],u!==l);)if(h=n[u+1],a<f)l=u-1;else if(a>=h)c=u+1;else break;return i?(i.line=u,i.column=a-f,null):{line:u,column:a-f}}t(e,t,i){if(i.column===0)return i.line-t.line;const s=this.a[e].lineStarts;if(i.line===s.length-1)return i.line-t.line;const r=s[i.line+1],n=s[i.line]+i.column;if(r>n+1)return i.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?i.line-t.line+1:i.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)Fm(this,e[t])}w(e){if(e.length>Qr){const l=[];for(;e.length>Qr;){const h=e.charCodeAt(Qr-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,Qr-1),e=e.substring(Qr-1)):(f=e.substring(0,Qr),e=e.substring(Qr));const p=Xr(f);l.push(new Ri(this.a.length,{line:0,column:0},{line:p.length-1,column:f.length-p[p.length-1]},p.length-1,f.length)),this.a.push(new na(f,p))}const u=Xr(e);return l.push(new Ri(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new na(e,u)),l}let t=this.a[0].buffer.length;const i=Xr(e,!1);let s=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},s=this.g;for(let l=0;l<i.length;l++)i[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<i.length;l++)i[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=e}const r=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=r-this.a[0].lineStarts[n],a={line:n,column:o},c=new Ri(0,s,a,this.t(0,s,a),r-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let i=this.root,s="";const r=this.h.get2(e);if(r){i=r.node;const n=this.B(i,e-r.nodeStartLineNumber-1),o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(r.nodeStartLineNumber+i.piece.lineFeedCnt===e)s=o.substring(a+n,a+i.piece.length);else{const c=this.B(i,e-r.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;i!==ue;)if(i.left!==ue&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const a=this.B(i,e-i.lf_left-2),c=this.B(i,e-i.lf_left-1),l=this.a[i.piece.bufferIndex].buffer,u=this.u(i.piece.bufferIndex,i.piece.start);return n+=i.size_left,this.h.set({node:i,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-i.lf_left)}),l.substring(u+a,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const a=this.B(i,e-i.lf_left-2),c=this.a[i.piece.bufferIndex].buffer,l=this.u(i.piece.bufferIndex,i.piece.start);s=c.substring(l+a,l+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==ue;){const n=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const o=this.B(i,0),a=this.u(i.piece.bufferIndex,i.piece.start);return s+=n.substring(a,a+o-t),s}else{const o=this.u(i.piece.bufferIndex,i.piece.start);s+=n.substr(o,i.piece.length)}i=i.next()}return s}y(){let e=this.root,t=1,i=0;for(;e!==ue;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=i,this.h.validate(this.c)}A(e,t){const i=e.piece,s=this.s(e,t),r=s.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===t){const n=this.t(e.piece.bufferIndex,i.start,s);if(n!==r)return{index:n,remainder:0}}return{index:r,remainder:s.column}}B(e,t){if(t<0)return 0;const i=e.piece,s=this.a[i.bufferIndex].lineStarts,r=i.start.line+t+1;return r>i.end.line?s[i.end.line]+i.end.column-s[i.start.line]-i.start.column:s[r]-s[i.start.line]-i.start.column}C(e,t){const i=e.piece,s=i.lineFeedCnt,r=this.u(i.bufferIndex,i.end),n=t,o=this.u(i.bufferIndex,n),a=this.t(i.bufferIndex,i.start,n),c=a-s,l=o-r,u=i.length+l;e.piece=new Ri(i.bufferIndex,i.start,n,a,u),Zr(this,e,l,c)}D(e,t){const i=e.piece,s=i.lineFeedCnt,r=this.u(i.bufferIndex,i.start),n=t,o=this.t(i.bufferIndex,n,i.end),a=this.u(i.bufferIndex,n),c=o-s,l=r-a,u=i.length+l;e.piece=new Ri(i.bufferIndex,n,i.end,o,u),Zr(this,e,l,c)}E(e,t,i){const s=e.piece,r=s.start,n=s.end,o=s.length,a=s.lineFeedCnt,c=t,l=this.t(s.bufferIndex,s.start,c),u=this.u(s.bufferIndex,t)-this.u(s.bufferIndex,r);e.piece=new Ri(s.bufferIndex,s.start,c,l,u),Zr(this,e,u-o,l-a);const h=new Ri(s.bufferIndex,i,n,this.t(s.bufferIndex,i,n),this.u(s.bufferIndex,n)-this.u(s.bufferIndex,i)),f=this.S(e,h);this.N(f)}F(e,t){this.Q(t,e)&&(t+=`
`);const i=this.K()&&this.L(t)&&this.M(e),s=this.a[0].buffer.length;this.a[0].buffer+=t;const r=Xr(t,!1);for(let f=0;f<r.length;f++)r[f]+=s;if(i){const f=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:s-f}}this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new Ri(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,Zr(this,e,t.length,h)}G(e){let t=this.root;const i=this.h.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let s=0;for(;t!==ue;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this.h.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let i=this.root,s=0;for(;i!==ue;)if(i.left!==ue&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const r=this.B(i,e-i.lf_left-2),n=this.B(i,e-i.lf_left-1);return s+=i.size_left,{node:i,remainder:Math.min(r+t-1,n),nodeStartOffset:s}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const r=this.B(i,e-i.lf_left-2);if(r+t-1<=i.piece.length)return{node:i,remainder:r+t-1,nodeStartOffset:s};t-=i.piece.length-r;break}else e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==ue;){if(i.piece.lineFeedCnt>0){const r=this.B(i,0),n=this.J(i);return{node:i,remainder:Math.min(t-1,r),nodeStartOffset:n}}else if(i.piece.length>=t-1){const r=this.J(i);return{node:i,remainder:t-1,nodeStartOffset:r}}else t-=i.piece.length;i=i.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this.a[e.piece.bufferIndex],s=this.u(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(s)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ue||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this.a[t.bufferIndex].lineStarts,s=t.start.line,r=i[s]+t.start.column;return s===i.length-1||i[s+1]>r+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(r)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ue||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const i=[],s=this.a[e.piece.bufferIndex].lineStarts;let r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Ri(e.piece.bufferIndex,e.piece.start,r,o,n),Zr(this,e,-1,-1),e.piece.length===0&&i.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new Ri(t.piece.bufferIndex,a,t.piece.end,l,c),Zr(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<i.length;h++)Fm(this,i[h])}Q(e,t){if(this.K()&&this.M(e)){const i=t.next();if(this.L(i)){if(e+=`
`,i.piece.length===1)Fm(this,i);else{const s=i.piece,r={line:s.start.line+1,column:0},n=s.length-1,o=this.t(s.bufferIndex,r,s.end);i.piece=new Ri(s.bufferIndex,r,s.end,o,n),Zr(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ue)return t(ue);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}R(e){if(e===ue)return"";const t=this.a[e.piece.bufferIndex],i=e.piece,s=this.u(i.bufferIndex,i.start),r=this.u(i.bufferIndex,i.end);return t.buffer.substring(s,r)}getPieceContent(e){const t=this.a[e.bufferIndex],i=this.u(e.bufferIndex,e.start),s=this.u(e.bufferIndex,e.end);return t.buffer.substring(i,s)}S(e,t){const i=new O4(t,1);if(i.left=ue,i.right=ue,i.parent=ue,i.size_left=0,i.lf_left=0,this.root===ue)this.root=i,i.color=0;else if(e.right===ue)e.right=i,i.parent=e;else{const r=F4(e.right);r.left=i,i.parent=r}return ND(this,i),i}T(e,t){const i=new O4(t,1);if(i.left=ue,i.right=ue,i.parent=ue,i.size_left=0,i.lf_left=0,this.root===ue)this.root=i,i.color=0;else if(e.left===ue)e.left=i,i.parent=e;else{const s=LD(e.left);s.right=i,i.parent=s}return ND(this,i),i}U(e){let t="";return this.iterate(e,i=>(t+=this.R(i),!0)),t}},OD;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(OD||(OD={}));function H4(e){let t=0,i=0,s=0,r=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(i=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(r|=2,n++):r|=3,s=n+1):a===10&&(r|=1,t===0&&(i=n),t++,s=n+1)}return t===0&&(i=e.length),[t,i,e.length-s,r]}var z4;function sG(){return z4||(z4=new TextDecoder("UTF-16LE")),z4}function rG(e,t,i){const s=new Uint16Array(e.buffer,t,i);return i>0&&(s[0]===65279||s[0]===65534)?nG(e,t,i):sG().decode(s)}function nG(e,t,i){const s=[];let r=0;for(let n=0;n<i;n++){const o=bL(e,t);t+=2,s[r++]=String.fromCharCode(o)}return s.join("")}function Um(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var oG=class br{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,i,s,r){this.oldPosition=t,this.oldText=i,this.newPosition=s,this.newText=r}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Um(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Um(this.oldText)}")`:`(replace@${this.oldPosition} "${Um(this.oldText)}" with "${Um(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,i,s){const r=i.length;Rd(t,r,s),s+=4;for(let n=0;n<r;n++)yL(t,i.charCodeAt(n),s),s+=2;return s}static d(t,i){const s=Td(t,i);return i+=4,rG(t,i,s)}writeSize(){return 8+br.a(this.oldText)+br.a(this.newText)}write(t,i){return Rd(t,this.oldPosition,i),i+=4,Rd(t,this.newPosition,i),i+=4,i=br.c(t,this.oldText,i),i=br.c(t,this.newText,i),i}static read(t,i,s){const r=Td(t,i);i+=4;const n=Td(t,i);i+=4;const o=br.d(t,i);i+=br.a(o);const a=br.d(t,i);return i+=br.a(a),s.push(new br(r,o,n,a)),i}},aG=class Qh extends X{constructor(t,i,s,r,n,o,a){super(),this.m=this.B(new D),this.onDidChangeContent=this.m.event,this.f=i,this.j=!o,this.g=r,this.h=n,this.c=new iG(t,s,a)}equals(t){return!(t instanceof Qh)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,i){return this.c.getOffsetAt(t,i)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,i){const s=t+i,r=this.getPositionAt(t),n=this.getPositionAt(s);return new We(r.lineNumber,r.column,n.lineNumber,n.column)}getValueInRange(t,i=0){if(t.isEmpty())return"";const s=this.n(i);return this.c.getValueInRange(t,s)}getValueLengthInRange(t,i=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const s=this.getOffsetAt(t.startLineNumber,t.startColumn),r=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(i),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return r-s+n}getCharacterCountInRange(t,i=0){if(this.j){let s=0;const r=t.startLineNumber,n=t.endLineNumber;for(let o=r;o<=n;o++){const a=this.getLineContent(o),c=o===r?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)yd(a.charCodeAt(u))?(s=s+1,u=u+1):s=s+1}return s+=this.n(i).length*(n-r),s}return this.getValueLengthInRange(t,i)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,i){return this.c.getLineCharCode(t,i)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const i=U1(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=uR(this.getLineContent(t));return i===-1?0:i+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,i,s){let r=this.g,n=this.h,o=this.j,a=!0,c=[];for(let v=0;v<t.length;v++){const b=t[v];a&&b._isTracked&&(a=!1);const E=b.range;if(b.text){let te=!0;o||(te=!vR(b.text),o=te),!r&&te&&(r=Xx(b.text)),!n&&te&&(n=Kx(b.text))}let k="",I=0,B=0,j=0;if(b.text){let te;[I,B,j,te]=H4(b.text);const F=this.getEOL();te===0||te===(F===`\r
`?2:1)?k=b.text:k=b.text.replace(/\r\n|\r|\n/g,F)}c[v]={sortIndex:v,identifier:b.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:k,eolCount:I,firstLineLength:B,lastLineLength:j,forceMoveMarkers:!!b.forceMoveMarkers,isAutoWhitespaceEdit:b.isAutoWhitespaceEdit||!1}}c.sort(Qh.u);let l=!1;for(let v=0,b=c.length-1;v<b;v++){const E=c[v].range.getEndPosition(),k=c[v+1].range.getStartPosition();if(k.isBeforeOrEqual(E)){if(k.isBefore(E))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=s||i?Qh._getInverseEditRanges(c):[],h=[];if(i)for(let v=0;v<c.length;v++){const b=c[v],E=u[v];if(b.isAutoWhitespaceEdit&&b.range.isEmpty())for(let k=E.startLineNumber;k<=E.endLineNumber;k++){let I="";k===E.startLineNumber&&(I=this.getLineContent(b.range.startLineNumber),U1(I)!==-1)||h.push({lineNumber:k,oldContent:I})}}let f=null;if(s){let v=0;f=[];for(let b=0;b<c.length;b++){const E=c[b],k=u[b],I=this.getValueInRange(E.range),B=E.rangeOffset+v;v+=E.text.length-I.length,f[b]={sortIndex:E.sortIndex,identifier:E.identifier,range:k,text:I,textChange:new oG(E.rangeOffset,I,B,E.text)}}l||f.sort((b,E)=>b.sortIndex-E.sortIndex)}this.g=r,this.h=n,this.j=o;const p=this.t(c);let g=null;if(i&&h.length>0){h.sort((v,b)=>b.lineNumber-v.lineNumber),g=[];for(let v=0,b=h.length;v<b;v++){const E=h[v].lineNumber;if(v>0&&h[v-1].lineNumber===E)continue;const k=h[v].oldContent,I=this.getLineContent(E);I.length===0||I===k||U1(I)!==-1||g.push(E)}}return this.m.fire(),new Pz(f,p,g)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let i=!1;const s=t[0].range,r=t[t.length-1].range,n=new We(s.startLineNumber,s.startColumn,r.endLineNumber,r.endColumn);let o=s.startLineNumber,a=s.startColumn;const c=[];for(let p=0,g=t.length;p<g;p++){const v=t[p],b=v.range;i=i||v.forceMoveMarkers,c.push(this.getValueInRange(new We(o,a,b.startLineNumber,b.startColumn))),v.text.length>0&&c.push(v.text),o=b.endLineNumber,a=b.endColumn}const l=c.join(""),[u,h,f]=H4(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:f,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}t(t){t.sort(Qh.w);const i=[];for(let s=0;s<t.length;s++){const r=t[s],n=r.range.startLineNumber,o=r.range.startColumn,a=r.range.endLineNumber,c=r.range.endColumn;if(n===a&&o===c&&r.text.length===0)continue;r.text?(this.c.delete(r.rangeOffset,r.rangeLength),this.c.insert(r.rangeOffset,r.text,!0)):this.c.delete(r.rangeOffset,r.rangeLength);const l=new We(n,o,a,c);i.push({range:l,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return i}findMatchesLineByLine(t,i,s,r){return this.c.findMatchesLineByLine(t,i,s,r)}getPieceTree(){return this.c}static _getInverseEditRange(t,i){const s=t.startLineNumber,r=t.startColumn,[n,o,a]=H4(i);let c;if(i.length>0){const l=n+1;l===1?c=new We(s,r,s,r+o):c=new We(s,r,s+l-1,a+1)}else c=new We(s,r,s,r);return c}static _getInverseEditRanges(t){const i=[];let s=0,r=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=s,u=r+(c.range.startColumn-n.range.endColumn)):(l=s+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const f=c.eolCount+1;f===1?h=new We(l,u,l,u+c.firstLineLength):h=new We(l,u,l+f-1,c.lastLineLength+1)}else h=new We(l,u,l,u);s=h.endLineNumber,r=h.endColumn,i.push(h),n=c}return i}static u(t,i){const s=We.compareRangesUsingEnds(t.range,i.range);return s===0?t.sortIndex-i.sortIndex:s}static w(t,i){const s=We.compareRangesUsingEnds(t.range,i.range);return s===0?i.sortIndex-t.sortIndex:-s}},cG=class{constructor(e,t,i,s,r,n,o,a,c){this.a=e,this.b=t,this.c=i,this.d=s,this.e=r,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,i=this.c+this.e;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this.k(e),i=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let r=0,n=i.length;r<n;r++){const o=i[r].buffer.replace(/\r\n|\r|\n/g,t),a=Xr(o);i[r]=new na(o,a)}const s=new aG(i,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:s,disposable:s}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},FD=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&kR(e)&&(this.b=ER,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=Kq(this.e,e);this.a.push(new na(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=Xx(e)),this.k||(this.k=Kx(e)))}finish(e=!0){return this.o(),new cG(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=Xr(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},lG=class extends X{constructor(e,t,i){super(),this._source=e,this.b=t,this.c=i,this.a=void 0}f(e){const t=e.getLineCount();return new We(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new FD;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:s}=t.create(1);this.b=i,this.B(s)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new FD;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:s,disposable:r}=i.create(1);return this.B(r),s})),this.a}findInInputs(e){const i=new U$(e,!1,!1,null).parseSearchRequest();if(!i)return[];const s=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(s,i,!0,5e3)}findInOutputs(e){const i=new U$(e,!1,!1,null).parseSearchRequest();return i?this.outputTextBuffers.map(s=>{const r=s.findMatchesLineByLine(this.f(s),i,!0,5e3);if(r.length!==0)return{textBuffer:s,matches:r}}).filter(s=>!!s):[]}};function UD(e,t){let i=-1;const s=[];let r=[];return e.forEach(o=>{o.range.startLineNumber!==i&&r.length>0&&(s.push([...r]),r=[]),r.push(o),i=o.range.endLineNumber}),r.length>0&&s.push([...r]),s.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new A9(a.join(`
`)+`
`,o.map(u=>new We(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var Sne=Object.freeze({id:"application",order:100,title:d(4214,null),type:"object"}),uG=Object.freeze({id:"workbench",order:7,title:d(4215,null),type:"object"}),hG=Object.freeze({id:"security",scope:1,title:d(4216,null),type:"object",order:7}),Cne=Object.freeze({id:"problems",title:d(4217,null),type:"object",order:101}),dG=Object.freeze({id:"window",order:8,title:d(4218,null),type:"object"}),fG={ConfigurationMigration:"base.contributions.configuration.migration"},pG=class{constructor(){this.migrations=[],this.a=new D,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},jm=new pG;Xt.add(fG.ConfigurationMigration,jm);var jD=class extends X{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,i){super(),this.a=t,this.b=i,this.B(this.b.onDidChangeWorkspaceFolders(async s=>{for(const r of s.added)await this.f(r,jm.migrations)})),this.c(jm.migrations),this.B(jm.onDidRegisterConfigurationMigration(s=>this.c(s)))}async c(t){await this.f(void 0,t);for(const i of this.b.getWorkspace().folders)await this.f(i,t)}async f(t,i){await Promise.all([i.map(s=>this.g(s,t?.uri))])}async g(t,i){const s=this.a.inspect(t.key,{resource:i}),r=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of r){const a=s[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,i,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,i,l);for(const f of h??[])c.push([f,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:i,overrideIdentifiers:h},o)))}}async h(t,i,s,r,n){const o=c=>{const u=this.a.inspect(c,{resource:r})[i];if(u)return n?u.overrides?.find(({identifiers:h})=>wi(h,n))?.value:u.value},a=await t.migrateFn(s,o);return Array.isArray(a)?a:[[t.key,a]]}};jD=__decorate([__param(0,Fr),__param(1,_d)],jD);var BD=class extends X{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new is,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!Fe&&(await this.b.getEnvironment())?.os!==1)return;Xt.as(Io.Configuration).registerConfiguration({...hG,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d(4219,null)},default:[],markdownDescription:d(4220,null),scope:3},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d(4221,null),scope:3}}})}};BD=__decorate([__param(0,V$)],BD);var Mh="window.newWindowProfile",HD=class extends X{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,i){super(),this.c=t,this.f=i,this.g(),this.B(this.c.onDidChangeProfiles(s=>this.g())),this.h(),this.j(),this.B(i.onDidChangeConfiguration(s=>{s.source!==7&&s.affectsConfiguration(Mh)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=Xt.as(Io.Configuration),i={...dG,properties:{[Mh]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(s=>s.name),null],enumItemLabels:[...this.c.profiles.map(s=>""),d(4222,null)],description:d(4223,null),scope:1}}};this.a?t.updateConfigurations({add:[i],remove:[this.a]}):t.registerConfiguration(i),this.a=i}h(){const t=this.f.getValue(Mh);this.b=t?this.c.profiles.find(i=>i.name===t):void 0}j(){const t=this.f.getValue(Mh);if(!t)return;const i=this.b?this.c.profiles.find(s=>s.id===this.b.id):void 0;t!==i?.name&&this.f.updateValue(Mh,i?.name)}};HD=__decorate([__param(0,hj),__param(1,Fr)],HD);var Dne=q("editorResolverService"),gG=Xt.as(Io.Configuration),mG={...uG,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(13919,null),additionalProperties:{type:"string"}}}};gG.registerConfiguration(mG);var W4;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(W4||(W4={}));var zD;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(zD||(zD={}));function vG(e,t){if(new Set([G.extension,G.webviewPanel,G.vscodeWorkspaceTrust,G.vscodeSettings]).has(t.scheme))return!1;const r=typeof e=="string"&&e.indexOf(je.sep)>=0?`${t.scheme}:${t.path}`:ts(t);return Ba(typeof e=="string"?e.toLowerCase():e,r.toLowerCase())}var wG=class Xh{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,i,s,r,n,o,a){this.q=s,this.r=r,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Ht,this.h=new Map,this.j=new D,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new D,this.onDidOpenNotebookDocument=this.m.event,this.n=new D,this.onDidCloseNotebookDocument=this.n.event,this.o=new D,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new Ws("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(Z.MainThreadNotebook),this.c=t.getProxy(Z.MainThreadNotebookDocuments),this.d=t.getProxy(Z.MainThreadNotebookEditors),this.i=i.converter,i.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,f=this.g.get(l)?.getCell(u);if(f)return f.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),Xh.C(i)}getEditorById(t){const i=this.h.get(t);if(!i)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return i}getIdByEditor(t){for(const[i,s]of this.h)if(s.apiEditor===t)return i}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,i){const s=this.g.get(t);if(!s&&!i)throw new Error(`NO notebook document for '${t}'`);return s}static w(t,i){if(!i)return;const s=i.filenamePattern.map(r=>sg.from(r)).filter(r=>r!==void 0);if(i.filenamePattern&&!s){console.warn(`Notebook content provider view options file name pattern is invalid ${i.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:i.displayName,filenamePattern:s,priority:i.exclusive?W4.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,i,s){const r=Xh.a++,n=typeof s.onDidChangeCellStatusBarItems=="function"?Xh.a++:void 0;this.f.set(r,s),this.b.$registerNotebookCellStatusBarItemProvider(r,n,i);let o;return n!==void 0&&(o=s.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Le(()=>{this.f.delete(r),this.b.$unregisterNotebookCellStatusBarItemProvider(r,n),o?.dispose()})}async createNotebookDocument(t){const i=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&jn.from(t.content)});return x.revive(i)}async openNotebookDocument(t){const i=this.g.get(t);if(i)return i.apiNotebook;const s=await this.c.$tryOpenNotebook(t),r=this.g.get(x.revive(s));return wa(r?.apiNotebook)}async showNotebookDocument(t,i){let s;typeof i=="object"?s={position:Wt.from(i.viewColumn),preserveFocus:i.preserveFocus,selections:i.selections&&i.selections.map(hr.from),pinned:typeof i.preview=="boolean"?!i.preview:void 0,label:typeof i.asRepl=="string"?i.asRepl:typeof i.asRepl=="object"?i.asRepl.label:void 0}:s={preserveFocus:!1,pinned:!0};const r=i?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,r,s),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,i,s,r){const n=this.f.get(t),o=x.revive(i),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(s);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,r);if(!l)return;const u=new se,h=this.p.add([u]),p=(Array.isArray(l)?l:[l]).map(g=>sb.from(g,this.i,u));return{cacheId:h,items:p}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,i,s,r,n){if(wd(i))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:i,serializer:s,options:r}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},i,nb.from(r),Xh.w(t,n)),ie(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,i,s){const r=this.y.get(t);if(!r)throw new Error("NO serializer found");const n=await r.serializer.deserializeNotebook(i.buffer,s);return new bi(jn.from(n))}async $notebookToData(t,i,s){const r=this.y.get(t);if(!r)throw new Error("NO serializer found");const n=await r.serializer.serializeNotebook(jn.to(i.value),s);return _.wrap(n)}async $saveNotebook(t,i,s,r,n){const o=x.revive(i),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${s}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==s)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new Xv(d(2904,null,this.A(o)),6);const l={metadata:vk(c.apiNotebook.metadata,g=>!(a.options?.transientDocumentMetadata??{})[g]),cells:[]};for(const g of c.apiNotebook.getCells()){const v=new wp(g.kind,g.document.getText(),g.document.languageId,g.mime,a.options?.transientOutputs?[]:[...g.outputs],g.metadata,g.executionSummary);v.metadata=vk(g.metadata,b=>!(a.options?.transientCellMetadata??{})[b]),l.cells.push(v)}if(await this.z(o,r),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${s} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${s} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),f=await this.s.value.stat(o),p={name:h.basename(o),isFile:(f.type&zi.File)!==0,isDirectory:(f.type&zi.Directory)!==0,isSymbolicLink:(f.type&zi.SymbolicLink)!==0,mtime:f.mtime,ctime:f.ctime,size:f.size,readonly:!!((f.permissions??0)&kn.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((f.permissions??0)&kn.Locked),etag:j6({mtime:f.mtime,size:f.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${s}, ${o.toString()})`),p}async $searchInNotebooks(t,i,s,r,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new dx;await(async(f,p,g)=>{await Promise.all(f.map(async v=>await Promise.all(v.filenamePatterns.map(b=>{const E={_reason:g._reason,folderQueries:g.folderQueries,includePattern:g.includePattern,excludePattern:g.excludePattern,maxResults:g.maxResults,type:1,filePattern:b};return this.t.doInternalFileSearchWithCustomCallback(E,p,k=>{k.forEach(I=>{a.has(I)||r.some(j=>v.isFromSettings&&!j.isFromSettings?!1:j.filenamePatterns.some(te=>vG(te,I)))||a.add(I)})}).catch(k=>{if(k.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw k})}))))})(s,n,i);const l=new Ht;let u=!1;const h=Array.from(a).map(async f=>{const p=[];try{if(n.isCancellationRequested)return;if(i.maxResults&&[...l.values()].reduce((E,k)=>E+k.cellResults.length,0)>i.maxResults){u=!0;return}const g=[],v=this.g.get(f);if(v)v.apiNotebook.getCells().forEach(k=>g.push({input:k.document.getText(),outputs:k.outputs.flatMap(I=>I.items.map(B=>B.data.toString()))}));else{const E=await this.s.value.readFile(f),k=_.fromString(E.toString()),I=await o.deserializeNotebook(k.buffer,n);if(n.isCancellationRequested)return;jn.from(I).cells.forEach(j=>g.push({input:j.source,outputs:j.outputs.flatMap(te=>te.items.map(F=>F.valueBytes.toString()))}))}if(n.isCancellationRequested)return;g.forEach((E,k)=>{const I=i.contentPattern.pattern,B=new lG(E.input,void 0,E.outputs),j=B.findInInputs(I),te=B.findInOutputs(I),F=te.flatMap(H=>UD(H.matches,H.textBuffer)).map((H,U)=>(H.webviewIndex=U,H));if(j.length>0||te.length>0){const H={index:k,contentResults:UD(j,B.inputTextBuffer),webviewResults:F};p.push(H)}});const b={resource:f,cellResults:p};l.set(f,b);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,i){const s=await this.s.value.stat(t);if(typeof i?.mtime=="number"&&typeof i.etag=="string"&&i.etag!==AF&&typeof s.mtime=="number"&&typeof s.size=="number"&&i.mtime<s.mtime&&i.etag!==j6({mtime:i.mtime,size:s.size}))throw new Xv(d(2905,null),3,i)}A(t){return t.scheme===G.file?t.fsPath:t.toString()}B(t,i,s){if(this.h.has(i))throw new Error(`editor with id ALREADY EXSIST: ${i}`);const r=new M4(i,this.d,t,s.visibleRanges.map(hr.to),s.selections.map(hr.to),typeof s.viewColumn=="number"?Wt.to(s.viewColumn):void 0,s.viewType);this.h.set(i,r)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const s of t.value.removedDocuments){const r=x.revive(s),n=this.g.get(r);n&&(n.dispose(),this.g.delete(r),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===r.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const s=[];for(const r of t.value.addedDocuments){const n=x.revive(r.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new Qq(this.c,this.q,this.r,n,r);s.push(...r.cells.map(a=>N4.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:s}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const s of t.value.addedEditors){if(this.h.has(s.id))return;const r=x.revive(s.documentUri),n=this.g.get(r);n&&this.B(n,s.id,s)}const i=[];if(t.value.removedEditors)for(const s of t.value.removedEditors){const r=this.h.get(s);r&&(this.h.delete(s),this.k?.id===r.id&&(this.k=void 0),i.push(r))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(r=>this.h.get(r)).filter(r=>!!r);const s=new Set;this.l.forEach(r=>s.add(r.id));for(const r of this.h.values()){const n=s.has(r.id);r._acceptVisibility(n)}this.l=[...this.h.values()].map(r=>r).filter(r=>r.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const i=z.String.with("notebookType","A notebook type"),s=new be("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[i,new z("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>_.wrap(n))],new ve("Notebook Data",n=>jn.to(n.value))),r=new be("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[i,new z("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new bi(jn.from(n)))],new ve("Bytes",n=>n.buffer));t.registerApiCommand(s),t.registerApiCommand(r)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},bG=class{constructor(e,t,i,s={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=i,this.f=s,this.a=new fl}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,s)=>{const r=function(o){t.call(i,o)};return r.extension=e,this.a.event(r,void 0,s)}}async $participateInSave(e,t,i){const s=x.revive(e),r=this.c.getNotebookDocument(s);if(!r)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:r.apiNotebook,reason:Kp.to(t)},i,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!i.isCancellationRequested&&u&&(u instanceof Ro?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),i.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=qi.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new bi(o))}},yG=class{constructor(e){this.c=e,this.a=new D,this.onDidSaveNotebookDocument=this.a.event,this.b=new D,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,i,s){const n=this.c.getNotebookDocument(x.revive(e)).acceptModelChanged(t.value,i,s);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(x.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(x.revive(e));this.a.fire(t.apiNotebook)}},V4=class{constructor(t,i){this.c=t,this.d=i,this.a=new D,this.b=new D,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,i){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,i);const s=this.d.getEditorById(t);i.visibleRanges&&s._acceptVisibleRanges(i.visibleRanges.ranges.map(hr.to)),i.selections&&s._acceptSelections(i.selections.selections.map(hr.to)),i.visibleRanges&&this.b.fire({notebookEditor:s.apiEditor,visibleRanges:s.apiEditor.visibleRanges}),i.selections&&this.a.fire(Object.freeze({notebookEditor:s.apiEditor,selections:s.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const i in t)this.d.getEditorById(i)._acceptViewColumn(Wt.to(t[i]))}};V4=__decorate([__param(0,De)],V4);var _c;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(_c||(_c={}));var Tne=q("INotebookExecutionService"),xG=100,WD;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(WD||(WD={}));var Rne=q("INotebookKernelService"),Lne=q("INotebookKernelHistoryService"),_4=class{constructor(t,i,s,r,n){this.l=i,this.m=s,this.n=r,this.o=n,this.b=new Ht,this.c=new Ht,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.q=0,this.r={},this.a=t.getProxy(Z.MainThreadNotebookKernels);const o=new be("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new z("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.m.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.m.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return"skipIfAlreadySelected"in c?{notebookEditorId:l,skipIfAlreadySelected:c.skipIfAlreadySelected}:{notebookEditorId:l}}return c})],ve.Void),a=new be("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[z.Uri],new ve("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.n.registerApiCommand(o),this.n.registerApiCommand(a)}createNotebookController(t,i,s,r,n,o){for(const j of this.j.values())if(j.controller.id===i&&qe.equals(t.identifier,j.extensionId))throw new Error(`notebook controller with id '${i}' ALREADY exist`);const a=this.k++,c=this;this.o.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${i}`);const l=()=>console.warn(`NO execute handler from notebook controller '${p.id}' of extension: '${t.identifier}'`);let u=!1;const h=new D,f=new D,p={id:Bm(t.identifier,i),notebookType:s,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:r||t.identifier.value,preloads:o?o.map(rg.from):[]};let g=n??l,v,b;this.a.$addKernel(a,p).catch(j=>{console.log(j),u=!0});let E=0;const k=()=>{if(u)return;const j=++E;Promise.resolve().then(()=>{j===E&&this.a.$updateKernel(a,p)})},I=new Ht,B={get id(){return i},get notebookType(){return p.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return p.label},set label(j){p.label=j??t.displayName??t.name,k()},get detail(){return p.detail??""},set detail(j){p.detail=j,k()},get description(){return p.description??""},set description(j){p.description=j,k()},get supportedLanguages(){return p.supportedLanguages},set supportedLanguages(j){p.supportedLanguages=j,k()},get supportsExecutionOrder(){return p.supportsExecutionOrder??!1},set supportsExecutionOrder(j){p.supportsExecutionOrder=j,k()},get rendererScripts(){return p.preloads?p.preloads.map(rg.to):[]},get executeHandler(){return g},set executeHandler(j){g=j??l},get interruptHandler(){return v},set interruptHandler(j){v=j,p.supportsInterrupt=!!j,k()},set variableProvider(j){L(t,"notebookVariableProvider"),b=j,p.hasVariableProvider=!!j,j?.onDidChangeVariables(te=>c.a.$variablesUpdated(te.uri)),k()},get variableProvider(){return b},createNotebookCellExecution(j){if(u)throw new Error("notebook controller is DISPOSED");if(!I.has(j.notebook.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(I.keys()).map(te=>te.toString())),new Error(`notebook controller is NOT associated to notebook: ${j.notebook.uri.toString()}`);return c._createNotebookCellExecution(j,Bm(t.identifier,this.id))},createNotebookExecution(j){if(L(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!I.has(j.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(I.keys()).map(te=>te.toString())),new Error(`notebook controller is NOT associated to notebook: ${j.uri.toString()}`);return c._createNotebookExecution(j,Bm(t.identifier,this.id))},dispose:()=>{u||(this.o.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),f.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(j,te){te===Ep.Hidden&&L(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,j.uri,te)},onDidReceiveMessage:f.event,postMessage(j,te){return L(t,"notebookMessaging"),c.a.$postMessage(a,te&&c.m.getIdByEditor(te),j)},asWebviewUri(j){return L(t,"notebookMessaging"),kh(j,c.l.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:B,onDidReceiveMessage:f,onDidChangeSelection:h,associatedNotebooks:I}),B}getIdByController(t){for(const[i,s]of this.j)if(s.controller===t)return Bm(s.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,i){const s=this.g++,r=this;this.o.trace(`NotebookControllerDetectionTask[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(s,i);const n={dispose:()=>{this.f.delete(s),r.a.$removeKernelDetectionTask(s)}};return this.f.set(s,n),n}registerKernelSourceActionProvider(t,i,s){const r=this.i++,n=typeof s.onDidChangeNotebookKernelSourceActions=="function"?r:void 0,o=this;this.h.set(r,s),this.o.trace(`NotebookKernelSourceActionProvider[${r}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(r,r,i);let a;return n!==void 0&&(a=s.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(r),o.a.$removeKernelSourceActionProvider(r,r),a?.dispose()}}}async $provideKernelSourceActions(t,i){const s=this.h.get(t);if(s){const r=new se;return(await s.provideNotebookKernelSourceActions(i)??[]).map(o=>rb.from(o,this.n.converter,r))}return[]}$acceptNotebookAssociation(t,i,s){const r=this.j.get(t);if(r){const n=this.m.getNotebookDocument(x.revive(i));s?r.associatedNotebooks.set(n.uri,!0):r.associatedNotebooks.delete(n.uri),this.o.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),s),r.onDidChangeSelection.fire({selected:s,notebook:n.apiNotebook})}}async $executeCells(t,i,s){const r=this.j.get(t);if(!r)return;const n=this.m.getNotebookDocument(x.revive(i)),o=[];for(const a of s){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.o.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await r.controller.executeHandler.call(r.controller,o,n.apiNotebook,r.controller)}catch(a){this.o.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,i,s){const r=this.j.get(t);if(!r)return;const n=this.m.getNotebookDocument(x.revive(i));if(r.controller.interruptHandler)await r.controller.interruptHandler.call(r.controller,n.apiNotebook);else for(const o of s){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(r.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),s.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,i,s,r,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.m.getNotebookDocument(x.revive(s)),u=c.controller.variableProvider;if(!u)return;let h;if(r!==void 0){if(h=this.r[r],!h)return}else this.r={};const f=n==="named"?Iu.Named:Iu.Indexed,p=u.provideVariables(l.apiNotebook,h,f,o,a);let g=0;for await(const v of p){if(a.isCancellationRequested)return;const b={id:this.q++,name:v.variable.name,value:v.variable.value,type:v.variable.type,interfaces:v.variable.interfaces,language:v.variable.language,expression:v.variable.expression,hasNamedChildren:v.hasNamedChildren,indexedChildrenCount:v.indexedChildrenCount,extensionId:c.extensionId.value};if(this.r[b.id]=v.variable,this.a.$receiveVariable(i,b),g++>=xG)return}}$acceptKernelMessageFromRenderer(t,i,s){const r=this.j.get(t);if(!r)return;const n=this.m.getEditorById(i);r.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:s}))}_createNotebookCellExecution(t,i){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const r=this.m.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!r)throw new Error("invalid cell");if(this.b.has(r.uri))throw new Error(`duplicate execution for ${r.uri}`);const n=new EG(i,r,this.a);this.b.set(r.uri,n);const o=n.onDidChangeState(()=>{n.state===Vs.Resolved&&(n.dispose(),o.dispose(),this.b.delete(r.uri))});return n.asApiObject()}_createNotebookExecution(t,i){const s=this.m.getNotebookDocument(t.uri),r=t.getCells().find(a=>{const c=s.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(r)throw new Error(`duplicate cell execution for ${r.document.uri}`);if(this.c.has(s.uri))throw new Error(`duplicate notebook execution for ${s.uri}`);const n=new SG(i,s,this.a),o=n.onDidChangeState(()=>{n.state===Kr.Resolved&&(n.dispose(),o.dispose(),this.c.delete(s.uri))});return this.c.set(s.uri,[n,o]),n.asApiObject()}};_4=__decorate([__param(4,De)],_4);var Vs;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Vs||(Vs={}));var EG=class l2 extends X{static{this.a=0}get state(){return this.f}constructor(t,i,s){super(),this.m=i,this.n=s,this.b=l2.a++,this.c=new D,this.onDidChangeState=this.c.event,this.f=Vs.Init,this.g=this.B(new Ke),this.h=new CG(10,r=>this.s(r)),this.j=i.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const i=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new bi(i))}t(){if(this.f===Vs.Init)throw new Error("Must call start before modifying cell output");if(this.f===Vs.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let i=this.m;if(t&&(i=this.m.notebook.getCellFromApiCell(t)),!i)throw new Error("INVALID cell");return i.handle}y(t){return t.map(i=>{const s=bp.ensureUniqueMimeTypes(i.items,!0);return s===i.items?Bn.from(i):Bn.from({items:s,id:i.id,metadata:i.metadata})})}async z(t,i,s){const r=this.w(i),n=this.y(Qi(t));return this.r({editType:_c.Output,cellHandle:r,append:s,outputs:n})}async C(t,i,s){return t=bp.ensureUniqueMimeTypes(Qi(t),!0),this.r({editType:_c.OutputItems,items:t.map(Cc.from),outputId:i.id,append:s})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(s){t.j=s,t.s([{editType:_c.ExecutionState,executionOrder:t.j}])},start(s){if(t.f===Vs.Resolved||t.f===Vs.Started)throw new Error("Cannot call start again");t.f=Vs.Started,t.c.fire(),t.s({editType:_c.ExecutionState,runStartTime:s})},end(s,r,n){if(t.f===Vs.Resolved)throw new Error("Cannot call resolve twice");t.f=Vs.Resolved,t.c.fire(),t.h.flush();const o=kG(n);t.n.$completeExecution(t.b,new bi({runEndTime:r,lastRunSuccess:s,error:o}))},clearOutput(s){return t.t(),t.z([],s,!1)},appendOutput(s,r){return t.t(),t.z(s,r,!0)},replaceOutput(s,r){return t.t(),t.z(s,r,!1)},appendOutputItems(s,r){return t.t(),t.C(s,r,!0)},replaceOutputItems(s,r){return t.t(),t.C(s,r,!1)}})}};function kG(e){const t=r=>r?{startLineNumber:r.start.line,startColumn:r.start.character,endLineNumber:r.end.line,endColumn:r.end.character}:void 0,i=r=>({uri:r.uri,position:r.position,label:r.label});return e?{name:e.name,message:e.message,stack:e.stack instanceof Array?e.stack.map(r=>i(r)):e.stack,location:t(e.location),uri:e.uri}:void 0}var Kr;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Kr||(Kr={}));var SG=class u2 extends X{static{this.a=0}get state(){return this.f}constructor(t,i,s){super(),this.h=i,this.j=s,this.b=u2.a++,this.c=new D,this.onDidChangeState=this.c.event,this.f=Kr.Init,this.g=this.B(new Ke),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===Kr.Resolved||this.f===Kr.Started)throw new Error("Cannot call start again");this.f=Kr.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===Kr.Resolved)throw new Error("Cannot call resolve twice");this.f=Kr.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},CG=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new is,this.b=Date.now(),ii(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function Bm(e,t){return`${e.value}/${t}`}var $G=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(Z.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const s=this.c.getEditorById(e);this.a.get(t)?.fire({editor:s.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(s=>s.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(s,r,n)=>this.d(t).event(s,r,n),postMessage:(s,r)=>{M4.apiEditorsToExtHost.has(s)&&([s,r]=[r,s]);const n=r&&M4.apiEditorsToExtHost.get(r);return this.b.$postMessage(n?.id,t,s)}}}d(e){let t=this.a.get(e);return t||(t=new D({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},IG=class{constructor(e){this.b=new Map,this.a=e.getProxy(Z.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if(L(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,i),this.a.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),ie(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,i,s){const r=this.b.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.saveProfile(t,i,s)}async $readProfile(e,t,i){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.readProfile(Ue(t)?t:x.revive(t),i)}},PG=class h2{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(Z.MainThreadQuickDiff)}$provideOriginalResource(t,i,s){const r=x.revive(i),n=this.c.get(t);return n?ai(()=>n.provideOriginalResource(r,s)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,i,s,r,n,o){const a=h2.a++;this.c.set(a,s);const c=qe.toKey(t.identifier);return this.b.$registerQuickDiffProvider(a,mc.from(i,this.d),`${c}.${r}`,n,o),{dispose:()=>{this.b.$unregisterQuickDiffProvider(a),this.c.delete(a)}}}};function DG(e,t,i){const s=e.getProxy(Z.MainThreadQuickOpen);class r{constructor(p,g){this.e=new Map,this.f=0,this.a=p,this.b=g}showQuickPick(p,g,v,b=Ye.None){this.c=void 0;const E=Promise.resolve(g),k=++this.f,I=s.$show(k,{title:v?.title,placeHolder:v?.placeHolder,matchOnDescription:v?.matchOnDescription,matchOnDetail:v?.matchOnDetail,ignoreFocusLost:v?.ignoreFocusOut,canPickMany:v?.canPickMany},b),B={},j=I.then(()=>B);return Promise.race([j,E]).then(te=>{if(te===B)return;const F=tt(p,"quickPickItemTooltip");return E.then(H=>{const U=[];for(let Y=0;Y<H.length;Y++){const he=H[Y];if(typeof he=="string")U.push({label:he,handle:Y});else if(he.kind===$u.Separator)U.push({type:"separator",label:he.label});else{he.tooltip&&!F&&console.warn(`Extension '${p.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${p.identifier.value}`);const re=he.iconPath?l(he.iconPath):void 0;U.push({label:he.label,iconPath:re?.iconPath,iconClass:re?.iconClass,description:he.description,detail:he.detail,picked:he.picked,alwaysShow:he.alwaysShow,tooltip:F?xe.fromStrict(he.tooltip):void 0,handle:Y})}}return v&&typeof v.onDidSelectItem=="function"&&(this.c=Y=>{v.onDidSelectItem(H[Y])}),s.$setItems(k,U),I.then(Y=>{if(typeof Y=="number")return H[Y];if(Array.isArray(Y))return Y.map(he=>H[he])})})}).then(void 0,te=>{if(!Ei(te))return s.$setError(k,te),Promise.reject(te)})}$onItemSelected(p){this.c?.(p)}showInput(p,g=Ye.None){return this.d=p?.validateInput,s.$input(p,typeof this.d=="function",g).then(void 0,v=>{if(!Ei(v))return Promise.reject(v)})}async $validateInput(p){if(!this.d)return;const g=await this.d(p);if(!g||typeof g=="string")return g;let v;switch(g.severity){case dc.Info:v=Mt.Info;break;case dc.Warning:v=Mt.Warning;break;case dc.Error:v=Mt.Error;break;default:v=g.message?Mt.Error:Mt.Ignore;break}return{content:g.message,severity:v}}async showWorkspaceFolderPick(p,g=Ye.None){const v=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[p]);if(!v)return;const b=await this.a.getWorkspaceFolders2();if(b)return b.find(E=>E.uri.toString()===v.uri.toString())}createQuickPick(p){const g=new u(p,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}createInputBox(p){const g=new h(p,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}$onDidChangeValue(p,g){this.e.get(p)?._fireDidChangeValue(g)}$onDidAccept(p){this.e.get(p)?._fireDidAccept()}$onDidChangeActive(p,g){const v=this.e.get(p);v instanceof u&&v._fireDidChangeActive(g)}$onDidChangeSelection(p,g){const v=this.e.get(p);v instanceof u&&v._fireDidChangeSelection(g)}$onDidTriggerButton(p,g){this.e.get(p)?._fireDidTriggerButton(g)}$onDidTriggerItemButton(p,g,v){const b=this.e.get(p);b instanceof u&&b._fireDidTriggerItemButton(g,v)}$onDidHide(p){this.e.get(p)?._fireDidHide()}}class n{static{this.a=1}constructor(p,g){this.y=p,this.z=g,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.m=void 0,this.o=[],this.p=new Map,this.q=new D,this.r=new D,this.s=new D,this.t=new D,this.v={id:this._id},this.w=!1,this.x=[this.s,this.t,this.q,this.r],this.onDidChangeValue=this.r.event,this.onDidAccept=this.q.event,this.onDidTriggerButton=this.s.event,this.onDidHide=this.t.event}get title(){return this.b}set title(p){this.b=p,this.A({title:p})}get step(){return this.c}set step(p){this.c=p,this.A({step:p})}get totalSteps(){return this.d}set totalSteps(p){this.d=p,this.A({totalSteps:p})}get enabled(){return this.g}set enabled(p){this.g=p,this.A({enabled:p})}get busy(){return this.j}set busy(p){this.j=p,this.A({busy:p})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(p){this.k=p,this.A({ignoreFocusOut:p})}get value(){return this.l}set value(p){this.l=p,this.A({value:p})}get valueSelection(){return this.m}set valueSelection(p){this.m=p,this.A({valueSelection:p})}get placeholder(){return this.n}set placeholder(p){this.n=p,this.A({placeholder:p})}get buttons(){return this.o}set buttons(p){const g=tt(this.y,"quickInputButtonLocation");!g&&p.some(v=>v.location)&&console.warn(`Extension '${this.y.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`),this.o=p.slice(),this.p.clear(),p.forEach((v,b)=>{const E=v===Cu.Back?-1:b;this.p.set(E,v)}),this.A({buttons:p.map((v,b)=>({...l(v.iconPath),tooltip:v.tooltip,handle:v===Cu.Back?-1:b,location:g?v.location:void 0}))})}show(){this.e=!0,this.f=!0,this.A({visible:!0})}hide(){this.e=!1,this.A({visible:!1})}_fireDidAccept(){this.q.fire()}_fireDidChangeValue(p){this.l=p,this.r.fire(p)}_fireDidTriggerButton(p){const g=this.p.get(p);g&&this.s.fire(g)}_fireDidHide(){this.f&&(this.f=this.e,this.t.fire())}dispose(){this.w||(this.w=!0,this._fireDidHide(),this.x=Es(this.x),this.u&&(clearTimeout(this.u),this.u=void 0),this.z(),s.$dispose(this._id))}A(p){if(!this.w){for(const g of Object.keys(p)){const v=p[g];this.v[g]=v===void 0?null:v}"visible"in this.v?(this.u&&(clearTimeout(this.u),this.u=void 0),this.B()):this.e&&!this.u&&(this.u=setTimeout(()=>{this.u=void 0,this.B()},0))}}B(){s.$createOrUpdate(this.v),this.v={id:this._id}}}function o(f){if(f instanceof di)return{id:f.id};const p=c(f),g=a(f);return{dark:typeof p=="string"?x.file(p):p,light:typeof g=="string"?x.file(g):g}}function a(f){return typeof f=="object"&&"light"in f?f.light:f}function c(f){return typeof f=="object"&&"dark"in f?f.dark:f}function l(f){const p=o(f);let g,v;return"id"in p?v=Ut.asClassName(p):g=p,{iconPath:g,iconClass:v}}class u extends n{constructor(p,g){super(p,g),this.C=[],this.D=new Map,this.E=new Map,this.F=!1,this.G=!0,this.H=!0,this.I=!0,this.J=!1,this.K=[],this.L=new D,this.M=[],this.N=new D,this.O=new D,this.onDidChangeActive=this.L.event,this.onDidChangeSelection=this.N.event,this.onDidTriggerItemButton=this.O.event,this.x.push(this.L,this.N,this.O),this.A({type:"quickPick"})}get items(){return this.C}set items(p){this.C=p.slice(),this.D.clear(),this.E.clear(),p.forEach((b,E)=>{this.D.set(E,b),this.E.set(b,E)});const g=tt(this.y,"quickPickItemTooltip"),v=[];for(let b=0;b<p.length;b++){const E=p[b];if(E.kind===$u.Separator)v.push({type:"separator",label:E.label});else{E.tooltip&&!g&&console.warn(`Extension '${this.y.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`);const k=E.iconPath?l(E.iconPath):void 0;v.push({handle:b,label:E.label,iconPath:k?.iconPath,iconClass:k?.iconClass,description:E.description,detail:E.detail,picked:E.picked,alwaysShow:E.alwaysShow,tooltip:g?xe.fromStrict(E.tooltip):void 0,buttons:E.buttons?.map((I,B)=>({...l(I.iconPath),tooltip:I.tooltip,handle:B}))})}}this.A({items:v})}get canSelectMany(){return this.F}set canSelectMany(p){this.F=p,this.A({canSelectMany:p})}get matchOnDescription(){return this.G}set matchOnDescription(p){this.G=p,this.A({matchOnDescription:p})}get matchOnDetail(){return this.H}set matchOnDetail(p){this.H=p,this.A({matchOnDetail:p})}get sortByLabel(){return this.I}set sortByLabel(p){this.I=p,this.A({sortByLabel:p})}get keepScrollPosition(){return this.J}set keepScrollPosition(p){this.J=p,this.A({keepScrollPosition:p})}get activeItems(){return this.K}set activeItems(p){this.K=p.filter(g=>this.E.has(g)),this.A({activeItems:this.K.map(g=>this.E.get(g))})}get selectedItems(){return this.M}set selectedItems(p){this.M=p.filter(g=>this.E.has(g)),this.A({selectedItems:this.M.map(g=>this.E.get(g))})}_fireDidChangeActive(p){const g=yt(p.map(v=>this.D.get(v)));this.K=g,this.L.fire(g)}_fireDidChangeSelection(p){const g=yt(p.map(v=>this.D.get(v)));this.M=g,this.N.fire(g)}_fireDidTriggerItemButton(p,g){const v=this.D.get(p);if(!v||!v.buttons||!v.buttons.length)return;const b=v.buttons[g];b&&this.O.fire({button:b,item:v})}}class h extends n{constructor(p,g){super(p,g),this.C=!1,this.A({type:"inputBox"})}get password(){return this.C}set password(p){this.C=p,this.A({password:p})}get prompt(){return this.D}set prompt(p){this.D=p,this.A({prompt:p})}get validationMessage(){return this.E}set validationMessage(p){this.E=p,p?typeof p=="string"?this.A({validationMessage:p,severity:Mt.Error}):this.A({validationMessage:p.message,severity:p.severity??Mt.Error}):this.A({validationMessage:void 0,severity:Mt.Ignore})}}return new r(t,i)}var q4;function VD(e){return e instanceof x}function AG(e,t){return e.scheme===G.file&&t.scheme===G.file&&$t?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function G4(e){if(e)return typeof e.iconPath=="string"?x.file(e.iconPath):x.isUri(e.iconPath)||Ut.isThemeIcon(e.iconPath)?e.iconPath:void 0}function oa(e){if(e){if(x.isUri(e))return e;if(Ut.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function TG(e){const t=oa(e.authorIcon),i=e.references?.map(s=>({...s,icon:oa(s.icon)}));return{...e,authorIcon:t,references:i}}function J4(e){return e?{...e,icon:oa(e.icon)}:void 0}function Y4(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const i=typeof e.iconPath=="string"?e.iconPath:x.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,s=typeof t.iconPath=="string"?t.iconPath:x.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return pm(i,s)}function RG(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=Y4(e,t),i!==0)return i;if(e.light&&t.light)i=Y4(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(i!==0)return i;if(e.dark&&t.dark)i=Y4(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}function LG(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let i=0;i<e.arguments.length;i++){const s=e.arguments[i],r=t.arguments[i];if(s!==r&&!(VD(s)&&VD(r)&&AG(s,r)))return s<r?-1:1}return 0}function _D(e,t){let i=pm(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(i!==0)return i;if(e.command&&t.command)i=LG(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(i!==0)return i;if(e.decorations&&t.decorations)i=RG(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(i!==0)return i;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)i=pm(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(i!==0)return i;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)i=pm(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return i}function NG(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function MG(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?NG(e.arguments,t.arguments):e.arguments===t.arguments)}function OG(e,t){return Oi(e,t,MG)}var FG=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return L(this.l,"scmValidation"),this.h}set validateInput(e){if(L(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return L(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,i,s,r){this.l=e,this.m=s,this.n=r,this.d="",this.f=new D,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=i}showValidationMessage(e,t){L(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},UG=class d2{static{this.d=0}get disposed(){return this.m}get id(){return this.w}get label(){return this.x}set label(t){this.x=t,this.t.$updateGroupLabel(this.v,this.handle,t)}get contextValue(){return this.q}set contextValue(t){this.q=t,this.t.$updateGroup(this.v,this.handle,this.features)}get hideWhenEmpty(){return this.s}set hideWhenEmpty(t){this.s=t,this.t.$updateGroup(this.v,this.handle,this.features)}get features(){return{contextValue:this.contextValue,hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,i,s,r,n,o,a){this.t=t,this.u=i,this.v=s,this.w=r,this.x=n,this.multiDiffEditorEnableViewChanges=o,this.y=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new D,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new D,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.s=void 0,this.handle=d2.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,i){const s=this.j.get(t);return s?ai(()=>this.u.executeCommand(s.command,...s.arguments||[],i)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(_D),s=ox(this.p,t,_D).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const H=new se;h=this.u.converter.toInternal(c.command,H),this.k.set(l,H)}else this.j.set(l,c.command);const f=tt(this.y,"scmMultiDiffEditor"),p=f?c.multiDiffEditorOriginalUri:void 0,g=f?c.multiFileDiffEditorModifiedUri:void 0,v=G4(c.decorations),b=c.decorations&&G4(c.decorations.light)||v,E=c.decorations&&G4(c.decorations.dark)||v,k=[b,E],I=c.decorations&&c.decorations.tooltip||"",B=c.decorations&&!!c.decorations.strikeThrough,j=c.decorations&&!!c.decorations.faded,te=c.contextValue||"";return{rawResource:[l,u,k,I,B,j,te,h,p,g],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),r=s.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=s.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,r}dispose(){this.m=!0,this.n.fire()}},Z4=class f2{static{this.d=0}#e;get id(){return this.A}get label(){return this.B}get rootUri(){return this.C}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.x,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let i;tt(this.y,"quickDiffProvider")&&(i=t?.label),this.#e.$updateSourceControl(this.x,{hasQuickDiffProvider:!!t,quickDiffLabel:i})}get secondaryQuickDiffProvider(){return L(this.y,"quickDiffProvider"),this.k}set secondaryQuickDiffProvider(t){L(this.y,"quickDiffProvider"),this.k=t;const i=t?.label;this.#e.$updateSourceControl(this.x,{hasSecondaryQuickDiffProvider:!!t,secondaryQuickDiffLabel:i})}get historyProvider(){return L(this.y,"scmHistoryProvider"),this.l}set historyProvider(t){L(this.y,"scmHistoryProvider"),this.l=t,this.m.value=new se,this.#e.$updateSourceControl(this.x,{hasHistoryProvider:!!t}),t&&(this.m.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const i=J4(t?.currentHistoryItemRef),s=J4(t?.currentHistoryItemRemoteRef),r=J4(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.x,i,s,r)})),this.m.value.add(t.onDidChangeHistoryItemRefs(i=>{if(i.added.length===0&&i.modified.length===0&&i.removed.length===0)return;const s=i.added.map(o=>({...o,icon:oa(o.icon)})),r=i.modified.map(o=>({...o,icon:oa(o.icon)})),n=i.removed.map(o=>({...o,icon:oa(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.x,{added:s,modified:r,removed:n,silent:i.silent})})))}get commitTemplate(){return this.n}set commitTemplate(t){t!==this.n&&(this.n=t,this.#e.$updateSourceControl(this.x,{commitTemplate:t}))}get acceptInputCommand(){return this.p}set acceptInputCommand(t){this.o.value=new se,this.p=t;const i=this.z.converter.toInternal(t,this.o.value);this.#e.$updateSourceControl(this.x,{acceptInputCommand:i})}get actionButton(){return L(this.y,"scmActionButton"),this.s}set actionButton(t){if(L(this.y,"scmActionButton"),i0(this.s,t))return;this.s=t,this.q.value=new se;const i=t!==void 0?{command:{...this.z.converter.toInternal(t.command,this.q.value),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(s=>s.map(r=>this.z.converter.toInternal(r,this.q.value))),enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.x,{actionButton:i??null})}get statusBarCommands(){return this.u}set statusBarCommands(t){if(this.u&&t&&OG(this.u,t))return;this.t.value=new se,this.u=t;const i=(t||[]).map(s=>this.z.converter.toInternal(s,this.t.value));this.#e.$updateSourceControl(this.x,{statusBarCommands:i})}get selected(){return this.v}constructor(t,i,s,r,n,o,a){this.y=t,this.z=r,this.A=n,this.B=o,this.C=a,this.f=new Map,this.h=void 0,this.j=void 0,this.k=void 0,this.m=new Js,this.n=void 0,this.o=new Js,this.p=void 0,this.q=new Js,this.t=new Js,this.u=void 0,this.v=!1,this.w=new D,this.onDidChangeSelection=this.w.event,this.x=f2.d++,this.D=new Map,this.E=new Set,this.#e=s;const c=x.from({scheme:G.vscodeSourceControl,path:`${n}/scm${this.x}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new FG(t,i,this.#e,this.x,c),this.#e.$registerSourceControl(this.x,n,o,a,c)}createResourceGroup(t,i,s){const r=tt(this.y,"scmMultiDiffEditor")&&s?.multiDiffEditorEnableViewChanges===!0,n=new UG(this.#e,this.z,this.x,t,i,r,this.y),o=Ve.once(n.onDidDispose)(()=>this.D.delete(n));return this.D.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],i=[];for(const[s,r]of this.D){r.dispose();const n=s.onDidUpdateResourceStates(()=>{this.E.add(s),this.eventuallyUpdateResourceStates()});Ve.once(s.onDidDispose)(()=>{this.E.delete(s),n.dispose(),this.f.delete(s.handle),this.#e.$unregisterGroup(this.x,s.handle)}),t.push([s.handle,s.id,s.label,s.features,s.multiDiffEditorEnableViewChanges]);const o=s._takeResourceStateSnapshot();o.length>0&&i.push([s.handle,o]),this.f.set(s.handle,s)}this.#e.$registerGroups(this.x,t,i),this.D.clear()}eventuallyUpdateResourceStates(){const t=[];this.E.forEach(i=>{const s=i._takeResourceStateSnapshot();s.length!==0&&t.push([i.handle,s])}),t.length>0&&this.#e.$spliceResourceStates(this.x,t),this.E.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.v=t,this.w.fire(t)}dispose(){this.o.dispose(),this.q.dispose(),this.t.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.x)}};__decorate([Od(100)],Z4.prototype,"eventuallyAddResourceGroups",null),__decorate([Od(100)],Z4.prototype,"eventuallyUpdateResourceStates",null);var Q4=class{static{q4=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,i,s,r){this.m=i,this.n=s,this.o=r,this.h=new Map,this.j=new Tr,this.k=new D,this.f=t.getProxy(Z.MainThreadSCM),this.g=t.getProxy(Z.MainThreadTelemetry),i.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,i,s,r){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,i,s,r),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=q4.d++,o=new Z4(t,this.n,this.f,this.m,i,s,r);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const i=this.j.get(t.identifier),s=i&&i[i.length-1];return s&&s.inputBox}$provideOriginalResource(t,i,s){const r=x.revive(i);this.o.trace("ExtHostSCM#$provideOriginalResource",t,r.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):ai(()=>n.quickDiffProvider.provideOriginalResource(r,s)).then(o=>o||null)}$provideSecondaryOriginalResource(t,i,s){const r=x.revive(i);this.o.trace("ExtHostSCM#$provideSecondaryOriginalResource",t,r.toString());const n=this.h.get(t);return!n||!n.secondaryQuickDiffProvider||!n.secondaryQuickDiffProvider.provideOriginalResource?Promise.resolve(null):ai(()=>n.secondaryQuickDiffProvider.provideOriginalResource(r,s)).then(o=>o||null)}$onInputBoxValueChange(t,i){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const s=this.h.get(t);return s&&s.inputBox.$onInputBoxValueChange(i),Promise.resolve(void 0)}$executeResourceCommand(t,i,s,r){this.o.trace("ExtHostSCM#$executeResourceCommand",t,i,s);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(i);return o?o.$executeResourceCommand(s,r):Promise.resolve(void 0)}$validateInput(t,i,s){this.o.trace("ExtHostSCM#$validateInput",t);const r=this.h.get(t);return!r||!r.inputBox.validateInput?Promise.resolve(void 0):ai(()=>r.inputBox.validateInput(i,s)).then(n=>{if(!n)return Promise.resolve(void 0);const o=xe.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemChatContext(t,i,s){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemChatContext(i,s)??void 0}catch(r){this.o.error("ExtHostSCM#$resolveHistoryItemChatContext",r);return}}async $resolveHistoryItemRefsCommonAncestor(t,i,s){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(i,s)??void 0}catch(r){this.o.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",r);return}}async $provideHistoryItemRefs(t,i,s){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(i,s))?.map(o=>({...o,icon:oa(o.icon)}))??void 0}catch(r){this.o.error("ExtHostSCM#$provideHistoryItemRefs",r);return}}async $provideHistoryItems(t,i,s){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItems(i,s))?.map(o=>TG(o))??void 0}catch(r){this.o.error("ExtHostSCM#$provideHistoryItems",r);return}}async $provideHistoryItemChanges(t,i,s,r){try{return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(i,s,r)??void 0}catch(n){this.o.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};Q4=q4=__decorate([__param(3,De)],Q4);var jG=class p2{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(Z.MainThreadShare)}async $provideShare(t,i,s){return await this.c.get(t)?.provideShare({selection:O.to(i.selection),resourceUri:x.revive(i.resourceUri)},s)??void 0}registerShareProvider(t,i){const s=p2.a++;return this.c.set(s,i),this.b.$registerShareProvider(s,mc.from(t,this.d),i.id,i.label,i.priority),{dispose:()=>{this.b.$unregisterShareProvider(s),this.c.delete(s)}}}},BG=class g2{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(Z.MainThreadSpeech)}async $createSpeechToTextSession(t,i,s){const r=this.c.get(t);if(!r)return;const n=new se,o=new Ke;this.d.set(i,o);const a=await r.provideSpeechToTextSession(o.token,s?{language:s}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,i,s){const r=this.c.get(t);if(!r)return;const n=new se,o=new Ke;this.d.set(i,o);const a=await r.provideTextToSpeechSession(o.token,s?{language:s}:void 0);a&&(this.f.set(i,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,i){this.f.get(t)?.synthesize(i)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,i){const s=this.c.get(t);if(!s)return;const r=new se,n=new Ke;this.d.set(i,n);const o=await s.provideKeywordRecognitionSession(n.token);o&&(r.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(i,a)})),r.add(n.token.onCancellationRequested(()=>r.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,i,s){const r=g2.a++;return this.c.set(r,s),this.b.$registerProvider(r,i,{extension:t,displayName:t.value}),ie(()=>{this.b.$unregisterProvider(r),this.c.delete(r)})}},HG=class g1{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new mu("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new mu("statusBarItem.warningForeground")]])}#e;#t;constructor(t,i,s,r,n,o=Rn.Left,a,c){if(this.v=c,this.i=!1,this.k="",this.r=new se,this.#e=t,this.#t=i,n&&r){this.c=pB(r.identifier,n);const l=s.get(this.c);l&&(o=l.alignLeft?Rn.Left:Rn.Right,a=l.priority,this.j=!0,this.name=l.name,this.text=l.text,this.tooltip=l.tooltip,this.command=l.command,this.accessibilityInformation=l.accessibilityInformation)}else this.c=String(g1.a++);this.e=r,this.f=n,this.g=o,this.h=this.w(a)}w(t){if(us(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get entryId(){return this.c}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.n}get tooltip(){return this.l}get tooltip2(){return this.e&&L(this.e,"statusBarItemTooltip"),this.m}get color(){return this.o}get backgroundColor(){return this.p}get command(){return this.s?.fromApi}get accessibilityInformation(){return this.u}set text(t){this.k=t,this.x()}set name(t){this.n=t,this.x()}set tooltip(t){this.l=t,this.x()}set tooltip2(t){this.e&&L(this.e,"statusBarItemTooltip"),this.m=t,this.x()}set color(t){this.o=t,this.x()}set backgroundColor(t){t&&!g1.b.has(t.id)&&(t=void 0),this.p=t,this.x()}set command(t){this.s?.fromApi!==t&&(this.q&&this.r.add(this.q),this.q=new se,typeof t=="string"?this.s={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.q)}:t?this.s={fromApi:t,internal:this.#t.toInternal(t,this.q)}:this.s=void 0,this.x())}set accessibilityInformation(t){this.u=t,this.x()}show(){this.j=!0,this.x()}hide(){clearTimeout(this.t),this.j=!1,this.#e.$disposeEntry(this.c)}x(){this.i||!this.j||(clearTimeout(this.t),this.t=setTimeout(()=>{this.t=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let i;this.n?i=this.n:i=d(2906,null,this.e.displayName||this.e.name);let s=this.o;this.p&&(s=g1.b.get(this.p.id));let r,n;typeof this.m=="function"?(r=xe.fromStrict(this.l),n=!0):(r=xe.fromStrict(this.m??this.l),n=!1),this.#e.$setEntry(this.c,t,this.e?.identifier.value,i,this.k,r,n,this.s?.internal,s,this.p,this.g===Rn.Left,this.h,this.u),this.r.clear()},0))}dispose(){this.hide(),this.v?.(),this.i=!0}},zG=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",Rn.Left,Number.MIN_VALUE),this.a.name=d(2907,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Le(()=>{const i=this.b.indexOf(t);i>=0&&(this.b.splice(i,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},WG=class{constructor(e,t){this.e=new Map,this.f=new Map,this.a=e.getProxy(Z.MainThreadStatusBar),this.b=t,this.c=new zG(this)}$acceptStaticEntries(e){for(const t of e)this.f.set(t.entryId,t)}async $provideTooltip(e,t){const i=this.e.get(e);if(!i)return;const s=typeof i.tooltip2=="function"?await i.tooltip2(t):i.tooltip2;return t.isCancellationRequested?void 0:xe.fromStrict(s)}createStatusBarEntry(e,t,i,s){const r=new HG(this.a,this.b,this.f,e,t,i,s,()=>this.e.delete(r.entryId));return this.e.set(r.entryId,r),r}setStatusBarMessage(e,t){const i=this.c.setMessage(e);let s;return typeof t=="number"?s=setTimeout(()=>i.dispose(),t):typeof t<"u"&&t.then(()=>i.dispose(),()=>i.dispose()),new Le(()=>{i.dispose(),clearTimeout(s)})}},VG=class extends X{constructor(e,t){super(),this.n=t,this.a=new D,this.b=new D,this.c=new D,this.f=new D,this.g=new D,this.h=new D,this.j=new D,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeTextEditorDiffInformation=this.g.event,this.onDidChangeActiveTextEditor=this.h.event,this.onDidChangeVisibleTextEditors=this.j.event,this.m=e.getProxy(Z.MainThreadTextEditors),this.B(this.n.onDidChangeVisibleTextEditors(i=>this.j.fire(i))),this.B(this.n.onDidChangeActiveTextEditor(i=>this.h.fire(i)))}getActiveTextEditor(){return this.n.activeEditor()}getVisibleTextEditors(e){const t=this.n.allEditors();return e?t:t.map(i=>i.value)}async showTextDocument(e,t,i){let s;typeof t=="number"?s={position:Wt.from(t),preserveFocus:i}:typeof t=="object"?s={position:Wt.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?O.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:s={preserveFocus:!1};const r=await this.m.$tryShowTextDocument(e.uri,s),n=r&&this.n.getEditor(r);if(n)return n.value;throw r?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new uW(this.m,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const s=t.selections.selections.map(Fs.to);i._acceptSelections(s)}if(t.visibleRanges){const s=yt(t.visibleRanges.map(O.to));i._acceptVisibleRanges(s)}if(t.options&&this.b.fire({textEditor:i.value,options:{...t.options,lineNumbers:xc.to(t.options.lineNumbers)}}),t.selections){const s=Ka.fromValue(t.selections.source),r=t.selections.selections.map(Fs.to);this.a.fire({textEditor:i.value,selections:r,kind:s})}if(t.visibleRanges){const s=yt(t.visibleRanges.map(O.to));this.c.fire({textEditor:i.value,visibleRanges:s})}}$acceptEditorPositionData(e){for(const t in e){const i=this.n.getEditor(t);if(!i)throw new Error("Unknown text editor");const s=Wt.to(e[t]);i.value.viewColumn!==s&&(i._acceptViewColumn(s),this.f.fire({textEditor:i.value,viewColumn:s}))}}$acceptEditorDiffInformation(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(!t){i._acceptDiffInformation(void 0),this.g.fire({textEditor:i.value,diffInformation:void 0});return}const s=this,r=t.map(n=>{const o=x.revive(n.original),a=x.revive(n.modified),c=n.changes.map(l=>{const[u,h,f,p]=l;let g;return u===h?g=ec.Addition:f===p?g=ec.Deletion:g=ec.Modification,{original:{startLineNumber:u,endLineNumberExclusive:h},modified:{startLineNumber:f,endLineNumberExclusive:p},kind:g}});return Object.freeze({documentVersion:n.documentVersion,original:o,modified:a,changes:c,get isStale(){return s.n.getDocument(a)?.version!==n.documentVersion}})});i._acceptDiffInformation(r),this.g.fire({textEditor:i.value,diffInformation:r})}getDiffInformation(e){return Promise.resolve(this.m.$getDiffInformation(e))}},X4=class{constructor(t){this.a=new vp(On.Dark),this.b=new D}get activeColorTheme(){return this.a}$onColorThemeChange(t){let i;switch(t){case"light":i=On.Light;break;case"hcDark":i=On.HighContrast;break;case"hcLight":i=On.HighContrastLight;break;default:i=On.Dark}this.a=new vp(i),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};X4=__decorate([__param(0,Ae)],X4);var Fne=q("IExtHostTimeline"),_G=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(Z.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(i,s)=>{if(i&&i.$mid===12)if(this.b.get(i.source)&&s&&tt(s,"timeline")){const r=i.uri===void 0?void 0:x.revive(i.uri);return this.c.get(i.source)?.get(qD(r))?.get(i.handle)}else return;return i}})}async $getTimeline(e,t,i,s){return this.b.get(e)?.provider.provideTimeline(x.revive(t),i,s)}registerTimelineProvider(e,t,i,s){const r=new se,n=this.d(t.id,s,r).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(r.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const f=n(c,l);return{...h,source:t.id,items:h.items.map(f)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),r.dispose()}},i)}d(e,t,i){return(s,r)=>{let n;if(r?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=qD(s);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,f;o.iconPath&&(a instanceof di?f={id:a.id,color:a.color}:x.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let p;return Vi.isMarkdownString(c.tooltip)?p=xe.from(c.tooltip):Ue(c.tooltip)?p=c.tooltip:Vi.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=xe.from(c.detail)):Ue(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,i):void 0,icon:u,iconDark:h,themeIcon:f,tooltip:p,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),ie(()=>{for(const s of this.c.values())s.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function qD(e){return e?.toString()}var Une=d(4463,null),jne=Ou("default-view-icon",le.window,d(4464,null)),Hm;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(Hm||(Hm={}));var GD;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(GD||(GD={}));var qG=class extends X{constructor(){super(...arguments),this.c=this.B(new D),this.onDidRegister=this.c.event,this.f=this.B(new D),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,i){const s=this.get(e.id);if(s)return s;const r=e;return r.openCommandActionDescriptor=i?.doNotRegisterOpenCommand?void 0:r.openCommandActionDescriptor??{id:r.id},aT(this.g,t,[]).push(r),i?.isDefault&&this.h.push(r),this.c.fire({viewContainer:r,viewContainerLocation:t}),r}deregisterViewContainer(e){for(const t of this.g.keys()){const i=this.g.get(t),s=i?.indexOf(e);if(s!==-1){i?.splice(s,1),i.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(i=>i?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};Xt.add(Hm.ViewContainersRegistry,new qG);var zm;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(zm||(zm={}));function GG(e,t){const i=e.group??zm.More,s=t.group??zm.More;return i!==s?i.localeCompare(s):(e.order??5)-(t.order??5)}var JG=class extends X{constructor(){super(...arguments),this.c=this.B(new D),this.onViewsRegistered=this.c.event,this.f=this.B(new D),this.onViewsDeregistered=this.f.event,this.g=this.B(new D),this.onDidChangeContainer=this.g.event,this.h=this.B(new D),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new px}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:i})=>this.r(t,i)),this.c.fire(e)}deregisterViews(e,t){const i=this.s(e,t);i.length&&this.f.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this.m.keys())if(i!==t){const s=this.s(e,i);s.length&&(this.r(s,t),this.g.fire({views:s,from:i,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const i=(this.m.get(t)||[]).filter(s=>s.id===e)[0];if(i)return i}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(s=>s.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),ie(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const i=new Map;for(const[s,r]of t)this.n.add(e,r),i.set(s,ie(()=>{this.n.delete(e,r),this.h.fire(e)}));return this.h.fire(e),i}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,i=>t.push(i)),t.sort(GG)}r(e,t){let i=this.m.get(t);i||(i=[],this.m.set(t,i),this.j.push(t));for(const s of e){if(this.getView(s.id)!==null)throw new Error(d(4465,null,s.id));i.push(s)}}s(e,t){const i=this.m.get(t);if(!i)return[];const s=[],r=[];for(const n of i)e.includes(n)?s.push(n):r.push(n);return s.length&&(r.length?this.m.set(t,r):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),s}};Xt.add(Hm.ViewsRegistry,new JG);var Bne=q("viewDescriptorService"),JD;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(JD||(JD={}));var YD;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(YD||(YD={}));var en=class extends Error{constructor(e){super(d(4466,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},YG=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function ZD(e,t){if(Ue(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let i;return Array.isArray(e.highlights)&&(i=e.highlights.filter(s=>s.length===2&&typeof s[0]=="number"&&typeof s[1]=="number"),i=i.length?i:void 0),{label:e.label,highlights:i}}}var ZG=class extends X{constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=new Map,this.b=new YG;function s(r){return r&&r.$treeViewId&&(r.$treeItemHandle||r.$selectedTreeItems||r.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:r=>s(r)?this.r(r):Array.isArray(r)&&r.length>0?r.map(n=>s(n)?this.r(n):n):r})}registerTreeDataProvider(e,t,i){const s=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>s.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const s=t.dragAndDropController?.dropMimeTypes??[],r=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,i),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:s,dragMimeTypes:r,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return L(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return L(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){Nr(h)&&L(i,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&tw.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,f)=>a.reveal(h,f),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}async $getChildren(e,t){const i=this.a.get(e);if(!i)return Promise.reject(new en(e));if(!t){const r=await i.getChildren();return r?[[0,...r]]:void 0}const s=[];for(let r=0;r<t.length;r++){const n=t[r],o=await i.getChildren(n);o&&s.push([r,...o])}return s}async $handleDrop(e,t,i,s,r,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new en(e));const l=Pc.toDataTransfer(i,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,r,n),c.onDrop(l,s,r)}async j(e,t,i,s,r){const n=this.b.removeDragOperationTransfer(r);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(r&&t.handleDrag){const o=t.handleDrag(i,e,s);this.b.addDragOperationTransfer(r,o),await o}return e}async $handleDrag(e,t,i,s){const r=this.a.get(e);if(!r)return Promise.reject(new en(e));const n=await this.j(new rc,r,t,s,i);if(!(!n||s.isCancellationRequested))return Pc.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new en(e);return t.hasResolve}$resolve(e,t,i){const s=this.a.get(e);if(!s)throw new en(e);return s.resolveTreeItem(t,i)}$setExpanded(e,t,i){const s=this.a.get(e);if(!s)throw new en(e);s.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const s=this.a.get(e);if(!s)throw new en(e);s.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.a.get(e);if(!i){if(!t)return;throw new en(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.a.get(e);if(!i)throw new en(e);i.setCheckboxState(t)}m(e,t,i){const s=this.B(new QG(e,t,this.f,this.g.converter,this.h,i));return this.a.set(e,s),s}r(e){const t=this.a.get(e.$treeViewId),i=e;return t&&i.$treeItemHandle?t.getExtensionElement(i.$treeItemHandle):t&&e.$focusedTreeItem?t.focusedElement:null}},QG=class X5 extends X{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!Tt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,i,s,r,n,o){if(super(),this.I=t,this.J=s,this.L=r,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new D),this.onDidExpandElement=this.u.event,this.w=this.B(new D),this.onDidCollapseElement=this.w.event,this.y=this.B(new D),this.onDidChangeSelection=this.y.event,this.z=this.B(new D),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new D),this.onDidChangeVisibility=this.C.event,this.D=this.B(new D),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new D),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new Ke,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=i.treeDataProvider,this.g=i.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=Ve.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(f=>c=f),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const f=c;return a=null,this.$(h).then(()=>f())})),u&&this.J.$setMessage(this.I,xe.fromStrict(this.O)??"")}))}async getChildren(t){const i=t?this.getExtensionElement(t):void 0;if(t&&!i)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let s=this.X(t);return s||(s=await this.Y(i)),s?s.map(r=>r.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,i){i=i||{select:!0,focus:!1};const s=Tt(i.select)?!0:i.select,r=Tt(i.focus)?!1:i.focus,n=Tt(i.expand)?!1:i.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:s,focus:r,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:s,focus:r,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=ng.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,i){const s=this.getExtensionElement(t);s&&(i?this.u.fire(Object.freeze({element:s})):this.w.fire(Object.freeze({element:s})))}setSelectionAndFocus(t,i){const s=!Oi(this.s,t);this.s=t;const r=this.t!==i;this.t=i,s&&this.y.fire(Object.freeze({selection:this.selectedElements})),r&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const i=(await Promise.all(t.map(async s=>{const r=this.getExtensionElement(s.treeItemHandle);return r?{extensionItem:r,treeItem:await this.f.getTreeItem(r),newState:s.newState?cr.Checked:cr.Unchecked}:Promise.resolve(void 0)}))).filter(s=>s!==void 0);i.forEach(s=>{s.treeItem.checkboxState=s.newState?cr.Checked:cr.Unchecked}),this.D.fire({items:i.map(s=>[s.extensionItem,s.newState])})}async handleDrag(t,i,s){const r=[];for(const n of t){const o=this.getExtensionElement(n);o&&r.push(o)}if(!(!this.g?.handleDrag||r.length===0))return await this.g.handleDrag(r,i,s),i}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,i,s){const r=i?this.getExtensionElement(i):void 0;if(!(!r&&i||!this.g?.handleDrop))return ai(()=>this.g?.handleDrop?this.g.handleDrop(r,t,s):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,i){if(!this.f.resolveTreeItem)return;const s=this.j.get(t);if(s){const r=this.m.get(s);if(r){const n=await this.f.resolveTreeItem(r.extensionItem,s,i)??r.extensionItem;return this.hb(n),r.item.tooltip=this.eb(n.tooltip),r.item.command=this.fb(r.disposableStore,n.command),r.item}}}S(t){return this.U(t).then(i=>i?this.S(i).then(s=>this.W(i,s[s.length-1]).then(r=>(s.push(r),s))):Promise.resolve([]))}U(t){const i=this.m.get(t);return i?Promise.resolve(i.parent?this.j.get(i.parent.item.handle):void 0):ai(()=>this.f.getParent(t))}W(t,i){const s=this.m.get(t);return s?Promise.resolve(s):ai(()=>this.f.getTreeItem(t)).then(r=>this.kb(t,r,i,!0)).then(r=>this.getChildren(i?i.item.handle:void 0).then(()=>{const n=this.getExtensionElement(r);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${r} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let i;if(typeof t=="string"){const s=this.getExtensionElement(t);i=s?this.m.get(s):void 0}else i=t;return i&&i.children||void 0}return this.h}async Y(t){this.rb(t);const i=new Ke(this.Z.token);try{const s=t?this.m.get(t):void 0,r=await this.f.getChildren(t);if(i.token.isCancellationRequested)return;const n=yt(r||[]),o=await Promise.all(yt(n).map(c=>this.f.getTreeItem(c)));if(i.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,s):null);return yt(a)}finally{i.dispose()}}$(t){if(t.some(s=>!s))return this.Z.dispose(!0),this.Z=new Ke,this.tb(),this.J.$refresh(this.I);{const s=this.ab(t);if(s.length)return this.bb(s)}return Promise.resolve(void 0)}ab(t){const i=new Set,s=t.map(n=>this.m.get(n));for(const n of s)if(n&&!i.has(n.item.handle)){let o=n;for(;o&&o.parent&&s.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&i.add(n.item.handle)}const r=[];return i.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!i.has(a.parent.item.handle))&&r.push(n)}}),r}bb(t){const i={};return Promise.all(t.map(s=>this.cb(s).then(r=>{r&&(i[s]=r.item)}))).then(()=>Object.keys(i).length?this.J.$refresh(this.I,i):void 0)}cb(t){const i=this.getExtensionElement(t);if(i){const s=this.m.get(i);if(s)return this.rb(i),ai(()=>this.f.getTreeItem(i)).then(r=>{if(r){const n=this.ib(i,r,s.parent);return this.pb(i,n,s,s.parent),s.dispose(),n}return null})}return Promise.resolve(null)}db(t,i,s){const r=this.ib(t,i,s);if(i.id&&this.j.has(r.item.handle))throw new Error(d(2910,null,i.id));return this.ob(t,r),this.qb(r,s),r}eb(t){return Vi.isMarkdownString(t)?xe.from(t):t}fb(t,i){return i?{...this.L.toInternal(i,t),originalId:i.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let i,s,r;return typeof t.checkboxState=="number"?i=t.checkboxState:(i=t.checkboxState.state,s=t.checkboxState.tooltip,r=t.checkboxState.accessibilityInformation),{isChecked:i===cr.Checked,tooltip:s,accessibilityInformation:r}}hb(t){if(!ap.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,i,s){this.hb(i);const r=this.B(new se),n=this.kb(t,i,s),o=this.lb(i);return{item:{handle:n,parentHandle:s?s.item.handle:void 0,label:ZD(i.label,this.N),description:i.description,resourceUri:i.resourceUri,tooltip:this.eb(i.tooltip),command:this.fb(r,i.command),contextValue:i.contextValue,icon:o,iconDark:this.mb(i)||o,themeIcon:this.jb(i),collapsibleState:Tt(i.collapsibleState)?Uo.None:i.collapsibleState,accessibilityInformation:i.accessibilityInformation,checkbox:this.gb(i)},extensionItem:i,parent:s,children:void 0,disposableStore:r,dispose(){r.dispose()}}}jb(t){return t.iconPath instanceof di?t.iconPath:void 0}kb(t,{id:i,label:s,resourceUri:r},n,o){if(i)return`${X5.b}/${i}`;const a=ZD(s,this.N),c=n?n.item.handle:X5.a;let l=a?a.label:r?ts(r):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let f,p=0;do{if(f=`${c}/${p}:${l}`,o||!this.j.has(f)||u===f)break;p++}while(p<=h.length);return f}lb(t){if(t.iconPath&&!(t.iconPath instanceof di))return typeof t.iconPath=="string"||x.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof di)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return x.isUri(t)?t:x.file(t)}ob(t,i){this.j.set(i.item.handle,t),this.m.set(t,i)}pb(t,i,s,r){this.j.delete(i.item.handle),this.m.delete(t),i.item.handle!==s.item.handle&&this.j.delete(s.item.handle),this.ob(t,i);const n=this.X(r)||[],o=n.filter(a=>a.item.handle===s.item.handle)[0];o&&n.splice(n.indexOf(o),1,i)}qb(t,i){i?(i.children||(i.children=[]),i.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const i=this.m.get(t);if(i){if(i.children)for(const s of i.children){const r=this.j.get(s.item.handle);r&&this.sb(r)}i.children=void 0}}else this.tb()}sb(t){const i=this.m.get(t);if(i){if(i.children)for(const s of i.children){const r=this.j.get(s.item.handle);r&&this.sb(r)}this.m.delete(t),this.j.delete(i.item.handle),i.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},XG=class m2{static{this.a=new Set([G.http,G.https])}constructor(t){this.c=new Map,this.b=t.getProxy(Z.MainThreadUriOpeners)}registerExternalUriOpener(t,i,s,r){if(this.c.has(i))throw new Error(`Opener with id '${i}' already registered`);const n=r.schemes.find(o=>!m2.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(i,s),this.b.$registerUriOpener(i,r.schemes,t,r.label),ie(()=>{this.c.delete(i),this.b.$unregisterUriOpener(i)})}async $canOpenUri(t,i,s){const r=this.c.get(t);if(!r)throw new Error(`Unknown opener with id: ${t}`);const n=x.revive(i);return r.canOpenExternalUri(n,s)}async $openUri(t,i,s){const r=this.c.get(t);if(!r)throw new Error(`Unknown opener id: '${t}'`);return r.openExternalUri(x.revive(i.resolvedUri),{sourceUri:x.revive(i.sourceUri)},s)}},KG=class extends X{#e;#t;#i;#s;#n;#r;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,i,s){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new D),this.onDidDispose=this.#d.event,this.#h=this.B(new D),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#s=i,this.#i=s.viewType,this.#n=s.panelOptions,this.#o=s.viewColumn,this.#r=s.title,this.#l=s.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#s.dispose(),super.dispose())}get webview(){return this.c(),this.#s}get viewType(){return this.c(),this.#i}get title(){return this.c(),this.#r}set title(e){this.c(),this.#r!==e&&(this.#r=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,x.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:Wt.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},eJ=class v2 extends X{static c(){return ut()}constructor(t,i,s){super(),this.j=i,this.m=s,this.g=new Map,this.h=new Map,this.f=t.getProxy(Z.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,i,s,r,n={}){const o=typeof r=="object"?r.viewColumn:r,a={viewColumn:Wt.from(o),preserveFocus:typeof r=="object"&&!!r.preserveFocus},c=Vc(t),l=v2.c();this.f.$createWebviewPanel(km(t),l,i,{title:s,panelOptions:tJ(n),webviewOptions:HP(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,i,s,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const i=Object.keys(t);i.sort((s,r)=>{const n=t[s],o=t[r];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const s of i){const r=this.getWebviewPanel(s);if(!r)continue;const n=t[s];r._updateViewState({active:n.active,visible:n.visible,viewColumn:Wt.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,i,s){if(this.h.has(i))throw new Error(`Serializer for '${i}' already registered`);return this.h.set(i,{serializer:s,extension:t}),this.f.$registerSerializer(i,{serializeBuffersForPostMessage:Vc(t)}),new Le(()=>{this.h.delete(i),this.f.$unregisterSerializer(i)})}async $deserializeWebviewPanel(t,i,s,r){const n=this.h.get(i);if(!n)throw new Error(`No serializer found for '${i}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,s.webviewOptions,a),l=this.createNewWebviewPanel(t,i,s.title,r,s.panelOptions,c,s.active);await o.deserializeWebviewPanel(l,s.state)}createNewWebviewPanel(t,i,s,r,n,o,a){const c=new KG(t,this.f,o,{viewType:i,title:s,viewColumn:r,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function tJ(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var iJ=class extends X{#e;#t;#i;#s;#n;#r;#a;#o;#c;constructor(e,t,i,s,r,n){super(),this.#n=!1,this.#l=this.B(new D),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new D),this.onDidDispose=this.#u.event,this.#i=i,this.#a=s,this.#e=e,this.#t=t,this.#s=r,this.#r=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#s.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#r}get webview(){return this.#s}get viewType(){return this.#i}_setVisible(e){e===this.#r||this.#n||(this.#r=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=ng.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},sJ=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(Z.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,s){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:i,extension:e}),this.a.$registerWebviewViewProvider(km(e),t,{retainContextWhenHidden:s?.retainContextWhenHidden,serializeBuffersForPostMessage:Vc(e)}),new Le(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,i,s,r){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new iJ(e,this.a,t,i,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:s},r)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},rJ=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Z.MainThreadAiSettingsSearch)}async $startSearch(e,t,i,s){if(this.a.size===0)throw new Error("No related information providers registered");const r=this.a.get(e);if(!r)throw new Error("Settings search provider not found");const n=new Bg(o=>{this.c.$handleSearchResult(e,Eb.fromSettingsSearchResult(o))});return r.provideSettingsSearchResults(t,i,n,s)}registerSettingsSearchProvider(e,t){const i=this.b;return this.b++,this.a.set(i,t),this.c.$registerAiSettingsSearchProvider(i),new Le(()=>{this.c.$unregisterAiSettingsSearchProvider(i),this.a.delete(i)})}};function nJ(e){const t=e.get(kt),i=e.get(Ra),s=e.get(nh),r=e.get(Yr),n=e.get(js),o=e.get(Ug),a=e.get(ms),c=e.get(Ml),l=e.get(Ae),u=e.get(Vb),h=e.get(qb),f=e.get(xn),p=e.get(De),g=e.get(Og),v=e.get(jc),b=e.get(Hg),E=e.get(zg),k=e.get(by),I=e.get(Bc),B=e.get(Ey),j=e.get(Wg),te=e.get(ly),F=e.get(hy),H=e.get(hm);l.set(ce.ExtHostFileSystemInfo,i),l.set(ce.ExtHostLogLevelServiceShape,f),l.set(ce.ExtHostWorkspace,n),l.set(ce.ExtHostConfiguration,a),l.set(ce.ExtHostExtensionService,r),l.set(ce.ExtHostStorage,u),l.set(ce.ExtHostTunnelService,g),l.set(ce.ExtHostWindow,b),l.set(ce.ExtHostUrls,E),l.set(ce.ExtHostSecretState,k),l.set(ce.ExtHostTelemetry,o),l.set(ce.ExtHostEditorTabs,I),l.set(ce.ExtHostManagedSockets,B),l.set(ce.ExtHostProgress,j),l.set(ce.ExtHostAuthentication,te),l.set(ce.ExtHostChatProvider,F);const U=l.set(ce.ExtHostDecorations,e.get(iI)),Y=l.set(ce.ExtHostDocumentsAndEditors,e.get(ia)),he=l.set(ce.ExtHostCommands,e.get(Bs)),re=l.set(ce.ExtHostTerminalService,e.get(Jr)),dt=l.set(ce.ExtHostTerminalShellIntegration,e.get(Xy)),V=l.set(ce.ExtHostDebugService,e.get(Jy)),W=l.set(ce.ExtHostSearch,e.get(Qy)),Q=l.set(ce.ExtHostTask,e.get(_y)),K=l.set(ce.ExtHostOutputService,e.get(tI)),ae=l.set(ce.ExtHostLocalization,e.get(xy)),fe=l.set(ce.ExtHostDocuments,new pq(l,Y)),Te=l.set(ce.ExtHostDocumentContentProviders,new dq(l,Y,p)),ot=l.set(ce.ExtHostDocumentSaveParticipant,new fq(p,fe,l.getProxy(Z.MainThreadBulkEdits))),Ce=l.set(ce.ExtHostNotebook,new wG(l,he,Y,fe,s,W,p)),qt=l.set(ce.ExtHostNotebookDocuments,new yG(Ce)),Dt=l.set(ce.ExtHostNotebookEditors,new V4(p,Ce)),Gt=l.set(ce.ExtHostNotebookKernels,new _4(l,t,Ce,he,p)),fi=l.set(ce.ExtHostNotebookRenderers,new $G(l,Ce)),xi=l.set(ce.ExtHostNotebookDocumentSaveParticipant,new bG(p,Ce,l.getProxy(Z.MainThreadBulkEdits))),jt=l.set(ce.ExtHostEditors,new VG(l,Y)),Qn=l.set(ce.ExtHostTreeViews,new ZG(l.getProxy(Z.MainThreadTreeViews),he,p)),ed=l.set(ce.ExtHostEditorInsets,new V_(l.getProxy(Z.MainThreadEditorInsets),jt,t.remote)),Zi=l.set(ce.ExtHostDiagnostics,new b4(l,p,i,Y)),cs=l.set(ce.ExtHostLanguages,new Yq(l,fe,he.converter,c)),ne=l.set(ce.ExtHostLanguageFeatures,new Oq(l,c,fe,he,Zi,p,v,o)),td=l.set(ce.ExtHostCodeMapper,new __(l)),cn=l.set(ce.ExtHostFileSystem,new Eq(l,ne)),li=l.set(ce.ExtHostFileSystemEventService,new Rq(l,p,Y)),Gs=l.set(ce.ExtHostQuickOpen,DG(l,n,he)),Xn=l.set(ce.ExtHostSCM,new Q4(l,he,fe,p)),il=l.set(ce.ExtHostQuickDiff,new PG(l,c)),id=l.set(ce.ExtHostShare,new jG(l,c)),sl=l.set(ce.ExtHostComments,q_(l,he,fe)),rl=l.set(ce.ExtHostLabelService,new Nq(l)),Kn=l.set(ce.ExtHostTheming,new X4(l)),Mi=l.set(ce.ExtHostTimeline,new _G(l,he)),yr=l.set(ce.ExtHostWebviews,new tq(l,t.remote,n,p,v)),gt=l.set(ce.ExtHostWebviewPanels,new eJ(l,yr,n)),ui=l.set(ce.ExtHostCustomEditors,new aq(l,fe,h,yr,gt)),v1=l.set(ce.ExtHostWebviewViews,new sJ(l,yr)),ln=l.set(ce.ExtHostTesting,e.get(wh)),ga=l.set(ce.ExtHostUriOpeners,new XG(l)),nl=l.set(ce.ExtHostProfileContentHandlers,new IG(l));l.set(ce.ExtHostInteractive,new Lq(l,Ce,Y,he,p));const P=l.set(ce.ExtHostLanguageModelTools,new Jq(l,F)),R=l.set(ce.ExtHostChatAgents2,new M_(l,p,he,fe,F,Zi,P)),M=l.set(ce.ExtHostAiRelatedInformation,new I_(l)),ge=l.set(ce.ExtHostAiEmbeddingVector,new mq(l)),Se=l.set(ce.ExtHostAiSettingsSearch,new rJ(l)),Bt=l.set(ce.ExtHostStatusBar,new WG(l,he.converter)),Ze=l.set(ce.ExtHostSpeech,new BG(l)),Jt=l.set(ce.ExtHostEmbeddings,new gq(l));l.set(ce.ExtHostMcp,e.get(hm));const At=Object.values(ce);l.assertRegistered(At);const ni=new v4(l,Y),ls=new H_(l),bt=new R4(l,p),Yt=new hq(l),pi=new j_(l);return R_.register(he),function(S,ye,Me){function J(w){return(y,C,Ee)=>{const at=w(ti=>{try{y.call(C,ti)}catch(L2){od(new rS(S.identifier,L2,"FAILED to handle event"))}});return Ee?.push(at),at}}const we=function(){let w=!S.isUnderDevelopment;function y(){w||(p.info(`Extension '${S.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),w=!0)}return function C(Ee){if(Array.isArray(Ee))Ee.forEach(C);else if(typeof Ee=="string")y();else{const at=Ee;typeof at.scheme>"u"&&y(),typeof at.exclusive=="boolean"&&L(S,"documentFiltersExclusive")}return Ee}}(),ei={getSession(w,y,C){return(typeof C?.forceNewSession=="object"&&C.forceNewSession.learnMore||typeof C?.createIfNone=="object"&&C.createIfNone.learnMore)&&L(S,"authLearnMore"),C?.authorizationServer&&L(S,"authIssuers"),te.getSession(S,w,y,C)},getAccounts(w){return te.getAccounts(w)},async hasSession(w,y){return L(S,"authSession"),!!await te.getSession(S,w,y,{silent:!0})},get onDidChangeSessions(){return J(te.getExtensionScopedSessionsEvent(S.identifier.value))},registerAuthenticationProvider(w,y,C,Ee){return Ee?.supportedAuthorizationServers&&L(S,"authIssuers"),te.registerAuthenticationProvider(w,y,C,Ee)}},sd={registerCommand(w,y,C){return he.registerCommand(!0,w,y,C,void 0,S)},registerTextEditorCommand(w,y,C){return he.registerCommand(!0,w,(...Ee)=>{const at=jt.getActiveTextEditor();if(!at){p.warn("Cannot execute "+w+" because there is no active text editor.");return}return at.edit(ti=>{y.apply(C,[at,ti,...Ee])}).then(ti=>{ti||p.warn("Edits from command "+w+" were not applied.")},ti=>{p.warn("An error occurred while running command "+w,ti)})},void 0,void 0,S)},registerDiffInformationCommand:(w,y,C)=>(L(S,"diffCommand"),he.registerCommand(!0,w,async(...Ee)=>{const at=Y.activeEditor(!0);if(!at){p.warn("Cannot execute "+w+" because there is no active text editor.");return}const ti=await jt.getDiffInformation(at.id);y.apply(C,[ti,...Ee])},void 0,void 0,S)),executeCommand(w,...y){return he.executeCommand(w,...y)},getCommands(w=!1){return he.getCommands(w)}},un={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return ls.value},get shell(){return re.getDefaultShell(!1)},get onDidChangeShell(){return J(re.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return J(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return L(S,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return L(S,"telemetry"),J(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return u$(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(w,y){return l$.validateSender(w),o.instantiateLogger(S,w,y)},openExternal(w,y){return b.openUri(w,{allowTunneling:!!t.remote.authority,allowContributedOpeners:y?.allowContributedOpeners})},async asExternalUri(w){if(w.scheme===t.environment.appUriScheme)return E.createAppUri(w);try{return await b.asExternalUri(w,{allowTunneling:!!t.remote.authority})}catch(y){if(q1(w,G.http)||q1(w,G.https))return w;throw y}},get remoteName(){return gv(t.remote.authority)},get remoteAuthority(){return L(S,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return p.getLevel()},get onDidChangeLogLevel(){return J(p.onDidChangeLogLevel)},get appQuality(){return L(S,"resolvers"),t.quality},get appCommit(){return L(S,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(un);const eo={createTestController(w,y,C){return ln.createTestController(S,w,y,C)},createTestObserver(){return L(S,"testObserver"),ln.createTestObserver()},runTests(w){return L(S,"testObserver"),ln.runTests(w)},registerTestFollowupProvider(w){return L(S,"testObserver"),ln.registerTestFollowupProvider(w)},get onDidChangeTestResults(){return L(S,"testObserver"),J(ln.onResultsChanged)},get testResults(){return L(S,"testObserver"),ln.results}},rd=t.remote.isRemote?Ho.Workspace:Ho.UI,b2={getExtension(w,y){tt(S,"extensionsAny")||(y=!1);const C=ye.mine.getExtensionDescription(w);if(C)return new uh(r,S.identifier,C,rd,!1);if(y){const Ee=ye.all.getExtensionDescription(w);if(Ee)return new uh(r,S.identifier,Ee,rd,!0)}},get all(){const w=[];for(const y of ye.mine.getAllExtensionDescriptions())w.push(new uh(r,S.identifier,y,rd,!1));return w},get allAcrossExtensionHosts(){L(S,"extensionsAny");const w=new vo(ye.mine.getAllExtensionDescriptions().map(C=>C.identifier)),y=[];for(const C of ye.all.getAllExtensionDescriptions()){const Ee=!w.has(C.identifier);y.push(new uh(r,S.identifier,C,rd,Ee))}return y},get onDidChange(){return tt(S,"extensionsAny")?J(Ve.any(ye.mine.onDidChange,ye.all.onDidChange)):J(ye.mine.onDidChange)}},y2={createDiagnosticCollection(w){return Zi.createDiagnosticCollection(S.identifier,w)},get onDidChangeDiagnostics(){return J(Zi.onDidChangeDiagnostics)},getDiagnostics:w=>Zi.getDiagnostics(w),getLanguages(){return cs.getLanguages()},setTextDocumentLanguage(w,y){return cs.changeLanguage(w.uri,y)},match(w,y){const C=ib.from(w);let Ee;return kP(C)&&(Ee=Ce.notebookDocuments.find(at=>at.apiNotebook.getCells().find(ti=>ti.document===y))?.apiNotebook),EP(C,y.uri,y.languageId,!0,Ee?.uri,Ee?.notebookType)},registerCodeActionsProvider(w,y,C){return ne.registerCodeActionProvider(S,we(w),y,C)},registerDocumentPasteEditProvider(w,y,C){return ne.registerDocumentPasteEditProvider(S,we(w),y,C)},registerCodeLensProvider(w,y){return ne.registerCodeLensProvider(S,we(w),y)},registerDefinitionProvider(w,y){return ne.registerDefinitionProvider(S,we(w),y)},registerDeclarationProvider(w,y){return ne.registerDeclarationProvider(S,we(w),y)},registerImplementationProvider(w,y){return ne.registerImplementationProvider(S,we(w),y)},registerTypeDefinitionProvider(w,y){return ne.registerTypeDefinitionProvider(S,we(w),y)},registerHoverProvider(w,y){return ne.registerHoverProvider(S,we(w),y,S.identifier)},registerEvaluatableExpressionProvider(w,y){return ne.registerEvaluatableExpressionProvider(S,we(w),y,S.identifier)},registerInlineValuesProvider(w,y){return ne.registerInlineValuesProvider(S,we(w),y,S.identifier)},registerDocumentHighlightProvider(w,y){return ne.registerDocumentHighlightProvider(S,we(w),y)},registerMultiDocumentHighlightProvider(w,y){return ne.registerMultiDocumentHighlightProvider(S,we(w),y)},registerLinkedEditingRangeProvider(w,y){return ne.registerLinkedEditingRangeProvider(S,we(w),y)},registerReferenceProvider(w,y){return ne.registerReferenceProvider(S,we(w),y)},registerRenameProvider(w,y){return ne.registerRenameProvider(S,we(w),y)},registerNewSymbolNamesProvider(w,y){return L(S,"newSymbolNamesProvider"),ne.registerNewSymbolNamesProvider(S,we(w),y)},registerDocumentSymbolProvider(w,y,C){return ne.registerDocumentSymbolProvider(S,we(w),y,C)},registerWorkspaceSymbolProvider(w){return ne.registerWorkspaceSymbolProvider(S,w)},registerDocumentFormattingEditProvider(w,y){return ne.registerDocumentFormattingEditProvider(S,we(w),y)},registerDocumentRangeFormattingEditProvider(w,y){return ne.registerDocumentRangeFormattingEditProvider(S,we(w),y)},registerOnTypeFormattingEditProvider(w,y,C,...Ee){return ne.registerOnTypeFormattingEditProvider(S,we(w),y,[C].concat(Ee))},registerDocumentSemanticTokensProvider(w,y,C){return ne.registerDocumentSemanticTokensProvider(S,we(w),y,C)},registerDocumentRangeSemanticTokensProvider(w,y,C){return ne.registerDocumentRangeSemanticTokensProvider(S,we(w),y,C)},registerSignatureHelpProvider(w,y,C,...Ee){return typeof C=="object"?ne.registerSignatureHelpProvider(S,we(w),y,C):ne.registerSignatureHelpProvider(S,we(w),y,typeof C>"u"?[]:[C,...Ee])},registerCompletionItemProvider(w,y,...C){return ne.registerCompletionItemProvider(S,we(w),y,C)},registerInlineCompletionItemProvider(w,y,C){return y.handleDidShowCompletionItem&&L(S,"inlineCompletionsAdditions"),y.handleDidPartiallyAcceptCompletionItem&&L(S,"inlineCompletionsAdditions"),C&&L(S,"inlineCompletionsAdditions"),ne.registerInlineCompletionsProvider(S,we(w),y,C)},registerInlineEditProvider(w,y){return L(S,"inlineEdit"),ne.registerInlineEditProvider(S,we(w),y)},registerDocumentLinkProvider(w,y){return ne.registerDocumentLinkProvider(S,we(w),y)},registerColorProvider(w,y){return ne.registerColorProvider(S,we(w),y)},registerFoldingRangeProvider(w,y){return ne.registerFoldingRangeProvider(S,we(w),y)},registerSelectionRangeProvider(w,y){return ne.registerSelectionRangeProvider(S,w,y)},registerCallHierarchyProvider(w,y){return ne.registerCallHierarchyProvider(S,w,y)},registerTypeHierarchyProvider(w,y){return ne.registerTypeHierarchyProvider(S,w,y)},setLanguageConfiguration:(w,y)=>ne.setLanguageConfiguration(S,w,y),getTokenInformationAtPosition(w,y){return L(S,"tokenInformation"),cs.tokenAtPosition(w,y)},registerInlayHintsProvider(w,y){return ne.registerInlayHintsProvider(S,w,y)},createLanguageStatusItem(w,y){return cs.createLanguageStatusItem(S,w,y)},registerDocumentDropEditProvider(w,y,C){return ne.registerDocumentOnDropEditProvider(S,w,y,C)}},x2={get activeTextEditor(){return jt.getActiveTextEditor()},get visibleTextEditors(){return jt.getVisibleTextEditors()},get activeTerminal(){return re.activeTerminal},get terminals(){return re.terminals},async showTextDocument(w,y,C){x.isUri(w)&&w.scheme===G.vscodeRemote&&!w.authority&&v.report("workspace.showTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority.");const Ee=await(x.isUri(w)?Promise.resolve(K5.openTextDocument(w)):Promise.resolve(w));return jt.showTextDocument(Ee,y,C)},createTextEditorDecorationType(w){return jt.createTextEditorDecorationType(S,w)},onDidChangeActiveTextEditor(w,y,C){return J(jt.onDidChangeActiveTextEditor)(w,y,C)},onDidChangeVisibleTextEditors(w,y,C){return J(jt.onDidChangeVisibleTextEditors)(w,y,C)},onDidChangeTextEditorSelection(w,y,C){return J(jt.onDidChangeTextEditorSelection)(w,y,C)},onDidChangeTextEditorOptions(w,y,C){return J(jt.onDidChangeTextEditorOptions)(w,y,C)},onDidChangeTextEditorVisibleRanges(w,y,C){return J(jt.onDidChangeTextEditorVisibleRanges)(w,y,C)},onDidChangeTextEditorViewColumn(w,y,C){return J(jt.onDidChangeTextEditorViewColumn)(w,y,C)},onDidChangeTextEditorDiffInformation(w,y,C){return L(S,"textEditorDiffInformation"),J(jt.onDidChangeTextEditorDiffInformation)(w,y,C)},onDidCloseTerminal(w,y,C){return J(re.onDidCloseTerminal)(w,y,C)},onDidOpenTerminal(w,y,C){return J(re.onDidOpenTerminal)(w,y,C)},onDidChangeActiveTerminal(w,y,C){return J(re.onDidChangeActiveTerminal)(w,y,C)},onDidChangeTerminalDimensions(w,y,C){return L(S,"terminalDimensions"),J(re.onDidChangeTerminalDimensions)(w,y,C)},onDidChangeTerminalState(w,y,C){return J(re.onDidChangeTerminalState)(w,y,C)},onDidWriteTerminalData(w,y,C){return L(S,"terminalDataWriteEvent"),J(re.onDidWriteTerminalData)(w,y,C)},onDidExecuteTerminalCommand(w,y,C){return L(S,"terminalExecuteCommandEvent"),J(re.onDidExecuteTerminalCommand)(w,y,C)},onDidChangeTerminalShellIntegration(w,y,C){return J(dt.onDidChangeTerminalShellIntegration)(w,y,C)},onDidStartTerminalShellExecution(w,y,C){return J(dt.onDidStartTerminalShellExecution)(w,y,C)},onDidEndTerminalShellExecution(w,y,C){return J(dt.onDidEndTerminalShellExecution)(w,y,C)},get state(){return b.getState()},onDidChangeWindowState(w,y,C){return J(b.onDidChangeWindowState)(w,y,C)},showInformationMessage(w,...y){return bt.showMessage(S,Mt.Info,w,y[0],y.slice(1))},showWarningMessage(w,...y){return bt.showMessage(S,Mt.Warning,w,y[0],y.slice(1))},showErrorMessage(w,...y){return bt.showMessage(S,Mt.Error,w,y[0],y.slice(1))},showQuickPick(w,y,C){return Gs.showQuickPick(S,w,y,C)},showWorkspaceFolderPick(w){return Gs.showWorkspaceFolderPick(w)},showInputBox(w,y){return Gs.showInput(w,y)},showOpenDialog(w){return Yt.showOpenDialog(w)},showSaveDialog(w){return Yt.showSaveDialog(w)},createStatusBarItem(w,y,C){let Ee,at,ti;return typeof w=="string"?(Ee=w,at=y,ti=C):(at=w,ti=y),Bt.createStatusBarEntry(S,Ee,at,ti)},setStatusBarMessage(w,y){return Bt.setStatusBarMessage(w,y)},withScmProgress(w){return v.report("window.withScmProgress",S,"Use 'withProgress' instead."),j.withProgress(S,{location:Nn.SourceControl},(y,C)=>w({report(Ee){}}))},withProgress(w,y){return j.withProgress(S,w,y)},createOutputChannel(w,y){return K.createOutputChannel(w,y,S)},createWebviewPanel(w,y,C,Ee){return gt.createWebviewPanel(S,w,y,C,Ee)},createWebviewTextEditorInset(w,y,C,Ee){return L(S,"editorInsets"),ed.createWebviewEditorInset(w,y,C,Ee,S)},createTerminal(w,y,C){return typeof w=="object"?"pty"in w?re.createExtensionTerminal(w):re.createTerminalFromOptions(w):re.createTerminal(w,y,C)},registerTerminalLinkProvider(w){return re.registerLinkProvider(w)},registerTerminalProfileProvider(w,y){return re.registerProfileProvider(S,w,y)},registerTerminalCompletionProvider(w,...y){return L(S,"terminalCompletionProvider"),re.registerTerminalCompletionProvider(S,w,...y)},registerTerminalQuickFixProvider(w,y){return L(S,"terminalQuickFixProvider"),re.registerTerminalQuickFixProvider(w,S.identifier.value,y)},registerTreeDataProvider(w,y){return Qn.registerTreeDataProvider(w,y,S)},createTreeView(w,y){return Qn.createTreeView(w,y,S)},registerWebviewPanelSerializer:(w,y)=>gt.registerWebviewPanelSerializer(S,w,y),registerCustomEditorProvider:(w,y,C={})=>ui.registerCustomEditorProvider(S,w,y,C),registerFileDecorationProvider(w){return U.registerFileDecorationProvider(w,S)},registerUriHandler(w){return E.registerUriHandler(S,w)},createQuickPick(){return Gs.createQuickPick(S)},createInputBox(){return Gs.createInputBox(S)},get activeColorTheme(){return Kn.activeColorTheme},onDidChangeActiveColorTheme(w,y,C){return J(Kn.onDidChangeActiveColorTheme)(w,y,C)},registerWebviewViewProvider(w,y,C){return v1.registerWebviewViewProvider(S,w,y,C?.webviewOptions)},get activeNotebookEditor(){return Ce.activeNotebookEditor},onDidChangeActiveNotebookEditor(w,y,C){return J(Ce.onDidChangeActiveNotebookEditor)(w,y,C)},get visibleNotebookEditors(){return Ce.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return J(Ce.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(w,y,C){return J(Dt.onDidChangeNotebookEditorSelection)(w,y,C)},onDidChangeNotebookEditorVisibleRanges(w,y,C){return J(Dt.onDidChangeNotebookEditorVisibleRanges)(w,y,C)},showNotebookDocument(w,y){return Ce.showNotebookDocument(w,y)},registerExternalUriOpener(w,y,C){return L(S,"externalUriOpener"),ga.registerExternalUriOpener(S.identifier,w,y,C)},registerProfileContentHandler(w,y){return L(S,"profileContentHandlers"),nl.registerProfileContentHandler(S,w,y)},registerQuickDiffProvider(w,y,C,Ee,at){return L(S,"quickDiffProvider"),il.registerQuickDiffProvider(S,we(w),y,C,Ee,at)},get tabGroups(){return I.tabGroups},registerShareProvider(w,y){return L(S,"shareProvider"),id.registerShareProvider(we(w),y)},get nativeHandle(){return L(S,"nativeWindowHandle"),b.nativeHandle},createChatStatusItem:w=>(L(S,"chatStatusItem"),pi.createChatStatusItem(S,w))},K5={get rootPath(){return v.report("workspace.rootPath",S,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(w){throw new to("rootPath")},getWorkspaceFolder(w){return n.getWorkspaceFolder(w)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(w){throw new to("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(w){throw new to("workspaceFile")},updateWorkspaceFolders:(w,y,...C)=>n.updateWorkspaceFolders(S,w,y||0,...C),onDidChangeWorkspaceFolders:function(w,y,C){return J(n.onDidChangeWorkspace)(w,y,C)},asRelativePath:(w,y)=>n.getRelativePath(w,y),findFiles:(w,y,C,Ee)=>n.findFiles(w,y,C,S.identifier,Ee),findFiles2:(w,y,C)=>(L(S,"findFiles2"),n.findFiles2(w,y,S.identifier,C)),findTextInFiles:(w,y,C,Ee)=>{L(S,"findTextInFiles");let at,ti;return typeof y=="object"?(at=y,ti=C):(at={},ti=y,Ee=C),n.findTextInFiles(w,at||{},ti,S.identifier,Ee)},findTextInFiles2:(w,y,C)=>(L(S,"findTextInFiles2"),L(S,"textSearchProvider2"),n.findTextInFiles2(w,y,S.identifier,C)),save:w=>n.save(w),saveAs:w=>n.saveAs(w),saveAll:w=>n.saveAll(w),applyEdit(w,y){return ni.applyWorkspaceEdit(w,S,y)},createFileSystemWatcher:(w,y,C,Ee)=>{const at={ignoreCreateEvents:!!y,ignoreChangeEvents:!!C,ignoreDeleteEvents:!!Ee};return li.createFileSystemWatcher(n,Me,S,w,at)},get textDocuments(){return fe.getAllDocumentData().map(w=>w.document)},set textDocuments(w){throw new to("textDocuments")},openTextDocument(w,y){let C;if(y=y??w,typeof w=="string")C=Promise.resolve(x.file(w));else if(x.isUri(w))C=Promise.resolve(w);else if(!y||typeof y=="object")C=fe.createDocumentData(y);else throw new Error("illegal argument - uriOrFileNameOrOptions");return C.then(Ee=>(p.trace(`openTextDocument from ${S.identifier}`),Ee.scheme===G.vscodeRemote&&!Ee.authority&&v.report("workspace.openTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority."),fe.ensureDocumentData(Ee,y).then(at=>at.document)))},onDidOpenTextDocument:(w,y,C)=>J(fe.onDidAddDocument)(w,y,C),onDidCloseTextDocument:(w,y,C)=>J(fe.onDidRemoveDocument)(w,y,C),onDidChangeTextDocument:(w,y,C)=>J(fe.onDidChangeDocument)(w,y,C),onDidSaveTextDocument:(w,y,C)=>J(fe.onDidSaveDocument)(w,y,C),onWillSaveTextDocument:(w,y,C)=>J(ot.getOnWillSaveTextDocumentEvent(S))(w,y,C),get notebookDocuments(){return Ce.notebookDocuments.map(w=>w.apiNotebook)},async openNotebookDocument(w,y){let C;if(x.isUri(w))C=w,await Ce.openNotebookDocument(w);else if(typeof w=="string")C=x.revive(await Ce.createNotebookDocument({viewType:w,content:y}));else throw new Error("Invalid arguments");return Ce.getNotebookDocument(C).apiNotebook},onDidSaveNotebookDocument(w,y,C){return J(qt.onDidSaveNotebookDocument)(w,y,C)},onDidChangeNotebookDocument(w,y,C){return J(qt.onDidChangeNotebookDocument)(w,y,C)},onWillSaveNotebookDocument(w,y,C){return J(xi.getOnWillSaveNotebookDocumentEvent(S))(w,y,C)},get onDidOpenNotebookDocument(){return J(Ce.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return J(Ce.onDidCloseNotebookDocument)},registerNotebookSerializer(w,y,C,Ee){return Ce.registerNotebookSerializer(S,w,y,C,tt(S,"notebookLiveShare")?Ee:void 0)},onDidChangeConfiguration:(w,y,C)=>J(Me.onDidChangeConfiguration)(w,y,C),getConfiguration(w,y){return y=arguments.length===1?void 0:y,Me.getConfiguration(w,y,S)},registerTextDocumentContentProvider(w,y){return Te.registerTextDocumentContentProvider(w,y)},registerTaskProvider:(w,y)=>(v.report("window.registerTaskProvider",S,"Use the corresponding function on the 'tasks' namespace instead"),Q.registerTaskProvider(S,w,y)),registerFileSystemProvider(w,y,C){return T1(cn.registerFileSystemProvider(S,w,y,C),s.addFileSystemProvider(w,y,C))},get fs(){return s.value},registerFileSearchProvider:(w,y)=>(L(S,"fileSearchProvider"),W.registerFileSearchProviderOld(w,y)),registerTextSearchProvider:(w,y)=>(L(S,"textSearchProvider"),W.registerTextSearchProviderOld(w,y)),registerAITextSearchProvider:(w,y)=>(L(S,"aiTextSearchProvider"),L(S,"textSearchProvider2"),W.registerAITextSearchProvider(w,y)),registerFileSearchProvider2:(w,y)=>(L(S,"fileSearchProvider2"),W.registerFileSearchProvider(w,y)),registerTextSearchProvider2:(w,y)=>(L(S,"textSearchProvider2"),W.registerTextSearchProvider(w,y)),registerRemoteAuthorityResolver:(w,y)=>(L(S,"resolvers"),r.registerRemoteAuthorityResolver(w,y)),registerResourceLabelFormatter:w=>(L(S,"resolvers"),rl.$registerResourceLabelFormatter(w)),getRemoteExecServer:w=>(L(S,"resolvers"),r.getRemoteExecServer(w)),onDidCreateFiles:(w,y,C)=>J(li.onDidCreateFile)(w,y,C),onDidDeleteFiles:(w,y,C)=>J(li.onDidDeleteFile)(w,y,C),onDidRenameFiles:(w,y,C)=>J(li.onDidRenameFile)(w,y,C),onWillCreateFiles:(w,y,C)=>J(li.getOnWillCreateFileEvent(S))(w,y,C),onWillDeleteFiles:(w,y,C)=>J(li.getOnWillDeleteFileEvent(S))(w,y,C),onWillRenameFiles:(w,y,C)=>J(li.getOnWillRenameFileEvent(S))(w,y,C),openTunnel:w=>(L(S,"tunnels"),g.openTunnel(S,w).then(y=>{if(!y)throw new Error("cannot open tunnel");return y})),get tunnels(){return L(S,"tunnels"),g.getTunnels()},onDidChangeTunnels:(w,y,C)=>(L(S,"tunnels"),J(g.onDidChangeTunnels)(w,y,C)),registerPortAttributesProvider:(w,y)=>(L(S,"portsAttributes"),g.registerPortsAttributesProvider(w,y)),registerTunnelProvider:(w,y)=>(L(S,"tunnelFactory"),g.registerTunnelProvider(w,y)),registerTimelineProvider:(w,y)=>(L(S,"timeline"),Mi.registerTimelineProvider(w,y,S.identifier,he.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:w=>(L(S,"workspaceTrust"),n.requestWorkspaceTrust(w)),onDidGrantWorkspaceTrust:(w,y,C)=>J(n.onDidGrantWorkspaceTrust)(w,y,C),registerEditSessionIdentityProvider:(w,y)=>(L(S,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(w,y)),onWillCreateEditSessionIdentity:(w,y,C)=>(L(S,"editSessionIdentityProvider"),J(n.getOnWillCreateEditSessionIdentityEvent(S))(w,y,C)),registerCanonicalUriProvider:(w,y)=>(L(S,"canonicalUriProvider"),n.registerCanonicalUriProvider(w,y)),getCanonicalUri:(w,y,C)=>(L(S,"canonicalUriProvider"),n.provideCanonicalUri(w,y,C)),decode(w,y){return n.decode(w,y)},encode(w,y){return n.encode(w,y)}},E2={get inputBox(){return v.report("scm.inputBox",S,"Use 'SourceControl.inputBox' instead"),Xn.getLastInputBox(S)},createSourceControl(w,y,C){return Xn.createSourceControl(S,w,y,C)}},k2={createCommentController(w,y){return sl.createCommentController(S,w,y)}},S2={get activeDebugSession(){return V.activeDebugSession},get activeDebugConsole(){return V.activeDebugConsole},get breakpoints(){return V.breakpoints},get activeStackItem(){return V.activeStackItem},registerDebugVisualizationProvider(w,y){return L(S,"debugVisualization"),V.registerDebugVisualizationProvider(S,w,y)},registerDebugVisualizationTreeProvider(w,y){return L(S,"debugVisualization"),V.registerDebugVisualizationTree(S,w,y)},onDidStartDebugSession(w,y,C){return J(V.onDidStartDebugSession)(w,y,C)},onDidTerminateDebugSession(w,y,C){return J(V.onDidTerminateDebugSession)(w,y,C)},onDidChangeActiveDebugSession(w,y,C){return J(V.onDidChangeActiveDebugSession)(w,y,C)},onDidReceiveDebugSessionCustomEvent(w,y,C){return J(V.onDidReceiveDebugSessionCustomEvent)(w,y,C)},onDidChangeBreakpoints(w,y,C){return J(V.onDidChangeBreakpoints)(w,y,C)},onDidChangeActiveStackItem(w,y,C){return J(V.onDidChangeActiveStackItem)(w,y,C)},registerDebugConfigurationProvider(w,y,C){return V.registerDebugConfigurationProvider(w,y,C||xm.Initial)},registerDebugAdapterDescriptorFactory(w,y){return V.registerDebugAdapterDescriptorFactory(S,w,y)},registerDebugAdapterTrackerFactory(w,y){return V.registerDebugAdapterTrackerFactory(w,y)},startDebugging(w,y,C){return!C||typeof C=="object"&&"configuration"in C?V.startDebugging(w,y,{parentSession:C}):V.startDebugging(w,y,C||{})},stopDebugging(w){return V.stopDebugging(w)},addBreakpoints(w){return V.addBreakpoints(w)},removeBreakpoints(w){return V.removeBreakpoints(w)},asDebugSourceUri(w,y){return V.asDebugSourceUri(w,y)}},C2={registerTaskProvider:(w,y)=>Q.registerTaskProvider(S,w,y),fetchTasks:w=>Q.fetchTasks(w),executeTask:w=>Q.executeTask(S,w),get taskExecutions(){return Q.taskExecutions},onDidStartTask:(w,y,C)=>J(Q.onDidStartTask)(w,y,C),onDidEndTask:(w,y,C)=>J(Q.onDidEndTask)(w,y,C),onDidStartTaskProcess:(w,y,C)=>J(Q.onDidStartTaskProcess)(w,y,C),onDidEndTaskProcess:(w,y,C)=>J(Q.onDidEndTaskProcess)(w,y,C),onDidStartTaskProblemMatchers:(w,y,C)=>(L(S,"taskProblemMatcherStatus"),J(Q.onDidStartTaskProblemMatchers)(w,y,C)),onDidEndTaskProblemMatchers:(w,y,C)=>(L(S,"taskProblemMatcherStatus"),J(Q.onDidEndTaskProblemMatchers)(w,y,C))},$2={createNotebookController(w,y,C,Ee,at){return Gt.createNotebookController(S,w,y,C,Ee,tt(S,"notebookMessaging")?at:void 0)},registerNotebookCellStatusBarItemProvider:(w,y)=>Ce.registerNotebookCellStatusBarItemProvider(S,w,y),createRendererMessaging(w){return fi.createRendererMessaging(S,w)},createNotebookControllerDetectionTask(w){return L(S,"notebookKernelSource"),Gt.createNotebookControllerDetectionTask(S,w)},registerKernelSourceActionProvider(w,y){return L(S,"notebookKernelSource"),Gt.registerKernelSourceActionProvider(S,w,y)}},I2={t(...w){if(typeof w[0]=="string"){const y=w.shift(),C=!w||typeof w[0]!="object"?w:w[0];return ae.getMessage(S.identifier.value,{message:y,args:C})}return ae.getMessage(S.identifier.value,w[0])},get bundle(){return ae.getBundle(S.identifier.value)},get uri(){return ae.getBundleUri(S.identifier.value)}},P2={transferActiveChat(w){return L(S,"interactive"),R.transferActiveChat(w)}},D2={getRelatedInformation(w,y){return L(S,"aiRelatedInformation"),M.getRelatedInformation(S,w,y)},registerRelatedInformationProvider(w,y){return L(S,"aiRelatedInformation"),M.registerRelatedInformationProvider(S,w,y)},registerEmbeddingVectorProvider(w,y){return L(S,"aiRelatedInformation"),ge.registerEmbeddingVectorProvider(S,w,y)},registerSettingsSearchProvider(w){return L(S,"aiSettingsSearch"),Se.registerSettingsSearchProvider(S,w)}},A2={registerMappedEditsProvider(w,y){return L(S,"mappedEditsProvider"),{dispose(){}}},registerMappedEditsProvider2(w){return L(S,"mappedEditsProvider"),td.registerMappedEditsProvider(S,w)},createChatParticipant(w,y){return R.createChatAgent(S,w,y)},createDynamicChatParticipant(w,y,C){return L(S,"chatParticipantPrivate"),R.createDynamicChatAgent(S,w,y,C)},registerChatParticipantDetectionProvider(w){return L(S,"chatParticipantPrivate"),R.registerChatParticipantDetectionProvider(S,w)},registerRelatedFilesProvider(w,y){return L(S,"chatEditing"),R.registerRelatedFilesProvider(S,w,y)},onDidDisposeChatSession:(w,y,C)=>(L(S,"chatParticipantPrivate"),J(R.onDidDisposeChatSession)(w,y,C))},T2={selectChatModels:w=>F.selectLanguageModels(S,w??{}),onDidChangeChatModels:(w,y,C)=>F.onDidChangeProviders(w,y,C),registerChatModelProvider:(w,y,C)=>(L(S,"chatProvider"),F.registerLanguageModel(S,w,y,C)),get embeddingModels(){return L(S,"embeddings"),Jt.embeddingsModels},onDidChangeEmbeddingModels:(w,y,C)=>(L(S,"embeddings"),Jt.onDidChange(w,y,C)),registerEmbeddingsProvider(w,y){return L(S,"embeddings"),Jt.registerEmbeddingsProvider(S,w,y)},async computeEmbeddings(w,y,C){return L(S,"embeddings"),Jt.computeEmbeddings(w,y,C)},registerTool(w,y){return P.registerTool(S,w,y)},invokeTool(w,y,C){return P.invokeTool(S,w,y,C)},get tools(){return P.getTools(S)},fileIsIgnored(w,y){return F.fileIsIgnored(S,w,y)},registerIgnoredFileProvider(w){return F.registerIgnoredFileProvider(S,w)},registerMcpServerDefinitionProvider(w,y){return H.registerMcpConfigurationProvider(S,w,y)}},R2={registerSpeechProvider(w,y){return L(S,"speech"),Ze.registerProvider(S.identifier,w,y)}};return{version:t.version,ai:D2,authentication:ei,commands:sd,comments:k2,chat:A2,debug:S2,env:un,extensions:b2,interactive:P2,l10n:I2,languages:y2,lm:T2,notebooks:$2,scm:E2,speech:R2,tasks:C2,tests:eo,window:x2,workspace:K5,Breakpoint:ac,TerminalOutputAnchor:N0,ChatResultFeedbackKind:Du,ChatVariableLevel:$w,ChatCompletionItem:MB,ChatReferenceDiagnostic:K7,CallHierarchyIncomingCall:P7,CallHierarchyItem:F0,CallHierarchyOutgoingCall:D7,CancellationError:mt,CancellationTokenSource:Ke,CandidatePortSource:dv,CodeAction:lu,CodeActionKind:pt,CodeActionTriggerKind:cu,CodeLens:Xf,Color:ic,ColorInformation:rp,ColorPresentation:np,ColorThemeKind:On,CommentMode:aw,CommentState:cw,CommentThreadCollapsibleState:xu,CommentThreadState:Eu,CommentThreadApplicability:ku,CommentThreadFocus:Su,CompletionItem:tp,CompletionItemKind:me,CompletionItemTag:hu,CompletionList:Za,CompletionTriggerKind:Ya,ConfigurationTarget:nc,CustomExecution:ew,DebugAdapterExecutable:cc,DebugAdapterInlineImplementation:wu,DebugAdapterNamedPipeServer:vu,DebugAdapterServer:lc,DebugConfigurationProviderTriggerKind:xm,DebugConsoleMode:mp,DebugVisualization:PB,DecorationRangeBehavior:Oo,Diagnostic:Gf,DiagnosticRelatedInformation:su,DiagnosticSeverity:ci,DiagnosticTag:No,Disposable:Le,DocumentHighlight:Zf,DocumentHighlightKind:ru,MultiDocumentHighlight:Qf,DocumentLink:sp,DocumentSymbol:au,EndOfLine:Ls,EnvironmentVariableMutatorType:Ga,EvaluatableExpression:hp,InlineValueText:dp,InlineValueVariableLookup:fp,InlineValueEvaluatableExpression:pp,InlineCompletionTriggerKind:bu,EventEmitter:D,ExtensionKind:Ho,ExtensionMode:fc,ExternalUriOpenerPriority:mw,FileChangeType:uc,FileDecoration:hw,FileDecoration2:hw,FileSystemError:zt,FileType:zi,FilePermission:kn,FoldingRange:ow,FoldingRangeKind:Br,FunctionBreakpoint:Bo,InlineCompletionItem:W0,InlineCompletionList:V0,Hover:Jf,VerboseHover:Yf,HoverVerbosityAction:O0,IndentAction:p4,Location:ns,MarkdownString:Vi,OverviewRulerLane:py,ParameterInformation:U0,PortAutoForwardAction:ww,Position:Ne,ProcessExecution:sc,ProgressLocation:Nn,QuickInputButtonLocation:uw,QuickInputButtons:Cu,Range:$e,RelativePattern:oc,Selection:jr,SelectionRange:uu,SemanticTokens:hc,SemanticTokensBuilder:IB,SemanticTokensEdit:M7,SemanticTokensEdits:gp,SemanticTokensLegend:lw,ShellExecution:Fo,ShellQuoting:K0,SignatureHelp:B0,SignatureHelpTriggerKind:H0,SignatureInformation:j0,SnippetString:Lo,SourceBreakpoint:jo,StandardTokenType:Fn,StatusBarAlignment:Rn,SymbolInformation:ou,SymbolKind:rt,SymbolTag:nu,Task:op,TaskEventKind:Q0,TaskGroup:gu,TaskPanelKind:X0,TaskRevealKind:Z0,TaskScope:Ln,TerminalLink:gB,TerminalQuickFixTerminalCommand:vB,TerminalQuickFixOpener:mB,TerminalLocation:J0,TerminalProfile:wB,TerminalExitReason:q0,TerminalShellExecutionCommandLineConfidence:pu,TerminalCompletionItem:bB,TerminalCompletionItemKind:Y0,TerminalCompletionList:yB,TerminalShellType:G0,TextDocumentSaveReason:Xa,TextEdit:Tn,SnippetTextEdit:M0,TextEditorCursorStyle:Cs,TextEditorChangeKind:ec,TextEditorLineNumbersStyle:Ns,TextEditorRevealType:ip,TextEditorSelectionChangeKind:Ka,SyntaxTokenType:tc,TextDocumentChangeReason:fu,ThemeColor:mu,ThemeIcon:di,TreeItem:ap,TreeItemCheckboxState:cr,TreeItemCollapsibleState:Uo,TypeHierarchyItem:bw,UIKind:ch,Uri:x,ViewColumn:du,WorkspaceEdit:Ro,DocumentPasteTriggerKind:sw,DocumentDropEdit:iw,DocumentDropOrPasteEditKind:Mn,DocumentPasteEdit:kB,InlayHint:ep,InlayHintLabelPart:Kf,InlayHintKind:z0,RemoteAuthorityResolverError:qa,ResolvedAuthority:fB,ManagedResolvedAuthority:_f,SourceControlInputBoxValidationType:_0,ExtensionRuntime:kp,TimelineItem:pw,NotebookRange:Ms,NotebookCellKind:zo,NotebookCellExecutionState:dw,NotebookCellData:wp,NotebookData:O7,NotebookRendererScript:U7,NotebookCellStatusBarAlignment:yp,NotebookEditorRevealType:xp,NotebookCellOutput:bp,NotebookCellOutputItem:F7,CellErrorStackFrame:DB,NotebookCellStatusBarItem:AB,NotebookControllerAffinity:fw,NotebookControllerAffinity2:Ep,NotebookEdit:qf,NotebookKernelSourceAction:TB,NotebookVariablesRequestKind:Iu,PortAttributes:LB,LinkedEditingRanges:RB,TestResultState:gw,TestRunRequest:Sp,TestMessage:Cp,TestMessageStackFrame:NB,TestTag:Pu,TestRunProfileKind:pc,TextSearchCompleteMessageType:kg,DataTransfer:rc,DataTransferItem:cp,TestCoverageCount:$p,FileCoverage:Pp,StatementCoverage:B7,BranchCoverage:H7,DeclarationCoverage:z7,WorkspaceTrustState:vw,LanguageStatusSeverity:Ja,QuickPickItemKind:$u,InputBoxValidationSeverity:dc,TabInputText:yw,TabInputTextDiff:Dp,TabInputTextMerge:W7,TabInputCustom:xw,TabInputNotebook:Ew,TabInputNotebookDiff:kw,TabInputWebview:V7,TabInputTerminal:_7,TabInputInteractiveWindow:q7,TabInputChat:G7,TabInputTextMultiDiff:J7,TelemetryTrustedValue:C0,LogLevel:oe,EditSessionIdentityMatch:g4,InteractiveSessionVoteDirection:Sw,ChatCopyKind:Cw,ChatEditingSessionActionOutcome:Wo,InteractiveEditorResponseFeedbackKind:Pw,DebugStackFrame:L7,DebugThread:N7,RelatedInformationType:Ow,SpeechToTextStatus:Uw,TextToSpeechStatus:jw,PartialAcceptTriggerKind:Mo,InlineCompletionEndOfLifeReasonKind:Qa,KeywordRecognitionStatus:Bw,ChatImageMimeType:zr,ChatResponseMarkdownPart:Ap,ChatResponseFileTreePart:Rp,ChatResponseAnchorPart:Tu,ChatResponseProgressPart:Dw,ChatResponseProgressPart2:Lp,ChatResponseReferencePart:Vo,ChatResponseReferencePart2:Vo,ChatResponseCodeCitationPart:Op,ChatResponseCodeblockUriPart:Mp,ChatResponseWarningPart:Ru,ChatResponseTextEditPart:Lu,ChatResponseNotebookEditPart:Up,ChatResponseMarkdownWithVulnerabilitiesPart:Au,ChatResponseCommandButtonPart:Np,ChatResponseConfirmationPart:Tp,ChatResponseMovePart:Fp,ChatResponseExtensionsPart:Aw,ChatPrepareToolInvocationPart:Nu,ChatResponseReferencePartStatusKind:Rw,ChatRequestTurn:Tw,ChatRequestTurn2:Tw,ChatResponseTurn:Y7,ChatLocation:Os,ChatRequestEditorData:Z7,ChatRequestNotebookData:Q7,ChatReferenceBinaryData:X7,ChatRequestEditedFileEventKind:Iw,LanguageModelChatMessageRole:_i,LanguageModelChatMessage:e9,LanguageModelChatMessage2:t9,LanguageModelToolResultPart:jp,LanguageModelToolResultPart2:Lw,LanguageModelTextPart:Pt,LanguageModelToolCallPart:_o,LanguageModelError:Wr,LanguageModelToolResult:Bp,LanguageModelToolResult2:i9,LanguageModelDataPart:Hr,ExtendedLanguageModelToolResult:FB,PreparedTerminalToolInvocation:OB,LanguageModelChatToolMode:Mw,LanguageModelPromptTsxPart:lr,NewSymbolName:CB,NewSymbolNameTag:nw,NewSymbolNameTriggerKind:yu,InlineEdit:UB,InlineEditTriggerKind:Mu,ExcludeSettingOptions:qr,TextSearchContext2:Eg,TextSearchMatch2:_r,AISearchKeyword:kb,TextSearchCompleteMessageTypeNew:kg,ChatErrorLevel:Nw,McpHttpServerDefinition:BB,McpStdioServerDefinition:jB,SettingsSearchResultKind:Fw}}}var Wm,Vm=class{constructor(t,i,s,r,n,o,a){this.c=t,this.d=i,this.f=s,this.g=r,this.h=n,this.i=o,this.j=a,this.a=new Map,this.b=[]}async install(){this.k(),It("code/extHost/willWaitForConfig");const t=await this.g.getConfigProvider();It("code/extHost/didWaitForConfig");const i=await this.h.getExtensionPathIndex();this.register(new oJ(this.c,i,this.d,t,this.j)),this.register(this.f.createInstance(K4)),this.i.remote.isRemote&&this.register(this.f.createInstance(e5,i,this.i.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const i of t.nodeModuleName)this.a.set(i,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(i=>t.alternativeModuleName(i))}};Vm=__decorate([__param(2,Dl),__param(3,ms),__param(4,Yr),__param(5,kt),__param(6,De)],Vm);var K4=class{static{Wm=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&Wm.a.size){const i=pn(this.c(t.environment.appRoot.fsPath)),s="[a-z0-9_.-]",r=`@${s}+\\/${s}+|${s}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${i}/${n}\\/)(${r})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const i=this.b.exec(this.c(t));if(!i)return;const[,s,r,n]=i,o=Wm.a.get(r);if(o!==void 0)return console.warn(`${r} as been renamed to ${o}, please update your imports`),s+o+n}c(t){return t.replace(/\\/g,"/")}};K4=Wm=__decorate([__param(0,kt)],K4);var oJ=class{constructor(e,t,i,s,r){this.c=e,this.d=t,this.e=i,this.f=s,this.g=r,this.nodeModuleName="vscode",this.a=new Tr}load(e,t){const i=this.d.findSubstr(t);if(i){let s=this.a.get(i.identifier);return s||(s=this.c(i,this.e,this.f),this.a.set(i.identifier,s)),s}if(!this.b){let s="";this.d.forEach((r,n)=>s+=`	${n} -> ${r.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${s}`),this.b=this.c(eB,this.e,this.f)}return this.b}},e5=class{constructor(t,i,s){this.e=t,this.f=i,this.nodeModuleName=["open","opn"],this.d=s.getProxy(Z.MainThreadTelemetry);const r=s.getProxy(Z.MainThreadWindow);this.c=(n,o)=>{const a=x.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?r.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?r.$openUri(a,n,{}):this.g(n,o)}}load(t,i,s){const r=this.e.findSubstr(i);return r&&(this.a=r.identifier.value,this.h()),this.b=s(t),this.c}g(t,i){return this.i(),this.b(t,i)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};e5=__decorate([__param(2,Ae)],e5);import{LogLevel as aa,createHttpPatch as QD,createProxyResolver as aJ,createTlsPatch as cJ,createNetPatch as lJ,loadSystemCertificates as uJ}from"@vscode/proxy-agent";import{createRequire as hJ}from"node:module";import{parse as XD}from"url";import{spawn as dJ}from"child_process";import{homedir as fJ}from"os";import{userInfo as pJ}from"os";import*as KD from"os";var e3=/^\d+$/,gJ=/^Microsoft.PowerShell_.*/,mJ=/^Microsoft.PowerShellPreview_.*/,t3;(function(e){e[e.x64=0]="x64",e[e.x86=1]="x86",e[e.ARM=2]="ARM"})(t3||(t3={}));var Oh;switch(process.arch){case"ia32":Oh=1;break;case"arm":case"arm64":Oh=2;break;default:Oh=0;break}var qc;process.env.PROCESSOR_ARCHITEW6432?qc=process.env.PROCESSOR_ARCHITEW6432==="ARM64"?2:0:process.env.PROCESSOR_ARCHITECTURE==="ARM64"?qc=2:process.env.PROCESSOR_ARCHITECTURE==="X86"?qc=1:qc=0;var Fh=class{constructor(e,t,i){this.exePath=e,this.displayName=t,this.a=i}async exists(){return this.a===void 0&&(this.a=await Si.existsFile(this.exePath)),this.a}};function vJ({useAlternateBitness:e=!1}={}){return e?Oh===0?process.env["ProgramFiles(x86)"]||null:qc===0&&process.env.ProgramW6432||null:process.env.ProgramFiles||null}async function _m({useAlternateBitness:e=!1,findPreview:t=!1}={}){const i=vJ({useAlternateBitness:e});if(!i)return null;const s=Pe(i,"PowerShell");if(!await Si.existsDirectory(s))return null;let r=-1,n=null;for(const c of await it.readdir(s)){let l=-1;if(t){const h=c.indexOf("-");if(h<0)continue;const f=c.substring(0,h);if(!e3.test(f)||c.substring(h+1)!=="preview")continue;l=parseInt(f,10)}else{if(!e3.test(c))continue;l=parseInt(c,10)}if(l<=r)continue;const u=Pe(s,c,"pwsh.exe");await Si.existsFile(u)&&(n=u,r=l)}if(!n)return null;const o=i.includes("x86")?" (x86)":"",a=t?" Preview":"";return new Fh(n,`PowerShell${a}${o}`,!0)}async function i3({findPreview:e}={}){if(!process.env.LOCALAPPDATA)return null;const t=Pe(process.env.LOCALAPPDATA,"Microsoft","WindowsApps");if(!await Si.existsDirectory(t))return null;const{pwshMsixDirRegex:i,pwshMsixName:s}=e?{pwshMsixDirRegex:mJ,pwshMsixName:"PowerShell Preview (Store)"}:{pwshMsixDirRegex:gJ,pwshMsixName:"PowerShell (Store)"};for(const r of await it.readdir(t))if(i.test(r)){const n=Pe(t,r,"pwsh.exe");return new Fh(n,s)}return null}function wJ(){const e=Pe(KD.homedir(),".dotnet","tools","pwsh.exe");return new Fh(e,".NET Core PowerShell Global Tool")}function bJ(){const e=Pe(KD.homedir(),"scoop","apps"),t=Pe(e,"pwsh","current","pwsh.exe");return new Fh(t,"PowerShell (Scoop)")}function yJ(){const e=Pe(process.env.windir,Oh===1&&qc!==1?"SysNative":"System32","WindowsPowerShell","v1.0","powershell.exe");return new Fh(e,"Windows PowerShell",!0)}async function*xJ(){let e=await _m();e&&(yield e),e=await _m({useAlternateBitness:!0}),e&&(yield e),e=await i3(),e&&(yield e),e=wJ(),e&&(yield e),e=await _m({findPreview:!0}),e&&(yield e),e=await i3({findPreview:!0}),e&&(yield e),e=await _m({useAlternateBitness:!0,findPreview:!0}),e&&(yield e),e=await bJ(),e&&(yield e),e=yJ(),e&&(yield e)}async function*EJ(){for await(const e of xJ())await e.exists()&&(yield e)}async function kJ(){for await(const e of EJ())return e;return null}async function SJ(e,t){return e===1?Fe?$J():zI(t):CJ(e,t)}var t5=null;function CJ(e,t){if($t&&e===2||Ct&&e===3)return"/bin/bash";if(!t5){let i;if(Fe)i="/bin/bash";else{if(i=t.SHELL,!i)try{i=pJ().shell}catch{}i||(i="sh"),i==="/bin/false"&&(i="/bin/bash")}t5=i}return t5}var i5=null;async function $J(){return i5||(i5=(await kJ()).exePath),i5}import"assert";var Xne=tx(ix(),1),Kne={o:d(1838,null),e:d(1839,null),t:d(1840,null)},eoe={tunnel:{type:"subcommand",description:"Make the current machine accessible from vscode.dev or other machines through a secure tunnel",options:{"cli-data-dir":{type:"string",args:"dir",description:d(1841,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"},user:{type:"subcommand",options:{login:{type:"subcommand",options:{provider:{type:"string"},"access-token":{type:"string"}}}}}}},"serve-web":{type:"subcommand",description:"Run a server that displays the editor UI in browsers.",options:{"cli-data-dir":{type:"string",args:"dir",description:d(1842,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"}}},diff:{type:"boolean",cat:"o",alias:"d",args:["file","file"],description:d(1843,null)},merge:{type:"boolean",cat:"o",alias:"m",args:["path1","path2","base","result"],description:d(1844,null)},add:{type:"boolean",cat:"o",alias:"a",args:"folder",description:d(1845,null)},remove:{type:"boolean",cat:"o",args:"folder",description:d(1846,null)},goto:{type:"boolean",cat:"o",alias:"g",args:"file:line[:character]",description:d(1847,null)},"new-window":{type:"boolean",cat:"o",alias:"n",description:d(1848,null)},"reuse-window":{type:"boolean",cat:"o",alias:"r",description:d(1849,null)},wait:{type:"boolean",cat:"o",alias:"w",description:d(1850,null)},waitMarkerFilePath:{type:"string"},locale:{type:"string",cat:"o",args:"locale",description:d(1851,null)},"user-data-dir":{type:"string",cat:"o",args:"dir",description:d(1852,null)},profile:{type:"string",cat:"o",args:"profileName",description:d(1853,null)},help:{type:"boolean",cat:"o",alias:"h",description:d(1854,null)},"extensions-dir":{type:"string",deprecates:["extensionHomePath"],cat:"e",args:"dir",description:d(1855,null)},"extensions-download-dir":{type:"string"},"builtin-extensions-dir":{type:"string"},"list-extensions":{type:"boolean",cat:"e",description:d(1856,null)},"show-versions":{type:"boolean",cat:"e",description:d(1857,null)},category:{type:"string",allowEmptyValue:!0,cat:"e",description:d(1858,null),args:"category"},"install-extension":{type:"string[]",cat:"e",args:"ext-id | path",description:d(1859,null)},"pre-release":{type:"boolean",cat:"e",description:d(1860,null)},"uninstall-extension":{type:"string[]",cat:"e",args:"ext-id",description:d(1861,null)},"update-extensions":{type:"boolean",cat:"e",description:d(1862,null)},"enable-proposed-api":{type:"string[]",allowEmptyValue:!0,cat:"e",args:"ext-id",description:d(1863,null)},"add-mcp":{type:"string[]",cat:"o",args:"json",description:d(1864,null)},version:{type:"boolean",cat:"t",alias:"v",description:d(1865,null)},verbose:{type:"boolean",cat:"t",global:!0,description:d(1866,null)},log:{type:"string[]",cat:"t",args:"level",global:!0,description:d(1867,null)},status:{type:"boolean",alias:"s",cat:"t",description:d(1868,null)},"prof-startup":{type:"boolean",cat:"t",description:d(1869,null)},"prof-append-timers":{type:"string"},"prof-duration-markers":{type:"string[]"},"prof-duration-markers-file":{type:"string"},"no-cached-data":{type:"boolean"},"prof-startup-prefix":{type:"string"},"prof-v8-extensions":{type:"boolean"},"disable-extensions":{type:"boolean",deprecates:["disableExtensions"],cat:"t",description:d(1870,null)},"disable-extension":{type:"string[]",cat:"t",args:"ext-id",description:d(1871,null)},sync:{type:"string",cat:"t",description:d(1872,null),args:["on | off"]},"inspect-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugPluginHost"],args:"port",cat:"t",description:d(1873,null)},"inspect-brk-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugBrkPluginHost"],args:"port",cat:"t",description:d(1874,null)},"disable-lcd-text":{type:"boolean",cat:"t",description:d(1875,null)},"disable-gpu":{type:"boolean",cat:"t",description:d(1876,null)},"disable-chromium-sandbox":{type:"boolean",cat:"t",description:d(1877,null)},sandbox:{type:"boolean"},"locate-shell-integration-path":{type:"string",cat:"t",args:["shell"],description:d(1878,null)},telemetry:{type:"boolean",cat:"t",description:d(1879,null)},remote:{type:"string",allowEmptyValue:!0},"folder-uri":{type:"string[]",cat:"o",args:"uri"},"file-uri":{type:"string[]",cat:"o",args:"uri"},"locate-extension":{type:"string[]"},extensionDevelopmentPath:{type:"string[]"},extensionDevelopmentKind:{type:"string[]"},extensionTestsPath:{type:"string"},extensionEnvironment:{type:"string"},debugId:{type:"string"},debugRenderer:{type:"boolean"},"inspect-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-brk-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-search":{type:"string",deprecates:["debugSearch"],allowEmptyValue:!0},"inspect-brk-search":{type:"string",deprecates:["debugBrkSearch"],allowEmptyValue:!0},"inspect-sharedprocess":{type:"string",allowEmptyValue:!0},"inspect-brk-sharedprocess":{type:"string",allowEmptyValue:!0},"export-default-configuration":{type:"string"},"install-source":{type:"string"},"enable-smoke-test-driver":{type:"boolean"},logExtensionHostCommunication:{type:"boolean"},"skip-release-notes":{type:"boolean"},"skip-welcome":{type:"boolean"},"disable-telemetry":{type:"boolean"},"disable-updates":{type:"boolean"},"use-inmemory-secretstorage":{type:"boolean",deprecates:["disable-keytar"]},"password-store":{type:"string"},"disable-workspace-trust":{type:"boolean"},"disable-crash-reporter":{type:"boolean"},"crash-reporter-directory":{type:"string"},"crash-reporter-id":{type:"string"},"skip-add-to-recently-opened":{type:"boolean"},"open-url":{type:"boolean"},"file-write":{type:"boolean"},"file-chmod":{type:"boolean"},"install-builtin-extension":{type:"string[]"},force:{type:"boolean"},"do-not-sync":{type:"boolean"},"do-not-include-pack-dependencies":{type:"boolean"},trace:{type:"boolean"},"trace-memory-infra":{type:"boolean"},"trace-category-filter":{type:"string"},"trace-options":{type:"string"},"preserve-env":{type:"boolean"},"force-user-env":{type:"boolean"},"force-disable-user-env":{type:"boolean"},"open-devtools":{type:"boolean"},"disable-gpu-sandbox":{type:"boolean"},logsPath:{type:"string"},"__enable-file-policy":{type:"boolean"},editSessionId:{type:"string"},continueOn:{type:"string"},"enable-coi":{type:"boolean"},"unresponsive-sample-interval":{type:"string"},"unresponsive-sample-period":{type:"string"},"enable-rdp-display-tracking":{type:"boolean"},"no-proxy-server":{type:"boolean"},"no-sandbox":{type:"boolean",alias:"sandbox"},"proxy-server":{type:"string"},"proxy-bypass-list":{type:"string"},"proxy-pac-url":{type:"string"},"js-flags":{type:"string"},inspect:{type:"string",allowEmptyValue:!0},"inspect-brk":{type:"string",allowEmptyValue:!0},nolazy:{type:"boolean"},"force-device-scale-factor":{type:"string"},"force-renderer-accessibility":{type:"boolean"},"ignore-certificate-errors":{type:"boolean"},"allow-insecure-localhost":{type:"boolean"},"log-net-log":{type:"string"},vmodule:{type:"string"},_urls:{type:"string[]"},"disable-dev-shm-usage":{type:"boolean"},"profile-temp":{type:"boolean"},"ozone-platform":{type:"string"},"enable-tracing":{type:"string"},"trace-startup-format":{type:"string"},"trace-startup-file":{type:"string"},"trace-startup-duration":{type:"string"},"xdg-portal-required-version":{type:"string"},_:{type:"string[]"}};function s3(e){return e.VSCODE_CLI==="1"}var s5=void 0;async function IJ(e,t,i,s){return i["force-disable-user-env"]?(t.trace("resolveShellEnv(): skipped (--force-disable-user-env)"),{}):s3(s)&&!i["force-user-env"]?(t.trace("resolveShellEnv(): skipped (VSCODE_CLI is set)"),{}):(s3(s)?t.trace("resolveShellEnv(): running (--force-user-env)"):t.trace("resolveShellEnv(): running"),s5||(s5=wn.withAsyncBody(async(r,n)=>{const o=new Ke;let a=1e4;const c=e.getValue("application.shellEnvironmentResolutionTimeout");typeof c=="number"&&(a=pO(c,1,120)*1e3);const l=setTimeout(()=>{o.dispose(!0),n(new Error(d(2223,null)))},a);try{r(await PJ(t,o.token))}catch(u){!Ei(u)&&!o.token.isCancellationRequested?n(new Error(d(2224,null,Ks(u)))):r({})}finally{clearTimeout(l),o.dispose()}})),s5)}async function PJ(e,t){const i=process.env.ELECTRON_RUN_AS_NODE;e.trace("doResolveShellEnv#runAsNode",i);const s=process.env.ELECTRON_NO_ATTACH_CONSOLE;e.trace("doResolveShellEnv#noAttach",s);const r=ut().replace(/-/g,"").substr(0,12),n=new RegExp(r+"([\\s\\S]*?)"+r),o={...process.env,ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1",VSCODE_RESOLVING_ENVIRONMENT:"1"};e.trace("doResolveShellEnv#env",o);const a=await SJ(ro,o);e.trace("doResolveShellEnv#shell",a);let c=vt(a);if(Fe){const f=wl(c);WI().some(p=>hs(p,f))&&(c=c.substring(0,c.length-f.length))}let l,u;const h="";if(/^(?:pwsh|powershell)(?:-preview)?$/.test(c)){const f=await DJ(a),p=await oL(f.map(g=>async()=>await it.exists(g)?g:void 0));if(!p)return e.trace("doResolveShellEnv#noPowershellProfile after testing paths",f),{};e.trace("doResolveShellEnv#powershellProfile found in",p),l=`Write-Output '${r}'; [System.Environment]::GetEnvironmentVariables() | ConvertTo-Json -Compress; Write-Output '${r}'`,u=Fe?["-Command"]:["-Login","-Command"]}else c==="nu"?(l=`^'${process.execPath}' ${h} -p '"${r}" + JSON.stringify(process.env) + "${r}"'`,u=["-i","-l","-c"]):c==="xonsh"?(l=`import os, json; print("${r}", json.dumps(dict(os.environ)), "${r}")`,u=["-i","-l","-c"]):(l=`'${process.execPath}' ${h} -p '"${r}" + JSON.stringify(process.env) + "${r}"'`,c==="tcsh"||c==="csh"?u=["-ic"]:u=["-i","-l","-c"]);return new Promise((f,p)=>{if(t.isCancellationRequested)return p(new mt);e.trace("doResolveShellEnv#spawn",JSON.stringify(u),l);const g=dJ(a,[...u,l],{detached:!Fe,stdio:["ignore","pipe","pipe"],env:o});t.onCancellationRequested(()=>(g.kill(),p(new mt))),g.on("error",E=>{e.error("doResolveShellEnv#errorChildProcess",Ks(E)),p(E)});const v=[];g.stdout.on("data",E=>v.push(E));const b=[];g.stderr.on("data",E=>b.push(E)),g.on("close",(E,k)=>{const I=Buffer.concat(v).toString("utf8");e.trace("doResolveShellEnv#raw",I);const B=Buffer.concat(b).toString("utf8");if(B.trim()&&e.trace("doResolveShellEnv#stderr",B),E||k)return p(new Error(d(2225,null,E,k)));const j=n.exec(I),te=j?j[1]:"{}";try{const F=JSON.parse(te);i?F.ELECTRON_RUN_AS_NODE=i:delete F.ELECTRON_RUN_AS_NODE,s?F.ELECTRON_NO_ATTACH_CONSOLE=s:delete F.ELECTRON_NO_ATTACH_CONSOLE,delete F.VSCODE_RESOLVING_ENVIRONMENT,delete F.XDG_RUNTIME_DIR,e.trace("doResolveShellEnv#result",F),f(F)}catch(F){e.error("doResolveShellEnv#errorCaught",Ks(F)),p(F)}})})}async function DJ(e){const t=[],i=fJ();if(Fe){let s=process.env.PSHOME;if(!s)if(es(e))s=mi(e);else{const r=await yh(e);if(!r)return[];s=mi(r)}t.push(Pe(s,"Profile.ps1"),Pe(s,"Microsoft.PowerShell_profile.ps1"),Pe(i,"Documents","PowerShell","Profile.ps1"),Pe(i,"Documents","PowerShell","Microsoft.PowerShell_profile.ps1"),Pe(i,"Documents","WindowsPowerShell","Profile.ps1"),Pe(i,"Documents","WindowsPowerShell","Microsoft.PowerShell_profile.ps1"))}else Ct?t.push("/usr/local/microsoft/powershell/7/profile.ps1","/usr/local/microsoft/powershell/7/Microsoft.PowerShell_profile.ps1",Pe(i,".config","powershell","profile.ps1"),Pe(i,".config","powershell","Microsoft.PowerShell_profile.ps1")):t.push("/opt/microsoft/powershell/7/profile.ps1","/opt/microsoft/powershell/7/Microsoft.PowerShell_profile.ps1",Pe(i,".config","powershell","profile.ps1"),Pe(i,".config","powershell","Microsoft.PowerShell_profile.ps1"));return t}import{parse as r3}from"url";function AJ(e,t){return e.protocol==="http:"?t.HTTP_PROXY||t.http_proxy||null:e.protocol==="https:"&&(t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy)||null}async function TJ(e,t,i={}){const s=r3(e),r=i.proxyUrl||AJ(s,t);if(!r)return null;const n=r3(r);if(!/^https?:$/.test(n.protocol||""))return null;const o={host:n.hostname||"",port:(n.port?+n.port:0)||(n.protocol==="https"?443:80),auth:n.auth,rejectUnauthorized:mx(i.strictSSL)?i.strictSSL:!0};if(s.protocol==="http:"){const{default:a}=await import("http-proxy-agent");return new a.HttpProxyAgent(r,o)}else{const{default:a}=await import("https-proxy-agent");return new a.HttpsProxyAgent(r,o)}}import{createGunzip as RJ}from"zlib";var n3=class extends rj{constructor(t,i,s,r){super(r),this.m=t,this.n=i,this.r=s,this.s(),this.B(i.onDidChangeConfiguration(n=>{n.affectsConfiguration("http")&&this.s()}))}s(){this.f=this.t("http.proxy"),this.g=!!this.t("http.proxyStrictSSL"),this.h=this.t("http.proxyAuthorization")}async request(t,i){const{f:s,g:r}=this;let n;try{n=await IJ(this.n,this.b,this.r.args,process.env)}catch(c){this.j||(this.j=!0,this.b.error("resolving shell environment failed",nx(c)))}const o={...process.env,...n},a=t.agent?t.agent:await TJ(t.url||"",o,{proxyUrl:s,strictSSL:r});return t.agent=a,t.strictSSL=r,this.h&&(t.headers={...t.headers||{},"Proxy-Authorization":this.h}),this.c(t,()=>a3(t,i))}async resolveProxy(t){}async lookupAuthorization(t){}async lookupKerberosAuthorization(t){try{const i=this.t("http.proxyKerberosServicePrincipal");return"Negotiate "+await o3(t,i,this.b,"RequestService#lookupKerberosAuthorization")}catch(i){this.b.debug("RequestService#lookupKerberosAuthorization Kerberos authentication failed",i);return}}async loadCertificates(){return(await import("@vscode/proxy-agent")).loadSystemCertificates({log:this.b})}t(t){if(this.m==="remote")return this.n.getValue(t);const i=this.n.inspect(t);return i.userLocalValue||i.defaultValue}};n3=__decorate([__param(1,Fr),__param(2,lj),__param(3,De)],n3);async function o3(e,t,i,s){const r=await import("kerberos"),n=r.default||r,o=new URL(e),a=t||(process.platform==="win32"?`HTTP/${o.hostname}`:`HTTP@${o.hostname}`);return i.debug(`${s} Kerberos authentication lookup`,`proxyURL:${o}`,`spn:${a}`),(await n.initializeClient(a)).step("")}async function LJ(e){return(XD(e.url).protocol==="https:"?await import("https"):await import("http")).request}async function a3(e,t){return wn.withAsyncBody(async(i,s)=>{const r=XD(e.url),n=e.getRawRequest?e.getRawRequest(e):await LJ(e),o={hostname:r.hostname,port:r.port?parseInt(r.port):r.protocol==="https:"?443:80,protocol:r.protocol,path:r.path,method:e.type||"GET",headers:e.headers,agent:e.agent,rejectUnauthorized:mx(e.strictSSL)?e.strictSSL:!0};e.user&&e.password&&(o.auth=e.user+":"+e.password),e.disableCache&&(o.cache="no-store");const a=n(o,c=>{const l=us(e.followRedirects)?e.followRedirects:3;if(c.statusCode&&c.statusCode>=300&&c.statusCode<400&&l>0&&c.headers.location)a3({...e,url:c.headers.location,followRedirects:l-1},t).then(i,s);else{let u=c;!e.isChromiumNetwork&&c.headers["content-encoding"]==="gzip"&&(u=c.pipe(RJ())),i({res:c,stream:PL(u)})}});if(a.on("error",s),e.timeout)if(e.isChromiumNetwork){const c=setTimeout(()=>{a.abort(),s(new Error(`Request timeout after ${e.timeout}ms`))},e.timeout);a.on("response",()=>clearTimeout(c)),a.on("error",()=>clearTimeout(c)),a.on("abort",()=>clearTimeout(c))}else a.setTimeout(e.timeout);e.isChromiumNetwork&&a.removeHeader("Content-Length"),e.data&&typeof e.data=="string"&&a.write(e.data),a.end(),t.onCancellationRequested(()=>{a.abort(),s(new mt)})})}import*as qm from"@vscode/proxy-agent";var Gc=hJ(import.meta.url),c3=Gc("http"),Gm=Gc("https"),l3=Gc("tls"),u3=Gc("net"),h3=!1,d3=!1;function NJ(e,t,i,s,r,n,o){const a=n.remote.isRemote,c=n.environment.useHostProxy??!a,l=c,u=c,h=()=>!a||t.getConfiguration("http").get("useLocalProxyConfiguration",c),f={resolveProxy:E=>e.resolveProxy(E),lookupProxyAuthorization:zJ.bind(void 0,e,s,r,t,{},{},n.remote.isRemote,l),getProxyURL:()=>tn(t,a,"http.proxy"),getProxySupport:()=>tn(t,a,"http.proxySupport")||"off",getNoProxyConfig:()=>tn(t,a,"http.noProxy")||[],isAdditionalFetchSupportEnabled:()=>tn(t,a,"http.fetchAdditionalSupport",!0),addCertificatesV1:()=>jJ(t,a),addCertificatesV2:()=>BJ(t,a),log:s,getLogLevel:()=>{const E=s.getLevel();switch(E){case oe.Trace:return aa.Trace;case oe.Debug:return aa.Debug;case oe.Info:return aa.Info;case oe.Warning:return aa.Warning;case oe.Error:return aa.Error;case oe.Off:return aa.Off;default:return k(E)}function k(I){return s.error("Unknown log level",I),aa.Debug}},proxyResolveTelemetry:()=>{},isUseHostProxyEnabled:h,loadAdditionalCertificates:async()=>{const E=[];if(n.remote.isRemote&&E.push(uJ({log:s})),u){s.trace("ProxyResolver#loadAdditionalCertificates: Loading certificates from main process");const k=e.loadCertificates();k.then(I=>s.trace("ProxyResolver#loadAdditionalCertificates: Loaded certificates from main process",I.length)),E.push(k)}return n.environment.extensionTestsLocationURI&&Gm.globalAgent.testCertificates?.length&&(s.trace("ProxyResolver#loadAdditionalCertificates: Loading test certificates"),E.push(Promise.resolve(Gm.globalAgent.testCertificates))),(await Promise.all(E)).flat()},env:process.env},{resolveProxyWithRequest:p,resolveProxyURL:g}=aJ(f),v=qm.default||qm;v.resolveProxyURL=g,OJ(f,t,r,n,g,o);const b=UJ(f,p);return HJ(i,b)}var MJ=["content-length","host","trailer","te","upgrade","cookie2","keep-alive","transfer-encoding","set-cookie"];function OJ(e,t,i,s,r,n){if(!globalThis.__vscodeOriginalFetch){const o=globalThis.fetch;globalThis.__vscodeOriginalFetch=o;const a=qm.createFetchPatch(e,o,r);globalThis.__vscodePatchedFetch=a;let c=!1;s.remote.isRemote||(c=t.getConfiguration("http").get("electronFetch",d3),n.add(t.onDidChangeConfiguration(l=>{l.affectsConfiguration("http.electronFetch")&&(c=t.getConfiguration("http").get("electronFetch",d3))}))),globalThis.fetch=async function(u,h){function f(j){return h&&j in h?h[j]:typeof u=="object"&&"cache"in u?u[j]:void 0}const p=typeof u=="string"?u:"cache"in u?u.url:u.toString(),g=p.startsWith("data:");g&&Jc(i,"data");const v=p.startsWith("blob:");v&&Jc(i,"blob");const b=f("redirect")==="manual";b&&Jc(i,"manualRedirect");const E=f("integrity");if(E&&Jc(i,"integrity"),!c||g||v||b||E){const j=await a(u,h);return f3(i,j,p),j}if(h?.headers){const j=new Headers(h.headers);for(const te of MJ)j.delete(te);h={...h,headers:j}}const k=u instanceof URL?u.toString():u,B=await Gc("electron").net.fetch(k,h);return f3(i,B,p),B}}}function f3(e,t,i){const s=t.url;Object.defineProperty(t,"url",{get(){return Jc(e,"url"),s||i}});const r=t.type;Object.defineProperty(t,"type",{get(){return Jc(e,"typeProperty"),r!=="default"?r:"basic"}})}var p3={url:0,typeProperty:0,data:0,blob:0,integrity:0,manualRedirect:0},Jm,FJ=!1;function Jc(e,t){FJ&&!p3[t]++&&(Jm&&clearTimeout(Jm),Jm=setTimeout(()=>{e.$publicLog2("fetchFeatureUse",p3)},1e4),Jm.unref?.())}function UJ(e,t){function i(s,r){const n=s.default||s;return n.__vscodeOriginal=Object.assign({},n),Object.assign(n,r)}return{http:i(c3,QD(e,c3,t)),https:i(Gm,QD(e,Gm,t)),net:i(u3,lJ(e,u3)),tls:i(l3,cJ(e,l3))}}function jJ(e,t){return!tn(e,t,"http.experimental.systemCertificatesV2",h3)&&!!tn(e,t,"http.systemCertificates")}function BJ(e,t){return!!tn(e,t,"http.experimental.systemCertificatesV2",h3)&&!!tn(e,t,"http.systemCertificates")}var g3=new Map;function HJ(e,t){return e.getExtensionPathIndex().then(i=>{const s=Gc("module"),r=s._load;s._load=function(o,a,c){if(o==="net")return t.net;if(o==="tls")return t.tls;if(o!=="http"&&o!=="https"&&o!=="undici")return r.apply(this,arguments);const l=i.findSubstr(x.file(a.filename));let u=g3.get(l);if(u||g3.set(l,u={}),!u[o])if(o==="undici"){const h=r.apply(this,arguments);qm.patchUndici(h),u[o]=h}else{const h=t[o];u[o]={...h}}return u[o]}})}async function zJ(e,t,i,s,r,n,o,a,c,l,u){const h=r[c];l&&(r[c]=l),t.trace("ProxyResolver#lookupProxyAuthorization callback",`proxyURL:${c}`,`proxyAuthenticate:${l}`,`proxyAuthenticateCache:${h}`);const f=l||h,p=Array.isArray(f)?f:typeof f=="string"?[f]:[];if(VJ(i,p,o),p.some(v=>/^(Negotiate|Kerberos)( |$)/i.test(v))&&!u.kerberosRequested){u.kerberosRequested=!0;try{const v=tn(s,o,"http.proxyKerberosServicePrincipal");return"Negotiate "+await o3(c,v,t,"ProxyResolver#lookupProxyAuthorization")}catch(v){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication failed",v)}if(o&&a){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication lookup on host",`proxyURL:${c}`);const v=await e.lookupKerberosAuthorization(c);if(v)return"Negotiate "+v}}const g=p.find(v=>/^Basic( |$)/i.test(v));if(g)try{const v=n[c];if(v)if(u.basicAuthCacheUsed)t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication deleting cached credentials",`proxyURL:${c}`),delete n[c];else return t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication using cached credentials",`proxyURL:${c}`),u.basicAuthCacheUsed=!0,v;u.basicAuthAttempt=(u.basicAuthAttempt||0)+1;const b=/ realm="([^"]+)"/i.exec(g)?.[1];t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication lookup",`proxyURL:${c}`,`realm:${b}`);const E=new URL(c),k={scheme:"basic",host:E.hostname,port:Number(E.port),realm:b||"",isProxy:!0,attempt:u.basicAuthAttempt},I=await e.lookupAuthorization(k);if(I){t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received credentials",`proxyURL:${c}`,`realm:${b}`);const B="Basic "+Buffer.from(`${I.username}:${I.password}`).toString("base64");return n[c]=B,B}else t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received no credentials",`proxyURL:${c}`,`realm:${b}`)}catch(v){t.error("ProxyResolver#lookupProxyAuthorization Basic authentication failed",v)}}var m3=!1,WJ=!1;function VJ(e,t,i){!WJ||m3||!t.length||(m3=!0,e.$publicLog2("proxyAuthenticationRequest",{authenticationType:t.map(s=>s.split(" ")[0]).join(","),extensionHostType:i?"remote":"local"}))}function tn(e,t,i,s){if(t)return e.getConfiguration().get(i)??s;const r=e.getConfiguration().inspect(i);return r?.globalLocalValue??r?.defaultValue??s}import{tmpdir as _J}from"os";var r5=class extends X{constructor(t,i){super();const s=t.getProxy(Z.MainThreadDownloadService);i.registerCommand(!1,"_workbench.downloadResource",async r=>{const n=x.file(Pe(_J(),ut()));return await s.$download(r,n),n})}};r5=__decorate([__param(0,Ae),__param(1,Bs)],r5);import*as qJ from"http";import*as v3 from"fs";var GJ=class{constructor(e,t,i){this.b=e,this.c=t,this.f=i,this.a=qJ.createServer((s,r)=>this.h(s,r)),this.g().catch(s=>(t.error(s),""))}get ipcHandlePath(){return this.f}async g(){try{this.a.listen(this.ipcHandlePath),this.a.on("error",e=>this.c.error(e))}catch{this.c.error("Could not start open from terminal server.")}return this.f}h(e,t){const i=(r,n)=>{t.writeHead(r,{"content-type":"application/json"}),t.end(JSON.stringify(n||null),o=>o&&this.c.error(o))},s=[];e.setEncoding("utf8"),e.on("data",r=>s.push(r)),e.on("end",async()=>{try{const r=JSON.parse(s.join(""));let n;switch(r.type){case"open":n=await this.i(r);break;case"openExternal":n=await this.j(r);break;case"status":n=await this.l(r);break;case"extensionManagement":n=await this.k(r);break;default:i(404,`Unknown message type: ${r.type}`);break}i(200,n)}catch(r){const n=r instanceof Error?r.message:JSON.stringify(r);i(500,n),this.c.error("Error while processing pipe request",r)}})}async i(e){const{fileURIs:t,folderURIs:i,forceNewWindow:s,diffMode:r,mergeMode:n,addMode:o,removeMode:a,forceReuseWindow:c,gotoLineMode:l,waitMarkerFilePath:u,remoteAuthority:h}=e,f=[];if(Array.isArray(i))for(const b of i)try{f.push({folderUri:x.parse(b)})}catch{}if(Array.isArray(t))for(const b of t)try{EO(b)?f.push({workspaceUri:x.parse(b)}):f.push({fileUri:x.parse(b)})}catch{}const p=u?x.file(u):void 0,v={forceNewWindow:s,diffMode:r,mergeMode:n,addMode:o,removeMode:a,gotoLineMode:l,forceReuseWindow:c,preferNewWindow:!c&&!p&&!o&&!a,waitMarkerFileURI:p,remoteAuthority:h};this.b.executeCommand("_remoteCLI.windowOpen",f,v)}async j(e){for(const t of e.uris){const i=x.parse(t),s=i.scheme==="file"?i:t;await this.b.executeCommand("_remoteCLI.openExternal",s)}}async k(e){const t=s=>s?.map(r=>/\.vsix$/i.test(r)?x.parse(r):r),i={list:e.list,install:t(e.install),uninstall:t(e.uninstall),force:e.force};return await this.b.executeCommand("_remoteCLI.manageExtensions",i)}async l(e){return await this.b.executeCommand("_remoteCLI.getSystemStatus")}dispose(){this.a.close(),this.f&&process.platform!=="win32"&&v3.existsSync(this.f)&&v3.unlinkSync(this.f)}},n5=class extends GJ{constructor(t,i){super(t,i,xN())}};n5=__decorate([__param(0,Bs),__param(1,De)],n5);var o5=class{constructor(t,i){this.a=t.getProxy(Z.MainThreadConsole),this.b=i.consoleForward.includeStack,this.c=i.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,i){const s=this,r=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){s.e(t,i,r,arguments)}})}e(t,i,s,r){this.a.$logExtensionHostMessage({type:"__$console",severity:i,arguments:YJ(r,this.b)}),this.c&&this.f(t,s,r)}};o5=__decorate([__param(0,Ae),__param(1,kt)],o5);var JJ=1e5;function YJ(e,t){const i=[];if(e.length)for(let s=0;s<e.length;s++){let r=e[s];if(typeof r>"u")r="undefined";else if(r instanceof Error){const n=r;n.stack?r=n.stack:r=n.toString()}i.push(r)}if(t){const s=new Error().stack;s&&i.push({__$stack:s.split(`
`).slice(3).join(`
`)})}try{const s=kN(i);return s.length>JJ?"Output omitted for a large object that exceeds the limits":s}catch(s){return`Output omitted for an object that cannot be inspected ('${s.toString()}')`}}var ZJ=1024*1024,a5=class extends o5{constructor(t,i){super(t,i),this.g=!1,this.j("stderr","error"),this.j("stdout","log")}f(t,i,s){const r=t==="error"||t==="warn"?process.stderr:process.stdout;this.g=!0,r.write(`
START_NATIVE_LOG
`),i.apply(console,s),r.write(`
END_NATIVE_LOG
`),this.g=!1}j(t,i){const s=process[t],r=s.write;let n="";Object.defineProperty(s,"write",{set:()=>{},get:()=>(o,a,c)=>{if(!this.g){n+=o.toString(a);const l=n.length>ZJ?n.length:n.lastIndexOf(`
`);l!==-1&&(console[i](n.slice(0,l)),n=n.slice(l+1))}r.call(s,o,a,c)}})}};a5=__decorate([__param(0,Ae),__param(1,kt)],a5);import{promises as ca}from"fs";async function QJ(e,t,i,s,r,n){let o;try{await XJ(e,t,i,s,r,n)}catch(a){o=a}finally{o&&r.errorTransformer&&(o=r.errorTransformer(o)),typeof o<"u"&&i.error(o),i.end()}}async function XJ(e,t,i,s,r,n){c5(n);const o=await e.open(t,{create:!1});try{c5(n);let a=0,c=0,l=r&&typeof r.length=="number"?r.length:void 0,u=_.alloc(Math.min(r.bufferSize,typeof l=="number"?l:r.bufferSize)),h=r&&typeof r.position=="number"?r.position:0,f=0;do c=await e.read(o,h,u.buffer,f,u.byteLength-f),h+=c,f+=c,a+=c,typeof l=="number"&&(l-=c),f===u.byteLength&&(await i.write(s(u)),u=_.alloc(Math.min(r.bufferSize,typeof l=="number"?l:r.bufferSize)),f=0);while(c>0&&(typeof l!="number"||l>0)&&c5(n)&&KJ(a,r));if(f>0){let p=f;typeof l=="number"&&(p=Math.min(f,l)),i.write(s(u.slice(0,p)))}}catch(a){throw IF(a)}finally{await e.close(o)}}function c5(e){if(e.isCancellationRequested)throw al();return!0}function KJ(e,t){if(typeof t?.limits?.size=="number"&&e>t.limits.size)throw Mr(d(2053,null),pe.FileTooLarge);return!0}var eY=class extends X{constructor(e,t){super(),this.a=e,this.b=t,this.c=this.B(new D),this.onDidChangeFile=this.c.event,this.g=this.B(new D),this.onDidWatchError=this.g.event,this.m=[],this.n=this.B(new Id(this.h(this.m.length))),this.z=[],this.C=this.B(new Id(this.h(this.z.length)))}watch(e,t){return t.recursive||this.b?.watcher?.forceUniversal?this.r(e,t):this.D(e,t)}h(e){return e>200?500:0}r(e,t){const i=this.s(e,t),s=ax(this.m,i);return this.t(),ie(()=>{s(),this.t()})}s(e,t){const i={path:this.M(e),excludes:t.excludes,includes:t.includes,recursive:t.recursive,filter:t.filter,correlationId:t.correlationId};if(kq(i)){const s=this.b?.watcher?.recursive?.usePolling;s===!0?i.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3:Array.isArray(s)&&s.includes(i.path)&&(i.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3)}return i}t(){this.n.trigger(()=>this.u(),this.h(this.m.length)).catch(e=>lt(e))}u(){return this.j||(this.j=this.B(this.w(e=>this.c.fire(YP(e)),e=>this.I(e),this.a.getLevel()===oe.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.j?.setVerboseLogging(this.a.getLevel()===oe.Trace)}))),this.j.watch(this.m)}D(e,t){const i={path:this.M(e),excludes:t.excludes,includes:t.includes,recursive:!1,filter:t.filter,correlationId:t.correlationId},s=ax(this.z,i);return this.F(),ie(()=>{s(),this.F()})}F(){this.C.trigger(()=>this.G(),this.h(this.z.length)).catch(e=>lt(e))}G(){return this.y||(this.y=this.B(this.H(e=>this.c.fire(YP(e)),e=>this.I(e),this.a.getLevel()===oe.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.y?.setVerboseLogging(this.a.getLevel()===oe.Trace)}))),this.y.watch(this.z)}I(e){e.type==="error"&&this.g.fire(e.message),this.J(e)}J(e){this.a[e.type](e.message)}L(e){return $r(e.fsPath)}M(e){const t=this.L(e);return LR(t)}};import{fork as tY}from"child_process";function iY(e){const t=e;return t&&typeof t.type=="string"&&typeof t.severity=="string"}function sY(e){const t=[];let i;try{const s=JSON.parse(e.arguments),r=s[s.length-1];r&&r.__$stack&&(s.pop(),i=r.__$stack),t.push(...s)}catch{t.push("Unable to log remote console arguments",e.arguments)}return{args:t,stack:i}}function rY(e){if(!e)return e;const t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function nY(e,t){const{args:i,stack:s}=sY(e),r=typeof i[0]=="string"&&i.length===1;let n=rY(s);n&&(n=`(${n.trim()})`);let o=[];if(typeof i[0]=="string"?n&&r?o=[`%c[${t}] %c${i[0]} %c${n}`,Yc("blue"),Yc(""),Yc("grey")]:o=[`%c[${t}] %c${i[0]}`,Yc("blue"),Yc(""),...i.slice(1)]:o=[`%c[${t}]%`,Yc("blue"),...i],n&&!r&&o.push(n),typeof console[e.severity]!="function")throw new Error("Unknown console method");console[e.severity].apply(console,o)}function Yc(e){return`color: ${e}`}var oY=class{constructor(e,t){this.i=e,this.j=t,this.c=new Set,this.g=new Map,this.h=new D,this.onDidProcessExit=this.h.event;const i=t&&t.timeout?t.timeout:6e4;this.b=new kE(i),this.d=null,this.f=null}getChannel(e){const t=this;return{call(i,s,r){return t.k(e,i,s,r)},listen(i,s){return t.l(e,i,s)}}}k(e,t,i,s=Ye.None){if(!this.b)return Promise.reject(new Error("disposed"));if(s.isCancellationRequested)return Promise.reject(al());this.b.cancel();const r=this.n(e),n=Ir(c=>r.call(t,i,c)),o=s.onCancellationRequested(()=>n.cancel()),a=ie(()=>n.cancel());return this.c.add(a),n.finally(()=>{o.dispose(),this.c.delete(a),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}),n}l(e,t,i){if(!this.b)return Ve.None;this.b.cancel();let s;const r=new D({onWillAddFirstListener:()=>{s=this.n(e).listen(t,i)(r.fire,r),this.c.add(s)},onDidRemoveLastListener:()=>{this.c.delete(s),s.dispose(),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}});return r.event}get m(){if(!this.f){const e=this.j&&this.j.args?this.j.args:[],t=Object.create(null);t.env={...Qe(process.env),VSCODE_PARENT_PID:String(process.pid)},this.j&&this.j.env&&(t.env={...t.env,...this.j.env}),this.j&&this.j.freshExecArgv&&(t.execArgv=[]),this.j&&typeof this.j.debug=="number"&&(t.execArgv=["--nolazy","--inspect="+this.j.debug]),this.j&&typeof this.j.debugBrk=="number"&&(t.execArgv=["--nolazy","--inspect-brk="+this.j.debugBrk]),t.execArgv===void 0&&(t.execArgv=process.execArgv.filter(u=>!/^--inspect(-brk)?=/.test(u)).filter(u=>!u.startsWith("--vscode-"))),gV(t.env),this.d=tY(this.i,e,t);const i=new D,r=Ve.fromNodeEventEmitter(this.d,"message",u=>u)(u=>{if(iY(u)){nY(u,`IPC Library: ${this.j.serverName}`);return}i.fire(_.wrap(Buffer.from(u,"base64")))}),n=this.j.useQueue?mV(this.d):this.d,o=u=>this.d&&this.d.connected&&n.send(u.buffer.toString("base64")),a=i.event,c={send:o,onMessage:a};this.f=new ik(c);const l=()=>this.o();process.once("exit",l),this.d.on("error",u=>console.warn('IPC "'+this.j.serverName+'" errored with '+u)),this.d.on("exit",(u,h)=>{process.removeListener("exit",l),r.dispose(),this.c.forEach(f=>Es(f)),this.c.clear(),u!==0&&h!=="SIGTERM"&&console.warn('IPC "'+this.j.serverName+'" crashed with exit code '+u+" and signal "+h),this.b?.cancel(),this.o(),this.h.fire({code:u,signal:h})})}return this.f}n(e){let t=this.g.get(e);return t||(t=this.m.getChannel(e),this.g.set(e,t)),t}o(){this.f&&(this.d&&(this.d.kill(),this.d=null),this.f=null,this.g.clear())}dispose(){this.h.dispose(),this.b?.cancel(),this.b=void 0,this.o(),this.c.clear()}},aY=class extends Cq{constructor(e,t,i){super(e,t,i),this.s()}r(e){const t=e.add(new oY(G1.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_ESM_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return e.add(t.onDidProcessExit(({code:i,signal:s})=>this.t(`terminated by itself with code ${i}, signal: ${s} (ETERM)`))),av.toService(aN(t.getChannel("watcher")))}};import{watchFile as cY,unwatchFile as lY}from"fs";var uY=class extends X{constructor(){super(),this.a=this.B(new D),this.onDidChangeFile=this.a.event,this.b=this.B(new D),this.onDidLogMessage=this.b.event,this.c=this.B(new D),this.f=this.c.event,this.g=new Map,this.h=new Map,this.j=this.B(new dl),this.m=new Set,this.n=this.B(new Id(this.y())),this.r=5007,this.s=new is,this.R=!1,this.B(this.f(e=>this.z({id:this.u(e),correlationId:this.t(e)?e.correlationId:void 0,path:e.path})))}t(e){return GP(e)}u(e){return this.t(e)?e.correlationId:Rr(e)}async watch(e){this.s.isSettled||this.s.complete(),this.s=new is;try{this.g.clear(),this.h.clear();for(const t of e)this.t(t)?this.g.set(t.correlationId,t):this.h.set(this.u(t),t);for(const[t]of this.j)!this.h.has(t)&&!this.g.has(t)&&(this.j.deleteAndDispose(t),this.m.delete(t));return await this.w(!1)}finally{this.s.complete()}}w(e){const t=[];for(const[i,s]of[...this.h,...this.g])this.j.has(i)||t.push(s);return this.n.trigger(()=>this.N(t),e?this.y():0).catch(i=>lt(i))}y(){return 800}isSuspended(e){const t=this.u(e);return this.m.has(t)?"polling":this.j.has(t)}async z(e){if(this.j.has(e.id))return;const t=new se;this.j.set(e.id,t),await this.s.p,!t.isDisposed&&(this.D(e,t),this.w(!0))}C(e){this.j.deleteAndDispose(e.id),this.m.delete(e.id),this.w(!1)}D(e,t){this.F(e,t)?(this.P(`reusing an existing recursive watcher to monitor ${e.path}`),this.m.delete(e.id)):(this.G(e,t),this.m.add(e.id))}F(e,t){const i=this.O?.subscribe(e.path,(s,r)=>{t.isDisposed||(s?this.D(e,t):r?.type===1&&this.H(e))});return i?(t.add(i),!0):!1}G(e,t){let i=!1;const s=(r,n)=>{if(t.isDisposed)return;const o=this.I(r),a=this.I(n),c=i;i=o,!o&&(a||c)&&this.H(e)};this.P(`starting fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{cY(e.path,{persistent:!1,interval:this.r},s)}catch(r){this.Q(`fs.watchFile() failed with error ${r} on path ${e.path} (correlationId: ${e.correlationId})`)}t.add(ie(()=>{this.P(`stopping fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{lY(e.path,s)}catch(r){this.Q(`fs.unwatchFile() failed with error ${r} on path ${e.path} (correlationId: ${e.correlationId})`)}}))}H(e){this.P(`detected ${e.path} exists again, resuming watcher (correlationId: ${e.correlationId})`);const t={resource:x.file(e.path),type:1,cId:e.correlationId};this.a.fire([t]),this.J(t,e),this.C(e)}I(e){return e.ctimeMs===0&&e.ino===0}async stop(){this.j.clearAndDisposeAll(),this.m.clear()}J(e,t){if(this.R){const i=` >> normalized ${e.type===1?"[ADDED]":e.type===2?"[DELETED]":"[CHANGED]"} ${e.resource.fsPath}`;this.L(i,t)}}L(e,t){this.R&&this.P(`${e}${typeof t.correlationId=="number"?` <${t.correlationId}> `:""}`)}M(e){return`${e.path} (excludes: ${e.excludes.length>0?e.excludes:"<none>"}, includes: ${e.includes&&e.includes.length>0?JSON.stringify(e.includes):"<all>"}, filter: ${Dq(e.filter)}, correlationId: ${typeof e.correlationId=="number"?e.correlationId:"<none>"})`}async setVerboseLogging(e){this.R=e}};import{watch as hY,promises as dY}from"fs";var fY=class m1 extends X{static{this.a=100}static{this.b=75}get isReusingRecursiveWatcher(){return this.r}get failed(){return this.s}constructor(t,i,s,r,n,o){super(),this.t=t,this.u=i,this.w=s,this.y=r,this.z=n,this.C=o,this.c=this.B(new IE({maxWorkChunkSize:100,throttleDelay:200,maxBufferedWork:1e4},a=>this.w(a))),this.f=this.B(new uL(a=>this.M(a),m1.b)),this.m=new Ke,this.n=new Qt(async()=>{let a=this.t.path;try{a=await qE(this.t.path),this.t.path!==a&&this.Q(`correcting a path to watch that seems to be a symbolic link (original: ${this.t.path}, real: ${a})`)}catch{}return a}),this.r=!1,this.s=!1,this.g=QP(this.t.path,this.t.excludes),this.h=this.t.includes?QP(this.t.path,this.t.includes):void 0,this.j=GP(this.t)?this.t.filter:void 0,this.ready=this.D()}async D(){try{const t=await dY.stat(this.t.path);if(this.m.token.isCancellationRequested)return;this.B(await this.G(t.isDirectory()))}catch(t){t.code!=="ENOENT"?this.O(t):this.Q(`ignoring a path for watching who's stat info failed to resolve: ${this.t.path} (error: ${t})`),this.F()}}F(){this.s=!0,this.y?.()}async G(t){const i=new se;return this.H(t,i)?(this.Q(`reusing an existing recursive watcher for ${this.t.path}`),this.r=!0):(this.r=!1,await this.I(t,i)),i}H(t,i){if(t)return!1;const s=x.file(this.t.path),r=this.u?.subscribe(this.t.path,async(n,o)=>{if(!i.isDisposed)if(n){const a=await this.G(t);i.isDisposed?a.dispose():i.add(a)}else o&&(typeof o.cId=="number"||typeof this.t.correlationId=="number")&&this.L({resource:s,type:o.type,cId:this.t.correlationId},!0)});return r?(i.add(r),!0):!1}async I(t,i){const s=await this.n.value;if(this.m.token.isCancellationRequested)return;if(Ct&&lo(s,"/Volumes/",!0)){this.O(`Refusing to watch ${s} for changes using fs.watch() for possibly being a network share where watching is unreliable and unstable.`);return}const r=new Ke(this.m.token);i.add(ie(()=>r.dispose(!0)));const n=new se;i.add(n);try{const o=x.file(this.t.path),a=vt(s),c=hY(s);n.add(ie(()=>{c.removeAllListeners(),c.close()})),this.Q(`Started watching: '${s}'`);const l=new Set;if(t)try{for(const h of await it.readdir(s))l.add(h)}catch(h){this.O(h)}if(r.token.isCancellationRequested)return;const u=new Map;n.add(ie(()=>{for(const[,h]of u)h.dispose();u.clear()})),c.on("error",(h,f)=>{r.token.isCancellationRequested||(this.O(`Failed to watch ${s} for changes using fs.watch() (${h}, ${f})`),this.F())}),c.on("change",(h,f)=>{if(r.token.isCancellationRequested)return;this.C&&this.R(`[raw] ["${h}"] ${f}`);let p="";if(f&&(p=f.toString(),Ct&&(p=Nd(p))),!(!p||h!=="change"&&h!=="rename"))if(t)if(h==="rename"){u.get(p)?.dispose();const g=setTimeout(async()=>{if(u.delete(p),Ed(p,a,!$t)&&!await it.exists(s)){this.J(o);return}if(r.token.isCancellationRequested)return;const v=await this.N(Pe(s,p));if(r.token.isCancellationRequested)return;let b;v?l.has(p)?b=0:(b=1,l.add(p)):(l.delete(p),b=2),this.L({resource:xt(o,p),type:b,cId:this.t.correlationId})},m1.a);u.set(p,ie(()=>clearTimeout(g)))}else{let g;l.has(p)?g=0:(g=1,l.add(p)),this.L({resource:xt(o,p),type:g,cId:this.t.correlationId})}else if(h==="rename"||!Ed(p,a,!$t)){const g=setTimeout(async()=>{const v=await it.exists(s);r.token.isCancellationRequested||(v?(this.L({resource:o,type:0,cId:this.t.correlationId},!0),n.add(await this.G(!1))):this.J(o))},m1.a);n.clear(),n.add(ie(()=>clearTimeout(g)))}else this.L({resource:o,type:0,cId:this.t.correlationId},!0)})}catch(o){if(r.token.isCancellationRequested)return;this.O(`Failed to watch ${s} for changes using fs.watch() (${o.toString()})`),this.F()}}J(t){this.P("Watcher shutdown because watched path got deleted"),this.L({resource:t,type:2,cId:this.t.correlationId},!0),this.f.flush(),this.F()}L(t,i=!1){this.m.token.isCancellationRequested||(this.C&&this.R(`${t.type===1?"[ADDED]":t.type===2?"[DELETED]":"[CHANGED]"} ${t.resource.fsPath}`),!i&&this.g.some(s=>s(t.resource.fsPath))?this.C&&this.R(` >> ignored (excluded) ${t.resource.fsPath}`):!i&&this.h&&this.h.length>0&&!this.h.some(s=>s(t.resource.fsPath))?this.C&&this.R(` >> ignored (not included) ${t.resource.fsPath}`):this.f.work(t))}M(t){const i=$q(t),s=[];for(const n of i){if(Pq(n,this.j)){this.C&&this.R(` >> ignored (filtered) ${n.resource.fsPath}`);continue}s.push(n)}if(s.length===0)return;if(this.C)for(const n of s)this.R(` >> normalized ${n.type===1?"[ADDED]":n.type===2?"[DELETED]":"[CHANGED]"} ${n.resource.fsPath}`);this.c.work(s)?this.c.pending>0&&this.Q(`started throttling events due to large amount of file change events at once (pending: ${this.c.pending}, most recent change: ${s[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`):this.P(`started ignoring events due to too many file change events at once (incoming: ${s.length}, most recent change: ${s[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`)}async N(t){if($t)return it.exists(t);try{const i=vt(t);return(await it.readdir(mi(t))).some(r=>r===i)}catch(i){return this.Q(i),!1}}setVerboseLogging(t){this.C=t}O(t){this.m.token.isCancellationRequested||this.z?.({type:"error",message:`[File Watcher (node.js)] ${t}`})}P(t){this.m.token.isCancellationRequested||this.z?.({type:"warn",message:`[File Watcher (node.js)] ${t}`})}Q(t){!this.m.token.isCancellationRequested&&this.C&&this.z?.({type:"trace",message:`[File Watcher (node.js)] ${t}`})}R(t){!this.m.token.isCancellationRequested&&this.C&&this.Q(`${t}${typeof this.t.correlationId=="number"?` <${this.t.correlationId}> `:""}`)}dispose(){this.m.dispose(!0),super.dispose()}},pY=class extends uY{get watchers(){return this.S.values()}constructor(e){super(),this.O=e,this.onDidError=Ve.None,this.S=new Map,this.U=this.B(new Js)}async N(e){e=this.cb(e);const t=[],i=new Set(Array.from(this.watchers));for(const s of e){const r=this.S.get(this.Z(s));r&&D8(r.request.excludes,s.excludes)&&D8(r.request.includes,s.includes)?i.delete(r):t.push(s)}t.length&&this.P(`Request to start watching: ${t.map(s=>this.M(s)).join(",")}`),i.size&&this.P(`Request to stop watching: ${Array.from(i).map(s=>this.M(s.request)).join(",")}`),this.U.clear();for(const s of i)this.bb(s);this.Y().work(t)}Y(){return this.U.value=new IE({maxWorkChunkSize:100,throttleDelay:100,maxBufferedWork:Number.MAX_VALUE},e=>{for(const t of e)this.ab(t)}),this.U.value}Z(e){return typeof e.correlationId=="number"?e.correlationId:this.$(e.path)}$(e){return $t?e:e.toLowerCase()}ab(e){const t=new fY(e,this.O,s=>this.a.fire(s),()=>this.c.fire(e),s=>this.b.fire(s),this.R),i={request:e,instance:t};this.S.set(this.Z(e),i)}async stop(){await super.stop();for(const e of this.watchers)this.bb(e)}bb(e){this.P("stopping file watcher",e),this.S.delete(this.Z(e.request)),e.instance.dispose()}cb(e){const t=new Map;for(const i of e){let s=t.get(i.correlationId);s||(s=new Map,t.set(i.correlationId,s));const r=this.$(i.path);s.has(r)&&this.P(`ignoring a request for watching who's path is already watched: ${this.M(i)}`),s.set(r,i)}return Array.from(t.values()).map(i=>Array.from(i.values())).flat()}async setVerboseLogging(e){super.setVerboseLogging(e);for(const t of this.watchers)t.instance.setVerboseLogging(e)}P(e,t){this.R&&this.b.fire({type:"trace",message:this.fb(e,t)})}Q(e){this.b.fire({type:"warn",message:this.fb(e)})}fb(e,t){return t?`[File Watcher (node.js)] ${e} (${this.M(t.request)})`:`[File Watcher (node.js)] ${e}`}},gY=class extends Sq{constructor(e,t,i){super(e,t,i),this.s()}r(e){return e.add(new pY(void 0))}},mY=class Kh extends eY{static{this.N=!1}constructor(t,i){super(t,i),this.onDidChangeCapabilities=Ve.None,this.R=new Ht(s=>J1.getComparisonKey(s)),this.Z=new Map,this.$=new Map,this.ab=new Map}get capabilities(){return this.O||(this.O=253982,$t&&(this.O|=1024)),this.O}async stat(t){try{const{stat:i,symbolicLink:s}=await Si.stat(this.L(t));return{type:this.Q(i,s),ctime:i.birthtime.getTime(),mtime:i.mtime.getTime(),size:i.size,permissions:(i.mode&128)===0?kn.Locked:void 0}}catch(i){throw this.jb(i)}}async P(t){try{return await this.stat(t)}catch{return}}async readdir(t){try{const i=await it.readdir(this.L(t),{withFileTypes:!0}),s=[];return await Promise.all(i.map(async r=>{try{let n;r.isSymbolicLink()?n=(await this.stat(xt(t,r.name))).type:n=this.Q(r),s.push([r.name,n])}catch(n){this.a.trace(n)}})),s}catch(i){throw this.jb(i)}}Q(t,i){let s;return i?.dangling?s=zi.Unknown:t.isFile()?s=zi.File:t.isDirectory()?s=zi.Directory:s=zi.Unknown,i&&(s|=zi.SymbolicLink),s}async S(t){const i=this.L(t);this.U(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${i})`);let s;for(;s=this.R.get(t);)this.U(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${i})`),await s.wait();const r=new ds;return this.R.set(t,r),this.U(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${i})`),ie(()=>{this.U(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${i})`),this.R.get(t)===r&&(this.U(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${i})`),this.R.delete(t)),this.U(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${i})`),r.open()})}async readFile(t,i){let s;try{i?.atomic&&(this.U(`[Disk FileSystemProvider]: atomic read operation started (${this.L(t)})`),s=await this.S(t));const r=this.L(t);return await ca.readFile(r)}catch(r){throw this.jb(r)}finally{s?.dispose()}}U(t){Kh.N&&this.a.trace(t)}readFileStream(t,i,s){const r=Dd(n=>_.concat(n.map(o=>_.wrap(o))).buffer);return QJ(this,t,r,n=>n.buffer,{...i,bufferSize:256*1024},s),r}async writeFile(t,i,s){return s?.atomic!==!1&&s?.atomic?.postfix&&await this.W(t)?this.X(t,xt(xl(t),`${ts(t)}${s.atomic.postfix}`),i,s):this.Y(t,i,s)}async W(t){try{const i=this.L(t),{symbolicLink:s}=await Si.stat(i);if(s)return!1}catch{}return!0}async X(t,i,s,r){const n=new se;try{n.add(await this.S(t)),n.add(await this.S(i)),await this.Y(i,s,r,!0);try{await this.rename(i,t,{overwrite:!0})}catch(o){try{await this.delete(i,{recursive:!1,useTrash:!1,atomic:!1})}catch{}throw o}}finally{n.dispose()}}async Y(t,i,s,r){let n;try{const o=this.L(t);if(!s.create||!s.overwrite){if(await it.exists(o)){if(!s.overwrite)throw Mr(d(2056,null),pe.FileExists)}else if(!s.create)throw Mr(d(2057,null),pe.FileNotFound)}n=await this.open(t,{create:!0,unlock:s.unlock},r),await this.write(n,0,i,0,i.byteLength)}catch(o){throw await this.kb(t,o)}finally{typeof n=="number"&&await this.close(n)}}static{this.bb=!0}static configureFlushOnWrite(t){Kh.bb=t}async open(t,i,s){const r=this.L(t);let n;Fa(i)&&!s&&(n=await this.S(t));let o;try{if(Fa(i)&&i.unlock)try{const{stat:a}=await Si.stat(r);a.mode&128||await ca.chmod(r,a.mode|128)}catch(a){a.code!=="ENOENT"&&this.a.trace(a)}if(Fe&&Fa(i))try{o=await it.open(r,"r+"),await it.ftruncate(o,0)}catch(a){if(a.code!=="ENOENT"&&this.a.trace(a),typeof o=="number"){try{await it.close(o)}catch(c){this.a.trace(c)}o=void 0}}typeof o!="number"&&(o=await it.open(r,Fa(i)?"w":"r"))}catch(a){throw n?.dispose(),Fa(i)?await this.kb(t,a):this.jb(a)}if(this.Z.set(o,0),Fa(i)&&this.ab.set(o,t),n){const a=this.$.get(o);this.U(`[Disk FileSystemProvider]: open() - storing lock for handle ${o} (${r})`),this.$.set(o,n),a&&(this.U(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${o} (${r})`),a.dispose())}return o}async close(t){const i=this.$.get(t);try{if(this.Z.delete(t),this.ab.delete(t)&&Kh.bb)try{await it.fdatasync(t)}catch(s){Kh.configureFlushOnWrite(!1),this.a.error(s)}return await it.close(t)}catch(s){throw this.jb(s)}finally{i&&(this.$.get(t)===i&&(this.U(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${t}`),this.$.delete(t)),this.U(`[Disk FileSystemProvider]: close() - disposing lock for handle ${t}`),i.dispose())}}async read(t,i,s,r,n){const o=this.cb(t,i);let a=null;try{a=(await it.read(t,s,r,n,o)).bytesRead}catch(c){throw this.jb(c)}finally{this.db(t,o,a)}return a}cb(t,i){return i===this.Z.get(t)?null:i}db(t,i,s){const r=this.Z.get(t);typeof r=="number"&&(typeof i=="number"||(typeof s=="number"?this.Z.set(t,r+s):this.Z.delete(t)))}async write(t,i,s,r,n){return fL(()=>this.eb(t,i,s,r,n),100,3)}async eb(t,i,s,r,n){const o=this.cb(t,i);let a=null;try{a=(await it.write(t,s,r,n,o)).bytesWritten}catch(c){throw await this.kb(this.ab.get(t),c)}finally{this.db(t,o,a)}return a}async mkdir(t){try{await ca.mkdir(this.L(t))}catch(i){throw this.jb(i)}}async delete(t,i){try{const s=this.L(t);if(i.recursive){let r;i?.atomic!==!1&&i.atomic.postfix&&(r=Pe(mi(s),`${vt(s)}${i.atomic.postfix}`)),await it.rm(s,uo.MOVE,r)}else try{await ca.unlink(s)}catch(r){if(r.code==="EPERM"||r.code==="EISDIR"){let n=!1;try{const{stat:o,symbolicLink:a}=await Si.stat(s);n=o.isDirectory()&&!a}catch{}if(n)await ca.rmdir(s);else throw r}else throw r}}catch(s){throw this.jb(s)}}async rename(t,i,s){const r=this.L(t),n=this.L(i);if(r!==n)try{await this.fb(t,i,"move",s.overwrite),await it.rename(r,n)}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(d(2058,null,vt(r),vt(mi(n)),o.toString()))),this.jb(o)}}async copy(t,i,s){const r=this.L(t),n=this.L(i);if(r!==n)try{await this.fb(t,i,"copy",s.overwrite),await it.copy(r,n,{preserveSymlinks:!0})}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(d(2059,null,vt(r),vt(mi(n)),o.toString()))),this.jb(o)}}async fb(t,i,s,r){const n=this.L(t),o=this.L(i);let a=!1;if(!!(this.capabilities&1024)||(a=Ed(n,o,!0)),a){if(s==="copy")throw Mr(d(2060,null),pe.FileExists);if(s==="move")return}const l=await this.P(t);if(!l)throw Mr(d(2061,null),pe.FileNotFound);const u=await this.P(i);if(u){if(!r)throw Mr(d(2062,null),pe.FileExists);(l.type&zi.File)!==0&&(u.type&zi.File)!==0||await this.delete(i,{recursive:!0,useTrash:!1,atomic:!1})}}async cloneFile(t,i){return this.gb(t,i,!1)}async gb(t,i,s){const r=this.L(t),n=this.L(i),o=!!(this.capabilities&1024);if(Ed(r,n,!o))return;const a=new se;try{a.add(await this.S(t)),a.add(await this.S(i)),s&&await ca.mkdir(mi(n),{recursive:!0}),await ca.copyFile(r,n)}catch(c){if(c.code==="ENOENT"&&!s)return this.gb(t,i,!0);throw this.jb(c)}finally{a.dispose()}}w(t,i,s){return new aY(r=>t(r),r=>i(r),s)}H(t,i,s){return new gY(r=>t(r),r=>i(r),s)}jb(t){if(t instanceof rf)return t;let i=t,s;switch(t.code){case"ENOENT":s=pe.FileNotFound;break;case"EISDIR":s=pe.FileIsADirectory;break;case"ENOTDIR":s=pe.FileNotADirectory;break;case"EEXIST":s=pe.FileExists;break;case"EPERM":case"EACCES":s=pe.NoPermissions;break;case"ERR_UNC_HOST_NOT_ALLOWED":i=`${t.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`,s=pe.Unknown;break;default:s=pe.Unknown}return Mr(i,s)}async kb(t,i){let s=this.jb(i);if(t&&s.code===pe.NoPermissions)try{const{stat:r}=await Si.stat(this.L(t));r.mode&128||(s=Mr(i,pe.FileWriteLocked))}catch(r){this.a.trace(r)}return s}},l5=class{constructor(t,i){t.addFileSystemProvider(G.file,new vY(i),{isCaseSensitive:$t})}};l5=__decorate([__param(0,nh),__param(1,De)],l5);var vY=class{constructor(e){this.a=new mY(e)}async stat(e){const t=await this.a.stat(e);return{type:t.type,ctime:t.ctime,mtime:t.mtime,size:t.size,permissions:t.permissions===kn.Readonly?1:void 0}}readDirectory(e){return this.a.readdir(e)}createDirectory(e){return this.a.mkdir(e)}readFile(e){return this.a.readFile(e)}writeFile(e,t,i){return this.a.writeFile(e,t,{...i,unlock:!1,atomic:!1})}delete(e,t){return this.a.delete(e,{...t,useTrash:!1,atomic:!1})}rename(e,t,i){return this.a.rename(e,t,i)}copy(e,t,i){return this.a.copy(e,t,i)}get onDidChangeFile(){throw new Error("Method not implemented.")}watch(e,t){throw new Error("Method not implemented.")}};import w3 from"node:module";var b3=w3.createRequire(import.meta.url),wY=class extends Vm{k(){const e=this,t=b3("module"),i=t._load;t._load=function(a,c,l){return a=n(a),e.a.has(a)?e.a.get(a).load(a,x.file(KL(c.filename)),u=>i.apply(this,[u,c,l])):i.apply(this,arguments)};const s=t._resolveLookupPaths;t._resolveLookupPaths=(o,a)=>s.call(this,n(o),a);const r=t._resolveFilename;t._resolveFilename=function(a,c,l,u){return a==="vsda"&&Array.isArray(u?.paths)&&u.paths.length===0&&(u.paths=t._nodeModulePaths(import.meta.dirname)),r.call(this,a,c,l,u)};const n=o=>{for(const a of e.b){const c=a(o);if(c){o=c;break}}return o}}},bY=class tl extends Vm{constructor(){super(...arguments),this.o=new se}static l(t){return`data:text/javascript;base64,${Buffer.from(t).toString("base64")}`}static{this.m=`
	let lookup;
	export const initialize = async (context) => {
		let requestIds = 0;
		const { port } = context;
		const pendingRequests = new Map();
		port.onmessage = (event) => {
			const { id, url } = event.data;
			pendingRequests.get(id)?.(url);
		};
		lookup = url => {
			// debugger;
			const myId = requestIds++;
			return new Promise((resolve) => {
				pendingRequests.set(myId, resolve);
				port.postMessage({ id: myId, url, });
			});
		};
	};
	export const resolve = async (specifier, context, nextResolve) => {
		if (specifier !== 'vscode' || !context.parentURL) {
			return nextResolve(specifier, context);
		}
		const otherUrl = await lookup(context.parentURL);
		return {
			url: otherUrl,
			shortCircuit: true,
		};
	};`}static{this.n="_VSCODE_IMPORT_VSCODE_API"}dispose(){this.o.dispose()}k(){const t=new dT,i=new Map;Object.defineProperty(globalThis,tl.n,{enumerable:!1,configurable:!1,writable:!1,value:a=>t.getKey(a)});const{port1:s,port2:r}=new MessageChannel;let n;const o=s;o.onmessage=a=>{n||(n=this.a.get("vscode"),D1(n));const{id:c,url:l}=a.data,u=x.parse(l),h=n.load("_not_used",u,()=>{throw new Error("CANNOT LOAD MODULE from here.")});let f=t.get(h);f||(f=ut(),t.set(h,f));let p=i.get(f);if(!p){const g=`const _vscodeInstance = globalThis.${tl.n}('${f}');

${Object.keys(h).map(v=>`export const ${v} = _vscodeInstance['${v}'];`).join(`
`)}`;p=tl.l(g),i.set(f,p)}s.postMessage({id:c,url:p})},w3.register(tl.l(tl.m),{parentURL:import.meta.url,data:{port:r},transferList:[r]}),this.o.add(ie(()=>{s.close(),r.close()}))}},yY=class extends Cy{constructor(){super(...arguments),this.extensionRuntime=kp.Node}async wb(){this.h.createInstance(a5);const e=this.h.invokeFunction(nJ);if(this.h.createInstance(r5),this.f.remote.isRemote&&this.f.remote.authority){const i=this.h.createInstance(n5);process.env.VSCODE_IPC_HOOK_CLI=i.ipcHandlePath}this.h.createInstance(l5),await this.h.createInstance(wY,e,{mine:this.J,all:this.L}).install(),await this.q.add(this.h.createInstance(bY,e,{mine:this.J,all:this.L})).install(),It("code/extHost/didInitAPI");const t=await this.m.getConfigProvider();await NJ(this.j,t,this,this.s,this.z,this.f,this.q),It("code/extHost/didInitProxyResolver")}xb(e){return e.main}async Cb(e,t,i,s){if(t.scheme!==G.file)throw new Error(`Cannot load URI: '${t}', must be of file-scheme`);let r=null;i.codeLoadingStart(),this.s.trace(`ExtensionService#loadModule [${s}] -> ${t.toString(!0)}`),this.s.flush();const n=e?.identifier.value;e&&await this.w.initializeLocalizedMessages(e);try{n&&It(`code/extHost/willLoadExtensionCode/${n}`),s==="esm"?r=await import(t.toString(!0)):r=b3(t.fsPath)}finally{n&&It(`code/extHost/didLoadExtensionCode/${n}`),i.codeLoadingStop()}return r}async yb(e,t,i){return this.Cb(e,t,i,"cjs")}async zb(e,t,i){return this.Cb(e,t,i,"esm")}async $setRemoteEnvironment(e){if(this.f.remote.isRemote)for(const t in e){const i=e[t];i===null?delete process.env[t]:process.env[t]=i}}};import*as Uh from"fs";import{exec as y3}from"child_process";var xY=(e,t,i)=>{const s=new Uint8Array(16);for(let o=0;o<16;o++)s[o]=Math.round(Math.random()*256);const r=kl(_.wrap(s));return[`GET ws://localhost${e}?${t}&skipWebSocketFrames=true HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${r}`].join(`\r
`)+`\r
\r
`},x3=_.fromString(`\r
\r
`);async function EY(e,t,i,s,r){e.write(_.fromString(xY(t,i,s)));const n=new se;try{return await new Promise((o,a)=>{let c;n.add(e.onData(l=>{c?c=_.concat([c,l],c.byteLength+l.byteLength):c=l;const u=c.indexOf(x3);if(u===-1)return;o(e),e.pauseData();const h=c.slice(u+x3.byteLength);h.byteLength&&r.onData.fire(h)})),n.add(e.onClose(l=>a(l??new Error("socket closed")))),n.add(e.onEnd(()=>a(new Error("socket ended"))))})}catch(o){throw e.dispose(),o}finally{n.dispose()}}var kY=class extends X{constructor(e,t){super(),this.g=e,this.a=this.B(new pl),this.onData=(...i)=>(this.a.isPaused&&queueMicrotask(()=>this.a.resume()),this.a.event(...i)),this.b=this.B(new D),this.onDidDispose=this.b.event,this.f=!1,this.B(t.onData),this.B(t.onData.event(i=>this.a.fire(i))),this.onClose=this.B(t.onClose).event,this.onEnd=this.B(t.onEnd).event}pauseData(){this.a.pause()}drain(){return Promise.resolve()}end(){this.f=!0,this.h()}traceSocketEvent(e,t){Fd.traceSocketEvent(this,this.g,e,t)}dispose(){this.f||this.h(),this.b.fire(),super.dispose()}},SY="signService",jh=q(SY);import*as CY from"net";import*as $Y from"os";import*as IY from"net";var E3={1:!0,7:!0,9:!0,11:!0,13:!0,15:!0,17:!0,19:!0,20:!0,21:!0,22:!0,23:!0,25:!0,37:!0,42:!0,43:!0,53:!0,69:!0,77:!0,79:!0,87:!0,95:!0,101:!0,102:!0,103:!0,104:!0,109:!0,110:!0,111:!0,113:!0,115:!0,117:!0,119:!0,123:!0,135:!0,137:!0,139:!0,143:!0,161:!0,179:!0,389:!0,427:!0,465:!0,512:!0,513:!0,514:!0,515:!0,526:!0,530:!0,531:!0,532:!0,540:!0,548:!0,554:!0,556:!0,563:!0,587:!0,601:!0,636:!0,989:!0,990:!0,993:!0,995:!0,1719:!0,1720:!0,1723:!0,2049:!0,3659:!0,4045:!0,5060:!0,5061:!0,6e3:!0,6566:!0,6665:!0,6666:!0,6667:!0,6668:!0,6669:!0,6697:!0,10080:!0};function PY(e,t,i,s="127.0.0.1"){let r=!1,n,o=1;const a=IY.createServer({pauseOnConnect:!0});function c(l,u){r||(r=!0,a.removeAllListeners(),a.close(),n&&clearTimeout(n),u(l))}return new Promise(l=>{n=setTimeout(()=>{c(0,l)},i),a.on("listening",()=>{c(e,l)}),a.on("error",u=>{u&&(u.code==="EADDRINUSE"||u.code==="EACCES")&&o<t?(e++,o++,a.listen(e,s)):c(0,l)}),a.on("close",()=>{c(0,l)}),a.listen(e,s)})}var DY=30*1e3,k3;(function(e){e[e.Management=1]="Management",e[e.ExtensionHost=2]="ExtensionHost",e[e.Tunnel=3]="Tunnel"})(k3||(k3={}));function u5(e){switch(e){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel"}}function S3(e){const t=new Ke;return setTimeout(()=>t.cancel(),e),t.token}function AY(e,t){if(e.isCancellationRequested||t.isCancellationRequested)return Ye.Cancelled;const i=new Ke;return e.onCancellationRequested(()=>i.cancel()),t.onCancellationRequested(()=>i.cancel()),i.token}var h5=class{get didTimeout(){return this.c==="timedout"}constructor(e){this.c="pending",this.d=new se,{promise:this.promise,resolve:this.f,reject:this.g}=EE(),e.isCancellationRequested?this.h():this.d.add(e.onCancellationRequested(()=>this.h()))}registerDisposable(e){this.c==="pending"?this.d.add(e):e.dispose()}h(){this.c==="pending"&&(this.d.dispose(),this.c="timedout",this.g(this.i()))}i(){const e=new Error("Time limit reached");return e.code="ETIMEDOUT",e.syscall="connect",e}resolve(e){this.c==="pending"&&(this.d.dispose(),this.c="resolved",this.f(e))}reject(e){this.c==="pending"&&(this.d.dispose(),this.c="rejected",this.g(e))}};function TY(e,t){const i=new h5(t);return i.registerDisposable(e.onControlMessage(s=>{const r=JSON.parse(s.toString()),n=HY(r);n?i.reject(n):i.resolve(r)})),i.promise}function RY(e,t,i,s,r,n,o,a){const c=new h5(a),l=Fi.create(!1);return e.info(`Creating a socket (${o})...`),It(`code/willCreateSocket/${n}`),t.connect(i,s,r,o).then(u=>{c.didTimeout?(It(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) finished after ${l.elapsed()} ms, but this is too late and has timed out already.`),u?.dispose()):(It(`code/didCreateSocketOK/${n}`),e.info(`Creating a socket (${o}) was successful after ${l.elapsed()} ms.`),c.resolve(u))},u=>{It(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) returned an error after ${l.elapsed()} ms.`),e.error(u),c.reject(u)}),c.promise}function d5(e,t){const i=new h5(t);return e.then(s=>{i.didTimeout||i.resolve(s)},s=>{i.didTimeout||i.reject(s)}),i.promise}async function LY(e,t,i,s){const r=D3(e,t);e.logService.trace(`${r} 1/6. invoking socketFactory.connect().`);let n;try{n=await RY(e.logService,e.remoteSocketFactoryService,e.connectTo,pE.getServerRootPath(),`reconnectionToken=${e.reconnectionToken}&reconnection=${e.reconnectionProtocol?"true":"false"}`,u5(t),`renderer-${u5(t)}-${e.reconnectionToken}`,s)}catch(u){throw e.logService.error(`${r} socketFactory.connect() failed or timed out. Error:`),e.logService.error(u),u}e.logService.trace(`${r} 2/6. socketFactory.connect() was successful.`);let o,a;e.reconnectionProtocol?(e.reconnectionProtocol.beginAcceptReconnection(n,null),o=e.reconnectionProtocol,a=!1):(o=new lv({socket:n}),a=!0),e.logService.trace(`${r} 3/6. sending AuthRequest control message.`);const c=await d5(e.signService.createNewMessage(ut()),s),l={type:"auth",auth:e.connectionToken||"00000000000000000000",data:c.data};o.sendControl(_.fromString(JSON.stringify(l)));try{const u=await TY(o,AY(s,S3(1e4)));if(u.type!=="sign"||typeof u.data!="string"){const g=new Error("Unexpected handshake message");throw g.code="VSCODE_CONNECTION_ERROR",g}if(e.logService.trace(`${r} 4/6. received SignRequest control message.`),!await d5(e.signService.validate(c,u.signedData),s)){const g=new Error("Refused to connect to unsupported server");throw g.code="VSCODE_CONNECTION_ERROR",g}const f=await d5(e.signService.sign(u.data),s),p={type:"connectionType",commit:e.commit,signedData:f,desiredConnectionType:t};return i&&(p.args=i),e.logService.trace(`${r} 5/6. sending ConnectionTypeRequest control message.`),o.sendControl(_.fromString(JSON.stringify(p))),{protocol:o,ownsProtocol:a}}catch(u){throw u&&u.code==="ETIMEDOUT"&&(e.logService.error(`${r} the handshake timed out. Error:`),e.logService.error(u)),u&&u.code==="VSCODE_CONNECTION_ERROR"&&(e.logService.error(`${r} received error control message when negotiating connection. Error:`),e.logService.error(u)),a&&P3(o),u}}async function NY(e,t,i){const s=Date.now(),r=D3(e,3),{protocol:n}=await LY(e,3,t,i);return e.logService.trace(`${r} 6/6. handshake finished, connection is up and running after ${VY(s)}!`),n}async function C3(e,t,i){const{connectTo:s,connectionToken:r}=await e.addressProvider.getAddress();return{commit:e.commit,quality:e.quality,connectTo:s,connectionToken:r,reconnectionToken:t,reconnectionProtocol:i,remoteSocketFactoryService:e.remoteSocketFactoryService,signService:e.signService,logService:e.logService}}async function MY(e,t,i){const s=await C3(e,ut(),null);return await NY(s,{host:t,port:i},Ye.None)}function OY(e){return Ir(t=>new Promise((i,s)=>{const r=setTimeout(i,e*1e3);t.onCancellationRequested(()=>{clearTimeout(r),i()})}))}var $3;(function(e){e[e.ConnectionLost=0]="ConnectionLost",e[e.ReconnectionWait=1]="ReconnectionWait",e[e.ReconnectionRunning=2]="ReconnectionRunning",e[e.ReconnectionPermanentFailure=3]="ReconnectionPermanentFailure",e[e.ConnectionGain=4]="ConnectionGain"})($3||($3={}));var FY=class{constructor(e,t){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.type=0}},UY=class{constructor(e,t,i,s){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.durationSeconds=i,this.c=s,this.type=1}skipWait(){this.c.cancel()}},jY=class{constructor(e,t,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=i,this.type=2}},I3=class{constructor(e,t,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=i,this.type=4}},BY=class{constructor(e,t,i,s){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=i,this.handled=s,this.type=3}},moe=class an extends X{static triggerPermanentFailure(t,i,s){this._permanentFailure=!0,this.f=t,this.g=i,this.h=s,this.j.forEach(r=>r.D(this.f,this.g,this.h))}static debugTriggerReconnection(){this.j.forEach(t=>t.y())}static debugPauseSocketWriting(){this.j.forEach(t=>t.F())}static{this._permanentFailure=!1}static{this.f=0}static{this.g=0}static{this.h=!1}static{this.j=[]}get n(){return this.c||an._permanentFailure}constructor(t,i,s,r,n){super(),this.t=t,this.u=i,this.reconnectionToken=s,this.protocol=r,this.w=n,this.m=this.B(new D),this.onDidStateChange=this.m.event,this.c=!1,this.r=!1,this.s=!1,this.m.fire(new I3(this.reconnectionToken,0,0)),this.B(r.onSocketClose(o=>{const a=Ym(this.t,this.reconnectionToken,!0);o?o.type===0?(this.u.logService.info(`${a} received socket close event (hadError: ${o.hadError}).`),o.error&&this.u.logService.error(o.error)):(this.u.logService.info(`${a} received socket close event (wasClean: ${o.wasClean}, code: ${o.code}, reason: ${o.reason}).`),o.event&&this.u.logService.error(o.event)):this.u.logService.info(`${a} received socket close event.`),this.y()})),this.B(r.onSocketTimeout(o=>{const a=Ym(this.t,this.reconnectionToken,!0);this.u.logService.info(`${a} received socket timeout event (unacknowledgedMsgCount: ${o.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${o.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${o.timeSinceLastReceivedSomeData}).`),this.y()})),an.j.push(this),this.B(ie(()=>{const o=an.j.indexOf(this);o>=0&&an.j.splice(o,1)})),this.n&&this.D(an.f,an.g,an.h)}dispose(){super.dispose(),this.s=!0}async y(){if(!this.r)try{this.r=!0,await this.z()}finally{this.r=!1}}async z(){if(this.n||this.s)return;const t=Ym(this.t,this.reconnectionToken,!0);this.u.logService.info(`${t} starting reconnecting loop. You can get more information with the trace log level.`),this.m.fire(new FY(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData()));const i=[0,5,5,10,10,10,10,10,30];let s=-1;do{s++;const r=s<i.length?i[s]:i[i.length-1];try{if(r>0){const o=OY(r);this.m.fire(new UY(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),r,o)),this.u.logService.info(`${t} waiting for ${r} seconds before reconnecting...`);try{await o}catch{}}if(this.n){this.u.logService.error(`${t} permanent failure occurred while running the reconnecting loop.`);break}this.m.fire(new jY(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s+1)),this.u.logService.info(`${t} resolving connection...`);const n=await C3(this.u,this.reconnectionToken,this.protocol);this.u.logService.info(`${t} connecting to ${n.connectTo}...`),await this.G(n,S3(DY)),this.u.logService.info(`${t} reconnected!`),this.m.fire(new I3(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s+1));break}catch(n){if(n.code==="VSCODE_CONNECTION_ERROR"){this.u.logService.error(`${t} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),s+1,!1);break}if(s>360){this.u.logService.error(`${t} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),s+1,!1);break}if($0.isTemporarilyNotAvailable(n)){this.u.logService.info(`${t} A temporarily not available error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if((n.code==="ETIMEDOUT"||n.code==="ENETUNREACH"||n.code==="ECONNREFUSED"||n.code==="ECONNRESET")&&n.syscall==="connect"){this.u.logService.info(`${t} A network error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(Ei(n)){this.u.logService.info(`${t} A promise cancelation error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(n instanceof $0){this.u.logService.error(`${t} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),s+1,$0.isHandled(n));break}this.u.logService.error(`${t} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),s+1,!1);break}}while(!this.n&&!this.s)}C(t,i,s){this.w?an.triggerPermanentFailure(t,i,s):this.D(t,i,s)}D(t,i,s){this.m.fire(new BY(this.reconnectionToken,t,i,s)),P3(this.protocol)}F(){this.protocol.pauseSocketWriting()}};function P3(e){try{e.acceptDisconnect();const t=e.getSocket();e.dispose(),t.dispose()}catch(t){lt(t)}}function HY(e){if(e&&e.type==="error"){const t=new Error(`Connection error: ${e.reason}`);return t.code="VSCODE_CONNECTION_ERROR",t}return null}function zY(e,t){for(;e.length<t;)e+=" ";return e}function WY(e,t){return`[remote-connection][${zY(u5(e),13)}][${t.substr(0,5)}\u2026]`}function Ym(e,t,i){return`${WY(e,t)}[${i?"reconnect":"initial"}]`}function D3(e,t){return`${Ym(t,e.reconnectionToken,!!e.reconnectionProtocol)}[${e.connectTo}]`}function VY(e){return`${Date.now()-e} ms`}var f5=q("remoteSocketFactoryService");async function _Y(e,t,i,s,r){let n;for(let o=3;o&&(n?.dispose(),n=await new A3(e,t,i,s,r).waitForReady(),!(r&&E3[r]||!E3[n.tunnelLocalPort]));o--);return n}var A3=class extends X{constructor(e,t,i,s,r){super(),this.m=t,this.n=r,this.privacy=fr.Private,this.j=new Map,this.a=e,this.b=CY.createServer(),this.c=new ds,this.f=()=>this.c.open(),this.b.on("listening",this.f),this.g=n=>this.r(n),this.b.on("connection",this.g),this.h=()=>{},this.b.on("error",this.h),this.tunnelRemotePort=s,this.tunnelRemoteHost=i}async dispose(){super.dispose(),this.b.removeListener("listening",this.f),this.b.removeListener("connection",this.g),this.b.removeListener("error",this.h),this.b.close(),Array.from(this.j.values()).forEach(t=>{t()})}async waitForReady(){const e=this.n??this.tunnelRemotePort,t=Gr(this.m)?"0.0.0.0":"127.0.0.1";let i=await PY(e,2,1e3,t),s=null;return this.b.listen(i,this.m),await this.c.wait(),s=this.b.address(),s||(i=0,this.b.listen(i,this.m),await this.c.wait(),s=this.b.address()),this.tunnelLocalPort=s.port,this.localAddress=`${this.tunnelRemoteHost==="127.0.0.1"?"127.0.0.1":"localhost"}:${s.port}`,this}async r(e){e.pause();const t=ea(this.tunnelRemoteHost)||Gr(this.tunnelRemoteHost)?"localhost":this.tunnelRemoteHost,i=await MY(this.a,t,this.tunnelRemotePort),s=i.getSocket(),r=i.readEntireBuffer();i.dispose(),r.byteLength>0&&e.write(r.buffer),e.on("end",()=>{e.localAddress&&this.j.delete(e.localAddress),s.end()}),e.on("close",()=>s.end()),e.on("error",()=>{e.localAddress&&this.j.delete(e.localAddress),s instanceof $l?s.socket.destroy():s.end()}),s instanceof $l?this.t(e,s):this.s(e,s),e.localAddress&&this.j.set(e.localAddress,()=>{e.end(),s.end()})}s(e,t){t.onClose(()=>e.destroy()),t.onEnd(()=>e.end()),t.onData(i=>e.write(i.buffer)),e.on("data",i=>t.write(_.wrap(i))),e.resume()}t(e,t){const i=t.socket;i.on("end",()=>e.end()),i.on("close",()=>e.end()),i.on("error",()=>{e.destroy()}),i.pipe(e),e.pipe(i)}},p5=class extends Jb{constructor(t,i,s,r,n){super(i,n),this.H=t,this.I=s,this.J=r}isPortPrivileged(t){return GH(t,this.t,ro,$Y.release())}F(t,i,s,r,n,o,a,c){const l=this.D(i,s);if(l)return++l.refcount,l.value;if(_H(t))return this.G(t,i,s,n,o,a,c);{this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel without provider ${i}:${s} on local port ${n}.`);const u={commit:this.J.commit,quality:this.J.quality,addressProvider:t,remoteSocketFactoryService:this.H,signService:this.I,logService:this.r,ipcLogger:null},h=_Y(u,r,i,s,n);return this.r.trace("ForwardedPorts: (TunnelService) Tunnel created without provider."),this.z(i,s,h),h}}};p5=__decorate([__param(0,f5),__param(1,De),__param(2,jh),__param(3,gf),__param(4,Fr)],p5);var g5=class extends p5{constructor(t,i,s,r,n){super(t,i,s,r,n)}};g5=__decorate([__param(0,f5),__param(1,De),__param(2,jh),__param(3,gf),__param(4,Fr)],g5);var T3=class extends X{constructor(t,i,s,r,n){super(),this.b=t,this.c=i,this.f=s,this.g=r,this.h=n,this.a=new Map}async openTunnel(t,i,s,r,n,o,a,c,l){if(this.c.trace(`ForwardedPorts: (SharedTunnelService) openTunnel request for ${s}:${r} on local port ${o}.`),!this.a.has(t)){const u=new g5(this.b,this.c,this.g,this.f,this.h);this.B(u),this.a.set(t,u),u.onTunnelClosed(async()=>{(await u.tunnels).length===0&&(u.dispose(),this.a.delete(t))})}return this.a.get(t).openTunnel(i,s,r,n,o,a,c,l)}};T3=__decorate([__param(0,f5),__param(1,De),__param(2,gf),__param(3,jh),__param(4,Fr)],T3);var qY=q("dialogService"),R3;(function(e){e[e.Confirmation=1]="Confirmation",e[e.Prompt=2]="Prompt",e[e.Input=3]="Input"})(R3||(R3={}));var yoe=q("fileDialogService"),L3;(function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"})(L3||(L3={}));var GY=10*1e3,Zm="remote.tunnels.toRestore",m5="remote.tunnels.toRestoreExpiration",JY=1e3*60*60*24*14,N3="onTunnel",xoe=new $("forwardedPortsViewEnabled",!1,d(14345,null)),YY=new $("forwardedPortsViewOnlyEnabled",!1,d(14346,null));function M3(e){const t=e.match(/^([a-zA-Z0-9_-]+(?:\.[a-zA-Z0-9_-]+)*:)?([0-9]+)$/);if(t)return{host:t[1]?.substring(0,t[1].length-1)||"localhost",port:Number(t[2])}}var Bh;(function(e){e.Other="Other",e.User="User",e.AutoForwardEnd="AutoForwardEnd"})(Bh||(Bh={}));var sn;(function(e){e[e.User=0]="User",e[e.Auto=1]="Auto",e[e.Extension=2]="Extension"})(sn||(sn={}));var v5={source:sn.User,description:d(14347,null)},Eoe={source:sn.Auto,description:d(14348,null)};function O3(e,t,i){const s=e.get(Ji(t,i));if(s)return s;if(ea(t))for(const r of oh){const n=Ji(r,i);if(e.has(n))return e.get(n)}else if(Gr(t))for(const r of Mg){const n=Ji(r,i);if(e.has(n))return e.get(n)}}function Li(e,t,i){const s=O3(e,t,i);if(s)return s;const r=Gr(t)?"localhost":ea(t)?"0.0.0.0":void 0;if(r)return O3(e,r,i)}function Ji(e,t){return e+":"+t}var Jn;(function(e){e.Notify="notify",e.OpenBrowser="openBrowser",e.OpenBrowserOnce="openBrowserOnce",e.OpenPreview="openPreview",e.Silent="silent",e.Ignore="ignore"})(Jn||(Jn={}));function ZY(e){return e&&"host"in e&&typeof e.host=="string"&&"port"in e&&typeof e.port=="number"&&(!("detail"in e)||typeof e.detail=="string")&&(!("pid"in e)||typeof e.pid=="string")}var F3=class qs extends X{static{this.c="remote.portsAttributes"}static{this.f="remote.otherPortsAttributes"}static{this.g=/^(\d+)\-(\d+)$/}static{this.h=/^([a-z0-9\-]+):(\d{1,5})$/}constructor(t){super(),this.r=t,this.j=[],this.n=new D,this.onDidChangeAttributes=this.n.event,this.B(t.onDidChangeConfiguration(i=>{(i.affectsConfiguration(qs.c)||i.affectsConfiguration(qs.f))&&this.s()})),this.s()}s(){this.j=this.y(),this.n.fire()}getAttributes(t,i,s){let r=this.w(t,i,s,this.j,0);const n={label:void 0,onAutoForward:void 0,elevateIfNeeded:void 0,requireLocalPort:void 0,protocol:void 0};for(;r>=0;){const o=this.j[r];o.key===t?(n.onAutoForward=o.onAutoForward??n.onAutoForward,n.elevateIfNeeded=o.elevateIfNeeded!==void 0?o.elevateIfNeeded:n.elevateIfNeeded,n.label=o.label??n.label,n.requireLocalPort=o.requireLocalPort,n.protocol=o.protocol):(n.onAutoForward=n.onAutoForward??o.onAutoForward,n.elevateIfNeeded=n.elevateIfNeeded!==void 0?n.elevateIfNeeded:o.elevateIfNeeded,n.label=n.label??o.label,n.requireLocalPort=n.requireLocalPort!==void 0?n.requireLocalPort:void 0,n.protocol=n.protocol??o.protocol),r=this.w(t,i,s,this.j,r+1)}return n.onAutoForward!==void 0||n.elevateIfNeeded!==void 0||n.label!==void 0||n.requireLocalPort!==void 0||n.protocol!==void 0?n:this.C()}t(t){return t.start!==void 0&&t.end!==void 0}u(t){return t.host!==void 0&&t.port!==void 0&&Ue(t.host)&&us(t.port)}w(t,i,s,r,n){if(n>=r.length)return-1;const o=!ea(i)&&!Gr(i),c=r.slice(n).findIndex(l=>us(l.key)?o?!1:l.key===t:this.t(l.key)?o?!1:t>=l.key.start&&t<=l.key.end:this.u(l.key)?t===l.key.port&&i===l.key.host:s?l.key.test(s):!1);return c>=0?c+n:-1}y(){const t=this.r.getValue(qs.c);if(!t||!St(t))return[];const i=[];for(const r in t){if(r===void 0)continue;const n=t[r];let o;if(Number(r))o=Number(r);else if(Ue(r))if(qs.g.test(r)){const a=r.match(qs.g);o={start:Number(a[1]),end:Number(a[2])}}else if(qs.h.test(r)){const a=r.match(qs.h);o={host:a[1],port:Number(a[2])}}else{let a;try{a=RegExp(r)}catch{}a&&(o=a)}o&&i.push({key:o,elevateIfNeeded:n.elevateIfNeeded,onAutoForward:n.onAutoForward,label:n.label,requireLocalPort:n.requireLocalPort,protocol:n.protocol})}const s=this.r.getValue(qs.f);return s&&(this.m={elevateIfNeeded:s.elevateIfNeeded,label:s.label,onAutoForward:s.onAutoForward,requireLocalPort:s.requireLocalPort,protocol:s.protocol}),this.z(i)}z(t){function i(s,r){return us(s.key)?s.key:r.t(s.key)?s.key.start:r.u(s.key)?s.key.port:Number.MAX_VALUE}return t.sort((s,r)=>i(s,this)-i(r,this))}C(){return this.m}static providedActionToAction(t){switch(t){case Vn.Notify:return Jn.Notify;case Vn.OpenBrowser:return Jn.OpenBrowser;case Vn.OpenBrowserOnce:return Jn.OpenBrowserOnce;case Vn.OpenPreview:return Jn.OpenPreview;case Vn.Silent:return Jn.Silent;case Vn.Ignore:return Jn.Ignore;default:return}}async addAttributes(t,i,s){const n=this.r.inspect(qs.c).userRemoteValue;let o;!n||!St(n)?o={}:o=Qe(n),o[`${t}`]||(o[`${t}`]={});for(const a in i)o[`${t}`][a]=i[a];return this.r.updateValue(qs.c,o,s)}},w5=class extends X{constructor(t,i,s,r,n,o,a,c,l,u){super(),this.H=t,this.I=i,this.J=s,this.L=r,this.M=n,this.N=o,this.O=a,this.P=c,this.Q=l,this.R=u,this.c=new Map,this.g=new D,this.onForwardPort=this.g.event,this.h=new D,this.onClosePort=this.h.event,this.j=new D,this.onPortName=this.j.event,this.n=new D,this.onCandidatesChanged=this.n.event,this.t=new D,this.onEnvironmentTunnelsSet=this.t.event,this.u=!1,this.w=void 0,this.z=!1,this.C=new D,this.D=new Map,this.F=new Map,this.G=[],this.U=!1,this.eb=new Date,this.configPortsAttributes=new F3(s),this.s=this.bb(),this.B(this.configPortsAttributes.onDidChangeAttributes(this.kb,this)),this.forwarded=new Map,this.f=new Map,this.H.tunnels.then(async h=>{const f=await this.getAttributes(h.map(p=>({port:p.tunnelRemotePort,host:p.tunnelRemoteHost})));for(const p of h)if(p.localAddress){const g=Ji(p.tunnelRemoteHost,p.tunnelRemotePort),v=Li(this.m??new Map,p.tunnelRemoteHost,p.tunnelRemotePort);this.forwarded.set(g,{remotePort:p.tunnelRemotePort,remoteHost:p.tunnelRemoteHost,localAddress:p.localAddress,protocol:f?.get(p.tunnelRemotePort)?.protocol??vs.Http,localUri:await this.Y(p.localAddress,f?.get(p.tunnelRemotePort)),localPort:p.tunnelLocalPort,name:f?.get(p.tunnelRemotePort)?.label,runningProcess:v?.detail,hasRunningProcess:!!v,pid:v?.pid,privacy:p.privacy,source:v5}),this.f.set(g,p)}}),this.detected=new Map,this.B(this.H.onTunnelOpened(async h=>{const f=Ji(h.tunnelRemoteHost,h.tunnelRemotePort);if(!Li(this.forwarded,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Li(this.detected,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Li(this.c,h.tunnelRemoteHost,h.tunnelRemotePort)&&h.localAddress){const p=Li(this.m??new Map,h.tunnelRemoteHost,h.tunnelRemotePort),g=(await this.getAttributes([{port:h.tunnelRemotePort,host:h.tunnelRemoteHost}]))?.get(h.tunnelRemotePort);this.forwarded.set(f,{remoteHost:h.tunnelRemoteHost,remotePort:h.tunnelRemotePort,localAddress:h.localAddress,protocol:g?.protocol??vs.Http,localUri:await this.Y(h.localAddress,g),localPort:h.tunnelLocalPort,name:g?.label,closeable:!0,runningProcess:p?.detail,hasRunningProcess:!!p,pid:p?.pid,privacy:h.privacy,source:v5})}await this.db(),this.W(!0),this.f.set(f,h),this.g.fire(this.forwarded.get(f))})),this.B(this.H.onTunnelClosed(h=>this.X(h,Bh.Other))),this.W(!1)}S(){return this.Q.extensions.find(t=>t.activationEvents?.includes(N3))?(this.R.createKey(YY.key,!0),!0):!1}W(t){if(this.U||(t&&(this.U=!0),this.L.remoteAuthority!==void 0&&!t)||this.S())return;const s=this.B(this.Q.onDidRegisterExtensions(()=>{this.S()&&s.dispose()}))}async X(t,i){const s=Ji(t.host,t.port);this.forwarded.has(s)&&(this.forwarded.delete(s),await this.db(),this.h.fire(t))}Y(t,i){if(t.startsWith("http"))return x.parse(t);const s=i?.protocol??"http";return x.parse(`${s}://${t}`)}async Z(t){const i=this.N.getWorkspace(),s=i.configuration?Rr(i.configuration.path):i.folders.length>0?Rr(i.folders[0].uri.path):void 0;if(s===void 0){this.O.debug("Could not get workspace hash for forwarded ports storage key.");return}return`${t}.${this.L.remoteAuthority}.${s}`}async $(){return this.Z(Zm)}async ab(){return this.Z(m5)}async bb(){const t=this.I.get(Zm,1);if(t)return this.I.remove(Zm,1),await this.db(),t;const i=await this.$();if(i)return this.I.get(i,0)}async restoreForwarded(){if(this.cb(),this.J.getValue("remote.restoreForwardedPorts")){const t=await this.s;if(t&&t!==this.y){const i=JSON.parse(t)??[];this.O.trace(`ForwardedPorts: (TunnelModel) restoring ports ${i.map(s=>s.remotePort).join(", ")}`);for(const s of i){const r=Li(this.detected,s.remoteHost,s.remotePort);s.source.source!==sn.Extension&&!r||s.source.source===sn.Extension&&r?await this.gb({remote:{host:s.remoteHost,port:s.remotePort},local:s.localPort,name:s.name,elevateIfNeeded:!0,source:s.source}):s.source.source===sn.Extension&&!r&&this.D.set(Ji(s.remoteHost,s.remotePort),s)}}}if(this.z=!0,this.C.fire(),!this.w){const t=await this.$();this.w=this.B(new se),this.w.add(this.I.onDidChangeValue(0,void 0,this.w)(async i=>{i.key===t&&(this.s=Promise.resolve(this.I.get(t,0)),await this.restoreForwarded())}))}}cb(){const t=this.I.keys(0,0).filter(i=>i.startsWith(m5));for(const i of t){const s=this.I.getNumber(i,0);if(s&&s<Date.now()){this.s=Promise.resolve(void 0);const r=i.replace(m5,Zm);this.I.remove(i,0),this.I.remove(r,0)}}}async db(){if(this.J.getValue("remote.restoreForwardedPorts")){const t=Array.from(this.forwarded.values()),i=t.map(o=>({remoteHost:o.remoteHost,remotePort:o.remotePort,localPort:o.localPort,name:o.name,localAddress:o.localAddress,localUri:o.localUri,protocol:o.protocol,source:o.source}));let s;t.length>0&&(s=JSON.stringify(i));const r=await this.$(),n=await this.ab();!s&&r&&n?(this.I.remove(r,0),this.I.remove(n,0)):s!==this.y&&r&&n&&(this.I.store(r,s,0,0),this.I.store(n,Date.now()+JY,0,0)),this.y=s}}async fb(t,i,s){if(!t.tunnelLocalPort||!s?.requireLocalPort||t.tunnelLocalPort===i)return;const r=new Date;if(this.eb.getTime()+GY>r.getTime())return;this.eb=r;const n=d(14349,null,i,t.tunnelRemotePort,t.tunnelLocalPort);return this.P.info(n)}async forward(t,i){return!this.z&&this.L.remoteAuthority&&await Ve.toPromise(this.C.event),this.gb(t,i)}async gb(t,i){await this.Q.activateByEvent(N3);const s=Li(this.forwarded,t.remote.host,t.remote.port);i=i??(i!==null?(await this.getAttributes([t.remote]))?.get(t.remote.port):void 0);const r=t.local!==void 0?t.local:t.remote.port;let n;if(s)return this.ib(s,t,i);{const o=this.L.remoteAuthority,a=o?{getAddress:async()=>(await this.M.resolveAuthority(o)).authority}:void 0,c=Ji(t.remote.host,t.remote.port);this.c.set(c,!0),t=this.hb(c,t);const l=await this.H.openTunnel(a,t.remote.host,t.remote.port,void 0,r,t.elevateIfNeeded?t.elevateIfNeeded:i?.elevateIfNeeded,t.privacy,i?.protocol);if(typeof l=="string")n=l;else if(l&&l.localAddress){const u=Li(this.m??new Map,t.remote.host,t.remote.port),h=l.protocol?l.protocol===vs.Https?vs.Https:vs.Http:i?.protocol??vs.Http,f={remoteHost:l.tunnelRemoteHost,remotePort:l.tunnelRemotePort,localPort:l.tunnelLocalPort,name:i?.label??t.name,closeable:!0,localAddress:l.localAddress,protocol:h,localUri:await this.Y(l.localAddress,i),runningProcess:u?.detail,hasRunningProcess:!!u,pid:u?.pid,source:t.source??v5,privacy:l.privacy};return this.forwarded.set(c,f),this.f.set(c,l),this.c.delete(c),await this.db(),await this.fb(l,r,i),this.g.fire(f),l}this.c.delete(c)}return n}hb(t,i){const s=this.D.has(t)?this.D:this.F.has(t)?this.F:void 0;if(s){const r=s.get(t);s.delete(t),r&&(i.name=r.name??i.name,i.local=("local"in r?r.local:"localPort"in r?r.localPort:void 0)??i.local,i.privacy=i.privacy)}return i}async ib(t,i,s){const r=s?.label??i.name;let n;(function(a){a[a.None=0]="None",a[a.Fire=1]="Fire",a[a.Reopen=2]="Reopen"})(n||(n={}));let o=n.None;switch(r!==t.name&&(t.name=r,o=n.Fire),(s?.protocol||t.protocol!==vs.Http)&&s?.protocol!==t.protocol&&(i.source=t.source,o=n.Reopen),i.privacy&&t.privacy!==i.privacy&&(o=n.Reopen),o){case n.Fire:{this.g.fire();break}case n.Reopen:await this.close(t.remoteHost,t.remotePort,Bh.User),await this.gb(i,s)}return Li(this.f,i.remote.host,i.remote.port)}async name(t,i,s){const r=Li(this.forwarded,t,i),n=Ji(t,i);if(r){r.name=s,await this.db(),this.j.fire({host:t,port:i});return}else this.detected.has(n)&&(this.detected.get(n).name=s,this.j.fire({host:t,port:i}))}async close(t,i,s){const r=Ji(t,i),n=this.forwarded.get(r);return s===Bh.AutoForwardEnd&&n&&n.source.source===sn.Auto&&this.F.set(r,{local:n.localPort,name:n.name,privacy:n.privacy}),await this.H.closeTunnel(t,i),this.X({host:t,port:i},s)}address(t,i){const s=Ji(t,i);return(this.forwarded.get(s)||this.detected.get(s))?.localAddress}get environmentTunnelsSet(){return this.u}addEnvironmentTunnels(t){if(t)for(const i of t){const s=Li(this.m??new Map,i.remoteAddress.host,i.remoteAddress.port),r=typeof i.localAddress=="string"?i.localAddress:Ji(i.localAddress.host,i.localAddress.port);this.detected.set(Ji(i.remoteAddress.host,i.remoteAddress.port),{remoteHost:i.remoteAddress.host,remotePort:i.remoteAddress.port,localAddress:r,protocol:vs.Http,localUri:this.Y(r),closeable:!1,runningProcess:s?.detail,hasRunningProcess:!!s,pid:s?.pid,privacy:fr.ConstantPrivate,source:{source:sn.Extension,description:d(14350,null)}}),this.H.setEnvironmentTunnel(i.remoteAddress.host,i.remoteAddress.port,r,fr.ConstantPrivate,vs.Http)}this.u=!0,this.t.fire(),this.g.fire()}setCandidateFilter(t){this.r=t}async setCandidates(t){let i=t;this.r&&(i=await this.r(t));const s=this.jb(i);this.O.trace(`ForwardedPorts: (TunnelModel) removed candidates ${Array.from(s.values()).map(r=>r.port).join(", ")}`),this.n.fire(s)}jb(t){const i=this.m??new Map,s=new Map;return this.m=s,t.forEach(r=>{const n=Ji(r.host,r.port);s.set(n,{host:r.host,port:r.port,detail:r.detail,pid:r.pid}),i.has(n)&&i.delete(n);const o=Li(this.forwarded,r.host,r.port);o&&(o.runningProcess=r.detail,o.hasRunningProcess=!0,o.pid=r.pid)}),i.forEach((r,n)=>{const o=M3(n);if(!o)return;const a=Li(this.forwarded,o.host,o.port);a&&(a.runningProcess=void 0,a.hasRunningProcess=!1,a.pid=void 0);const c=Li(this.detected,o.host,o.port);c&&(c.runningProcess=void 0,c.hasRunningProcess=!1,c.pid=void 0)}),i}get candidates(){return this.m?Array.from(this.m.values()):[]}get candidatesOrUndefined(){return this.m?this.candidates:void 0}async kb(){const t=Array.from(this.forwarded.values()),i=await this.getAttributes(t.map(s=>({port:s.remotePort,host:s.remoteHost})),!1);if(i)for(const s of t){const r=i.get(s.remotePort);(r?.protocol||s.protocol!==vs.Http)&&r?.protocol!==s.protocol&&await this.gb({remote:{host:s.remoteHost,port:s.remotePort},local:s.localPort,name:s.name,source:s.source},r),r&&r.label&&r.label!==s.name&&await this.name(s.remoteHost,s.remotePort,r.label)}}async getAttributes(t,i=!0){const s=new Map,r=new Map;t.forEach(l=>{const u=Li(this.m??new Map,oh[0],l.port)??l;if(u){s.set(l.port,u);const h=ZY(u)?u.pid:void 0;r.has(h)||r.set(h,[]),r.get(h)?.push(l.port)}});const n=new Map;if(t.forEach(l=>{const u=this.configPortsAttributes.getAttributes(l.port,l.host,s.get(l.port)?.detail);u&&n.set(l.port,u)}),this.G.length===0||!i)return n.size>0?n:void 0;const o=await Promise.all(this.G.flatMap(l=>Array.from(r.entries()).map(u=>{const h=u[1],f=s.get(h[0]);return l.providePortAttributes(h,f?.pid,f?.detail,Ye.None)}))),a=new Map;if(o.forEach(l=>l.forEach(u=>{u&&a.set(u.port,u)})),!n&&!a)return;const c=new Map;return t.forEach(l=>{const u=n.get(l.port),h=a.get(l.port);c.set(l.port,{elevateIfNeeded:u?.elevateIfNeeded,label:u?.label,onAutoForward:u?.onAutoForward??F3.providedActionToAction(h?.autoForwardAction),requireLocalPort:u?.requireLocalPort,protocol:u?.protocol})}),c}addAttributesProvider(t){this.G.push(t)}};__decorate([Od(1e3)],w5.prototype,"db",null),w5=__decorate([__param(0,VH),__param(1,sC),__param(2,Fr),__param(3,W$),__param(4,uB),__param(5,_d),__param(6,De),__param(7,qY),__param(8,tB),__param(9,Wd)],w5);function QY(e){const t=e.trim().split(`
`),i=[];return t.forEach(r=>{const n=/\/proc\/(\d+)\/fd\/\d+ -> socket:\[(\d+)\]/.exec(r);n&&n.length>=3&&i.push({pid:parseInt(n[1],10),socket:parseInt(n[2],10)})}),i.reduce((r,n)=>(r[n.socket]=n,r),{})}function XY(...e){const t=[].concat(...e.map(eZ));return[...new Map(t.filter(i=>i.st==="0A").map(i=>{const s=i.local_address.split(":");return{socket:parseInt(i.inode,10),ip:KY(s[0]),port:parseInt(s[1],16)}}).map(i=>[i.ip+":"+i.port,i])).values()]}function KY(e){let t="";if(e.length===8)for(let i=e.length-2;i>=0;i-=2)t+=parseInt(e.substr(i,2),16),i!==0&&(t+=".");else for(let i=0;i<e.length;i+=8){const s=e.substring(i,i+8);let r="";for(let n=8;n>=2;n-=2)r+=s.substring(n-2,n),(n===6||n===2)&&(r=parseInt(r,16).toString(16),t+=`${r}`,r="",i+n!==e.length-6&&(t+=":"))}return t}function eZ(e){const t=e.trim().split(`
`),i=t.shift().trim().split(/\s+/).filter(r=>r!=="rx_queue"&&r!=="tm->when");return t.map(r=>r.trim().split(/\s+/).reduce((n,o,a)=>(n[i[a]||a]=o,n),{}))}function tZ(e){return e.length>500?!1:!!e.match(/.*\.vscode-server-[a-zA-Z]+\/bin.*/)||e.indexOf("out/server-main.js")!==-1||e.indexOf("_productName=VSCode")!==-1}function iZ(e){const t=e.trim().split(`
`),i=[];return t.forEach(s=>{const r=/^\d+\s+\D+\s+root\s+(\d+)\s+(\d+).+\d+\:\d+\:\d+\s+(.+)$/.exec(s);r&&r.length>=4&&i.push({pid:parseInt(r[1],10),ppid:parseInt(r[2]),cmd:r[3]})}),i}async function sZ(e,t,i){const s=i.reduce((n,o)=>(n[o.pid]=o,n),{}),r=[];return e.forEach(({socket:n,ip:o,port:a})=>{const c=t[n]?t[n].pid:void 0,l=c?s[c]?.cmd:void 0;c&&l&&!tZ(l)&&r.push({host:o,port:a,detail:l,pid:c})}),r}function rZ(e,t,i){const s=new Map,r=iZ(t);for(const n of e){const o=i.get(n.port);if(o){s.set(n.port,o);continue}const a=r.find(c=>c.cmd.includes(`${n.port}`));if(a){let c=a,l;do l=r.find(u=>u.ppid===c.pid),l&&(c=l);while(l);s.set(n.port,{host:n.ip,port:n.port,pid:c.pid,detail:c.cmd,ppid:c.ppid})}else s.set(n.port,{host:n.ip,port:n.port,ppid:Number.MAX_VALUE})}return s}var b5=class extends Fg{constructor(t,i,s,r){super(t,i,s),this.D=i,this.F=r,this.y=void 0,this.z=new Map,this.C=!1,$t&&i.remote.isRemote&&i.remote.authority&&(this.a.$setRemoteTunnelService(process.pid),this.H())}async $registerCandidateFinder(t){if(t&&this.C)return;this.C=t;let i;this.y&&(i=this.y,await this.a.$onFoundNewCandidates(this.y));const s=new mO;let r=0;for(;this.C;){const n=new Date().getTime(),o=(await this.I()).filter(l=>ea(l.host)||Gr(l.host));this.s.trace(`ForwardedPorts: (ExtHostTunnelService) found candidate ports ${o.map(l=>l.port).join(", ")}`);const a=new Date().getTime()-n;this.s.trace(`ForwardedPorts: (ExtHostTunnelService) candidate port scan took ${a} ms.`),r++>3&&s.update(a),(!i||JSON.stringify(i)!==JSON.stringify(o))&&(i=o,await this.a.$onFoundNewCandidates(i));const c=this.G(s.value);this.s.trace(`ForwardedPorts: (ExtHostTunnelService) next candidate port scan in ${c} ms.`),await new Promise(l=>setTimeout(()=>l(),c))}}G(t){return Math.max(t*20,2e3)}async H(){this.y=await this.I(),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) Initial candidates found: ${this.y.map(t=>t.port).join(", ")}`)}async I(){let t="",i="";try{t=await Uh.promises.readFile("/proc/net/tcp","utf8"),i=await Uh.promises.readFile("/proc/net/tcp6","utf8")}catch{}const s=XY(t,i),r=await new Promise(f=>{y3("ls -l /proc/[0-9]*/fd/[0-9]* | grep socket:",(p,g,v)=>{f(g)})}),n=QY(r),o=await it.readdir("/proc"),a=[];for(const f of o)try{const p=Number(f),g=xt(x.file("/proc"),f);if((await Uh.promises.stat(g.fsPath)).isDirectory()&&!isNaN(p)){const b=await Uh.promises.readlink(xt(g,"cwd").fsPath),E=await Uh.promises.readFile(xt(g,"cmdline").fsPath,"utf8");a.push({pid:p,cwd:b,cmd:E})}}catch{}const c=[],l=s.filter(f=>{const p=n[f.socket];return p||c.push(f),p}),u=sZ(l,n,a);let h;if(this.s.trace(`ForwardedPorts: (ExtHostTunnelService) number of possible root ports ${c.length}`),c.length>0){const f=await new Promise(p=>{y3("ps -F -A -l | grep root",(g,v,b)=>{p(v)})});this.z=rZ(c,f,this.z),h=Array.from(this.z.values()),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) heuristic ports ${h.map(p=>p.port).join(", ")}`)}return u.then(f=>h?f.concat(h):f)}w(t){return async i=>{const s=new A3({commit:this.D.commit,quality:this.D.quality,logService:this.s,ipcLogger:null,remoteSocketFactoryService:{_serviceBrand:void 0,async connect(n,o,a,c){const l=await t.makeConnection();return nZ.connect(l,o,a,c)},register(){throw new Error("not implemented")}},addressProvider:{getAddress(){return Promise.resolve({connectTo:new E7(0),connectionToken:t.connectionToken})}},signService:this.F},"localhost",i.remoteAddress.host||"localhost",i.remoteAddress.port,i.localAddressPort);await s.waitForReady();const r=new D;return{localAddress:M3(s.localAddress)??s.localAddress,remoteAddress:{port:s.tunnelRemotePort,host:s.tunnelRemoteHost},onDidDispose:r.event,dispose:()=>{s.dispose(),r.fire(),r.dispose()}}}}};b5=__decorate([__param(0,Ae),__param(1,kt),__param(2,De),__param(3,jh)],b5);var nZ=class w2 extends kY{static connect(t,i,s,r){const n=new se,o={onClose:n.add(new D),onData:n.add(new D),onEnd:n.add(new D)};n.add(t.onDidReceiveMessage(c=>o.onData.fire(_.wrap(c)))),n.add(t.onDidEnd(()=>o.onEnd.fire())),n.add(t.onDidClose(c=>o.onClose.fire({type:0,error:c,hadError:!!c})));const a=new w2(t,r,o);return a.B(n),EY(a,i,s,r,o)}constructor(t,i,s){super(i,s),this.n=t}write(t){this.n.send(t.buffer)}h(){this.n.end()}async drain(){await this.n.drain?.()}};import*as la from"fs";var oZ=class extends Gb{constructor(){super(...arguments),this.i=null}async g(e){const t=await super.g(e);if(t.scheme!==G.file)return t;if(this.b.skipWorkspaceStorageLock)return this.d.info(`Skipping acquiring lock for ${t.fsPath}.`),t;const i=t.fsPath;let s=0;do{let r;s===0?r=i:r=/[/\\]$/.test(i)?`${i.substr(0,i.length-1)}-${s}`:`${i}-${s}`,await aZ(r);const n=Pe(r,"vscode.lock"),o=await j3(this.d,n,!1);if(o)return this.i=o,process.on("exit",()=>{o.dispose()}),x.file(r);s++}while(s<10);return t}onWillDeactivateAll(){this.i?.setWillRelease(6e3)}};async function aZ(e){try{await la.promises.stat(e);return}catch{}try{await la.promises.mkdir(e,{recursive:!0})}catch{}}var cZ=1e3,U3=10*60*1e3,lZ=class extends X{constructor(e,t){super(),this.b=e,this.c=t,this.a=this.B(new CE),this.a.cancelAndSet(async()=>{const i=await y5(e,t);(!i||i.pid!==process.pid)&&(e.info(`Lock '${t}': The lock was lost unexpectedly.`),this.a.cancel());try{await la.promises.utimes(t,new Date,new Date)}catch(s){e.error(s),e.info(`Lock '${t}': Could not update mtime.`)}},cZ)}dispose(){super.dispose();try{la.unlinkSync(this.c)}catch{}}async setWillRelease(e){this.b.info(`Lock '${this.c}': Marking the lockfile as scheduled to be released in ${e} ms.`);try{const t={pid:process.pid,willReleaseAt:Date.now()+e};await it.writeFile(this.c,JSON.stringify(t),{flag:"w"})}catch(t){this.b.error(t)}}};async function j3(e,t,i){try{const r={pid:process.pid,willReleaseAt:0};await it.writeFile(t,JSON.stringify(r),{flag:"wx"})}catch(r){e.error(r)}const s=await y5(e,t);return!s||s.pid!==process.pid?i?(e.info(`Lock '${t}': Could not acquire lock, giving up.`),null):(e.info(`Lock '${t}': Could not acquire lock, checking if the file is stale.`),hZ(e,t)):(e.info(`Lock '${t}': Lock acquired.`),new lZ(e,t))}async function y5(e,t){let i;try{i=await la.promises.readFile(t)}catch(s){return e.error(s),null}try{return JSON.parse(String(i))}catch(s){return e.error(s),null}}async function x5(e,t){let i;try{i=await la.promises.stat(t)}catch(s){return e.error(s),0}return i.mtime.getTime()}function uZ(e){try{return process.kill(e,0),!0}catch{return!1}}async function hZ(e,t){const i=await y5(e,t);if(!i)return e.info(`Lock '${t}': Could not read pid of lock holder.`),Hh(e,t);if(i.willReleaseAt){let a=i.willReleaseAt-Date.now();if(a<5e3){for(a>0?e.info(`Lock '${t}': The lockfile is scheduled to be released in ${a} ms.`):e.info(`Lock '${t}': The lockfile is scheduled to have been released.`);a>0;){if(await ii(Math.min(100,a)),await x5(e,t)===0)return Hh(e,t);a=i.willReleaseAt-Date.now()}return Hh(e,t)}}if(!uZ(i.pid))return e.info(`Lock '${t}': The pid ${i.pid} appears to be gone.`),Hh(e,t);const s=await x5(e,t),r=Date.now()-s;if(r<=U3)return e.info(`Lock '${t}': The lock does not look stale, elapsed: ${r} ms, giving up.`),null;e.info(`Lock '${t}': The lock looks stale, waiting for 2s.`),await ii(2e3);const n=await x5(e,t),o=Date.now()-n;return o<=U3?(e.info(`Lock '${t}': The lock does not look stale, elapsed: ${o} ms, giving up.`),null):(e.info(`Lock '${t}': The lock looks stale even after waiting for 2s.`),Hh(e,t))}async function Hh(e,t){e.info(`Lock '${t}': Deleting a stale lock.`);try{await la.promises.unlink(t)}catch{}return j3(e,t,!0)}var rn;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"})(rn||(rn={}));async function dZ(e,t,i,s,r){try{const n=await import("@vscode/spdlog");n.setFlushOn(rn.Trace);const o=await n.createAsyncRotatingLogger(e,t,i,s);return r?o.clearFormatters():o.setPattern("%Y-%m-%d %H:%M:%S.%e [%l] %v"),o}catch(n){console.error(n)}return null}function B3(e,t,i){switch(t){case oe.Trace:e.trace(i);break;case oe.Debug:e.debug(i);break;case oe.Info:e.info(i);break;case oe.Warning:e.warn(i);break;case oe.Error:e.error(i);break;case oe.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function H3(e,t){switch(t){case oe.Trace:e.setLevel(rn.Trace);break;case oe.Debug:e.setLevel(rn.Debug);break;case oe.Info:e.setLevel(rn.Info);break;case oe.Warning:e.setLevel(rn.Warning);break;case oe.Error:e.setLevel(rn.Error);break;case oe.Off:e.setLevel(rn.Off);break;default:throw new Error(`Invalid log level ${t}`)}}var fZ=class extends Pv{constructor(e,t,i,s,r){super(),this.n=[],this.setLevel(r),this.r=this.t(e,t,i,s),this.B(this.onDidChangeLogLevel(n=>{this.s&&H3(this.s,n)}))}async t(e,t,i,s){const r=i?6:1,n=30/r*B6.MB,o=await dZ(e,t,n,r,s);if(o){this.s=o,H3(this.s,this.getLevel());for(const{level:a,message:c}of this.n)B3(this.s,a,c);this.n=[]}}m(e,t){this.s?B3(this.s,e,t):this.getLevel()<=e&&this.n.push({level:e,message:t})}flush(){this.s?this.w():this.r.then(()=>this.w())}dispose(){this.s?this.y():this.r.then(()=>this.y()),super.dispose()}w(){this.s&&this.s.flush()}y(){this.s&&(this.s.drop(),this.s=void 0)}},pZ=class extends lm{t(e,t,i){return e.scheme===G.file?new fZ(i?.name||ut(),e.fsPath,!i?.donotRotate,!!i?.donotUseFormatters,t):super.t(e,t,i)}registerLogger(e){super.registerLogger(e),this.c.$registerLogger(e)}deregisterLogger(e){super.deregisterLogger(e),this.c.$deregisterLogger(e)}};import{homedir as gZ}from"os";var mZ=class extends nm{m(){return gZ()}},vZ=class extends X{constructor(e,t=[]){super(),this.a=new iO([e,...t]),this.B(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},E5=class extends vZ{constructor(t,i,s){const r=s.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=s.remote.isRemote?d(2901,null):d(t?2902:2903,null);super(i.createLogger(r,{name:n}))}};E5=__decorate([__param(1,xn),__param(2,kt)],E5);import{spawn as wZ}from"child_process";import{readFile as bZ}from"fs/promises";import{homedir as yZ}from"os";function xZ(e){const t=new Map,s=e.replace(/\r\n?/g,`
`).split(`
`);for(let o of s){if(o=o.trim(),!o||o.startsWith("#"))continue;const[a,c]=r(o);a&&t.set(a,c)}return t;function r(o){o.startsWith("export ")&&(o=o.substring(7).trim());const a=n(o,h=>h==="="||h===":");if(a===-1)return[null,null];const c=o.substring(0,a).trim();let l=o.substring(a+1).trim();const u=n(l,h=>h==="#");if(u!==-1&&(l=l.substring(0,u).trim()),l.length>=2){const h=l[0],f=l[l.length-1];(h==='"'&&f==='"'||h==="'"&&f==="'"||h==="`"&&f==="`")&&(l=l.substring(1,l.length-1),h==='"'&&(l=l.replace(/\\n/g,`
`).replace(/\\r/g,"\r")))}return[c,l]}function n(o,a){let c=!1,l="";for(let u=0;u<o.length;u++){const h=o[u];if(c)h===l&&o[u-1]!=="\\"&&(c=!1);else if(h==='"'||h==="'"||h==="`")c=!0,l=h;else if(a(h))return u}return-1}}import{Transform as EZ}from"stream";var z3=class extends EZ{constructor(e){if(super(),typeof e=="number")this.b=e,this.c=1;else{const t=Buffer.isBuffer(e)?e:Buffer.from(e);this.b=t.length===1?t[0]:t,this.c=t.length}}_transform(e,t,i){this.a?this.a=Buffer.concat([this.a,e]):this.a=e;let s=0;for(;s<this.a.length;){const r=typeof this.b=="number"?this.a.indexOf(this.b,s):RE(this.a,this.b,s);if(r===-1)break;this.push(this.a.slice(s,r+this.c)),s=r+this.c}this.a=s===this.a.length?void 0:this.a.slice(s),i()}_flush(e){this.a&&this.push(this.a),e()}},k5=class extends dm{constructor(t,i){super(t,i),this.n=new Map}j(t,i){i.type===1?this.t(t,i):super.j(t,i)}$stopMcp(t){const i=this.n.get(t);i?(i.abortCtrl.abort(),this.n.delete(t)):super.$stopMcp(t)}$sendMessage(t,i){const s=this.n.get(t);s?s.child.stdin.write(i+`
`):super.$sendMessage(t,i)}async t(t,i){const s=a=>this.b.$onDidChangeState(t,{state:3,code:a.hasOwnProperty("code")?String(a.code):void 0,message:typeof a=="string"?a:a.message}),r={...process.env};if(i.envFile)try{for(const[a,c]of xZ(await bZ(i.envFile,"utf-8")))r[a]=c}catch(a){s(`Failed to read envFile '${i.envFile}': ${a.message}`);return}for(const[a,c]of Object.entries(i.env))r[a]=c===null?void 0:String(c);const n=new AbortController;let o;try{const a=yZ();let c=i.cwd?qg(i.cwd,a):a;es(c)||(c=Pe(a,c));const{executable:l,args:u,shell:h}=await SZ(qg(i.command,a),i.args.map(f=>qg(f,a)),c,r);this.b.$onDidPublishLog(t,oe.Debug,`Server command line: ${l} ${u.join(" ")}`),o=wZ(l,u,{stdio:"pipe",cwd:c,signal:n.signal,env:r,shell:h})}catch(a){s(a),n.abort();return}this.b.$onDidChangeState(t,{state:1}),o.stdout.pipe(new z3(`
`)).on("data",a=>this.b.$onDidReceiveMessage(t,a.toString())),o.stdin.on("error",s),o.stdout.on("error",s),o.stderr.pipe(new z3(`
`)).on("data",a=>this.b.$onDidPublishLog(t,oe.Warning,`[server stderr] ${a.toString().trimEnd()}`)),o.on("spawn",()=>this.b.$onDidChangeState(t,{state:2})),o.on("error",a=>{n.signal.aborted?this.b.$onDidChangeState(t,{state:0}):s(a)}),o.on("exit",a=>a===0||n.signal.aborted?this.b.$onDidChangeState(t,{state:0}):this.b.$onDidChangeState(t,{state:3,message:`Process exited with code ${a}`})),this.n.set(t,{abortCtrl:n,child:o})}};k5=__decorate([__param(0,Ae),__param(1,kt)],k5);var kZ=/\.(bat|cmd)$/i,SZ=async(e,t,i,s)=>{if(process.platform!=="win32")return{executable:e,args:t,shell:!1};const r=await yh(e,i,void 0,s);if(r&&kZ.test(r)){const n=o=>o.includes(" ")?`"${o}"`:o;return{executable:n(r),args:t.map(n),shell:!0}}return{executable:e,args:t,shell:!1}};import*as CZ from"http";import{randomBytes as $Z}from"crypto";import{URL as W3}from"url";var IZ=class{constructor(e,t){this.f=e,this.g=t,this.c=$Z(16).toString("base64");const i=new is;this.b=i.p,this.a=CZ.createServer((s,r)=>{const n=new W3(s.url,`http://${s.headers.host}`);switch(n.pathname){case"/":{const o=n.searchParams.get("code")??void 0,a=n.searchParams.get("state")??void 0,c=n.searchParams.get("error")??void 0;if(c){r.writeHead(302,{location:`/?error=${n.searchParams.get("error_description")}`}),r.end(),i.error(new Error(c));break}if(!o||!a){r.writeHead(400),r.end();break}if(this.state!==a){r.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}`}),r.end(),i.error(new Error("State does not match."));break}i.complete({code:o,state:a}),r.writeHead(302,{location:"/success"}),r.end();break}case"/success":this.h(r);break;default:r.writeHead(404),r.end();break}})}get state(){return this.c}get redirectUri(){if(this.d===void 0)throw new Error("Server is not started yet");return`http://127.0.0.1:${this.d}/`}h(e){const t=AZ(this.g);e.writeHead(200,{"Content-Type":"text/html","Content-Length":Buffer.byteLength(t,"utf8")}),e.end(t)}start(){const e=new is;if(this.a.listening)throw new Error("Server is already started");const t=setTimeout(()=>{e.error(new Error("Timeout waiting for port"))},5e3);return this.a.on("listening",()=>{const i=this.a.address();if(typeof i=="string")this.d=parseInt(i);else if(i instanceof Object)this.d=i.port;else throw new Error("Unable to determine port");clearTimeout(t),e.complete()}),this.a.on("error",i=>{if("code"in i&&i.code==="EADDRINUSE"){this.f.error("Address in use, retrying with a different port..."),setTimeout(()=>{this.a.close(),this.a.listen(0,"127.0.0.1")},1e3);return}clearTimeout(t),e.error(new Error(`Error listening to server: ${i}`))}),this.a.on("close",()=>{e.error(new Error("Closed"))}),this.a.listen(sy,"127.0.0.1"),e.p}stop(){const e=new is;return this.a.listening?(this.a.close(t=>{t?e.error(t):e.complete()}),setTimeout(()=>{e.isResolved||e.error(new Error("Timeout waiting for server to close"))},5e3),e.p):(e.complete(),e.p)}waitForOAuthResponse(){return this.b}},PZ=class extends Vg{constructor(e,t,i,s,r,n,o,a,c,l,u,h){super(e,t,i,s,r,n,o,a,c,l,u,h),i.remote.isRemote||this.f.unshift({label:d(2926,null),handler:(f,p,g)=>this.y(f,p,g)}),this.f.push({label:d(2927,null),handler:(f,p,g)=>this.z(f,p,g)})}async y(e,t,i){const s=this.s(64),r=await this.u(s),n=this.s(32),o=x.parse(`${this.l.environment.appUriScheme}://dynamicauthprovider/${this.authorizationServer.authority}/redirect?nonce=${n}`);let a;try{a=await this.k.createAppUri(o)}catch(f){throw new Error(`Failed to create external URI: ${f}`)}const c=new W3(this.o.authorization_endpoint);c.searchParams.append("client_id",this.clientId),c.searchParams.append("response_type","code"),c.searchParams.append("code_challenge",r),c.searchParams.append("code_challenge_method","S256");const l=e.join(" ");l&&c.searchParams.append("scope",l),this.q?.resource&&c.searchParams.append("resource",this.q.resource);const u=new IZ(this.g,a);try{await u.start()}catch(f){throw new Error(`Failed to start loopback server: ${f}`)}c.searchParams.set("redirect_uri",u.redirectUri),c.searchParams.set("state",u.state);const h=u.waitForOAuthResponse();this.n.$waitForUriHandler(a);try{if(this.g.info(`Opening authorization URL for scopes: ${l}`),this.g.trace(`Authorization URL: ${c.toString()}`),!await this.j.openUri(c.toString(),{}))throw new mt;t.report({message:d(2928,null)});let p;try{p=(await $d(h,i)).code}catch(v){throw Ei(v)?(this.g.info("Authorization code request was cancelled by the user."),v):(this.g.error(`Failed to receive authorization code: ${v}`),new Error(`Failed to receive authorization code: ${v}`))}return this.g.info(`Authorization code received for scopes: ${l}`),await this.w(p,s,u.redirectUri)}finally{setTimeout(()=>{u.stop()},5e3)}}async z(e,t,i){if(!this.o.token_endpoint)throw new Error("Token endpoint not available in server metadata");if(!this.o.device_authorization_endpoint)throw new Error("Device authorization endpoint not available in server metadata");const s=this.o.device_authorization_endpoint,r=e.join(" ");this.g.info(`Starting device code flow for scopes: ${r}`);const n=new URLSearchParams;n.append("client_id",this.clientId),r&&n.append("scope",r),this.q?.resource&&n.append("resource",this.q.resource);let o;try{o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:n.toString()})}catch(h){throw this.g.error(`Failed to request device code: ${h}`),new Error(`Failed to request device code: ${h}`)}if(!o.ok){const h=await o.text();throw new Error(`Device code request failed: ${o.status} ${o.statusText} - ${h}`)}const a=await o.json();if(!dz(a))throw this.g.error("Invalid device code response received from server"),new Error("Invalid device code response received from server");if(this.g.info(`Device code received: ${a.user_code}`),!await this.n.$showDeviceCodeModal(a.user_code,a.verification_uri))throw new mt;t.report({message:d(2929,null,a.verification_uri,a.user_code)});const l=(a.interval||5)*1e3,u=Date.now()+a.expires_in*1e3;for(;Date.now()<u;){if(i.isCancellationRequested)throw new mt;if(await new Promise(f=>setTimeout(f,l)),i.isCancellationRequested)throw new mt;const h=new URLSearchParams;h.append("grant_type","urn:ietf:params:oauth:grant-type:device_code"),h.append("device_code",a.device_code),h.append("client_id",this.clientId);try{const f=await fetch(this.o.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:h.toString()});if(f.ok){const p=await f.json();if(!iy(p))throw this.g.error("Invalid token response received from server"),new Error("Invalid token response received from server");return this.g.info(`Device code flow completed successfully for scopes: ${r}`),p}else{let p;try{p=await f.json()}catch(g){throw this.g.error(`Failed to parse error response: ${g}`),new Error(`Token request failed with status ${f.status}: ${f.statusText}`)}if(p.error==="authorization_pending")continue;if(p.error==="slow_down"){await new Promise(g=>setTimeout(g,l));continue}else throw p.error==="expired_token"?new Error("Device code expired. Please try again."):p.error==="access_denied"?new mt:new Error(`Token request failed: ${p.error_description||p.error||"Unknown error"}`)}}catch(f){if(Ei(f))throw f;this.g.error(`Error polling for token: ${f}`);continue}}throw new Error("Device code flow timed out. Please try again.")}},DZ=class extends uy{constructor(e,t,i,s,r,n){super(e,t,i,s,r,n),this.c=PZ}};function AZ(e){return`<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>GitHub Authentication - Sign In</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		html {
			height: 100%;
		}

		body {
			box-sizing: border-box;
			min-height: 100%;
			margin: 0;
			padding: 15px 30px;
			display: flex;
			flex-direction: column;
			color: white;
			font-family: "Segoe UI","Helvetica Neue","Helvetica",Arial,sans-serif;
			background-color: #2C2C32;
		}

		.branding {
			background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAlqADAAQAAAABAAAAlgAAAADkcSUjAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAxaElEQVR4Ae19CbgdRbXu6j2cecoECTIkICCGzAg+7qeQ9544QFQgiXpVEJTEe59ALsbMwE5AMZCQELgKeSoqDlyiQogCSUAC6FNCQhIwQMALCbNMGc68p37/v7prnz47++yzzzl76OCu851d3dXV1VXVf69atWqtVZaUg397IPJwSCKT46zgx16wh+19XSYnO6PjE7H4MDuZ7BSxXhQJ/On5KTWbTSMm3bYlvHXmJNxj2SatFLFVioeWn5lDDwAgMvOU2NG/3DMo2h691rLtr4bqBtVX1NVJRUOVBIIiyYSI3RkXO9q5NZmU5S98tu7XpmQF2AwAzCoNwMrAMm/CT3HkrgqJTI/KwodOD4ZDa5MVdUPtfe+KxONKiSob6+SIE46XqsYGK5FIBoLVtQEJiSRaWp+xktaNuzpqfirTLcBOZNJtdnjrDCk6wMrA8hOgWJcZoFSrT4nJogfPESu4Dv8AVLTTEqsC9MkSDHB2NIYfkZGnjJOqpiZQrkTCAmWyKqtDgXBAEs0tLyZtWRl7953/u/uiUR0sVgH2xuKERCJJnhc6lIFV6B7OuXyAJrIpqDzVlQ99TUKVt0scAEomQaXskBAONlEFrgpvLdkZk6r6Wjn6IxMx2qVeY0IsSVrhqnCgMiiJA62v4a5Vkmz/4a7PDWtmVXSIfGMSAGYVFGCpGvGh5VCiHohEAiJXi77sKx+eLZU1N0hHCyuTAJCCDqCAKIUCYxv4AcY6YnL0qeOkZuhQSeoo6b5OG+AC4ZJQRThQFQbAWt7Bvf8ZSNg3P3deA8ZUF2AzADCrMAArA4u9XMoQsQMp6nHlH5dKdcMcad+fJGVCCKRAxfMU1XKB1dYpI8acKI0jj5FkDNSti3LpzSgjCQQmrFA4HKiuIMAO2EnrtkBb+8pdXxr2OjOd+bAd2vQ2cro8mXPjwH/LwBp4H/a/hLvuCsr06cpky6KHfiK1jRdJ235M80ClABMtmMMfKJQDNB4j1VCstg4ZcTKANWpkZmCxAJZiABYIhgO1VRwi21HGj63OxI27pje9xGz5BlgZWOzVUgSPjEqufOheqWmcIq37YwBCWKsDDGlQULnAUh6L4CLFAh/fCmCNOSE7sNxi3IilxiUQCAdrayR+oCWBcn4q0eSy56c2PMc80+6yg2t4MEAKVgYWO7HYwcz8Ig9XSTz5kNQ0nC7tB6KoBmZ+bnAZdaVUhIMHVDxWQtQCYI3thWKZ8rrHLICiCwCslmIKFGn/GoPm9S+cW7ddswJgZw4Ta9NkC/n6HsrA6nufDewOV/Ap8x8cggHvMUztTpLO5igkCV2g4hMIJI3dY56mqBdwgXOlWP0DlhbNkhVgtoQDELza7Z1iJ2J3J2P2DX8/r+Evmsm2A2dukkBfAYbZSDkUrQco+IQ0XeY9eKwEraekovYkzP4OBhUrlGLEXYB1q6QnzXPYLUtuJ5SLcei1k62tMYDKDtTWnRusrf5/J9zbcv9xa5snc9aooLJti3xYbsVy1lEOxekBI01f8NBECVnbJVx1hHS2YSrnGf4y1SQTwAyYTJzpvr6lAWA2AWYlW1vidrQjGait/VS4pvaPx9/bvOn43+4/GwCzDcAoC0P+rKNd1ot9q1s5d489YIa/BQ9+Ap/yAxKsgJSJ8gGXUc94I1BD4Og/j91zDodYGFTmvf88VsYnpiWSt7ICNXWcoQoo2uNJ217298/X/8bky7ZcVKZYppcKE0OaDg0FDn9XPfwFCYc3YEYGUEUpTQeFUNTgyZniDBUyfJdecu9hVJjAYS+YbGuJ8z9QXXNaqL5uzQlrm3d88O79X+Ujt860MIu17ExDZJliFealkMJYMn1NQNZATnXlQ9+ScPXNEm3H02zKrZQK9PpoxQ5+PBJ3pVwqbkBJpFhjPiSNx47sWY7V60Nyy4BaQDQhdqCyJgRWX5LNLbuA8xUfaKz7sTtEkkhhMuBoU5QpVm792rdclKbzkyWoFj64WCrrAKo2SNMxhukSjb4CvoZe/pGBebyfP88ZTNx14KQX6BdV4McQSna2JZItLXGrsurEUEPdra8daPnv43934CIy+Qoqth2hDKx8v4hpkKbrAi++3AUbf4AlmqukvTmuiytgWfr3OBdg/bs533cpwMDgJ6BFEQtUVB4dGlz/kxPuab5TH8S2A1z9bGi+6/o+KY/8FKkUw6KH/ktqm/4Ngk8y6UHltvVCH39IrQx1SsXmoI9l5Tc72xS2Y50AWGtnaEjdF46/p3mtPuJqqmOUQ356YMZtYai8xITrfzsGb4Dg8392W6IZ8FOygImXslwe8KOzF0Dti2D8vZbO0KC6z37wdwfm/d2yvu8dvbPfXr7acw8YcULkrw0Sa34EoBovHZCmq3Jez7dlvwKkGMCoqIHn+E8tQtse5n1UwZn37HXVq0nOeO14sj0Ws44tD4U59FjWLEaaPue+IyXWskMqa11QUfCZQgaK6OtxhqeaIkpInjLUyiRBjJKMhRrrqkOh5IXlodB0S3/ilDR9/cngyx+RcOVg6WjtXZqe67OUUqVnJroQsgu+nTzF/oXUlsIUTIk/WaZY/e18A6r5D34MXbkV0vTBEoVKZ1Zpen8flv2+FCHLnq0YV4N2Zwcwb48pU6z+dDfVXiKnRKGh8HksJt+tIp44penZlmj68yBzD6DjRQ8pmQbwWR4u2aSau0oQg2JRT9EaUqZYfep9vEaKFGhFs2DDN6Si8m594Yk4RQyF+0gVMRlgwyTzb9qRIZu51C02+Uzc7WLaSS55eIvJh1WHwnVGWt0O+VM1eFgMg4dIXBY8OF+qar8HlRd0JciHRRutEoXUy/Q836R5kjIemnwmzpjJTcwlD7O6+crAytaZ5ppK013B5/wNy6W6/goIPkmlMBD1V5puCu8h5gs66GV6E7zHPZRRsmSrgOS7ZI3K84O9Bg/zN/wcuulfVYMHZ+3Mw+Hk+bmmuHT8pPgrZki/aG4qfVymWNneAfmp6Y5TDpm34T6s+306v9L0bA/ntSzAMZdK45qht4qXKVaPPeTM/GISWVcjnZV/xPB3mho8WL1ofPZY4AAuGHmWAZMpKv3cpPsgLlOsTC/BLNHMXn+YRAOPglE/ERoK3a1oMt1XrDQdDsne4YEEl/kv1vOzPcetUxlY6Z3kLNFEZdGG42Gk/hh00w9Xg4fedNPTy8n7OdBjgKRl+5RcudUqy7G8ADDS9DkPnApQbYNjjsOlsz1/SzTeZ/V2bKiQiZk/HUvp572VWcTrfaNYVLddvTUkgyYl5Rk2c1NARtRbUkIHX3nrKyNNn/fgp6BCcL8E0DUxuHShNL3ULzBFqVCR1KwwlZi3LshnQbkDizMkS61i2dkmqDa2zMQpr7tuDc3FQyOmNH0TtD4hTZ97/1ckFLxDEniBCbpvUZMofzQjHdzp5/6oZaoWuQHLMLOrXmgQO34hvugzUMJgfMnvIH5I9rXfgRfTJpqv9P4vU63r7cAYPESmx2X+A7NgQLoCtn68q7BLNL3VK3U9DT1pp6lsPjzoBVj8mqFWSzOfW549B7ZwP4W67RB1fgm7ACh24T84DZTsKlm2/WKZOX499Z1l512OdYoPG5yqkho8qBAoIXMf+K5UNiyAch4axbdXwiWaVAU9BwZQqdHPJCAPD82/55aSHbp17BlY/JrXQLVmOoa/VTtnSqjqVuFI2LI3itkJmX6nCLrICVceIRVVD8iNTy2RK6yrtVGGypWshVke7Bg8kCqJzF2/Gk45LoGMynEf5HGPl6WEIl/yAIlPTjstcmWyP86tW+ZZoWvCo65sbvrblVLVcCuGCFtiUb6MCjQshH/oOquAtQJMbgKzp6TUD7lKVjy9Ua57bJAaaUZ2dnd0kb1KxblKXtAYPMxd/zss0VwibTB4sEGlaF7sl8AXZP61TjhxX1qqirYO2alTPx0c3JHetbGbdq6SmqZLpXUfAEUnAo7NWA8NYLNjkFBXQJj4NpxkTpMrJj6ixgXPTLNTXut6uLkoyTR4WD0zpg5kB7+3EbrpZ6g0veQyqh5abyTuRBSP1dsM8iYwnMBTn91ph4afdKw0jDrWtqForq+oh6KKmWyDoegOLO/MbuXOO6V20BekdS9ngRwyu+ftsaZ2DPIfmI8je7Rtvlwx9vuatdRDo/FJNe/3gzDZg8FD3RjH4KE/SzTsinTy0WOH9OFCWrl8hD4GPwZYSSj/wmzBqm2y7Ff23H7cZ856Lzxk6LfjLc30nFw69R1PKwmsrqGQL57iAg6DK3c+CCadoOIyhnoh8dzXy6EVhvvohMQ7bQyN18mNf1sHUURdSYdGCj6pnDd349H4RmDwUD0AULH5hQBVT+WaZwF0YEYkGA5KKGRZrfsWyS++fHGgtvofYEpArArjpLaXl93jZYd5N9SE4oTkM5vAd0yQln1k0vvLI/HLsZXa1TbCX7n1nNyw43z5zujHBZ7iVLhaYHfQqRYbafrcB8ZhDHkEk5BG6YD7oP63LVV04Q8AKhIxGuZjsAOVBZtx4C1JJKYmb/78Y/r8aKLKrsYR1A0NBAtfryxPcIkuPPbajjeUVTuOhBcUfM11E6Aa4iy4sqb9/4fPJVCvNrhADFd+QCqr/irLd8zSCYFjht3zjDRLvft0SakwdniYd/+ZuG+LhMKNKk03fj77VFiJMiuDjnGwuoG860a4ED1RAKojbttSwxrB7zYGHuc1MS55AF4IGUjLIUO46RksuNp/lYpqmC/Bw1x+mVln1mhB07Ju6AoMjf8iL738FTy3UzhrjIzm8/IfyKjTfdCc+6bC1eYa/Z7jMcfggS33BsPamDjTtfQ0c55eFtO95XiPzT0m5jUGU0Z6XhvyQ3g6ViXVtr2LZeWUiOZH2044YVL0dT3x5w8oFhys2rIeqiEwX2rPN6hMqx0n+G37YuDdpsqoY56V67eNV1DphCHSxeuZO/obU/7GMjn7m/PANyFNX6MC3XiCzvgpJjk4mDQTe3P0lMb0TNd4rzfde+wt1+TzXk8d66gWxUYC8P4f2yvtLWfJjQAV9e7JA7NtPg8haTzsPzD7GyUt72GbMqksYH35PWJoxDBbUTUK85ptsvypb8q3x96mz/TOSPtbCTV4wGvlJGTu+kWwSr7GFwYPfWoP51RoA4e+1n2PSqdMlZs/97aKSCKngOJGUvDrXiyTDQnsfqX4Z7bOCqc6DsHwNRcnYGjsgJQbHVE3+FZZ/vQdcC7u7CGDnar6XQUtI+L4aJpz/01gdK8BTwL5Gx9Egwd2vJ//teUY+kIBsCRBgGqpLPvMGXLzZxxQcVbrNCCti5wFBCfRL+2juMGW0QoseAzRd8D30O2fzUlP6+nc5DWxN583jUMSCm2Dw/y6QV+R007aKUu3nqRrkpxMcDjrS6BQ10jT59z/K6luvAyg4syPQ6wLqr4UWIq8Nih5NYe+Vuk48FmAap72Az8YB1Q9VwrdfNA3w9wm3RybOD2d5yakX2N6+nWTZtLNPeYc17lXC10yp93NcxM8uU1Sj7HJa2JvRm+aHjueelsh1qiqOREzx7/Jsh0X6mSC7gY5NOYSyKRz2xC24zv3rccQ8iXsRYOv2/ECnEsRpc2jQ19ch77Ols0ST5woy6as06GPn5f5YLJV0tu1Jp83zRybuKc83uvm2Bt7jzOVwTTmwT9dGu6ERS+TvDSV58UKFViH5EaNAfB6PwXftVofTD6J4oJsQaXpYGRnr6+V79y/GUs0ZykPR9/lbgN9G7NdNjeoDGLoqw2h3jfJDWefJiumvJbaszBX0VTf6Hu2Hs3bNQwT1m+kgiIRiB1KFSxYZFNLghoGdYMvkRuf3iHXbzlOxQUEV6ahcZorTZ/1wAjoiO3AyzkFwx+c8XORHKjiv5+DLRz6sA8h9nZuOzBdbvjMLK1uLkOfn9vl1g3A2r8CM8I9mEFV4qU4MiXvOzHH3th7zIK85+nH5rynfCYdW2ugnJBK/Ctrx0qw6hm5fvsXFFwcGimxN4HS9DUQfH573YfwPTwFg4fjpJM7PKjmhcnlV3Bx1ucOfe07xI6dJDees0Y4pNPFRy5DX1cLfXsUkCtOxxZjyU/Br9M+fEFUiekClwFFeszmpKeZc+8102xeM9dNbPJ5z538FbrkEghWQOZ1pyx7apUmczcqUi/VTQeoZq37H3g9T8J90FDpgMGDoVR8kLdMf1EuZ8ivqgthdWO1LPv0eFn22ZecoY+yKX+syjivYWC/kLxjFjYba3k37RwHbYQ/gU85qgDS977WMgyhZhL1SGJovFSWPf1ReIs7T2aOe1ULunTt2Vgp+L0EQcSiEF1YWDqiSoluDwKGg++HE0vDexhwmfO+1iYv+S0ubVHUksTQ9zVZfvYdWqzK71SU0L+nOFIv517vB9W/0gZ+l9vHkOSCtyIluHz0yxK1x0GV5GmdoeCVDfwpAyqBogJ82Zg1Vtd/RIKBF8B7nSUX/OJf4drz90qVYjHOBimecKgUY90ShOfuMaJU8B6nEgt+gFePpZlqLCBH25/DBzNaQUVAkXfMhwEK21Wath3ceW5d+PIkxSTPH7tXmk+eiOn6I1Dwo2ZDqcHF2nHxNY79jaskWLleRh33S2irQqVQfVIFHSDh3XHWrpQJLdPGeWMee/9ZbFECJkSY7VbVYcWh+eey7AmAaspz+iETUO4uDgOuSUkpcebad8mKuGCrZFlnh2fKsr/9FtP/86TNVfSDWkbmIoqQylljPEaib0lTExaGwra8/lpQosB9GE1QIOEqPxPW0tSUMa9pwEnqnIkmk3s5/1EUCo8V0E0TiBJmyvJzVusj2Mfs6/d5cCiWaSS/IkqxGWaffD70qWBoMIgyIcq4Uq9Irxfzx3myA5t43JKamoCMHClSXw+aSlkoMpihzwyFhKFJ1/vdPE5ZXdfy3Q5oTqFI6E5BRTvW8SK2lx+voNKPNgLWA338TxC6A4sNphRbjSkw/s8+eaa07fsurFhI2dhhfF2lDWTQoaggQVTpA0eJHHY4XiPOwetrDVNgwrnqiBtApRDl5DOtYP78BQ5vAlCFsSxzl7zcClHClB2iyoYAVARrmf8koWso9DZYFfHwdX0Y9oHTRy/CrOxt8AkrIZJALjpcpm51Xl+I9+m9H3MU05UQxEOHiVRXibwO7SRSrwoOjahbgJkQWE0e8oVztmji9Fkj0wcWMPRVVKiKTtuBy+XGsx0xiVKqyYXlVdlG/vshuN2YGVisoH5dnLWoOOImyJPeAc/wC3QcGGa4xnUMLErfFFaltk5k5CiRN94QaW4GuCBrVPGDCyRvLfkC2Hj+6zEO9Nh9MzzOOWhm3hhXteGOlldBTc/HssxmxzrpGbsYQ182omua21OT3FZrFzBPT+e85u0ak8+km3OVxOGkZ2DxDn7iEXQaxREzx/4SDD1M6m3sEAqO2ewQakrU/O6Pvije7p5785hrvGSu89jk8V7PlMdcN/eS0pih8UgMje++LfI2qoklOLXUZkt1wOcDkFfv1x8cI874Vkw+VgCB2RlMHXmsRejegwGIZ8JYjlon1rtfkhUXtOrQNx1C3CIFVstbtfTHZrtm8qbnST9nvkxp6enMw/+DeSzmTA86Y4Qa8eyT16NHT8UMrRVGCWTqM89uTA3MU7zlmWtMM9fT09Lzm3zmHhOn0vGWafJPkAw9TOQoAIygUb8eyJxi6HE9xXchnflT/ywUQctkunPaleY552HStZgJhi3M+uZBNgVVF4CKSzOR4oGKVTG457FfQm7AYm2pm04d9dknPwFqMB4znjexvkjtg6J9mVk7jUBiIPWqw2zxmFGC2SNqh+oRPBnB5QJIQcRjPXDKMYBzzry/zARVH7Q9EXsL1uEfx1rfUkdZ8dBQG/Y2plDHuQOLNTDgumL03/Gmxkln6y61fPYLuFhHMzSGgfkjj3aYezL1pGgMBjA8V+rlUjoDKr3uZE3l7zoFakHLqDbc0bIRVk0nyopzHtO1Pi4eF8ukras+vj3qG7DYDIKLPNd3xr0lweYJ4C0ehx2iX6T0TkcTXAZIFEccBYBxFqgyL2QheMyQmKJkSNc0FpGJenHoCwWx3hfAWl8EVOosWXnuPh36etPwZJH/ZKEX5r2H3lCeC7PFKyzunv1Ruf6pP0BK/xnIvEAaqFvFt1jqgCpw0OLQWN8gMhLKjG+8JtIK/1ecNbKGJGLpNeU9BCbTnWOagsZgMQOFRGiAWPHpECVsVIuZnR+Gh8PpmflM3F6UwDawnvz3S0Bd+k6xTOW5eG10pOaMPRuLxXCuTyl90hkuTL6Sx0AIlxXDIKpHjRQZMsShXPTa56VcqSHQTdcXBbJnQ2BWSWPR1kelDUPfcoBKVXci9vtFd6oQr6j/wGJtqCNFjUeGOWMuxBLQcixekwriO/KRLwHv0Hj4CPBeRzqgov0qAaT8Fqps+C4m2kkYY0BmEa4KghIvlZXnnCG3nveWZ+hT6LHp5XBwD/RvKPSWo0wrZkMMc6zZGBbfgT+t66DRyY6nkagDPM1Qwh+Ci4FDYwMWsisprcfQ2IGhkYw+KRazONloLIq1vvZWiFa+BJP2dchgybQ1MBYt8dCnjfD/z8AolmkfZ0NXA0JcvpgDt0Wdzd/Al45XFODSD4dG/wQCjOCiAcnRI0WaBrtMPb8D12KmAgvIHa2bpS3+IQUVhz6G94nasLalwD8Dp1imgo5ukSulH/NjuQGUywrdA78JQch7yGLmB8TmeQONCS6CbPgRWDSGu5Z/vAF+CkNfTS1mfXtXya1TL9dHqCXQIaLmwm/DBFJe7znT09PMuYl7upfXGdLLc1K7/7p58/+yOWNUccTYtVhS+QgsaPaBcPE5BJd/gndoHDTYlpHHBeB36oC89drZCirObA8VixkltmldmwkE6Wnm3MSmiEzn6Wkmb3rMfPjPP7D4oK3u0/78Z5FX9jhMsVq551o79/5iRDo0gomvAs818liR8ad1PXVa12H5qA89AKqVf2BxrYwCw5lrPieHD31C2jub5OUXk2CCAw7L5UNwcUxMQKHLCjTAKvsPct2Om5Bkq24aqW859LkH8ggsDB1k3uli59/v/jqMYO9Rvj2AmWFHR0BefglMMhza0LKGMzD/hQDUgRyj2fpBl8l12zdL5K9HpuwBVHTvv0r7tUb5AZb6bVoMYEFL8lv3zINu0o/AsBM9CTCMWAbBHCEOATXB1Y7pvU4WcZk5/PXfZTRLy6Cq6ufke09+VsHFehq1bb++TR/Va+CzQjK4EXe/5MvWLoerSeyXDPdBAVCwpOvFlxQqRHBhJrZnt7M4TOU8MzPzUYe4VaG4gS6FatGetfK97ddjaJyLa47RrB+NIQh8PwTOClGXgVEsgsrIdi5f+zOs+l8Bwahj7UuzJz5E//mDgDVcPX9lt8iB/Y7euj+HRdbWMZqNtiakfvAc8F2PSmTHYV1Do7aE+UobONf2C6jYE6gL33b/gUV+KgWqdX+AT6oLoOnARWhnhwcDKM669JhPRSCPxf/XXhHZS01PHPuqZ7SW5of9E3CNZj8mVbJLrtl+loIr4oojTM4Sxn7CFbuB9enfUKhakpNj8h93VUuyGvsl130UVilw323R94MTCCg9YYygp7hI1RQaOpB6vQEDCA6H1PrkOp03v97kgx/HnpL6V1CbqWgCv7hevrttsSy0Ilq7EgtQ2Wump33QW6kq9B1YpiMvvW8YhJ+PqdO0Ds9+yYoj/Ojam56kHqYHmgRwMaZFzVtvOuAaNtzBlR/B5bSAGqPYGAFbi9QPuVq+t+NfJJqcJpEJ+4QuLrlDWjmkeqBvQ6HZ4eGydcdLAO6DKqpPhI4SVZOp6OeARYHhAsekKZjwo8OiJ+Z16kbRAOLNV3nm5NElO5RhyvJLTHea3MiJ/iRq6v+3VFjPy7VPflxBxRmj2mNqK/7pf3IHltnh4fJ7P4IZ3zZoUg6Hdxp+pQ6oTFfqEOieKKBwzDh17AKLwyH/mR/meLJ/L7QN9jhDIvdB9CtTr0qMNneIiKEPhmH7lEfku9vnOoa+WIw3C9amP4oR+/AbzA1Y7Cxanlz++08CCI9DRbcWPgnIqGeWSnvBpR0L8JiYh/qPH+bTf6RREa8FNoFcAqKtoJ/B5bQFewZhO7141IaD3u9DJLFOZu+o1VUHP26np3Uu3k8vwDLSdCzRzFr7ZciiHgAQsPwBuyobfEW2LyVFokxjCCIee8BkQMV02v8RXNSPenk3zOYxwhpBKm/LFkw9TB6eDySY+03MsjIeu3I6qmTXYM+gwfYuWbLlNLULoHZtUYdGVtD8pzc+vfLefOnXvPem5zN5M6V3v9YzsChNp2Ibpemz7p0l4dpfqOeUJFSPnQ0wvTXo4ViR5FxLgYqnBlxpMTuGSnc02SK4OqBST3AZIwfTnvTYeUL3fk3P05dzlsf8DOa+no45a6QzXe4ZFKr6APjOv8o12y4v6p5BWlHvj6m0idMrb/Jma6S5Zu5Nvyc9vft5ZmDpEk3E0em+7N5rIX1eIdFWzGyVq6bgKfdAqmSCF1wpapUJXHgEh8NXXoILoBa/C1JN6+CyqBOUPI7t9AatxKzxLrn0vkp1bPdPODQeDCxdook4QqVZa2/D7GchZDjcL5mwQH7zFfQh5p0KKjc2YPOCy0vF+Koo5+KzXtkNfwz7HHBpAp/r2wALJdSNGyPUNE6DEuGzsuTJcY49JgTKzpYsvq18PivWHVjdpOlrfwvd9RmuM/787Jes4HIB6QUaW6Tgw4+Czb1IqTyZ+NdeFtn3btKR0pMZ85GhxsFvg5V39wyqHgWB6na5ZutMZSnoaIV9XKrQn2+yP/egfV2NNNJ0xjXDN0ql2S8Z0vR8BgLHK0pgxV0cOY/xnDAflU8tGIu+9aYzWRgCt0UJOF9znMH1bVjOZzt6L8vZM4h9zD2Drt3+LxIf97WUz9d8LWSbBYtcAZBrPm/7+noP8jsUS5XzoEc16+4mqR6+RSrqzkjtl8xCc/lnRUw+7zHTTEgde8Bz0LCIzLys/5oPFjPwkxCQDnn+2bPgYO1fwSTjOrh6G4Ya5pn+jDE0grpS5lXb9FUJP7VTIls+5Kw1gnL5wrDXvJz8xpj1oYFUzrt83dGSCMAZf81Y8FQHO+Pv7bkp0CCj95j3mZdujhl7yZSCCyDSYZCXcBzACwnAKLYGxqLxts2QPxwvd39zo8w/+ddQGDxHqR73Rwa3rMX59kc3RjBD44cw690JvusCHRqppVrKobGAfeaIEy5feyImfNg2pOooSNO7lmgK+GAt2lArnihxYkyAYeijAUYl9pjpaF4lt00/TX70lVfVWJSqwgvH/AE5T8eQ2AEzMw7n7jpdOqJxJWPIlC/XtPQCM92XMQ/ccbt7BtU1/QwiidWai+Kc96H6c0C+xh1W7fWQvzTBNVHxQGX6vhu4lGphjxnsLCrJKDZvmp4yw1KLGVBW9RsBd0oLxv4FIJyAOr+NZRXkx7ZsGviie/tnxvQ8uablcl9PecBv2VDj0D2DBl0i127bLpEnjtU26VIQBNLvkxCQ+v1XQJfqGHxNUEjHGthBHZ7eSQU4d7qTbChcLtLbMPaYSdgnyQ/Py7zHjHGntGDscxhaMHS3/re6asy0XYvBi/eFsQnpwdsscy0930DymHsdvha7fWEhu7J2HDZAfxYAm+bsSYih0fjDMHXoT2yeZervPc+WxmeZ6+bYe6+pS7Y0Nw+1PKfiq+dp1wzRFFC8OA5+Co72MfS1H1gtt5w7Xn54/otZ95gx7pTmjH5T4vvGw2nHFvVbZcDFupsO8B6bjjPXTOxtqzfNHDP2BpPONHOcLY+5tysvvdeg3dgzqKr+Llmy/SbNYvYMMvlzibvK7A4M3ptep2xpJq8pL/3ZmdLT09xzzgpH61INfSyYTMWMsYCDWV4Iin5JqDVfAFDN1PbopAJrlNmCDos2BI+TW2Th2FMByg3ujhrZ78tWZlGvweWTs2cQttNrugx81+MQS3xAh0blu3IbGv04ftIqJTOqC93BxtF+pTrafw6mYqNl1bl36CyJ03AytbkE406JM6xF4z8Jge6vAK6wTgDcvWNzKaaEefhxO0NjVd2pON4li7dOUXDx3ZC37CUwmwnmdZrYpDP2ppljE5t86efp96XnY34TzDFjSh//Bv/kvAYd4aIFGFzgj3vMdGCPmSHbR8stU59z/E4BUI4fiNwr43WntHDcl8G/rJJqgIu+rfwtpfe2EbNG1zKouv5eiWxbqv1Au4JeZo0GDObFegvNdC1bPnNvT/eZdJOPsTfNlM09oddgys7ruVEI5hxIsDj0VYKfAwFvb54Jby4XYg3NWeoYiMtFvgCqqZDaLRp/OcB1JZakKOci3YLDD1Ta7/9JWgbBRq6TlkGD5sjiJx+V2X/2n2VQDu8/IC17V2L42A1xA/z64KUXKujQR5eL2F4tFn0RBHI8+KnVOvSpNkWOQ1+2+tGdEgP5s0Xjr8WOW/8GgS9oozqOKCZFzlbL7NccXjfoWAY1fEzqq3fJVds+4YhZImARXF9k3lL89MGwXqhPQH56UQcsts6CuOE93ahR5UF5rimXXshhco+Z9pY1MrTzJLn5vB3gHypSi7PejhrIsUqzAVLKha4afytEF1NVpyug6hLFocoDqT/vdWR7mDU2O5ZBVdUb5KqtEYey4+Pxqj87n9JAn5i/+wkdBGdJZ9WUFyCQxA6rHS/hCyfDxSWd/AwdOuurgHYEFNw7sMfMLZ+frmrOpCrc17lQgcMqeZNF434LmdhkDDHc8zAEgB8iM0b2P3eOhWVQtD0J58FXy5VPbpBZ25oo83r++TfyqxyQ5/fgLOlwEfrm818Vq3U8KNc2LEI74BrYwwBNDH0sK9b5GmZ9p4FKrdJZTr6Gvt7qZ6T0V47ZBHP5SRCr7JMwpfQ+B5f71euXzaGRE522/di0oP4TUpvcJXM3f/z1mUdAhxvB5jDvv+BUiovQpCA3f+WADN1xCuRJD6oEnIx2/4KjdVCFPWY6WtZJdcuJcvO5m3XoUyZbFQn7V3Jf7zJS+oVjnsIEcTx2Z31FKqAtQUGqUmXi32f/rJjWCY1lHeFgCb/caTYGqnsY+OFHAnO3LGJXBMIWWBkeaU498MOPUyVTE4LLyI++dc+vAa4vYvji0EGpfPe85p70mGAM0CoCIR6dJ/953lI99patCUX+4bBICjbvsUFwB/kIpPRj8KL44fhzSCGgGBh3Axn41aQdsGqHWPZbr99+zLgT3gsNGvrtROuBBF5QrzIvLbPQP6jzwWDxOvr41t2rAK5LIWvijIp5s5FdKi9j6KvlUsVbYECnQpTwmA59o6fZUHArPZtJptfwXv8IboT68Bk6xPgRXClg4cALLvZiEjIVKDraiXBo2PB6qR9xmG1z59kMr7PQGMpYPup7MFCcocqRB91y7mUA1VVYLOVyDypuPCBrS1EmYwam47OiFL2zZSPoG4Y+BVWFOg7xA6hYTYKKlJOU66oJZ0rr/rtTS0CHgpReuxs/jmVQCPywI0JxztlC34SDKZapGgWN02H+RaB963ffxHreDzGzwteC3bNtBSTvZZOgkIehjzxkLBqRH5y7WIswWqmmPD/FNIfnFsUMS7bDYKRxBgSqFEVwKOm5T5i/WKELROxl/W7R06RW+g+KJXZnTIYdNVzqh9ONBprjVUEqVj0zPQd1660TIZB7GIaXkAv9+2+mADy3Y2gcgoVTp6E0dCCgOg5g1pe8WH4wbQNkLQHhHjMEpJ8DBY0RvjK8osg27HvduACCYjNcH0zJi90W1Ayd7DyVkbGtzAiswwAsfBeHELCchhnqM+OuRqkIXoD2noEL8LxvvY3GPCTh2B2yYnq7sx3ITH75bo84t/v210uVl2ybBf5wBfhDNAvrpqXeUUN70O1Gwt0w8OnAOhIUa8ShCiwio7dZXW/X/YsuUOVNDlVevA1uBCp+4Qz5HPd1NlyamucCrA53KDykgcXu5Rc+c3VI9g5KymhspE3m//UR2FptBumw+3mV5j0M+KlGHBHZ+ikM7/dj32sMP7EYKBcFqsUP2YCFncu681igWLQcTx8KWUZPzE62awNtLcru6bEDLfrQvJ+m8CpQ3X4q3tzD0PqogXYt5XjFB1cmYPXIvPtvKCw9k+onCBopfWT8ZkjksLzV+aYadqSk9KgsX3gx/k2/pD/LpPs8LgMr/QUZXfprJ2Bh3sK+123P6/JWIVWK0utgzg2ozPkhNL6UgWVemjemAJU8VwT7XjcMHQ8h8eNqqFEIlaKeyB9ngb0FD/ByyN1baXm9fgh9A3ltd26FRWysnVqcHWJW/OR9kNJ/GoLU4vBcBilGzGBil8/iAhkFpEMpIPXhrLBMsbJBzBhqKLAmcjN17HsNXXpHjdu8+mwl9P9apk9eKRR+0p9szvU6HlnK2G1xGVi9vXqvoUZk4oUA140w8KW2B2hGARfWDThYP++x1tckmNjNo9dK/ONWKdN3UeKa+fTxRtecC+pXbZkPcH0PqsPU5GdX5v8DZakMZgg0cZrkXYfC4Yf7bkkn/x3idMf775eAigBEXGFYcgo3U79EQtXQ7cSCKXX6CxIMunoo3KUOPVwtaXIZWH3qfi5Yu4YakQk/go3A51XafUi4U+pTQweWGSpIZWD1pwtVrwtS+iUT1ko8/nFVJaKtZKENNQyFMnF/6l7Ye2wrCIc62GukDKz+drSR0l8z6TG4s5yIPXbew9BIXXqKI7oYbgOCvsbeepl7vWneY/JfDMqH4bhEMRj2hAXjZxCsp8vAcl5J/34NuK4av1OsTpjPte+GQa5jqNG/ErvuUjDhVbmY6bqQ6cgFU6ZLRUyzEdRnbFIeKANroB1vloAiH31VAlEsAbVsd6T0/bZw8tQoJ1Qhvy8m99ysPZxs2d8mVujnZWB5XmO/D7kEREONyEcPyMkTTsEuFX+ERir2boRdZSGDUrVCPqAPZYMFCNbX84Yluy+qe7MMrD70XdasxlCDAtVrJv4vWP+sgadkDIsElzI9uN0gIdfYPNGlXOnFmMsljdFeLNAHmxorE/v33bv7oqalaK4/rWhL2k8DeThFEcaf1ZKJ0+HY4wegXOS5YAuI31zx5OJI8cib9L5UImpojgdS2QHfS0DFrFA4GKxrrEjs3/9fuy8e9DktdbFaQgz4AeUCvD2g5nOuO6VrJv0fDItL4E4JogjVsOUScm7BYMfEB93FC+b/oIuFTEiAcMYx+wsGahvDyVjnq4nmfReDUn1RH6pGKlayPBQW4hUYO0qamV0z8WpYMV0KhUH0tY4Q+ZfSG/AZnBUmTuDTiFsVNcFgbWPIjna8YLfun1H38uvHgVLdnvJN5rbdF9OJQrxbn5RJf1Yw1IDqzZVPfhEbiP5aN1BLUkG9F0MNBQt+UiBxj71rhdCaHno07QoLt1YIgGA7M9BbGC1zM5Bk+4GnwUIt3XNxw69cKixnPmyHNk121Yvcji9TrMIiEEtA6HAqDV4z8U5I6T+hzmyD3GW9Hx5vCDIGAzZzrIn5/eFwhxITVlVdKFBVF7Q7W59IdLSev/viprF7vt74S4JqEtsFlKWDijUpU6z8vo+eS0sZamyBlN7aBEONejXUsGCoYQDjvVvT8GNAZGaEXoqVUvTLH8VS/snCnmvVDQFa/tjR1sdsO3AdwHS/Wz0LgAptnTmJZkGZaq7ZysDyvsxCHxtwLdoxCiPMn2AgewQc2mb2eJMJWAQV0xHzlXZpkA4YWCiNQ5kdCtQ0WuCf4NmscwOmsd/f8/VBD2u3gDKduUmCmahTpm4rAytTrxQyLWW/uGUoKNejMNQ4CTr13cFF8GggenDgpVY89wLr6BHgsQ7DOjidTff5dbI0DnlhAEqSHdjNNh5fiw3Llu75+pC/IB0q2aqoAHcE3XkovZblp881yVJW+VKuPWDcKV36QqU0qJT+dPiN6AIXX7cGHPA4G7COGiF1AFaffDfQsw55KMsCoBok2bqfT7sTz7l+zzcGbdNHc+uVZzZh8jGZwOtzKAOrz12Wpxu8LgkWbr0XUvopEKimGWp4gEUJmAGZl2L1DVgsAYAKhAO19ZJs3o9j+Zkkg8v3XFL/rLaM9frwmbZulj6AppaBNYDOG/CtpApcAmJYuPUnMNS4SNr2gmO2HP/0TDdgMjEBRmDxkjLvOVEs3pWA92hQqDpJtuxrR7k/hl/AFS9f3PQirolAZCBvI9XURxP7/1MGVv/7Lj93upJqLWzh1qWQ0s/pcqdECT6umKGQxwAV05R5j9L8C8A6vMehUAFlBcNhq7oGgNp/wLKTt8bDVatevbDmNT6TIoOtg15MpvyFMTEPoQysPHTigIugTzG5Gowy9OoXPPEdMPTXwykwAUVqxi2KFUwKMgUWKRYYpWhchn/wGGCxAU5BkLWLeQegrATW8cJWVTUB9Q6YqlsqrI4f/P3iEW+zvpNus8Nb3wAVM6sEA25E9wLKwOreHyU8gycf405pwdavwZ3S7ZIAP5+EOyUbUvoUuFxQxeLY76FSjjj+WC+giK6kFa4IWxVVYMr3vQ5ErgzG965+ceZxyqErhXpjUsEAZTqwDCzTE36JzYxx/tZzYFS2DkpzdMHZiRcF7866L5DjFhJE7IhRx8CNfi135COg7EBFdQig4izvJSwdLU80t/7k1SuOamfTCk2h0ruvDKz0HvHDuRGkLtx2OpistXZlw1C7+T2w3xBWwV9yuKpKhh0xApuIYJ+gZDJgVdUGaMQAQD0HfN2w59Wmnxu5kwOoxaBQEfJbRQtlYBWtq/v4IJdyjbx9b1Pzu3uvxXB4QbCmqT4MnqmiBgYL4Mq4aZ7diQleLPokhKM37P5G453mKTrkzcCyi6OuY5KLFpeBVbSu7seDPLKuCffZw5rfjU6OJ2LjIQyFm2S7E2B7MRBI/OmlbwzdbEpXQPWyjmfyFjL+/4JPu45FLkyEAAAAAElFTkSuQmCC');
			background-size: 24px;
			background-repeat: no-repeat;
			background-position: left center;
			padding-left: 36px;
			font-size: 20px;
			letter-spacing: -0.04rem;
			font-weight: 400;
			color: white;
			text-decoration: none;
		}

		.message-container {
			flex-grow: 1;
			display: flex;
			align-items: center;
			justify-content: center;
			margin: 0 30px;
		}

		.message {
			font-weight: 300;
			font-size: 1.4rem;
		}

		body.error .message {
			display: none;
		}

		body.error .error-message {
			display: block;
		}

		.error-message {
			display: none;
			font-weight: 300;
			font-size: 1.3rem;
		}

		.error-text {
			color: red;
			font-size: 1rem;
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI Light"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.svg#web") format("svg");
			font-weight: 200
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI Semilight"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.svg#web") format("svg");
			font-weight: 300
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.svg#web") format("svg");
			font-weight: 400
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI Semibold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.svg#web") format("svg");
			font-weight: 600
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI Bold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.svg#web") format("svg");
			font-weight: 700
		}
	</style>
</head>

<body>
	<a class="branding" href="https://code.visualstudio.com/">
		Visual Studio Code
	</a>
	<div class="message-container">
		<div class="message">
			You are signed in now and can close this page.
		</div>
		<div class="error-message">
			An error occurred while signing in:
			<div class="error-text"></div>
		</div>
	</div>
	<script>
		var search = window.location.search;
		var error = (/[?&^]error=([^&]+)/.exec(search) || [])[1];
		if (error) {
			document.querySelector('.error-text')
				.textContent = decodeURIComponent(error);
			document.querySelector('body')
				.classList.add('error');
		} else {
			// Redirect to the app URI after a 1-second delay to allow page to load
			setTimeout(function() {
				window.location.href = '${e.toString(!0)}';
			}, 1000);
		}
	</script>
</body>
</html>`}Re(Yr,yY,0),Re(xn,pZ,1),Re(De,new er(E5,[!1],!0)),Re(jh,qI,1),Re(qb,oZ,0),Re(Ug,new er(Qb,[!1],!0)),Re(ly,DZ,0),Re(Jy,a4,0),Re(Qy,f4,0),Re(_y,i4,0),Re(Jr,t4,0),Re(Og,b5,0),Re(Hc,mZ,0),Re(hm,k5,0);import{createRequire as TZ}from"node:module";var V3=TZ(import.meta.url);(function(){for(let t=0;t<process.execArgv.length;t++)process.execArgv[t]==="--inspect-port=0"&&(process.execArgv.splice(t,1),t--)})();var zh=(0,W2.default)(process.argv.slice(2),{boolean:["transformURIs","skipWorkspaceStorageLock","supportGlobalNavigator"],string:["useHostProxy"]});(function(){const e=V3("module"),t=e._load;e._load=function(i){if(i==="natives")throw new Error('Either the extension or an NPM dependency is using the [unsupported "natives" node module](https://go.microsoft.com/fwlink/?linkid=871887).');return t.apply(this,arguments)}})();var Qm=process.exit.bind(process),RZ=process.on.bind(process);function LZ(e){process.exit=function(t){if(e)Qm(t);else{const i=new Error("An extension called process.exit() and this was prevented.");console.warn(i.stack)}},process.crash=function(){const t=new Error("An extension called process.crash() and this was prevented.");console.warn(t.stack)},process.env.ELECTRON_RUN_AS_NODE="1",process.on=function(t,i){if(t==="uncaughtException"){const s=i;i=function(...r){try{return s.apply(void 0,r)}catch{}}}RZ(t,i)}}zh.supportGlobalNavigator||Object.defineProperty(globalThis,"navigator",{get:()=>{od(new E1("navigator is now a global in nodejs, please see https://aka.ms/vscode-extensions/navigator for additional info on this error."))}});var gr=function(e){Qm()};function NZ(){const e=Xz(process.env);if(e.type===3)return new Promise((t,i)=>{const s=r=>{const n=r[0],o=new po;n.on("message",a=>o.fire(_.wrap(a.data))),n.on("close",()=>{gr("renderer closed the MessagePort")}),n.start(),t({onMessage:o.event,send:a=>n.postMessage(a.buffer)})};process.parentPort.on("message",r=>s(r.ports))});if(e.type===2)return new Promise((t,i)=>{let s=null;const r=setTimeout(()=>{gr("VSCODE_EXTHOST_IPC_SOCKET timeout")},6e4),n=108e5,o=3e5,a=new $E(()=>gr("renderer disconnected for too long (1)"),n),c=new $E(()=>gr("renderer disconnected for too long (2)"),o);process.on("message",(u,h)=>{if(u&&u.type==="VSCODE_EXTHOST_IPC_SOCKET"){h.setNoDelay(!0);const f=_.wrap(Buffer.from(u.initialDataChunk,"base64"));let p;if(u.skipWebSocketFrames)p=new $l(h,"extHost-socket");else{const g=_.wrap(Buffer.from(u.inflateBytes,"base64"));p=new gN(new $l(h,"extHost-socket"),u.permessageDeflate,g,!1)}s?(a.cancel(),c.cancel(),s.beginAcceptReconnection(p,f),s.endAcceptReconnection(),s.sendResume()):(clearTimeout(r),s=new lv({socket:p,initialChunk:f}),s.sendResume(),s.onDidDispose(()=>gr("renderer disconnected")),t(s),s.onSocketClose(()=>{a.schedule()}))}if(u&&u.type==="VSCODE_EXTHOST_IPC_REDUCE_GRACE_TIME"){if(c.isScheduled())return;a.isScheduled()&&c.schedule()}});const l={type:"VSCODE_EXTHOST_IPC_READY"};process.send?.(l)});{const t=e.pipeName;return new Promise((i,s)=>{const r=V2.createConnection(t,()=>{r.removeListener("error",s);const n=new lv({socket:new $l(r,"extHost-renderer")});n.sendResume(),i(n)});r.once("error",s),r.on("close",()=>{gr("renderer closed the socket")})})}}async function MZ(){const e=await NZ();return new class{constructor(){this.a=new po,this.onMessage=this.a.event,this.b=!1,this.d=e.onMessage(t=>{iz(t,2)?(this.b=!0,this.d.dispose(),gr("received terminate message from renderer")):this.a.fire(t)})}send(t){this.b||e.send(t)}async drain(){if(e.drain)return e.drain()}}}function OZ(e){return new Promise(t=>{const i=e.onMessage(s=>{i.dispose();const r=JSON.parse(s.toString()),n=r.commit,o=$M.commit;if(n&&o&&n!==o&&Qm(55),r.parentPid){let a=0;setInterval(function(){try{process.kill(r.parentPid,0),a=0}catch(l){l&&l.code==="EPERM"?(a++,a>=3&&gr(`parent process ${r.parentPid} does not exist anymore (3 x EPERM): ${l.message} (code: ${l.code}) (errno: ${l.errno})`)):gr(`parent process ${r.parentPid} does not exist anymore: ${l.message} (code: ${l.code}) (errno: ${l.errno})`)}},1e3);let c;try{c=V3("native-watchdog"),c.start(r.parentPid)}catch(l){lt(l)}}e.send(a$(0)),t({protocol:e,initData:r})});e.send(a$(1))})}async function FZ(){const e=[];process.on("unhandledRejection",(a,c)=>{e.push(c),setTimeout(()=>{const l=e.indexOf(c);l>=0&&c.catch(u=>{e.splice(l,1),Ei(u)||(console.warn(`rejected promise not handled within 1 second: ${u}`),u&&u.stack&&console.warn(`stack trace: ${u.stack}`),a&&lt(a))})},1e3)}),process.on("rejectionHandled",a=>{const c=e.indexOf(a);c>=0&&e.splice(c,1)}),process.on("uncaughtException",function(a){G2(a)||lt(a)}),It("code/extHost/willConnectToRenderer");const t=await MZ();It("code/extHost/didConnectToRenderer");const i=await OZ(t);It("code/extHost/didWaitForInitData");const{initData:s}=i;LZ(!!s.environment.extensionTestsLocationURI),s.environment.useHostProxy=zh.useHostProxy!==void 0?zh.useHostProxy!=="false":void 0,s.environment.skipWorkspaceStorageLock=ee(zh.skipWorkspaceStorageLock,!1);const r=new class{constructor(){this.pid=process.pid}exit(c){Qm(c)}fsExists(c){return it.exists(c)}fsRealpath(c){return qE(c)}};let n=null;s.remote.authority&&zh.transformURIs&&(n=Zz(s.remote.authority));const o=new Jz(i.protocol,s,r,n);gr=a=>o.terminate(a)}FZ().catch(e=>console.log(e));

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/2901c5ac6db8a986a5666c3af51ff804d05af0d4/core/vs/workbench/api/node/extensionHostProcess.js.map
